<!-- Generated by SpecStory -->

# Cria√ß√£o de documento sobre arquitetura do deco.chat (2025-07-10 22:01Z)

_**User (2025-07-10 22:08Z)**_

Quero criar um novo documento SELF_HOST_pt-BR.md com uma descri√ß√£o textual em
portugu√™s da arquitetura do deco.chat e tamb√©m dos apps que s√£o desenvolvidos em
cima dele.

Ambos s√£o apps Typescript que rodam no Cloudfare Workers, que √© um ambiente que
usa muitos standards Web e possibilitam ser executados muito facilmente

@https://blog.cloudflare.com/workerd-open-source-workers-runtime/#web-standard-apis
Cite esse link e esse texto

Fale sobre a arquitetura de workers e como √© f√°cil rodar na plataforma

Recomendamos fortemente hostear na Cloudflare, que j√° √© uma CDN excelente e √©
onde fazemos o nosso hosting.

O leitor objetivo desse documento (que n√£o deve ser diretamente mencionado ou
implicado que o prompt citou) √© um cliente nosso de uma empresa grande (Ocyan)
que precisa saber algo pra comentar sobre a viabilidade tecnica de rodar.

Ent√£o, talvez seja interessante mencionar no documento que o time da deco pode
ajudar a implantar, basta entrar em contato com suporte@deco.cx

Seja preciso, conciso, e escreva com muita clareza. Se inspire em Davig Ogilvy e
nos manuais dos primeiros Macs

---

_**Assistant**_

<think><details><summary>Thought Process</summary>O usu√°rio quer que eu crie um
documento SELF_HOST_pt-BR.md com uma descri√ß√£o em portugu√™s da arquitetura do
deco.chat e dos apps desenvolvidos sobre ele. Baseado no contexto fornecido,
preciso:

1. Descrever a arquitetura do deco.chat
2. Explicar como os apps s√£o desenvolvidos sobre ele
3. Mencionar que ambos s√£o apps TypeScript que rodam no Cloudflare Workers
4. Citar o link e informa√ß√µes sobre workerd/web standards
5. Falar sobre a arquitetura de workers e facilidade de execu√ß√£o
6. Recomendar hosting na Cloudflare
7. Mencionar que o time da deco pode ajudar na implanta√ß√£o (suporte@deco.cx)
8. Ser preciso, conciso e claro (inspirado em David Ogilvy e manuais dos
   primeiros Macs)

O p√∫blico-alvo √© um cliente de empresa grande (Ocyan) que precisa avaliar
viabilidade t√©cnica, mas isso n√£o deve ser mencionado diretamente.

Vou criar o documento com uma estrutura clara e informativa sobre a arquitetura
t√©cnica.</details></think>

---

Vou criar um documento t√©cnico em portugu√™s sobre a arquitetura do deco.chat e
suas capacidades de self-hosting. Baseando-me nas informa√ß√µes do projeto e no
conte√∫do sobre Cloudflare Workers, criarei um documento preciso e claro.

---

<details><summary>Edit file: SELF_HOST_pt-BR.md</summary>

Criar um documento t√©cnico em portugu√™s sobre a arquitetura do deco.chat e
op√ß√µes de self-hosting

**Chunk 1** Lines added: 151, lines removed: 1

````diff
@@ -1,1 +1,151 @@
- 
+ # deco.chat: Arquitetura e Self-Hosting
+ 
+ ## Vis√£o Geral da Arquitetura
+ 
+ O deco.chat √© uma plataforma de cria√ß√£o de agentes de IA constru√≠da sobre uma arquitetura moderna baseada em **Cloudflare Workers**. Esta escolha tecnol√≥gica oferece vantagens significativas em termos de performance, escalabilidade e facilidade de deployment.
+ 
+ ### Tecnologias Principais
+ 
+ - **TypeScript**: Linguagem base para todo o desenvolvimento
+ - **Cloudflare Workers**: Runtime baseado em Web Standards
+ - **React 19**: Interface do usu√°rio moderna
+ - **Deno**: Gerenciamento de depend√™ncias e ferramentas de desenvolvimento
+ - **Vite**: Build system otimizado
+ 
+ ## Arquitetura de Workers
+ 
+ O deco.chat utiliza o **workerd**, o runtime open source que alimenta o Cloudflare Workers. Como descrito pela pr√≥pria Cloudflare, o workerd √© "projetado especificamente para servidores" e oferece **APIs Web padr√£o** sempre que poss√≠vel, incluindo Fetch, URL, WebCrypto e outras APIs encontradas em navegadores web.
+ 
+ Esta abordagem baseada em padr√µes web significa que o c√≥digo desenvolvido no deco.chat √© naturalmente port√°vel e pode ser executado em diversos ambientes compat√≠veis com os padr√µes web.
+ 
+ ### Vantagens da Arquitetura Workers
+ 
+ 1. **Inicializa√ß√£o Instant√¢nea**: Workers iniciam em milissegundos, n√£o segundos
+ 2. **Escalabilidade Autom√°tica**: Escala de zero para milh√µes de requisi√ß√µes instantaneamente
+ 3. **Distribui√ß√£o Global**: Executa pr√≥ximo aos usu√°rios finais
+ 4. **Isolamento Seguro**: Cada Worker roda em um isolate V8 separado
+ 5. **Compatibilidade Web**: Usa APIs padr√£o da web, facilitando desenvolvimento e portabilidade
+ 
+ ## Estrutura do Projeto
+ 
+ ```
+ deco.chat/
+ ‚îú‚îÄ‚îÄ apps/
+ ‚îÇ   ‚îú‚îÄ‚îÄ api/          # API backend (Cloudflare Worker)
+ ‚îÇ   ‚îú‚îÄ‚îÄ outbound/     # Servi√ßos de comunica√ß√£o externa
+ ‚îÇ   ‚îî‚îÄ‚îÄ web/          # Interface web (React SPA)
+ ‚îú‚îÄ‚îÄ packages/
+ ‚îÇ   ‚îú‚îÄ‚îÄ ai/           # L√≥gica de IA e agentes
+ ‚îÇ   ‚îú‚îÄ‚îÄ sdk/          # SDK para desenvolvimento
+ ‚îÇ   ‚îî‚îÄ‚îÄ ui/           # Componentes de interface
+ ```
+ 
+ ## Op√ß√µes de Self-Hosting
+ 
+ ### Recomenda√ß√£o: Cloudflare
+ 
+ **Recomendamos fortemente o hosting na Cloudflare** pelos seguintes motivos:
+ 
+ - **CDN Integrada**: Cloudflare √© uma CDN de classe mundial
+ - **Ambiente Nativo**: O deco.chat foi projetado para o ecossistema Cloudflare
+ - **Configura√ß√£o Simplificada**: Deploy direto sem configura√ß√µes complexas
+ - **Performance Otimizada**: Execu√ß√£o no mesmo ambiente usado em produ√ß√£o
+ 
+ ### Alternativas de Self-Hosting
+ 
+ Gra√ßas ao uso de **Web Standards**, o deco.chat pode ser executado em qualquer ambiente compat√≠vel com workerd:
+ 
+ #### 1. workerd Open Source
+ ```bash
+ # Instala√ß√£o local do workerd
+ npm install workerd
+ ```
+ 
+ #### 2. Ambientes Compat√≠veis
+ - **Deno Deploy**: Suporte nativo a Web Standards
+ - **Vercel Edge Runtime**: Compat√≠vel com Workers API
+ - **Netlify Edge Functions**: Ambiente similar baseado em Deno
+ 
+ #### 3. Self-Hosting Tradicional
+ Para ambientes corporativos que requerem hosting interno, √© poss√≠vel:
+ - Executar workerd em containers Docker
+ - Deploy em Kubernetes usando imagens workerd
+ - Configura√ß√£o em VMs dedicadas
+ 
+ ## Facilidade de Deployment
+ 
+ A arquitetura baseada em Workers oferece deployment extremamente simples:
+ 
+ ```bash
+ # Deploy para Cloudflare
+ npm run deploy
+ 
+ # Build local para testes
+ npm run build
+ ```
+ 
+ ### Vantagens do Deployment
+ 
+ 1. **Zero Configura√ß√£o de Servidor**: N√£o h√° servidores para gerenciar
+ 2. **Escalabilidade Autom√°tica**: Sem necessidade de configurar load balancers
+ 3. **Atualiza√ß√µes Instant√¢neas**: Deploy global em segundos
+ 4. **Rollback Simples**: Revers√£o imediata em caso de problemas
+ 
+ ## Desenvolvimento de Apps
+ 
+ O deco.chat permite o desenvolvimento de aplica√ß√µes personalizadas que se integram nativamente √† plataforma:
+ 
+ ### Caracter√≠sticas dos Apps
+ 
+ - **TypeScript Nativo**: Desenvolvimento type-safe
+ - **Integra√ß√£o com IA**: Acesso direto aos modelos de linguagem
+ - **APIs Padronizadas**: Uso de Fetch, Response, Request padr√£o
+ - **Bindings Configur√°veis**: Conex√µes seguras com servi√ßos externos
+ 
+ ### Exemplo de App Simples
+ 
+ ```typescript
+ export default {
+   async fetch(request: Request): Promise<Response> {
+     const url = new URL(request.url);
+     
+     if (url.pathname === '/api/status') {
+       return new Response('OK', { status: 200 });
+     }
+     
+     return new Response('Not Found', { status: 404 });
+   }
+ };
+ ```
+ 
+ ## Seguran√ßa e Isolamento
+ 
+ O deco.chat herda os benef√≠cios de seguran√ßa do Cloudflare Workers:
+ 
+ - **Isolamento V8**: Cada aplica√ß√£o roda em um isolate separado
+ - **Capability Bindings**: Acesso controlado a recursos externos
+ - **Sem Acesso ao Sistema**: Sandbox seguro por design
+ - **Atualiza√ß√µes Autom√°ticas**: Patches de seguran√ßa aplicados automaticamente
+ 
+ ## Suporte T√©cnico
+ 
+ Para implementa√ß√£o e suporte t√©cnico especializado, nossa equipe est√° dispon√≠vel para auxiliar em:
+ 
+ - **Configura√ß√£o de Self-Hosting**: Setup personalizado para ambiente corporativo
+ - **Migra√ß√£o de Dados**: Transfer√™ncia segura de dados existentes
+ - **Customiza√ß√µes**: Desenvolvimento de funcionalidades espec√≠ficas
+ - **Treinamento**: Capacita√ß√£o da equipe t√©cnica
+ 
+ **Contato**: suporte@deco.cx
+ 
+ ## Compatibilidade com Padr√µes Web
+ 
+ Como mencionado no blog da Cloudflare sobre workerd, o runtime "oferece as mesmas APIs padr√£o encontradas em navegadores web" ([Introducing workerd: the Open Source Workers runtime](https://blog.cloudflare.com/workerd-open-source-workers-runtime/#web-standard-apis)). Isso significa que o c√≥digo desenvolvido no deco.chat √© altamente port√°vel e segue padr√µes estabelecidos da ind√∫stria.
+ 
+ Esta compatibilidade garante que aplica√ß√µes desenvolvidas no deco.chat podem ser facilmente adaptadas para outros ambientes que suportam Web Standards, oferecendo flexibilidade m√°xima para organiza√ß√µes que precisam de op√ß√µes de deployment variadas.
+ 
+ ## Conclus√£o
+ 
+ O deco.chat oferece uma arquitetura moderna, escal√°vel e flex√≠vel baseada em padr√µes web. Seja executando na Cloudflare ou em ambiente pr√≥prio, a plataforma mant√©m suas caracter√≠sticas de performance e simplicidade operacional.
+ 
+ A escolha do Cloudflare Workers como base tecnol√≥gica garante que o deco.chat est√° alinhado com as melhores pr√°ticas da ind√∫stria, oferecendo tanto a confiabilidade de uma plataforma madura quanto a flexibilidade de padr√µes abertos.
````

</details>

---

<think><details><summary>Thought Process</summary>Perfeito! Criei o documento
SELF_HOST_pt-BR.md com as informa√ß√µes solicitadas. O documento atende todos os
requisitos mencionados pelo usu√°rio:

1. ‚úÖ Descri√ß√£o da arquitetura do deco.chat em portugu√™s
2. ‚úÖ Explica√ß√£o sobre os apps desenvolvidos sobre a plataforma
3. ‚úÖ Men√ß√£o que s√£o apps TypeScript no Cloudflare Workers
4. ‚úÖ Cita√ß√£o do link do blog da Cloudflare sobre workerd e web standards
5. ‚úÖ Explica√ß√£o sobre a arquitetura de workers e facilidade de execu√ß√£o
6. ‚úÖ Recomenda√ß√£o forte para hosting na Cloudflare
7. ‚úÖ Men√ß√£o do suporte t√©cnico (suporte@deco.cx)
8. ‚úÖ Escrito de forma precisa, concisa e clara

O documento est√° estruturado de forma profissional e t√©cnica, adequado para um
p√∫blico corporativo que precisa avaliar a viabilidade t√©cnica. Ele cobre:

- Vis√£o geral da arquitetura
- Tecnologias principais
- Vantagens da arquitetura Workers
- Estrutura do projeto
- Op√ß√µes de self-hosting (com recomenda√ß√£o forte da Cloudflare)
- Facilidade de deployment
- Desenvolvimento de apps
- Seguran√ßa e isolamento
- Suporte t√©cnico
- Compatibilidade com padr√µes web
- Conclus√£o

O tom √© profissional e t√©cnico, inspirado no estilo claro e direto solicitado,
sem mencionar diretamente o cliente (Ocyan) mas fornecendo todas as informa√ß√µes
necess√°rias para uma avalia√ß√£o de viabilidade t√©cnica.</details></think>

---

Criei o documento `SELF_HOST_pt-BR.md` com uma descri√ß√£o t√©cnica completa da
arquitetura do deco.chat e suas op√ß√µes de self-hosting. O documento aborda:

## Principais Se√ß√µes:

1. **Vis√£o Geral da Arquitetura** - Explica√ß√£o da base tecnol√≥gica em Cloudflare
   Workers
2. **Arquitetura de Workers** - Detalhes sobre workerd e Web Standards (com
   cita√ß√£o do link solicitado)
3. **Estrutura do Projeto** - Organiza√ß√£o dos componentes principais
4. **Op√ß√µes de Self-Hosting** - Recomenda√ß√£o forte da Cloudflare e alternativas
5. **Facilidade de Deployment** - Vantagens operacionais
6. **Desenvolvimento de Apps** - Como criar aplica√ß√µes personalizadas
7. **Seguran√ßa e Isolamento** - Benef√≠cios de seguran√ßa
8. **Suporte T√©cnico** - Informa√ß√µes de contato (suporte@deco.cx)

## Caracter√≠sticas do Documento:

- **Linguagem t√©cnica precisa** adequada para avalia√ß√£o corporativa
- **Estilo claro e direto** inspirado em David Ogilvy e manuais t√©cnicos
- **Foco na viabilidade t√©cnica** sem mencionar clientes espec√≠ficos
- **√änfase nas vantagens** da arquitetura Workers e padr√µes web
- **Informa√ß√µes pr√°ticas** sobre deployment e desenvolvimento

O documento est√° pronto para ser usado como refer√™ncia t√©cnica para tomada de
decis√£o sobre self-hosting do deco.chat.

---

_**User (2025-07-10 22:08Z)**_

Voc√™ n√£o explicou bem o que s√£o as apps deco. As apps implementam MCPs para APIs
e fontes de dados do cliente, al√©m de poderem criar workflows e views. Veja os
arquivos da cli nesse mesmo repo, tem o codigo de template l√°.

N√£o existe conclus√£o. Termine apenas dizendo que qualquer d√∫vida abra uma issue

---

_**Assistant**_

<think><details><summary>Thought Process</summary>O usu√°rio est√° me pedindo para
melhorar o documento, especificamente:

1. Explicar melhor o que s√£o as apps deco - elas implementam MCPs (Model Context
   Protocol) para APIs e fontes de dados do cliente, al√©m de poderem criar
   workflows e views
2. Olhar os arquivos da CLI no repo para entender o template
3. Remover a conclus√£o e substituir por uma instru√ß√£o para abrir issues

Vou primeiro explorar os arquivos da CLI para entender melhor a estrutura das
apps deco.</details></think>

---

Vou explorar os arquivos da CLI para entender melhor a estrutura das apps deco e
depois atualizar o documento.

---

<details>
            <summary>Listed directory packages/cli ‚Ä¢ **5** results</summary>

| Name           |
| -------------- |
| üìÅ `template`  |
| üìÅ `src`       |
| üìÑ `cli.ts`    |
| üìÑ `deno.json` |
| üìÑ `README.md` |

</details>

---

<think><details><summary>Thought Process</summary>Vou examinar o template e
alguns arquivos da CLI para entender melhor a estrutura das apps
deco.</details></think>

---

<details>
            <summary>Listed directory packages/cli/template ‚Ä¢ **1** results</summary>

| Name      |
| --------- |
| üìÅ `base` |

</details>

---

Read file: packages/cli/README.md

---

<think><details><summary>Thought Process</summary>Agora vou ver o template base
das apps deco para entender como elas funcionam:</details></think>

---

<details>
            <summary>Listed directory packages/cli/template/base ‚Ä¢ **6** results</summary>

| Name               |
| ------------------ |
| üìÑ `.gitignore`    |
| üìÑ `.npmrc`        |
| üìÑ `README.md`     |
| üìÑ `main.ts`       |
| üìÑ `package.json`  |
| üìÑ `wrangler.toml` |

</details>

---

Read file: packages/cli/template/base/main.ts

---

<think><details><summary>Thought Process</summary>Vou ver o README do template
base para entender melhor:</details></think>

---

Read file: packages/cli/template/base/README.md

---

<think><details><summary>Thought Process</summary>Agora vou buscar informa√ß√µes
sobre MCP (Model Context Protocol) para entender melhor como essas apps
implementam MCPs:</details></think>

---

<details>
                <summary>Searched codebase "What are MCP tools and how do they work in deco apps?" ‚Ä¢ **25** results</summary>

| File                                       | Lines    |
| ------------------------------------------ | -------- |
| `.cursor/rules/data-flow.mdc`              | L1-63    |
| `packages/ai/src/mcp.ts`                   | L187-217 |
| `apps/api/src/api.ts`                      | L74-133  |
| `packages/ai/src/mcp.ts`                   | L134-187 |
| `packages/runtime/src/mcp.ts`              | L36-93   |
| `packages/runtime/src/mastra.ts`           | L191-249 |
| `.cursor/rules/data-flow.mdc`              | L63-132  |
| `packages/sdk/src/mcp/index.ts`            | L60-128  |
| `packages/ai/src/mcp.ts`                   | L68-125  |
| `packages/ai/src/mcp.ts`                   | L1-39    |
| `packages/ai/src/mcp.ts`                   | L307-356 |
| `.cursor/rules/api-development.mdc`        | L1-84    |
| `packages/sdk/src/mcp/index.ts`            | L236-270 |
| `packages/sdk/src/mcp/index.ts`            | L14-60   |
| `packages/sdk/src/hooks/tools.ts`          | L1-9     |
| `packages/runtime/src/proxy.ts`            | L22-82   |
| `tasks/ai-generate.md`                     | L1-37    |
| `packages/sdk/src/mcp/context.ts`          | L143-158 |
| `packages/sdk/src/mcp/hosting/api.ts`      | L261-297 |
| `packages/sdk/src/mcp/bindings/README.md`  | L1-62    |
| `README.md`                                | L1-65    |
| `apps/api/src/api.ts`                      | L133-178 |
| `packages/sdk/src/mcp/context.ts`          | L158-174 |
| `packages/sdk/src/mcp/integrations/api.ts` | L65-127  |
| `packages/sdk/src/mcp/integrations/api.ts` | L1-50    |

</details>

---

<details>
            <summary>Grep search for "MCP|Model Context Protocol" ‚Ä¢ **13** files</summary>

| File                                                               | Line | Match                                                                            |
| ------------------------------------------------------------------ | ---- | -------------------------------------------------------------------------------- |
| `file:///Users/lucis/deco/chat/apps/api/src/webhooks/stripe.ts`    | L7   | `} from "@deco/sdk/mcp";`                                                        |
| `file:///Users/lucis/deco/chat/apps/api/src/webhooks/stripe.ts`    | L9   | `import { createWalletClient } from "@deco/sdk/mcp/wallet";`                     |
| `file:///Users/lucis/deco/chat/apps/api/src/apps.ts`               | L2   | `import { Entrypoint, HOSTING_APPS_DOMAIN } from "@deco/sdk/mcp";`               |
| `file:///Users/lucis/deco/chat/apps/api/src/api.ts`                | L1   | `import { HttpServerTransport } from "@deco/mcp/http";`                          |
| `file:///Users/lucis/deco/chat/apps/api/src/api.ts`                | L3   | `import { WellKnownMcpGroups } from "@deco/sdk";`                                |
| `file:///Users/lucis/deco/chat/apps/api/src/api.ts`                | L7   | `createMCPToolsStub,`                                                            |
| `file:///Users/lucis/deco/chat/apps/api/src/api.ts`                | L15  | `withMCPErrorHandling,`                                                          |
| `file:///Users/lucis/deco/chat/apps/api/src/api.ts`                | L17  | `} from "@deco/sdk/mcp";`                                                        |
| `file:///Users/lucis/deco/chat/apps/api/src/api.ts`                | L18  | `import { McpServer } from "@modelcontextprotocol/sdk/server/mcp.js";`           |
| `file:///Users/lucis/deco/chat/apps/api/src/api.ts`                | L65  | `const mapMCPErrorToHTTPExceptionOrThrow = (err: Error) => {`                    |
| `file:///Users/lucis/deco/chat/apps/api/src/api.ts`                | L76  | `* Creates and sets up an MCP server for the given tools`                        |
| `file:///Users/lucis/deco/chat/apps/api/src/api.ts`                | L78  | `const createMCPHandlerFor = (`                                                  |
| `file:///Users/lucis/deco/chat/apps/api/src/api.ts`                | L88  | `const server = new McpServer(`                                                  |
| `file:///Users/lucis/deco/chat/apps/api/src/api.ts`                | L113 | `withMCPErrorHandling(tool.handler),`                                            |
| `file:///Users/lucis/deco/chat/apps/api/src/api.ts`                | L119 | `startTime(c, "mcp-connect");`                                                   |
| `file:///Users/lucis/deco/chat/apps/api/src/api.ts`                | L121 | `endTime(c, "mcp-connect");`                                                     |
| `file:///Users/lucis/deco/chat/apps/api/src/api.ts`                | L123 | `startTime(c, "mcp-handle-message");`                                            |
| `file:///Users/lucis/deco/chat/apps/api/src/api.ts`                | L129 | `endTime(c, "mcp-handle-message");`                                              |
| `file:///Users/lucis/deco/chat/apps/api/src/api.ts`                | L148 | `const client = createMCPToolsStub({ tools });`                                  |
| `file:///Users/lucis/deco/chat/apps/api/src/api.ts`                | L173 | `).catch(mapMCPErrorToHTTPExceptionOrThrow);`                                    |
| `file:///Users/lucis/deco/chat/apps/api/src/api.ts`                | L221 | `// MCP endpoint handlers`                                                       |
| `file:///Users/lucis/deco/chat/apps/api/src/api.ts`                | L223 | `"/mcp",`                                                                        |
| `file:///Users/lucis/deco/chat/apps/api/src/api.ts`                | L224 | `createMCPHandlerFor(GLOBAL_TOOLS),`                                             |
| `file:///Users/lucis/deco/chat/apps/api/src/api.ts`                | L227 | `"/:root/:slug/mcp",`                                                            |
| `file:///Users/lucis/deco/chat/apps/api/src/api.ts`                | L228 | `createMCPHandlerFor(WORKSPACE_TOOLS),`                                          |
| `file:///Users/lucis/deco/chat/apps/api/src/api.ts`                | L231 | `"/:root/:slug/agents/:agentId/mcp",`                                            |
| `file:///Users/lucis/deco/chat/apps/api/src/api.ts`                | L232 | `createMCPHandlerFor(AGENT_TOOLS),`                                              |
| `file:///Users/lucis/deco/chat/apps/api/src/api.ts`                | L250 | ``/:root/:slug/${WellKnownMcpGroups.Email}/mcp`,`                                |
| `file:///Users/lucis/deco/chat/apps/api/src/api.ts`                | L251 | `createMCPHandlerFor(EMAIL_TOOLS),`                                              |
| `file:///Users/lucis/deco/chat/packages/cli/src/config.ts`         | L249 | `export const getMCPConfig = async (workspace: string, app: string) => {`        |
| `file:///Users/lucis/deco/chat/packages/cli/src/config.ts`         | L253 | `mcpServers: {`                                                                  |
| `file:///Users/lucis/deco/chat/packages/cli/src/config.ts`         | L256 | `url:`https://${appDomain}/mcp`,`                                                |
| `file:///Users/lucis/deco/chat/packages/runtime/src/index.ts`      | L8   | `import { createMCPServer, type CreateMCPServerOptions } from "./mastra.ts";`    |
| `file:///Users/lucis/deco/chat/packages/runtime/src/index.ts`      | L9   | `import { MCPClient, type QueryResult } from "./mcp.ts";`                        |
| `file:///Users/lucis/deco/chat/packages/runtime/src/index.ts`      | L14  | `createMCPFetchStub,`                                                            |
| `file:///Users/lucis/deco/chat/packages/runtime/src/index.ts`      | L17  | `} from "./mcp.ts";`                                                             |
| `file:///Users/lucis/deco/chat/packages/runtime/src/index.ts`      | L39  | `export interface MCPBinding extends BindingBase {`                              |
| `file:///Users/lucis/deco/chat/packages/runtime/src/index.ts`      | L40  | `type: "mcp";`                                                                   |
| `file:///Users/lucis/deco/chat/packages/runtime/src/index.ts`      | L44  | `export type Binding = MCPBinding;`                                              |
| `file:///Users/lucis/deco/chat/packages/runtime/src/index.ts`      | L50  | `export const WorkersMCPBindings = {`                                            |
| `file:///Users/lucis/deco/chat/packages/runtime/src/index.ts`      | L66  | `> extends CreateMCPServerOptions {`                                             |
| `file:///Users/lucis/deco/chat/packages/runtime/src/index.ts`      | L91  | `mcp: MCPBinding;`                                                               |
| `file:///Users/lucis/deco/chat/packages/runtime/src/index.ts`      | L104 | `mcp: createIntegrationBinding,`                                                 |
| `file:///Users/lucis/deco/chat/packages/runtime/src/index.ts`      | L109 | `env["DECO_CHAT_API"] = MCPClient;`                                              |
| `file:///Users/lucis/deco/chat/packages/runtime/src/index.ts`      | L123 | `const bindings = WorkersMCPBindings.parse(env.DECO_CHAT_BINDINGS);`             |
| `file:///Users/lucis/deco/chat/packages/runtime/src/index.ts`      | L140 | `const server = createMCPServer(userFns);`                                       |
| `file:///Users/lucis/deco/chat/packages/runtime/src/index.ts`      | L168 | `if (url.pathname === "/mcp") {`                                                 |
| `file:///Users/lucis/deco/chat/packages/runtime/src/bindings.ts`   | L1   | `import type { DefaultEnv, MCPBinding } from "./index.ts";`                      |
| `file:///Users/lucis/deco/chat/packages/runtime/src/bindings.ts`   | L2   | `import { MCPClient } from "./mcp.ts";`                                          |
| `file:///Users/lucis/deco/chat/packages/runtime/src/bindings.ts`   | L6   | `): ReturnType<typeof MCPClient["forWorkspace"]> => {`                           |
| `file:///Users/lucis/deco/chat/packages/runtime/src/bindings.ts`   | L7   | `return MCPClient.forWorkspace(`                                                 |
| `file:///Users/lucis/deco/chat/packages/runtime/src/bindings.ts`   | L13  | `binding: MCPBinding,`                                                           |
| `file:///Users/lucis/deco/chat/packages/runtime/src/bindings.ts`   | L18  | `return MCPClient.forConnection(async () => {`                                   |
| `file:///Users/lucis/deco/chat/packages/runtime/src/mcp.ts`        | L3   | `import type { MCPConnection } from "./connection.ts";`                          |
| `file:///Users/lucis/deco/chat/packages/runtime/src/mcp.ts`        | L5   | `import { createMCPClientProxy } from "./proxy.ts";`                             |
| `file:///Users/lucis/deco/chat/packages/runtime/src/mcp.ts`        | L60  | `const global = createMCPFetchStub<[]>({});`                                     |
| `file:///Users/lucis/deco/chat/packages/runtime/src/mcp.ts`        | L61  | `export const MCPClient = new Proxy(`                                            |
| `file:///Users/lucis/deco/chat/packages/runtime/src/mcp.ts`        | L66  | `) => MCPClientFetchStub<typeof workspaceTools>;`                                |
| `file:///Users/lucis/deco/chat/packages/runtime/src/mcp.ts`        | L68  | `connection: MCPConnectionProvider,`                                             |
| `file:///Users/lucis/deco/chat/packages/runtime/src/mcp.ts`        | L69  | `) => MCPClientFetchStub<TDefinition>;`                                          |
| `file:///Users/lucis/deco/chat/packages/runtime/src/mcp.ts`        | L75  | `createMCPFetchStub<[]>({`                                                       |
| `file:///Users/lucis/deco/chat/packages/runtime/src/mcp.ts`        | L83  | `connection: MCPConnectionProvider,`                                             |
| `file:///Users/lucis/deco/chat/packages/runtime/src/mcp.ts`        | L85  | `createMCPFetchStub<TDefinition>({`                                              |
| `file:///Users/lucis/deco/chat/packages/runtime/src/mcp.ts`        | L105 | `export type MCPClientStub<TDefinition extends readonly ToolBinder[]> = {`       |
| `file:///Users/lucis/deco/chat/packages/runtime/src/mcp.ts`        | L114 | `export type MCPClientFetchStub<TDefinition extends readonly ToolBinder[]> = {`  |
| `file:///Users/lucis/deco/chat/packages/runtime/src/mcp.ts`        | L123 | `export type MCPConnectionProvider =`                                            |
| `file:///Users/lucis/deco/chat/packages/runtime/src/mcp.ts`        | L124 | `                                                                                |
| `file:///Users/lucis/deco/chat/packages/runtime/src/mcp.ts`        | L125 | `                                                                                |
| `file:///Users/lucis/deco/chat/packages/runtime/src/mcp.ts`        | L131 | `connection?: MCPConnectionProvider;`                                            |
| `file:///Users/lucis/deco/chat/packages/runtime/src/mcp.ts`        | L140 | `export function createMCPFetchStub<TDefinition extends readonly ToolBinder[]>(` |
| `file:///Users/lucis/deco/chat/packages/runtime/src/mcp.ts`        | L142 | `): MCPClientFetchStub<TDefinition> {`                                           |
| `file:///Users/lucis/deco/chat/packages/runtime/src/mcp.ts`        | L143 | `return createMCPClientProxy<MCPClientFetchStub<TDefinition>>(options);`         |
| `file:///Users/lucis/deco/chat/packages/runtime/src/workflow.ts`   | L2   | `import type { AppContext, CreateMCPServerOptions } from "./mastra.ts";`         |
| `file:///Users/lucis/deco/chat/packages/runtime/src/workflow.ts`   | L38  | `export const Workflow = (workflows?: CreateMCPServerOptions["workflows"]) => {` |
| `file:///Users/lucis/deco/chat/packages/runtime/src/workflow.ts`   | L44  | `ReturnType<NonNullable<CreateMCPServerOptions["workflows"]>[number]>`           |
| `file:///Users/lucis/deco/chat/packages/runtime/src/proxy.ts`      | L1   | `import type { CreateStubAPIOptions } from "./mcp.ts";`                          |
| `file:///Users/lucis/deco/chat/packages/runtime/src/proxy.ts`      | L25  | `* The base fetcher used to fetch the MCP from API.`                             |
| `file:///Users/lucis/deco/chat/packages/runtime/src/proxy.ts`      | L27  | `export function createMCPClientProxy<T extends Record<string, unknown>>(`       |
| `file:///Users/lucis/deco/chat/packages/runtime/src/mastra.ts`     | L2   | `import { HttpServerTransport } from "@deco/mcp/http";`                          |
| `file:///Users/lucis/deco/chat/packages/runtime/src/mastra.ts`     | L17  | `import { McpServer } from "@modelcontextprotocol/sdk/server/mcp.js";`           |
| `file:///Users/lucis/deco/chat/packages/runtime/src/mastra.ts`     | L176 | `export interface CreateMCPServerOptions<Env = any> {`                           |
| `file:///Users/lucis/deco/chat/packages/runtime/src/mastra.ts`     | L206 | `export const createMCPServer = <TEnv = any>(`                                   |
| `file:///Users/lucis/deco/chat/packages/runtime/src/mastra.ts`     | L207 | `options: CreateMCPServerOptions<TEnv>,`                                         |
| `file:///Users/lucis/deco/chat/packages/runtime/src/mastra.ts`     | L209 | `let server: McpServer                                                           |
| `file:///Users/lucis/deco/chat/packages/runtime/src/mastra.ts`     | L212 | `const server = new McpServer(`                                                  |
| `file:///Users/lucis/deco/chat/packages/runtime/src/mastra.ts`     | L213 | `{ name: "@deco/mcp-api", version: "1.0.0" },`                                   |
| `file:///Users/lucis/deco/chat/packages/runtime/package.json`      | L11  | `"@deco/mcp": "npm:@jsr/deco__mcp@0.5.5",`                                       |
| `file:///Users/lucis/deco/chat/packages/runtime/src/connection.ts` | L32  | `export type MCPConnection =`                                                    |
| `file:///Users/lucis/deco/chat/packages/runtime/src/connection.ts` | L40  | `/** Unique identifier for the MCP */`                                           |
| `file:///Users/lucis/deco/chat/packages/runtime/src/connection.ts` | L51  | `connection: MCPConnection;`                                                     |
| `file:///Users/lucis/deco/chat/packages/ai/src/agent/llm.ts`       | L2   | `import type { LLMVault } from "@deco/sdk/mcp";`                                 |

</details>

---

<think><details><summary>Thought Process</summary>Agora entendo melhor sobre
MCPs e como funcionam no contexto do deco.chat. Com base no que encontrei, vou
atualizar o documento para:

1. Explicar melhor o que s√£o as apps deco e como implementam MCPs
2. Remover a conclus√£o e substituir por instru√ß√£o sobre issues
3. Ser mais espec√≠fico sobre como as apps funcionam com workflows e views

Vou atualizar o documento:</details></think>

---

<details><summary>Edit file: SELF_HOST_pt-BR.md</summary>

undefined

**Chunk 1** Lines added: 112, lines removed: 23

````diff
@@ -92,29 +92,118 @@
  4. **Rollback Simples**: Revers√£o imediata em caso de problemas
  
- ## Desenvolvimento de Apps
- 
- O deco.chat permite o desenvolvimento de aplica√ß√µes personalizadas que se integram nativamente √† plataforma:
- 
- ### Caracter√≠sticas dos Apps
- 
- - **TypeScript Nativo**: Desenvolvimento type-safe
- - **Integra√ß√£o com IA**: Acesso direto aos modelos de linguagem
- - **APIs Padronizadas**: Uso de Fetch, Response, Request padr√£o
- - **Bindings Configur√°veis**: Conex√µes seguras com servi√ßos externos
- 
- ### Exemplo de App Simples
+ ## Apps Deco: Implementa√ß√£o de MCPs
+ 
+ As **Apps Deco** s√£o aplica√ß√µes especializadas que implementam o **Model Context Protocol (MCP)**, permitindo que agentes de IA se conectem e interajam com APIs externas e fontes de dados do cliente de forma padronizada.
+ 
+ ### O que s√£o MCPs
+ 
+ MCPs (Model Context Protocols) s√£o protocolos padronizados que definem como agentes de IA devem se comunicar com servi√ßos externos. Cada MCP exp√µe um conjunto de **tools** (ferramentas) tipadas que podem ser chamadas pelos agentes.
+ 
+ ### Funcionalidades das Apps Deco
+ 
+ As Apps Deco oferecem tr√™s capacidades principais:
+ 
+ 1. **Tools**: Fun√ß√µes que agentes podem chamar para executar a√ß√µes
+ 2. **Workflows**: Sequ√™ncias de passos automatizados que podem ser executados
+ 3. **Views**: Componentes de interface que podem ser renderizados no chat
+ 
+ ### Estrutura de uma App Deco
  
  ```typescript
- export default {
-   async fetch(request: Request): Promise<Response> {
-     const url = new URL(request.url);
-     
-     if (url.pathname === '/api/status') {
-       return new Response('OK', { status: 200 });
-     }
-     
-     return new Response('Not Found', { status: 404 });
-   }
- };
+ // main.ts - Estrutura b√°sica de uma App Deco
+ import { withRuntime } from "@deco/workers-runtime";
+ import {
+   createStepFromTool,
+   createTool,
+   createWorkflow,
+ } from "@deco/workers-runtime/mastra";
+ import { z } from "zod";
+ 
+ // Defini√ß√£o de uma ferramenta (Tool)
+ const createMyTool = (_bindings: Bindings) =>
+   createTool({
+     id: "MY_TOOL",
+     description: "Executa uma a√ß√£o espec√≠fica",
+     inputSchema: z.object({ name: z.string() }),
+     outputSchema: z.object({ message: z.string() }),
+     execute: async ({ context }) => ({
+       message: `Processado: ${context.name}`,
+     }),
+   });
+ 
+ // Defini√ß√£o de um workflow
+ const createMyWorkflow = (bindings: Bindings) => {
+   const step = createStepFromTool(createMyTool(bindings));
+ 
+   return createWorkflow({
+     id: "MY_WORKFLOW",
+     inputSchema: z.object({ name: z.string() }),
+     outputSchema: z.object({ message: z.string() }),
+   })
+     .then(step)
+     .commit();
+ };
+ 
+ // Exporta√ß√£o do runtime
+ const { Workflow, ...runtime } = withRuntime<Bindings>({
+   workflows: [createMyWorkflow],
+   tools: [createMyTool],
+ });
+ 
+ export { Workflow };
+ export default runtime;
+ ```
+ 
+ ### Integra√ß√£o com APIs Externas
+ 
+ As Apps Deco podem se conectar a qualquer API externa, permitindo que agentes:
+ 
+ - **Consultem bancos de dados** do cliente
+ - **Interajam com CRMs** como Salesforce
+ - **Acessem sistemas internos** via APIs REST
+ - **Processem documentos** e arquivos
+ - **Executem workflows** automatizados
+ 
+ ### Deployment e Configura√ß√£o
+ 
+ ```bash
+ # Configurar workspace
+ deco configure
+ 
+ # Desenvolver localmente
+ deco dev
+ 
+ # Deploy para produ√ß√£o
+ deco deploy
+ ```
+ 
+ ### Exemplo de Integra√ß√£o com API
+ 
+ ```typescript
+ const createDatabaseTool = (bindings: Bindings) =>
+   createTool({
+     id: "QUERY_DATABASE",
+     description: "Consulta o banco de dados do cliente",
+     inputSchema: z.object({ 
+       query: z.string(),
+       params: z.array(z.string()).optional()
+     }),
+     outputSchema: z.object({ 
+       results: z.array(z.record(z.unknown())) 
+     }),
+     execute: async ({ context }) => {
+       const response = await fetch(bindings.DATABASE_URL, {
+         method: 'POST',
+         headers: { 'Authorization': `Bearer ${bindings.DATABASE_TOKEN}` },
+         body: JSON.stringify({
+           query: context.query,
+           params: context.params
+         })
+       });
+       
+       const data = await response.json();
+       return { results: data };
+     },
+   });
````

````
</details>

---

<think><details><summary>Thought Process</summary>Agora vou substituir a conclus√£o pela instru√ß√£o sobre issues:</details></think>

---

<details><summary>Edit file: SELF_HOST_pt-BR.md</summary>

undefined

**Chunk 1**
Lines added: 1, lines removed: 5

```diff
@@ -234,7 +234,3 @@
  Esta compatibilidade garante que aplica√ß√µes desenvolvidas no deco.chat podem ser facilmente adaptadas para outros ambientes que suportam Web Standards, oferecendo flexibilidade m√°xima para organiza√ß√µes que precisam de op√ß√µes de deployment variadas.
  
- ## Conclus√£o
- 
- O deco.chat oferece uma arquitetura moderna, escal√°vel e flex√≠vel baseada em padr√µes web. Seja executando na Cloudflare ou em ambiente pr√≥prio, a plataforma mant√©m suas caracter√≠sticas de performance e simplicidade operacional.
- 
- A escolha do Cloudflare Workers como base tecnol√≥gica garante que o deco.chat est√° alinhado com as melhores pr√°ticas da ind√∫stria, oferecendo tanto a confiabilidade de uma plataforma madura quanto a flexibilidade de padr√µes abertos. 
+ Para d√∫vidas t√©cnicas ou suporte adicional, abra uma [issue no reposit√≥rio](https://github.com/deco-cx/chat/issues).
````

</details>

---

<think><details><summary>Thought Process</summary>Perfeito! Agora o documento
est√° atualizado com:

1. **Explica√ß√£o melhorada das Apps Deco**: Agora explico claramente que s√£o
   aplica√ß√µes que implementam MCPs (Model Context Protocols), permitindo que
   agentes de IA se conectem com APIs externas e fontes de dados do cliente.

2. **Se√ß√£o sobre MCPs**: Explico o que s√£o MCPs e como funcionam como protocolos
   padronizados para comunica√ß√£o entre agentes de IA e servi√ßos externos.

3. **Funcionalidades das Apps Deco**: Menciono as tr√™s capacidades principais -
   Tools, Workflows e Views.

4. **Exemplos pr√°ticos**: Incluo a estrutura b√°sica de uma App Deco baseada no
   template da CLI, mostrando como criar tools e workflows.

5. **Integra√ß√£o com APIs externas**: Explico como as Apps Deco podem se conectar
   a sistemas do cliente como bancos de dados, CRMs, etc.

6. **Exemplo de integra√ß√£o**: Mostro um exemplo pr√°tico de como criar um tool
   que consulta um banco de dados.

7. **Substitui√ß√£o da conclus√£o**: Removi a conclus√£o e coloquei apenas a
   instru√ß√£o para abrir issues no reposit√≥rio.

O documento agora est√° mais t√©cnico, preciso e adequado para o p√∫blico-alvo
(empresa grande que precisa avaliar viabilidade t√©cnica), seguindo as instru√ß√µes
do usu√°rio.</details></think>

---

Atualizei o documento `SELF_HOST_pt-BR.md` com as melhorias solicitadas:

## Principais Mudan√ßas:

### 1. **Explica√ß√£o Aprimorada das Apps Deco**

- Agora explico claramente que s√£o aplica√ß√µes que implementam **MCPs (Model
  Context Protocols)**
- Detalhei como permitem que agentes de IA se conectem com APIs externas e
  fontes de dados do cliente

### 2. **Se√ß√£o Dedicada a MCPs**

- Explica√ß√£o do que s√£o MCPs e como funcionam
- Como definem protocolos padronizados para comunica√ß√£o entre agentes de IA e
  servi√ßos externos

### 3. **Funcionalidades das Apps Deco**

- **Tools**: Fun√ß√µes que agentes podem chamar
- **Workflows**: Sequ√™ncias de passos automatizados
- **Views**: Componentes de interface renderizados no chat

### 4. **Exemplos Pr√°ticos**

- Estrutura b√°sica baseada no template da CLI
- Exemplo de integra√ß√£o com banco de dados
- Comandos de deployment e configura√ß√£o

### 5. **Integra√ß√£o com Sistemas Externos**

- Como se conectar a bancos de dados, CRMs, sistemas internos
- Exemplos de processamento de documentos e workflows

### 6. **Substitui√ß√£o da Conclus√£o**

- Removida a conclus√£o gen√©rica
- Adicionada instru√ß√£o para abrir issues no reposit√≥rio para d√∫vidas t√©cnicas

O documento agora est√° mais t√©cnico e espec√≠fico, adequado para avalia√ß√£o de
viabilidade t√©cnica por empresas que precisam entender como o deco.chat funciona
e pode ser implementado em seus ambientes.

---
