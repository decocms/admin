// @bun
var ik=Object.create;var{getPrototypeOf:ak,defineProperty:p3,getOwnPropertyNames:tk}=Object;var ok=Object.prototype.hasOwnProperty;var d3=(J,W,X)=>{X=J!=null?ik(ak(J)):{};let G=W||!J||!J.__esModule?p3(X,"default",{value:J,enumerable:!0}):X;for(let Y of tk(J))if(!ok.call(G,Y))p3(G,Y,{get:()=>J[Y],enumerable:!0});return G};var v6=(J,W)=>()=>(W||J((W={exports:{}}).exports,W),W.exports);var N0=(J,W)=>{for(var X in W)p3(J,X,{get:W[X],enumerable:!0,configurable:!0,set:(G)=>W[X]=()=>G})};var M=(J,W)=>()=>(J&&(W=J(J=0)),W);var Q4=import.meta.require;function k0(J){return typeof J>"u"||J===void 0}function m6(J){return typeof J==="string"}function d8(J){return typeof J==="number"}function sJ(J){return typeof J==="boolean"}function bW(J){return J===null}function h1(J){return J instanceof Date}function kW(J){return typeof J==="bigint"}function h5(J){return typeof Buffer<"u"&&Buffer.isBuffer(J)}function f6(J){return typeof J==="function"}function J4(J){return typeof J==="object"&&J!==null}function g5(J){if(!J4(J)||Gh(J)!=="[object Object]")return!1;if(Object.getPrototypeOf(J)===null)return!0;let W=J;while(Object.getPrototypeOf(W)!==null)W=Object.getPrototypeOf(W);return Object.getPrototypeOf(J)===W}function FP(J){return J[J.length-1]}function Q(J){return Object.freeze(J)}function nG(J){if(t4(J))return J;else return[J]}function t4(J){return Array.isArray(J)}function h0(J){return J}function m5(J,W){if(t4(J)&&t4(W))return sk(J,W);else if(J4(J)&&J4(W))return ek(J,W);return J===W}function sk(J,W){if(J.length!==W.length)return!1;for(let X=0;X<J.length;++X)if(!m5(J[X],W[X]))return!1;return!0}function ek(J,W){if(h5(J)&&h5(W))return Jh(J,W);else if(h1(J)&&h1(W))return Wh(J,W);return Xh(J,W)}function Jh(J,W){return Buffer.compare(J,W)===0}function Wh(J,W){return J.getTime()===W.getTime()}function Xh(J,W){let X=Object.keys(J),G=Object.keys(W);if(X.length!==G.length)return!1;for(let Y of X)if(!m5(J[Y],W[Y]))return!1;return!0}function Gh(J){if(J==null)return J===void 0?"[object Undefined]":"[object Null]";return Yh.call(J)}var Yh;var R=M(()=>{Yh=Object.prototype.toString});var A6;var RX=M(()=>{R();A6=Q({is(J){return J.kind==="AlterTableNode"},create(J){return Q({kind:"AlterTableNode",table:J})},cloneWithTableProps(J,W){return Q({...J,...W})},cloneWithColumnAlteration(J,W){return Q({...J,columnAlterations:J.columnAlterations?[...J.columnAlterations,W]:[W]})}})});var $6;var W4=M(()=>{R();$6=Q({is(J){return J.kind==="IdentifierNode"},create(J){return Q({kind:"IdentifierNode",name:J})}})});var r8;var f5=M(()=>{R();W4();r8=Q({is(J){return J.kind==="CreateIndexNode"},create(J){return Q({kind:"CreateIndexNode",name:$6.create(J)})},cloneWith(J,W){return Q({...J,...W})},cloneWithColumns(J,W){return Q({...J,columns:[...J.columns||[],...W]})}})});var y5;var x5=M(()=>{R();W4();y5=Q({is(J){return J.kind==="CreateSchemaNode"},create(J,W){return Q({kind:"CreateSchemaNode",schema:$6.create(J),...W})},cloneWith(J,W){return Q({...J,...W})}})});var UP,j0;var g1=M(()=>{R();UP=["preserve rows","delete rows","drop"],j0=Q({is(J){return J.kind==="CreateTableNode"},create(J){return Q({kind:"CreateTableNode",table:J,columns:Q([])})},cloneWithColumn(J,W){return Q({...J,columns:Q([...J.columns,W])})},cloneWithConstraint(J,W){return Q({...J,constraints:J.constraints?Q([...J.constraints,W]):Q([W])})},cloneWithFrontModifier(J,W){return Q({...J,frontModifiers:J.frontModifiers?Q([...J.frontModifiers,W]):Q([W])})},cloneWithEndModifier(J,W){return Q({...J,endModifiers:J.endModifiers?Q([...J.endModifiers,W]):Q([W])})},cloneWith(J,W){return Q({...J,...W})}})});var S0;var eJ=M(()=>{R();W4();S0=Q({is(J){return J.kind==="SchemableIdentifierNode"},create(J){return Q({kind:"SchemableIdentifierNode",identifier:$6.create(J)})},createWithSchema(J,W){return Q({kind:"SchemableIdentifierNode",schema:$6.create(J),identifier:$6.create(W)})}})});var hW;var iG=M(()=>{R();eJ();hW=Q({is(J){return J.kind==="DropIndexNode"},create(J,W){return Q({kind:"DropIndexNode",name:S0.create(J),...W})},cloneWith(J,W){return Q({...J,...W})}})});var aG;var u5=M(()=>{R();W4();aG=Q({is(J){return J.kind==="DropSchemaNode"},create(J,W){return Q({kind:"DropSchemaNode",schema:$6.create(J),...W})},cloneWith(J,W){return Q({...J,...W})}})});var tG;var c5=M(()=>{R();tG=Q({is(J){return J.kind==="DropTableNode"},create(J,W){return Q({kind:"DropTableNode",table:J,...W})},cloneWith(J,W){return Q({...J,...W})}})});var o4;var n8=M(()=>{R();o4=Q({is(J){return J.kind==="AliasNode"},create(J,W){return Q({kind:"AliasNode",node:J,alias:W})}})});var z8;var m1=M(()=>{R();eJ();z8=Q({is(J){return J.kind==="TableNode"},create(J){return Q({kind:"TableNode",table:S0.create(J)})},createWithSchema(J,W){return Q({kind:"TableNode",table:S0.createWithSchema(J,W)})}})});function $4(J){return J4(J)&&f6(J.toOperationNode)}var i0=M(()=>{R()});function l5(J){return J4(J)&&"expressionType"in J&&$4(J)}function QP(J){return J4(J)&&"expression"in J&&m6(J.alias)&&$4(J)}var p5=M(()=>{i0();R()});var SJ;var r3=M(()=>{R();SJ=Q({is(J){return J.kind==="SelectModifierNode"},create(J,W){return Q({kind:"SelectModifierNode",modifier:J,of:W})},createWithExpression(J){return Q({kind:"SelectModifierNode",rawModifier:J})}})});var a0;var gW=M(()=>{R();a0=Q({is(J){return J.kind==="AndNode"},create(J,W){return Q({kind:"AndNode",left:J,right:W})}})});var i8;var CX=M(()=>{R();i8=Q({is(J){return J.kind==="OrNode"},create(J,W){return Q({kind:"OrNode",left:J,right:W})}})});var d5;var n3=M(()=>{R();gW();CX();d5=Q({is(J){return J.kind==="OnNode"},create(J){return Q({kind:"OnNode",on:J})},cloneWithOperation(J,W,X){return Q({...J,on:W==="And"?a0.create(J.on,X):i8.create(J.on,X)})}})});var a8;var f1=M(()=>{R();n3();a8=Q({is(J){return J.kind==="JoinNode"},create(J,W){return Q({kind:"JoinNode",joinType:J,table:W,on:void 0})},createWithOn(J,W,X){return Q({kind:"JoinNode",joinType:J,table:W,on:d5.create(X)})},cloneWithOn(J,W){return Q({...J,on:J.on?d5.cloneWithOperation(J.on,"And",W):d5.create(W)})}})});var JW;var oG=M(()=>{R();JW=Q({is(J){return J.kind==="BinaryOperationNode"},create(J,W,X){return Q({kind:"BinaryOperationNode",leftOperand:J,operator:W,rightOperand:X})}})});function i3(J){return m6(J)&&ZP.includes(J)}var $h,Kh,ZP,wh,Hh,zh,LP,_0;var WW=M(()=>{R();$h=["=","==","!=","<>",">",">=","<","<=","in","not in","is","is not","like","not like","match","ilike","not ilike","@>","<@","^@","&&","?","?&","?|","!<","!>","<=>","!~","~","~*","!~*","@@","@@@","!!","<->","regexp","is distinct from","is not distinct from"],Kh=["+","-","*","/","%","^","&","|","#","<<",">>"],ZP=["->","->>"],wh=[...$h,...Kh,"&&","||"],Hh=["exists","not exists"],zh=["not","-",...Hh],LP=[...wh,...ZP,...zh,"between","between symmetric"],_0=Q({is(J){return J.kind==="OperatorNode"},create(J){return Q({kind:"OperatorNode",operator:J})}})});var q6;var T0=M(()=>{R();W4();q6=Q({is(J){return J.kind==="ColumnNode"},create(J){return Q({kind:"ColumnNode",column:$6.create(J)})}})});var y1;var sG=M(()=>{R();y1=Q({is(J){return J.kind==="SelectAllNode"},create(){return Q({kind:"SelectAllNode"})}})});var x1;var r5=M(()=>{sG();R();x1=Q({is(J){return J.kind==="ReferenceNode"},create(J,W){return Q({kind:"ReferenceNode",table:W,column:J})},createSelectAll(J){return Q({kind:"ReferenceNode",table:J,column:y1.create()})}})});class a3{#J;get dynamicReference(){return this.#J}get refType(){return}constructor(J){this.#J=J}toOperationNode(){return t3(this.#J)}}function n5(J){return J4(J)&&$4(J)&&m6(J.dynamicReference)}var eG=M(()=>{i0();F0();R()});var t8;var i5=M(()=>{R();t8=Q({is(J){return J.kind==="OrderByItemNode"},create(J,W){return Q({kind:"OrderByItemNode",orderBy:J,direction:W})},cloneWith(J,W){return Q({...J,...W})}})});var E6;var k8=M(()=>{R();E6=Q({is(J){return J.kind==="RawNode"},create(J,W){return Q({kind:"RawNode",sqlFragments:Q(J),parameters:Q(W)})},createWithSql(J){return E6.create([J],[])},createWithChild(J){return E6.create(["",""],[J])},createWithChildren(J){return E6.create(Array(J.length+1).fill(""),J)}})});var VP;var o3=M(()=>{R();W4();VP={is(J){return J.kind==="CollateNode"},create(J){return Q({kind:"CollateNode",collation:$6.create(J)})}}});class mW{#J;constructor(J){this.#J=Q(J)}desc(){return new mW({node:t8.cloneWith(this.#J.node,{direction:E6.createWithSql("desc")})})}asc(){return new mW({node:t8.cloneWith(this.#J.node,{direction:E6.createWithSql("asc")})})}nullsLast(){return new mW({node:t8.cloneWith(this.#J.node,{nulls:"last"})})}nullsFirst(){return new mW({node:t8.cloneWith(this.#J.node,{nulls:"first"})})}collate(J){return new mW({node:t8.cloneWith(this.#J.node,{collation:VP.create(J)})})}toOperationNode(){return this.#J.node}}var s3=M(()=>{o3();i5();k8();R()});function o8(J){if(DP.has(J))return;DP.add(J),console.log(J)}var DP;var u1=M(()=>{DP=new Set});function Jz(J){return J==="asc"||J==="desc"}function F8(J){if(J.length===2)return[e3(J[0],J[1])];if(J.length===1){let[W]=J;if(Array.isArray(W))return o8("orderBy(array) is deprecated, use multiple orderBy calls instead."),W.map((X)=>e3(X));return[e3(W)]}throw Error(`Invalid number of arguments at order by! expected 1-2, received ${J.length}`)}function e3(J,W){let X=Nh(J);if(t8.is(X)){if(W)throw Error("Cannot specify direction twice!");return X}return MP(X,W)}function Nh(J){if(XW(J))return t0(J);if(n5(J))return J.toOperationNode();let[W,X]=J.split(" ");if(X)return o8("`orderBy('column asc')` is deprecated. Use `orderBy('column', 'asc')` instead."),MP(N8(W),X);return N8(J)}function MP(J,W){if(typeof W==="string"){if(!Jz(W))throw Error(`Invalid order by direction: ${W}`);return t8.create(J,E6.createWithSql(W))}if(l5(W))return o8("`orderBy(..., expr)` is deprecated. Use `orderBy(..., 'asc')` or `orderBy(..., (ob) => ...)` instead."),t8.create(J,W.toOperationNode());let X=t8.create(J);if(!W)return X;return W(new mW({node:X})).toOperationNode()}var bX=M(()=>{eG();p5();i5();k8();s3();u1();s8();F0()});var c1;var a5=M(()=>{R();c1=Q({is(J){return J.kind==="JSONReferenceNode"},create(J,W){return Q({kind:"JSONReferenceNode",reference:J,traversal:W})},cloneWithTraversal(J,W){return Q({...J,traversal:W})}})});var t5;var o5=M(()=>{R();t5=Q({is(J){return J.kind==="JSONOperatorChainNode"},create(J){return Q({kind:"JSONOperatorChainNode",operator:J,values:Q([])})},cloneWithValue(J,W){return Q({...J,values:Q([...J.values,W])})}})});var fW;var J9=M(()=>{R();fW=Q({is(J){return J.kind==="JSONPathNode"},create(J){return Q({kind:"JSONPathNode",inOperator:J,pathLegs:Q([])})},cloneWithLeg(J,W){return Q({...J,pathLegs:Q([...J.pathLegs,W])})}})});function t3(J){if(m6(J))return N8(J);return J.toOperationNode()}function YW(J){if(t4(J))return J.map((W)=>U0(W));else return[U0(J)]}function U0(J){if(XW(J))return t0(J);return t3(J)}function OP(J,W){let X=N8(J);if(i3(W))return c1.create(X,t5.create(_0.create(W)));let G=W.slice(0,-1);if(i3(G))return c1.create(X,fW.create(_0.create(G)));throw Error(`Invalid JSON operator: ${W}`)}function N8(J){if(!J.includes("."))return x1.create(q6.create(J));let X=J.split(".").map(Xz);if(X.length===3)return Fh(X);if(X.length===2)return Uh(X);throw Error(`invalid column reference ${J}`)}function PP(J){if(J.includes(" as ")){let[X,G]=J.split(" as ").map(Xz);return o4.create(N8(X),$6.create(G))}else return N8(J)}function Wz(J){return q6.create(J)}function l1(J){if(J.includes(" ")){let[X,G]=J.split(" ").map(Xz);if(!Jz(G))throw Error(`invalid order direction "${G}" next to "${X}"`);return F8([X,G])[0]}else return Wz(J)}function Fh(J){let[W,X,G]=J;return x1.create(q6.create(G),z8.createWithSchema(W,X))}function Uh(J){let[W,X]=J;return x1.create(q6.create(X),z8.create(W))}function Xz(J){return J.trim()}var F0=M(()=>{n8();T0();r5();m1();R();s8();W4();bX();WW();a5();o5();J9()});var p1;var W9=M(()=>{R();p1=Q({is(J){return J.kind==="PrimitiveValueListNode"},create(J){return Q({kind:"PrimitiveValueListNode",values:Q([...J])})}})});var e8;var yW=M(()=>{R();e8=Q({is(J){return J.kind==="ValueListNode"},create(J){return Q({kind:"ValueListNode",values:Q(J)})}})});var g4;var JJ=M(()=>{R();g4=Q({is(J){return J.kind==="ValueNode"},create(J){return Q({kind:"ValueNode",value:J})},createImmediate(J){return Q({kind:"ValueNode",value:J,immediate:!0})}})});function vP(J){if(t4(J))return Qh(J);return i6(J)}function i6(J){if(XW(J))return t0(J);return g4.create(J)}function s5(J){return d8(J)||sJ(J)||bW(J)}function X9(J){if(!s5(J))throw Error(`unsafe immediate value ${JSON.stringify(J)}`);return g4.createImmediate(J)}function Qh(J){if(J.some(XW))return e8.create(J.map((W)=>i6(W)));return p1.create(J)}var _J=M(()=>{W9();yW();JJ();R();s8()});var U8;var d1=M(()=>{R();U8=Q({is(J){return J.kind==="ParensNode"},create(J){return Q({kind:"ParensNode",node:J})}})});function X4(J){if(J.length===3)return e5(J[0],J[1],J[2]);else if(J.length===1)return i6(J[0]);throw Error(`invalid arguments: ${JSON.stringify(J)}`)}function e5(J,W,X){if(Zh(W)&&SP(X))return JW.create(U0(J),Yz(W),g4.createImmediate(X));return JW.create(U0(J),Yz(W),vP(X))}function s4(J,W,X){return JW.create(U0(J),Yz(W),U0(X))}function Gz(J,W){return r1(Object.entries(J).filter(([,X])=>!k0(X)).map(([X,G])=>e5(X,SP(G)?"is":"=",G)),W)}function r1(J,W,X=!0){let G=W==="and"?a0.create:i8.create;if(J.length===0)return JW.create(g4.createImmediate(1),_0.create("="),g4.createImmediate(W==="and"?1:0));let Y=jP(J[0]);for(let $=1;$<J.length;++$)Y=G(Y,jP(J[$]));if(J.length>1&&X)return U8.create(Y);return Y}function Zh(J){return J==="is"||J==="is not"}function SP(J){return bW(J)||sJ(J)}function Yz(J){if(m6(J)&&LP.includes(J))return _0.create(J);if($4(J))return J.toOperationNode();throw Error(`invalid operator ${JSON.stringify(J)}`)}function jP(J){return $4(J)?J.toOperationNode():J}var Q8=M(()=>{oG();R();i0();WW();F0();_J();JJ();gW();d1();CX()});var GW;var Y9=M(()=>{R();GW=Q({is(J){return J.kind==="OrderByNode"},create(J){return Q({kind:"OrderByNode",items:Q([...J])})},cloneWithItems(J,W){return Q({...J,items:Q([...J.items,...W])})}})});var $z;var Kz=M(()=>{R();$z=Q({is(J){return J.kind==="PartitionByNode"},create(J){return Q({kind:"PartitionByNode",items:Q(J)})},cloneWithItems(J,W){return Q({...J,items:Q([...J.items,...W])})}})});var G9;var JK=M(()=>{R();Y9();Kz();G9=Q({is(J){return J.kind==="OverNode"},create(){return Q({kind:"OverNode"})},cloneWithOrderByItems(J,W){return Q({...J,orderBy:J.orderBy?GW.cloneWithItems(J.orderBy,W):GW.create(W)})},cloneWithPartitionByItems(J,W){return Q({...J,partitionBy:J.partitionBy?$z.cloneWithItems(J.partitionBy,W):$z.create(W)})}})});var kX;var $9=M(()=>{R();kX=Q({is(J){return J.kind==="FromNode"},create(J){return Q({kind:"FromNode",froms:Q(J)})},cloneWithFroms(J,W){return Q({...J,froms:Q([...J.froms,...W])})}})});var wz;var Hz=M(()=>{R();wz=Q({is(J){return J.kind==="GroupByNode"},create(J){return Q({kind:"GroupByNode",items:Q(J)})},cloneWithItems(J,W){return Q({...J,items:Q([...J.items,...W])})}})});var zz;var Nz=M(()=>{R();gW();CX();zz=Q({is(J){return J.kind==="HavingNode"},create(J){return Q({kind:"HavingNode",having:J})},cloneWithOperation(J,W,X){return Q({...J,having:W==="And"?a0.create(J.having,X):i8.create(J.having,X)})}})});var I4;var hX=M(()=>{R();I4=Q({is(J){return J.kind==="InsertQueryNode"},create(J,W,X){return Q({kind:"InsertQueryNode",into:J,...W&&{with:W},replace:X})},createWithoutInto(){return Q({kind:"InsertQueryNode"})},cloneWith(J,W){return Q({...J,...W})}})});var WK;var XK=M(()=>{R();WK=Q({is(J){return J.kind==="ListNode"},create(J){return Q({kind:"ListNode",items:Q(J)})}})});var TJ;var n1=M(()=>{R();$9();XK();TJ=Q({is(J){return J.kind==="UpdateQueryNode"},create(J,W){return Q({kind:"UpdateQueryNode",table:J.length===1?J[0]:WK.create(J),...W&&{with:W}})},createWithoutTable(){return Q({kind:"UpdateQueryNode"})},cloneWithFromItems(J,W){return Q({...J,from:J.from?kX.cloneWithFroms(J.from,W):kX.create(W)})},cloneWithUpdates(J,W){return Q({...J,updates:J.updates?Q([...J.updates,...W]):W})},cloneWithLimit(J,W){return Q({...J,limit:W})}})});var Fz;var Uz=M(()=>{R();Fz=Q({is(J){return J.kind==="UsingNode"},create(J){return Q({kind:"UsingNode",tables:Q(J)})},cloneWithTables(J,W){return Q({...J,tables:Q([...J.tables,...W])})}})});var xW;var K9=M(()=>{R();$9();Uz();h8();xW=Q({is(J){return J.kind==="DeleteQueryNode"},create(J,W){return Q({kind:"DeleteQueryNode",from:kX.create(J),...W&&{with:W}})},cloneWithOrderByItems:(J,W)=>t.cloneWithOrderByItems(J,W),cloneWithoutOrderBy:(J)=>t.cloneWithoutOrderBy(J),cloneWithLimit(J,W){return Q({...J,limit:W})},cloneWithoutLimit(J){return Q({...J,limit:void 0})},cloneWithUsing(J,W){return Q({...J,using:J.using!==void 0?Fz.cloneWithTables(J.using,W):Fz.create(W)})}})});var Q0;var w9=M(()=>{R();gW();CX();Q0=Q({is(J){return J.kind==="WhereNode"},create(J){return Q({kind:"WhereNode",where:J})},cloneWithOperation(J,W,X){return Q({...J,where:W==="And"?a0.create(J.where,X):i8.create(J.where,X)})}})});var Qz;var Zz=M(()=>{R();Qz=Q({is(J){return J.kind==="ReturningNode"},create(J){return Q({kind:"ReturningNode",selections:Q(J)})},cloneWithSelections(J,W){return Q({...J,selections:J.selections?Q([...J.selections,...W]):Q(W)})}})});var _P;var Lz=M(()=>{R();_P=Q({is(J){return J.kind==="ExplainNode"},create(J,W){return Q({kind:"ExplainNode",format:J,options:W})}})});var g8;var gX=M(()=>{R();g8=Q({is(J){return J.kind==="WhenNode"},create(J){return Q({kind:"WhenNode",condition:J})},cloneWithResult(J,W){return Q({...J,result:W})}})});var Z8;var H9=M(()=>{R();gX();Z8=Q({is(J){return J.kind==="MergeQueryNode"},create(J,W){return Q({kind:"MergeQueryNode",into:J,...W&&{with:W}})},cloneWithUsing(J,W){return Q({...J,using:W})},cloneWithWhen(J,W){return Q({...J,whens:J.whens?Q([...J.whens,W]):Q([W])})},cloneWithThen(J,W){return Q({...J,whens:J.whens?Q([...J.whens.slice(0,-1),g8.cloneWithResult(J.whens[J.whens.length-1],W)]):void 0})}})});var Vz;var Dz=M(()=>{R();Vz=Q({is(J){return J.kind==="OutputNode"},create(J){return Q({kind:"OutputNode",selections:Q(J)})},cloneWithSelections(J,W){return Q({...J,selections:J.selections?Q([...J.selections,...W]):Q(W)})}})});var t;var h8=M(()=>{hX();uW();n1();K9();w9();R();Zz();Lz();H9();Dz();Y9();t=Q({is(J){return B6.is(J)||I4.is(J)||TJ.is(J)||xW.is(J)||Z8.is(J)},cloneWithEndModifier(J,W){return Q({...J,endModifiers:J.endModifiers?Q([...J.endModifiers,W]):Q([W])})},cloneWithWhere(J,W){return Q({...J,where:J.where?Q0.cloneWithOperation(J.where,"And",W):Q0.create(W)})},cloneWithJoin(J,W){return Q({...J,joins:J.joins?Q([...J.joins,W]):Q([W])})},cloneWithReturning(J,W){return Q({...J,returning:J.returning?Qz.cloneWithSelections(J.returning,W):Qz.create(W)})},cloneWithoutReturning(J){return Q({...J,returning:void 0})},cloneWithoutWhere(J){return Q({...J,where:void 0})},cloneWithExplain(J,W,X){return Q({...J,explain:_P.create(W,X?.toOperationNode())})},cloneWithTop(J,W){return Q({...J,top:W})},cloneWithOutput(J,W){return Q({...J,output:J.output?Vz.cloneWithSelections(J.output,W):Vz.create(W)})},cloneWithOrderByItems(J,W){return Q({...J,orderBy:J.orderBy?GW.cloneWithItems(J.orderBy,W):GW.create(W)})},cloneWithoutOrderBy(J){return Q({...J,orderBy:void 0})}})});var B6;var uW=M(()=>{R();$9();Hz();Nz();h8();B6=Q({is(J){return J.kind==="SelectQueryNode"},create(J){return Q({kind:"SelectQueryNode",...J&&{with:J}})},createFrom(J,W){return Q({kind:"SelectQueryNode",from:kX.create(J),...W&&{with:W}})},cloneWithSelections(J,W){return Q({...J,selections:J.selections?Q([...J.selections,...W]):Q(W)})},cloneWithDistinctOn(J,W){return Q({...J,distinctOn:J.distinctOn?Q([...J.distinctOn,...W]):Q(W)})},cloneWithFrontModifier(J,W){return Q({...J,frontModifiers:J.frontModifiers?Q([...J.frontModifiers,W]):Q([W])})},cloneWithOrderByItems:(J,W)=>t.cloneWithOrderByItems(J,W),cloneWithGroupByItems(J,W){return Q({...J,groupBy:J.groupBy?wz.cloneWithItems(J.groupBy,W):wz.create(W)})},cloneWithLimit(J,W){return Q({...J,limit:W})},cloneWithOffset(J,W){return Q({...J,offset:W})},cloneWithFetch(J,W){return Q({...J,fetch:W})},cloneWithHaving(J,W){return Q({...J,having:J.having?zz.cloneWithOperation(J.having,"And",W):zz.create(W)})},cloneWithSetOperations(J,W){return Q({...J,setOperations:J.setOperations?Q([...J.setOperations,...W]):Q([...W])})},cloneWithoutSelections(J){return Q({...J,selections:[]})},cloneWithoutLimit(J){return Q({...J,limit:void 0})},cloneWithoutOffset(J){return Q({...J,offset:void 0})},cloneWithoutOrderBy:(J)=>t.cloneWithoutOrderBy(J),cloneWithoutGroupBy(J){return Q({...J,groupBy:void 0})}})});class i1{#J;constructor(J){this.#J=Q(J)}on(...J){return new i1({...this.#J,joinNode:a8.cloneWithOn(this.#J.joinNode,X4(J))})}onRef(J,W,X){return new i1({...this.#J,joinNode:a8.cloneWithOn(this.#J.joinNode,s4(J,W,X))})}onTrue(){return new i1({...this.#J,joinNode:a8.cloneWithOn(this.#J.joinNode,E6.createWithSql("true"))})}$call(J){return J(this)}toOperationNode(){return this.#J.joinNode}}var Mz=M(()=>{f1();k8();Q8();R()});var TP;var Oz=M(()=>{R();TP=Q({is(J){return J.kind==="PartitionByItemNode"},create(J){return Q({kind:"PartitionByItemNode",partitionBy:J})}})});function qP(J){return YW(J).map(TP.create)}var BP=M(()=>{Oz();F0()});class a1{#J;constructor(J){this.#J=Q(J)}orderBy(...J){return new a1({overNode:G9.cloneWithOrderByItems(this.#J.overNode,F8(J))})}clearOrderBy(){return new a1({overNode:t.cloneWithoutOrderBy(this.#J.overNode)})}partitionBy(J){return new a1({overNode:G9.cloneWithPartitionByItems(this.#J.overNode,qP(J))})}$call(J){return J(this)}toOperationNode(){return this.#J.overNode}}var AP=M(()=>{JK();h8();bX();BP();R()});var t1;var Pz=M(()=>{R();r5();sG();t1=Q({is(J){return J.kind==="SelectionNode"},create(J){return Q({kind:"SelectionNode",selection:J})},createSelectAll(){return Q({kind:"SelectionNode",selection:y1.create()})},createSelectAllFromTable(J){return Q({kind:"SelectionNode",selection:x1.createSelectAll(J)})}})});function d4(J){if(f6(J))return d4(J(m8()));else if(t4(J))return J.map((W)=>EP(W));else return[EP(J)]}function EP(J){if(m6(J))return t1.create(PP(J));else if(n5(J))return t1.create(J.toOperationNode());else return t1.create(YK(J))}function e4(J){if(!J)return[t1.createSelectAll()];else if(Array.isArray(J))return J.map(IP);else return[IP(J)]}function IP(J){if(m6(J))return t1.createSelectAllFromTable(I6(J));throw Error(`invalid value selectAll expression: ${JSON.stringify(J)}`)}var cW=M(()=>{R();Pz();F0();eG();s8();Z0();lW()});var RP;var vz=M(()=>{R();RP=Q({is(J){return J.kind==="ValuesNode"},create(J){return Q({kind:"ValuesNode",values:Q(J)})}})});var CP;var jz=M(()=>{R();CP=Q({is(J){return J.kind==="DefaultInsertValueNode"},create(){return Q({kind:"DefaultInsertValueNode"})}})});function GK(J){let W=f6(J)?J(m8()):J,X=t4(W)?W:Q([W]);return Lh(X)}function Lh(J){let W=Vh(J);return[Q([...W.keys()].map(q6.create)),RP.create(J.map((X)=>Dh(X,W)))]}function Vh(J){let W=new Map;for(let X of J){let G=Object.keys(X);for(let Y of G)if(!W.has(Y)&&X[Y]!==void 0)W.set(Y,W.size)}return W}function Dh(J,W){let X=Object.keys(J),G=Array.from({length:W.size}),Y=!1,$=X.length;for(let w of X){let H=W.get(w);if(k0(H)){$--;continue}let z=J[w];if(k0(z)||XW(z))Y=!0;G[H]=z}if($<W.size||Y){let w=CP.create();return e8.create(G.map((H)=>k0(H)?w:i6(H)))}return p1.create(G)}var Sz=M(()=>{T0();W9();yW();R();_J();vz();s8();jz();lW()});var _z;var Tz=M(()=>{R();_z=Q({is(J){return J.kind==="ColumnUpdateNode"},create(J,W){return Q({kind:"ColumnUpdateNode",column:J,value:W})}})});function bP(...J){if(J.length===2)return[_z.create(U0(J[0]),i6(J[1]))];return z9(J[0])}function z9(J){let W=f6(J)?J(m8()):J;return Object.entries(W).filter(([X,G])=>G!==void 0).map(([X,G])=>{return _z.create(q6.create(X),i6(G))})}var $K=M(()=>{T0();Tz();lW();R();_J();F0()});var kP;var qz=M(()=>{R();kP=Q({is(J){return J.kind==="OnDuplicateKeyNode"},create(J){return Q({kind:"OnDuplicateKeyNode",updates:J})}})});class Bz{insertId;numInsertedOrUpdatedRows;constructor(J,W){this.insertId=J,this.numInsertedOrUpdatedRows=W}}function qJ(J){return Object.prototype.hasOwnProperty.call(J,"prototype")}var WJ;var mX=M(()=>{WJ=class WJ extends Error{node;constructor(J){super("no result");this.node=J}}});var g0;var KK=M(()=>{R();w9();g0=Q({is(J){return J.kind==="OnConflictNode"},create(){return Q({kind:"OnConflictNode"})},cloneWith(J,W){return Q({...J,...W})},cloneWithIndexWhere(J,W){return Q({...J,indexWhere:J.indexWhere?Q0.cloneWithOperation(J.indexWhere,"And",W):Q0.create(W)})},cloneWithIndexOrWhere(J,W){return Q({...J,indexWhere:J.indexWhere?Q0.cloneWithOperation(J.indexWhere,"Or",W):Q0.create(W)})},cloneWithUpdateWhere(J,W){return Q({...J,updateWhere:J.updateWhere?Q0.cloneWithOperation(J.updateWhere,"And",W):Q0.create(W)})},cloneWithUpdateOrWhere(J,W){return Q({...J,updateWhere:J.updateWhere?Q0.cloneWithOperation(J.updateWhere,"Or",W):Q0.create(W)})},cloneWithoutIndexWhere(J){return Q({...J,indexWhere:void 0})},cloneWithoutUpdateWhere(J){return Q({...J,updateWhere:void 0})}})});class BJ{#J;constructor(J){this.#J=Q(J)}column(J){let W=q6.create(J);return new BJ({...this.#J,onConflictNode:g0.cloneWith(this.#J.onConflictNode,{columns:this.#J.onConflictNode.columns?Q([...this.#J.onConflictNode.columns,W]):Q([W])})})}columns(J){let W=J.map(q6.create);return new BJ({...this.#J,onConflictNode:g0.cloneWith(this.#J.onConflictNode,{columns:this.#J.onConflictNode.columns?Q([...this.#J.onConflictNode.columns,...W]):Q(W)})})}constraint(J){return new BJ({...this.#J,onConflictNode:g0.cloneWith(this.#J.onConflictNode,{constraint:$6.create(J)})})}expression(J){return new BJ({...this.#J,onConflictNode:g0.cloneWith(this.#J.onConflictNode,{indexExpression:J.toOperationNode()})})}where(...J){return new BJ({...this.#J,onConflictNode:g0.cloneWithIndexWhere(this.#J.onConflictNode,X4(J))})}whereRef(J,W,X){return new BJ({...this.#J,onConflictNode:g0.cloneWithIndexWhere(this.#J.onConflictNode,s4(J,W,X))})}clearWhere(){return new BJ({...this.#J,onConflictNode:g0.cloneWithoutIndexWhere(this.#J.onConflictNode)})}doNothing(){return new hP({...this.#J,onConflictNode:g0.cloneWith(this.#J.onConflictNode,{doNothing:!0})})}doUpdateSet(J){return new N9({...this.#J,onConflictNode:g0.cloneWith(this.#J.onConflictNode,{updates:z9(J)})})}$call(J){return J(this)}}class hP{#J;constructor(J){this.#J=Q(J)}toOperationNode(){return this.#J.onConflictNode}}class N9{#J;constructor(J){this.#J=Q(J)}where(...J){return new N9({...this.#J,onConflictNode:g0.cloneWithUpdateWhere(this.#J.onConflictNode,X4(J))})}whereRef(J,W,X){return new N9({...this.#J,onConflictNode:g0.cloneWithUpdateWhere(this.#J.onConflictNode,s4(J,W,X))})}clearWhere(){return new N9({...this.#J,onConflictNode:g0.cloneWithoutUpdateWhere(this.#J.onConflictNode)})}$call(J){return J(this)}toOperationNode(){return this.#J.onConflictNode}}var Az=M(()=>{T0();W4();KK();Q8();$K();R()});var gP;var Ez=M(()=>{R();gP=Q({is(J){return J.kind==="TopNode"},create(J,W){return Q({kind:"TopNode",expression:J,modifiers:W})}})});function XJ(J,W){if(!d8(J)&&!kW(J))throw Error(`Invalid top expression: ${J}`);if(!k0(W)&&!Mh(W))throw Error(`Invalid top modifiers: ${W}`);return gP.create(J,W)}function Mh(J){return J==="percent"||J==="with ties"||J==="percent with ties"}var o1=M(()=>{Ez();R()});var fX;var Iz=M(()=>{R();fX=Q({is(J){return J.kind==="OrActionNode"},create(J){return Q({kind:"OrActionNode",action:J})}})});class a6{#J;constructor(J){this.#J=Q(J)}values(J){let[W,X]=GK(J);return new a6({...this.#J,queryNode:I4.cloneWith(this.#J.queryNode,{columns:W,values:X})})}columns(J){return new a6({...this.#J,queryNode:I4.cloneWith(this.#J.queryNode,{columns:Q(J.map(q6.create))})})}expression(J){return new a6({...this.#J,queryNode:I4.cloneWith(this.#J.queryNode,{values:t0(J)})})}defaultValues(){return new a6({...this.#J,queryNode:I4.cloneWith(this.#J.queryNode,{defaultValues:!0})})}modifyEnd(J){return new a6({...this.#J,queryNode:t.cloneWithEndModifier(this.#J.queryNode,J.toOperationNode())})}ignore(){return new a6({...this.#J,queryNode:I4.cloneWith(this.#J.queryNode,{orAction:fX.create("ignore")})})}orIgnore(){return new a6({...this.#J,queryNode:I4.cloneWith(this.#J.queryNode,{orAction:fX.create("ignore")})})}orAbort(){return new a6({...this.#J,queryNode:I4.cloneWith(this.#J.queryNode,{orAction:fX.create("abort")})})}orFail(){return new a6({...this.#J,queryNode:I4.cloneWith(this.#J.queryNode,{orAction:fX.create("fail")})})}orReplace(){return new a6({...this.#J,queryNode:I4.cloneWith(this.#J.queryNode,{orAction:fX.create("replace")})})}orRollback(){return new a6({...this.#J,queryNode:I4.cloneWith(this.#J.queryNode,{orAction:fX.create("rollback")})})}top(J,W){return new a6({...this.#J,queryNode:t.cloneWithTop(this.#J.queryNode,XJ(J,W))})}onConflict(J){return new a6({...this.#J,queryNode:I4.cloneWith(this.#J.queryNode,{onConflict:J(new BJ({onConflictNode:g0.create()})).toOperationNode()})})}onDuplicateKeyUpdate(J){return new a6({...this.#J,queryNode:I4.cloneWith(this.#J.queryNode,{onDuplicateKey:kP.create(z9(J))})})}returning(J){return new a6({...this.#J,queryNode:t.cloneWithReturning(this.#J.queryNode,d4(J))})}returningAll(){return new a6({...this.#J,queryNode:t.cloneWithReturning(this.#J.queryNode,e4())})}output(J){return new a6({...this.#J,queryNode:t.cloneWithOutput(this.#J.queryNode,d4(J))})}outputAll(J){return new a6({...this.#J,queryNode:t.cloneWithOutput(this.#J.queryNode,e4(J))})}clearReturning(){return new a6({...this.#J,queryNode:t.cloneWithoutReturning(this.#J.queryNode)})}$call(J){return J(this)}$if(J,W){if(J)return W(this);return new a6({...this.#J})}$castTo(){return new a6(this.#J)}$narrowType(){return new a6(this.#J)}$assertType(){return new a6(this.#J)}withPlugin(J){return new a6({...this.#J,executor:this.#J.executor.withPlugin(J)})}toOperationNode(){return this.#J.executor.transformQuery(this.#J.queryNode,this.#J.queryId)}compile(){return this.#J.executor.compileQuery(this.toOperationNode(),this.#J.queryId)}async execute(){let J=this.compile(),W=await this.#J.executor.executeQuery(J),{adapter:X}=this.#J.executor,G=J.query;if(G.returning&&X.supportsReturning||G.output&&X.supportsOutput)return W.rows;return[new Bz(W.insertId,W.numAffectedRows??BigInt(0))]}async executeTakeFirst(){let[J]=await this.execute();return J}async executeTakeFirstOrThrow(J=WJ){let W=await this.executeTakeFirst();if(W===void 0)throw qJ(J)?new J(this.toOperationNode()):J(this.toOperationNode());return W}async*stream(J=100){let W=this.compile(),X=this.#J.executor.stream(W,J);for await(let G of X)yield*G.rows}async explain(J,W){return await new a6({...this.#J,queryNode:t.cloneWithExplain(this.#J.queryNode,J,W)}).execute()}}var Rz=M(()=>{cW();Sz();hX();h8();$K();R();qz();mX();s8();T0();Az();KK();o1();Iz()});class Cz{numDeletedRows;constructor(J){this.numDeletedRows=J}}var s1;var F9=M(()=>{R();s1=Q({is(J){return J.kind==="LimitNode"},create(J){return Q({kind:"LimitNode",limit:J})}})});class D4{#J;constructor(J){this.#J=Q(J)}where(...J){return new D4({...this.#J,queryNode:t.cloneWithWhere(this.#J.queryNode,X4(J))})}whereRef(J,W,X){return new D4({...this.#J,queryNode:t.cloneWithWhere(this.#J.queryNode,s4(J,W,X))})}clearWhere(){return new D4({...this.#J,queryNode:t.cloneWithoutWhere(this.#J.queryNode)})}top(J,W){return new D4({...this.#J,queryNode:t.cloneWithTop(this.#J.queryNode,XJ(J,W))})}using(J){return new D4({...this.#J,queryNode:xW.cloneWithUsing(this.#J.queryNode,YJ(J))})}innerJoin(...J){return this.#W("InnerJoin",J)}leftJoin(...J){return this.#W("LeftJoin",J)}rightJoin(...J){return this.#W("RightJoin",J)}fullJoin(...J){return this.#W("FullJoin",J)}#W(J,W){return new D4({...this.#J,queryNode:t.cloneWithJoin(this.#J.queryNode,pW(J,W))})}returning(J){return new D4({...this.#J,queryNode:t.cloneWithReturning(this.#J.queryNode,d4(J))})}returningAll(J){return new D4({...this.#J,queryNode:t.cloneWithReturning(this.#J.queryNode,e4(J))})}output(J){return new D4({...this.#J,queryNode:t.cloneWithOutput(this.#J.queryNode,d4(J))})}outputAll(J){return new D4({...this.#J,queryNode:t.cloneWithOutput(this.#J.queryNode,e4(J))})}clearReturning(){return new D4({...this.#J,queryNode:t.cloneWithoutReturning(this.#J.queryNode)})}clearLimit(){return new D4({...this.#J,queryNode:xW.cloneWithoutLimit(this.#J.queryNode)})}orderBy(...J){return new D4({...this.#J,queryNode:t.cloneWithOrderByItems(this.#J.queryNode,F8(J))})}clearOrderBy(){return new D4({...this.#J,queryNode:t.cloneWithoutOrderBy(this.#J.queryNode)})}limit(J){return new D4({...this.#J,queryNode:xW.cloneWithLimit(this.#J.queryNode,s1.create(i6(J)))})}modifyEnd(J){return new D4({...this.#J,queryNode:t.cloneWithEndModifier(this.#J.queryNode,J.toOperationNode())})}$call(J){return J(this)}$if(J,W){if(J)return W(this);return new D4({...this.#J})}$castTo(){return new D4(this.#J)}$narrowType(){return new D4(this.#J)}$assertType(){return new D4(this.#J)}withPlugin(J){return new D4({...this.#J,executor:this.#J.executor.withPlugin(J)})}toOperationNode(){return this.#J.executor.transformQuery(this.#J.queryNode,this.#J.queryId)}compile(){return this.#J.executor.compileQuery(this.toOperationNode(),this.#J.queryId)}async execute(){let J=this.compile(),W=await this.#J.executor.executeQuery(J),{adapter:X}=this.#J.executor,G=J.query;if(G.returning&&X.supportsReturning||G.output&&X.supportsOutput)return W.rows;return[new Cz(W.numAffectedRows??BigInt(0))]}async executeTakeFirst(){let[J]=await this.execute();return J}async executeTakeFirstOrThrow(J=WJ){let W=await this.executeTakeFirst();if(W===void 0)throw qJ(J)?new J(this.toOperationNode()):J(this.toOperationNode());return W}async*stream(J=100){let W=this.compile(),X=this.#J.executor.stream(W,J);for await(let G of X)yield*G.rows}async explain(J,W){return await new D4({...this.#J,queryNode:t.cloneWithExplain(this.#J.queryNode,J,W)}).execute()}}var bz=M(()=>{U9();Z0();cW();h8();R();mX();K9();F9();bX();Q8();_J();o1()});class kz{numUpdatedRows;numChangedRows;constructor(J,W){this.numUpdatedRows=J,this.numChangedRows=W}}class K4{#J;constructor(J){this.#J=Q(J)}where(...J){return new K4({...this.#J,queryNode:t.cloneWithWhere(this.#J.queryNode,X4(J))})}whereRef(J,W,X){return new K4({...this.#J,queryNode:t.cloneWithWhere(this.#J.queryNode,s4(J,W,X))})}clearWhere(){return new K4({...this.#J,queryNode:t.cloneWithoutWhere(this.#J.queryNode)})}top(J,W){return new K4({...this.#J,queryNode:t.cloneWithTop(this.#J.queryNode,XJ(J,W))})}from(J){return new K4({...this.#J,queryNode:TJ.cloneWithFromItems(this.#J.queryNode,YJ(J))})}innerJoin(...J){return this.#W("InnerJoin",J)}leftJoin(...J){return this.#W("LeftJoin",J)}rightJoin(...J){return this.#W("RightJoin",J)}fullJoin(...J){return this.#W("FullJoin",J)}#W(J,W){return new K4({...this.#J,queryNode:t.cloneWithJoin(this.#J.queryNode,pW(J,W))})}orderBy(...J){return new K4({...this.#J,queryNode:t.cloneWithOrderByItems(this.#J.queryNode,F8(J))})}clearOrderBy(){return new K4({...this.#J,queryNode:t.cloneWithoutOrderBy(this.#J.queryNode)})}limit(J){return new K4({...this.#J,queryNode:TJ.cloneWithLimit(this.#J.queryNode,s1.create(i6(J)))})}set(...J){return new K4({...this.#J,queryNode:TJ.cloneWithUpdates(this.#J.queryNode,bP(...J))})}returning(J){return new K4({...this.#J,queryNode:t.cloneWithReturning(this.#J.queryNode,d4(J))})}returningAll(J){return new K4({...this.#J,queryNode:t.cloneWithReturning(this.#J.queryNode,e4(J))})}output(J){return new K4({...this.#J,queryNode:t.cloneWithOutput(this.#J.queryNode,d4(J))})}outputAll(J){return new K4({...this.#J,queryNode:t.cloneWithOutput(this.#J.queryNode,e4(J))})}modifyEnd(J){return new K4({...this.#J,queryNode:t.cloneWithEndModifier(this.#J.queryNode,J.toOperationNode())})}clearReturning(){return new K4({...this.#J,queryNode:t.cloneWithoutReturning(this.#J.queryNode)})}$call(J){return J(this)}$if(J,W){if(J)return W(this);return new K4({...this.#J})}$castTo(){return new K4(this.#J)}$narrowType(){return new K4(this.#J)}$assertType(){return new K4(this.#J)}withPlugin(J){return new K4({...this.#J,executor:this.#J.executor.withPlugin(J)})}toOperationNode(){return this.#J.executor.transformQuery(this.#J.queryNode,this.#J.queryId)}compile(){return this.#J.executor.compileQuery(this.toOperationNode(),this.#J.queryId)}async execute(){let J=this.compile(),W=await this.#J.executor.executeQuery(J),{adapter:X}=this.#J.executor,G=J.query;if(G.returning&&X.supportsReturning||G.output&&X.supportsOutput)return W.rows;return[new kz(W.numAffectedRows??BigInt(0),W.numChangedRows)]}async executeTakeFirst(){let[J]=await this.execute();return J}async executeTakeFirstOrThrow(J=WJ){let W=await this.executeTakeFirst();if(W===void 0)throw qJ(J)?new J(this.toOperationNode()):J(this.toOperationNode());return W}async*stream(J=100){let W=this.compile(),X=this.#J.executor.stream(W,J);for await(let G of X)yield*G.rows}async explain(J,W){return await new K4({...this.#J,queryNode:t.cloneWithExplain(this.#J.queryNode,J,W)}).execute()}}var wK=M(()=>{U9();Z0();cW();h8();n1();$K();R();mX();Q8();_J();F9();o1();bX()});var hz;var gz=M(()=>{R();T0();m1();hz=Q({is(J){return J.kind==="CommonTableExpressionNameNode"},create(J,W){return Q({kind:"CommonTableExpressionNameNode",table:z8.create(J),columns:W?Q(W.map(q6.create)):void 0})}})});var e1;var HK=M(()=>{R();e1=Q({is(J){return J.kind==="CommonTableExpressionNode"},create(J,W){return Q({kind:"CommonTableExpressionNode",name:J,expression:W})},cloneWith(J,W){return Q({...J,...W})}})});class Q9{#J;constructor(J){this.#J=Q(J)}materialized(){return new Q9({...this.#J,node:e1.cloneWith(this.#J.node,{materialized:!0})})}notMaterialized(){return new Q9({...this.#J,node:e1.cloneWith(this.#J.node,{materialized:!1})})}toOperationNode(){return this.#J.node}}var mP=M(()=>{HK();R()});function mz(J,W){let X=W(xP()).toOperationNode();if(f6(J))return J(Oh(X)).toOperationNode();return e1.create(fP(J),X)}function Oh(J){return(W)=>{return new Q9({node:e1.create(fP(W),J)})}}function fP(J){if(J.includes("(")){let W=J.split(/[\(\)]/),X=W[0],G=W[1].split(",").map((Y)=>Y.trim());return hz.create(X,G)}else return hz.create(J)}var yP=M(()=>{gz();zK();R();mP();HK()});var Z9;var fz=M(()=>{R();Z9=Q({is(J){return J.kind==="WithNode"},create(J,W){return Q({kind:"WithNode",expressions:Q([J]),...W})},cloneWithExpression(J,W){return Q({...J,expressions:Q([...J.expressions,W])})}})});function NK(J){let W="";for(let X=0;X<J;++X)W+=Ph();return W}function Ph(){return uP[~~(Math.random()*uP.length)]}var uP;var yz=M(()=>{uP=["A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","0","1","2","3","4","5","6","7","8","9"]});function N6(){return new cP}class cP{#J;get queryId(){if(this.#J===void 0)this.#J=NK(8);return this.#J}}var f8=M(()=>{yz()});function n(J){return J}class GJ{nodeStack=[];#J=Q({AliasNode:this.transformAlias.bind(this),ColumnNode:this.transformColumn.bind(this),IdentifierNode:this.transformIdentifier.bind(this),SchemableIdentifierNode:this.transformSchemableIdentifier.bind(this),RawNode:this.transformRaw.bind(this),ReferenceNode:this.transformReference.bind(this),SelectQueryNode:this.transformSelectQuery.bind(this),SelectionNode:this.transformSelection.bind(this),TableNode:this.transformTable.bind(this),FromNode:this.transformFrom.bind(this),SelectAllNode:this.transformSelectAll.bind(this),AndNode:this.transformAnd.bind(this),OrNode:this.transformOr.bind(this),ValueNode:this.transformValue.bind(this),ValueListNode:this.transformValueList.bind(this),PrimitiveValueListNode:this.transformPrimitiveValueList.bind(this),ParensNode:this.transformParens.bind(this),JoinNode:this.transformJoin.bind(this),OperatorNode:this.transformOperator.bind(this),WhereNode:this.transformWhere.bind(this),InsertQueryNode:this.transformInsertQuery.bind(this),DeleteQueryNode:this.transformDeleteQuery.bind(this),ReturningNode:this.transformReturning.bind(this),CreateTableNode:this.transformCreateTable.bind(this),AddColumnNode:this.transformAddColumn.bind(this),ColumnDefinitionNode:this.transformColumnDefinition.bind(this),DropTableNode:this.transformDropTable.bind(this),DataTypeNode:this.transformDataType.bind(this),OrderByNode:this.transformOrderBy.bind(this),OrderByItemNode:this.transformOrderByItem.bind(this),GroupByNode:this.transformGroupBy.bind(this),GroupByItemNode:this.transformGroupByItem.bind(this),UpdateQueryNode:this.transformUpdateQuery.bind(this),ColumnUpdateNode:this.transformColumnUpdate.bind(this),LimitNode:this.transformLimit.bind(this),OffsetNode:this.transformOffset.bind(this),OnConflictNode:this.transformOnConflict.bind(this),OnDuplicateKeyNode:this.transformOnDuplicateKey.bind(this),CreateIndexNode:this.transformCreateIndex.bind(this),DropIndexNode:this.transformDropIndex.bind(this),ListNode:this.transformList.bind(this),PrimaryKeyConstraintNode:this.transformPrimaryKeyConstraint.bind(this),UniqueConstraintNode:this.transformUniqueConstraint.bind(this),ReferencesNode:this.transformReferences.bind(this),CheckConstraintNode:this.transformCheckConstraint.bind(this),WithNode:this.transformWith.bind(this),CommonTableExpressionNode:this.transformCommonTableExpression.bind(this),CommonTableExpressionNameNode:this.transformCommonTableExpressionName.bind(this),HavingNode:this.transformHaving.bind(this),CreateSchemaNode:this.transformCreateSchema.bind(this),DropSchemaNode:this.transformDropSchema.bind(this),AlterTableNode:this.transformAlterTable.bind(this),DropColumnNode:this.transformDropColumn.bind(this),RenameColumnNode:this.transformRenameColumn.bind(this),AlterColumnNode:this.transformAlterColumn.bind(this),ModifyColumnNode:this.transformModifyColumn.bind(this),AddConstraintNode:this.transformAddConstraint.bind(this),DropConstraintNode:this.transformDropConstraint.bind(this),RenameConstraintNode:this.transformRenameConstraint.bind(this),ForeignKeyConstraintNode:this.transformForeignKeyConstraint.bind(this),CreateViewNode:this.transformCreateView.bind(this),RefreshMaterializedViewNode:this.transformRefreshMaterializedView.bind(this),DropViewNode:this.transformDropView.bind(this),GeneratedNode:this.transformGenerated.bind(this),DefaultValueNode:this.transformDefaultValue.bind(this),OnNode:this.transformOn.bind(this),ValuesNode:this.transformValues.bind(this),SelectModifierNode:this.transformSelectModifier.bind(this),CreateTypeNode:this.transformCreateType.bind(this),DropTypeNode:this.transformDropType.bind(this),ExplainNode:this.transformExplain.bind(this),DefaultInsertValueNode:this.transformDefaultInsertValue.bind(this),AggregateFunctionNode:this.transformAggregateFunction.bind(this),OverNode:this.transformOver.bind(this),PartitionByNode:this.transformPartitionBy.bind(this),PartitionByItemNode:this.transformPartitionByItem.bind(this),SetOperationNode:this.transformSetOperation.bind(this),BinaryOperationNode:this.transformBinaryOperation.bind(this),UnaryOperationNode:this.transformUnaryOperation.bind(this),UsingNode:this.transformUsing.bind(this),FunctionNode:this.transformFunction.bind(this),CaseNode:this.transformCase.bind(this),WhenNode:this.transformWhen.bind(this),JSONReferenceNode:this.transformJSONReference.bind(this),JSONPathNode:this.transformJSONPath.bind(this),JSONPathLegNode:this.transformJSONPathLeg.bind(this),JSONOperatorChainNode:this.transformJSONOperatorChain.bind(this),TupleNode:this.transformTuple.bind(this),MergeQueryNode:this.transformMergeQuery.bind(this),MatchedNode:this.transformMatched.bind(this),AddIndexNode:this.transformAddIndex.bind(this),CastNode:this.transformCast.bind(this),FetchNode:this.transformFetch.bind(this),TopNode:this.transformTop.bind(this),OutputNode:this.transformOutput.bind(this),OrActionNode:this.transformOrAction.bind(this),CollateNode:this.transformCollate.bind(this)});transformNode(J,W){if(!J)return J;this.nodeStack.push(J);let X=this.transformNodeImpl(J,W);return this.nodeStack.pop(),Q(X)}transformNodeImpl(J,W){return this.#J[J.kind](J,W)}transformNodeList(J,W){if(!J)return J;return Q(J.map((X)=>this.transformNode(X,W)))}transformSelectQuery(J,W){return n({kind:"SelectQueryNode",from:this.transformNode(J.from,W),selections:this.transformNodeList(J.selections,W),distinctOn:this.transformNodeList(J.distinctOn,W),joins:this.transformNodeList(J.joins,W),groupBy:this.transformNode(J.groupBy,W),orderBy:this.transformNode(J.orderBy,W),where:this.transformNode(J.where,W),frontModifiers:this.transformNodeList(J.frontModifiers,W),endModifiers:this.transformNodeList(J.endModifiers,W),limit:this.transformNode(J.limit,W),offset:this.transformNode(J.offset,W),with:this.transformNode(J.with,W),having:this.transformNode(J.having,W),explain:this.transformNode(J.explain,W),setOperations:this.transformNodeList(J.setOperations,W),fetch:this.transformNode(J.fetch,W),top:this.transformNode(J.top,W)})}transformSelection(J,W){return n({kind:"SelectionNode",selection:this.transformNode(J.selection,W)})}transformColumn(J,W){return n({kind:"ColumnNode",column:this.transformNode(J.column,W)})}transformAlias(J,W){return n({kind:"AliasNode",node:this.transformNode(J.node,W),alias:this.transformNode(J.alias,W)})}transformTable(J,W){return n({kind:"TableNode",table:this.transformNode(J.table,W)})}transformFrom(J,W){return n({kind:"FromNode",froms:this.transformNodeList(J.froms,W)})}transformReference(J,W){return n({kind:"ReferenceNode",column:this.transformNode(J.column,W),table:this.transformNode(J.table,W)})}transformAnd(J,W){return n({kind:"AndNode",left:this.transformNode(J.left,W),right:this.transformNode(J.right,W)})}transformOr(J,W){return n({kind:"OrNode",left:this.transformNode(J.left,W),right:this.transformNode(J.right,W)})}transformValueList(J,W){return n({kind:"ValueListNode",values:this.transformNodeList(J.values,W)})}transformParens(J,W){return n({kind:"ParensNode",node:this.transformNode(J.node,W)})}transformJoin(J,W){return n({kind:"JoinNode",joinType:J.joinType,table:this.transformNode(J.table,W),on:this.transformNode(J.on,W)})}transformRaw(J,W){return n({kind:"RawNode",sqlFragments:Q([...J.sqlFragments]),parameters:this.transformNodeList(J.parameters,W)})}transformWhere(J,W){return n({kind:"WhereNode",where:this.transformNode(J.where,W)})}transformInsertQuery(J,W){return n({kind:"InsertQueryNode",into:this.transformNode(J.into,W),columns:this.transformNodeList(J.columns,W),values:this.transformNode(J.values,W),returning:this.transformNode(J.returning,W),onConflict:this.transformNode(J.onConflict,W),onDuplicateKey:this.transformNode(J.onDuplicateKey,W),endModifiers:this.transformNodeList(J.endModifiers,W),with:this.transformNode(J.with,W),ignore:J.ignore,orAction:this.transformNode(J.orAction,W),replace:J.replace,explain:this.transformNode(J.explain,W),defaultValues:J.defaultValues,top:this.transformNode(J.top,W),output:this.transformNode(J.output,W)})}transformValues(J,W){return n({kind:"ValuesNode",values:this.transformNodeList(J.values,W)})}transformDeleteQuery(J,W){return n({kind:"DeleteQueryNode",from:this.transformNode(J.from,W),using:this.transformNode(J.using,W),joins:this.transformNodeList(J.joins,W),where:this.transformNode(J.where,W),returning:this.transformNode(J.returning,W),endModifiers:this.transformNodeList(J.endModifiers,W),with:this.transformNode(J.with,W),orderBy:this.transformNode(J.orderBy,W),limit:this.transformNode(J.limit,W),explain:this.transformNode(J.explain,W),top:this.transformNode(J.top,W),output:this.transformNode(J.output,W)})}transformReturning(J,W){return n({kind:"ReturningNode",selections:this.transformNodeList(J.selections,W)})}transformCreateTable(J,W){return n({kind:"CreateTableNode",table:this.transformNode(J.table,W),columns:this.transformNodeList(J.columns,W),constraints:this.transformNodeList(J.constraints,W),temporary:J.temporary,ifNotExists:J.ifNotExists,onCommit:J.onCommit,frontModifiers:this.transformNodeList(J.frontModifiers,W),endModifiers:this.transformNodeList(J.endModifiers,W),selectQuery:this.transformNode(J.selectQuery,W)})}transformColumnDefinition(J,W){return n({kind:"ColumnDefinitionNode",column:this.transformNode(J.column,W),dataType:this.transformNode(J.dataType,W),references:this.transformNode(J.references,W),primaryKey:J.primaryKey,autoIncrement:J.autoIncrement,unique:J.unique,notNull:J.notNull,unsigned:J.unsigned,defaultTo:this.transformNode(J.defaultTo,W),check:this.transformNode(J.check,W),generated:this.transformNode(J.generated,W),frontModifiers:this.transformNodeList(J.frontModifiers,W),endModifiers:this.transformNodeList(J.endModifiers,W),nullsNotDistinct:J.nullsNotDistinct,identity:J.identity,ifNotExists:J.ifNotExists})}transformAddColumn(J,W){return n({kind:"AddColumnNode",column:this.transformNode(J.column,W)})}transformDropTable(J,W){return n({kind:"DropTableNode",table:this.transformNode(J.table,W),ifExists:J.ifExists,cascade:J.cascade})}transformOrderBy(J,W){return n({kind:"OrderByNode",items:this.transformNodeList(J.items,W)})}transformOrderByItem(J,W){return n({kind:"OrderByItemNode",orderBy:this.transformNode(J.orderBy,W),direction:this.transformNode(J.direction,W),collation:this.transformNode(J.collation,W),nulls:J.nulls})}transformGroupBy(J,W){return n({kind:"GroupByNode",items:this.transformNodeList(J.items,W)})}transformGroupByItem(J,W){return n({kind:"GroupByItemNode",groupBy:this.transformNode(J.groupBy,W)})}transformUpdateQuery(J,W){return n({kind:"UpdateQueryNode",table:this.transformNode(J.table,W),from:this.transformNode(J.from,W),joins:this.transformNodeList(J.joins,W),where:this.transformNode(J.where,W),updates:this.transformNodeList(J.updates,W),returning:this.transformNode(J.returning,W),endModifiers:this.transformNodeList(J.endModifiers,W),with:this.transformNode(J.with,W),explain:this.transformNode(J.explain,W),limit:this.transformNode(J.limit,W),top:this.transformNode(J.top,W),output:this.transformNode(J.output,W),orderBy:this.transformNode(J.orderBy,W)})}transformColumnUpdate(J,W){return n({kind:"ColumnUpdateNode",column:this.transformNode(J.column,W),value:this.transformNode(J.value,W)})}transformLimit(J,W){return n({kind:"LimitNode",limit:this.transformNode(J.limit,W)})}transformOffset(J,W){return n({kind:"OffsetNode",offset:this.transformNode(J.offset,W)})}transformOnConflict(J,W){return n({kind:"OnConflictNode",columns:this.transformNodeList(J.columns,W),constraint:this.transformNode(J.constraint,W),indexExpression:this.transformNode(J.indexExpression,W),indexWhere:this.transformNode(J.indexWhere,W),updates:this.transformNodeList(J.updates,W),updateWhere:this.transformNode(J.updateWhere,W),doNothing:J.doNothing})}transformOnDuplicateKey(J,W){return n({kind:"OnDuplicateKeyNode",updates:this.transformNodeList(J.updates,W)})}transformCreateIndex(J,W){return n({kind:"CreateIndexNode",name:this.transformNode(J.name,W),table:this.transformNode(J.table,W),columns:this.transformNodeList(J.columns,W),unique:J.unique,using:this.transformNode(J.using,W),ifNotExists:J.ifNotExists,where:this.transformNode(J.where,W),nullsNotDistinct:J.nullsNotDistinct})}transformList(J,W){return n({kind:"ListNode",items:this.transformNodeList(J.items,W)})}transformDropIndex(J,W){return n({kind:"DropIndexNode",name:this.transformNode(J.name,W),table:this.transformNode(J.table,W),ifExists:J.ifExists,cascade:J.cascade})}transformPrimaryKeyConstraint(J,W){return n({kind:"PrimaryKeyConstraintNode",columns:this.transformNodeList(J.columns,W),name:this.transformNode(J.name,W),deferrable:J.deferrable,initiallyDeferred:J.initiallyDeferred})}transformUniqueConstraint(J,W){return n({kind:"UniqueConstraintNode",columns:this.transformNodeList(J.columns,W),name:this.transformNode(J.name,W),nullsNotDistinct:J.nullsNotDistinct,deferrable:J.deferrable,initiallyDeferred:J.initiallyDeferred})}transformForeignKeyConstraint(J,W){return n({kind:"ForeignKeyConstraintNode",columns:this.transformNodeList(J.columns,W),references:this.transformNode(J.references,W),name:this.transformNode(J.name,W),onDelete:J.onDelete,onUpdate:J.onUpdate,deferrable:J.deferrable,initiallyDeferred:J.initiallyDeferred})}transformSetOperation(J,W){return n({kind:"SetOperationNode",operator:J.operator,expression:this.transformNode(J.expression,W),all:J.all})}transformReferences(J,W){return n({kind:"ReferencesNode",table:this.transformNode(J.table,W),columns:this.transformNodeList(J.columns,W),onDelete:J.onDelete,onUpdate:J.onUpdate})}transformCheckConstraint(J,W){return n({kind:"CheckConstraintNode",expression:this.transformNode(J.expression,W),name:this.transformNode(J.name,W)})}transformWith(J,W){return n({kind:"WithNode",expressions:this.transformNodeList(J.expressions,W),recursive:J.recursive})}transformCommonTableExpression(J,W){return n({kind:"CommonTableExpressionNode",name:this.transformNode(J.name,W),materialized:J.materialized,expression:this.transformNode(J.expression,W)})}transformCommonTableExpressionName(J,W){return n({kind:"CommonTableExpressionNameNode",table:this.transformNode(J.table,W),columns:this.transformNodeList(J.columns,W)})}transformHaving(J,W){return n({kind:"HavingNode",having:this.transformNode(J.having,W)})}transformCreateSchema(J,W){return n({kind:"CreateSchemaNode",schema:this.transformNode(J.schema,W),ifNotExists:J.ifNotExists})}transformDropSchema(J,W){return n({kind:"DropSchemaNode",schema:this.transformNode(J.schema,W),ifExists:J.ifExists,cascade:J.cascade})}transformAlterTable(J,W){return n({kind:"AlterTableNode",table:this.transformNode(J.table,W),renameTo:this.transformNode(J.renameTo,W),setSchema:this.transformNode(J.setSchema,W),columnAlterations:this.transformNodeList(J.columnAlterations,W),addConstraint:this.transformNode(J.addConstraint,W),dropConstraint:this.transformNode(J.dropConstraint,W),renameConstraint:this.transformNode(J.renameConstraint,W),addIndex:this.transformNode(J.addIndex,W),dropIndex:this.transformNode(J.dropIndex,W)})}transformDropColumn(J,W){return n({kind:"DropColumnNode",column:this.transformNode(J.column,W)})}transformRenameColumn(J,W){return n({kind:"RenameColumnNode",column:this.transformNode(J.column,W),renameTo:this.transformNode(J.renameTo,W)})}transformAlterColumn(J,W){return n({kind:"AlterColumnNode",column:this.transformNode(J.column,W),dataType:this.transformNode(J.dataType,W),dataTypeExpression:this.transformNode(J.dataTypeExpression,W),setDefault:this.transformNode(J.setDefault,W),dropDefault:J.dropDefault,setNotNull:J.setNotNull,dropNotNull:J.dropNotNull})}transformModifyColumn(J,W){return n({kind:"ModifyColumnNode",column:this.transformNode(J.column,W)})}transformAddConstraint(J,W){return n({kind:"AddConstraintNode",constraint:this.transformNode(J.constraint,W)})}transformDropConstraint(J,W){return n({kind:"DropConstraintNode",constraintName:this.transformNode(J.constraintName,W),ifExists:J.ifExists,modifier:J.modifier})}transformRenameConstraint(J,W){return n({kind:"RenameConstraintNode",oldName:this.transformNode(J.oldName,W),newName:this.transformNode(J.newName,W)})}transformCreateView(J,W){return n({kind:"CreateViewNode",name:this.transformNode(J.name,W),temporary:J.temporary,orReplace:J.orReplace,ifNotExists:J.ifNotExists,materialized:J.materialized,columns:this.transformNodeList(J.columns,W),as:this.transformNode(J.as,W)})}transformRefreshMaterializedView(J,W){return n({kind:"RefreshMaterializedViewNode",name:this.transformNode(J.name,W),concurrently:J.concurrently,withNoData:J.withNoData})}transformDropView(J,W){return n({kind:"DropViewNode",name:this.transformNode(J.name,W),ifExists:J.ifExists,materialized:J.materialized,cascade:J.cascade})}transformGenerated(J,W){return n({kind:"GeneratedNode",byDefault:J.byDefault,always:J.always,identity:J.identity,stored:J.stored,expression:this.transformNode(J.expression,W)})}transformDefaultValue(J,W){return n({kind:"DefaultValueNode",defaultValue:this.transformNode(J.defaultValue,W)})}transformOn(J,W){return n({kind:"OnNode",on:this.transformNode(J.on,W)})}transformSelectModifier(J,W){return n({kind:"SelectModifierNode",modifier:J.modifier,rawModifier:this.transformNode(J.rawModifier,W),of:this.transformNodeList(J.of,W)})}transformCreateType(J,W){return n({kind:"CreateTypeNode",name:this.transformNode(J.name,W),enum:this.transformNode(J.enum,W)})}transformDropType(J,W){return n({kind:"DropTypeNode",name:this.transformNode(J.name,W),ifExists:J.ifExists})}transformExplain(J,W){return n({kind:"ExplainNode",format:J.format,options:this.transformNode(J.options,W)})}transformSchemableIdentifier(J,W){return n({kind:"SchemableIdentifierNode",schema:this.transformNode(J.schema,W),identifier:this.transformNode(J.identifier,W)})}transformAggregateFunction(J,W){return n({kind:"AggregateFunctionNode",func:J.func,aggregated:this.transformNodeList(J.aggregated,W),distinct:J.distinct,orderBy:this.transformNode(J.orderBy,W),withinGroup:this.transformNode(J.withinGroup,W),filter:this.transformNode(J.filter,W),over:this.transformNode(J.over,W)})}transformOver(J,W){return n({kind:"OverNode",orderBy:this.transformNode(J.orderBy,W),partitionBy:this.transformNode(J.partitionBy,W)})}transformPartitionBy(J,W){return n({kind:"PartitionByNode",items:this.transformNodeList(J.items,W)})}transformPartitionByItem(J,W){return n({kind:"PartitionByItemNode",partitionBy:this.transformNode(J.partitionBy,W)})}transformBinaryOperation(J,W){return n({kind:"BinaryOperationNode",leftOperand:this.transformNode(J.leftOperand,W),operator:this.transformNode(J.operator,W),rightOperand:this.transformNode(J.rightOperand,W)})}transformUnaryOperation(J,W){return n({kind:"UnaryOperationNode",operator:this.transformNode(J.operator,W),operand:this.transformNode(J.operand,W)})}transformUsing(J,W){return n({kind:"UsingNode",tables:this.transformNodeList(J.tables,W)})}transformFunction(J,W){return n({kind:"FunctionNode",func:J.func,arguments:this.transformNodeList(J.arguments,W)})}transformCase(J,W){return n({kind:"CaseNode",value:this.transformNode(J.value,W),when:this.transformNodeList(J.when,W),else:this.transformNode(J.else,W),isStatement:J.isStatement})}transformWhen(J,W){return n({kind:"WhenNode",condition:this.transformNode(J.condition,W),result:this.transformNode(J.result,W)})}transformJSONReference(J,W){return n({kind:"JSONReferenceNode",reference:this.transformNode(J.reference,W),traversal:this.transformNode(J.traversal,W)})}transformJSONPath(J,W){return n({kind:"JSONPathNode",inOperator:this.transformNode(J.inOperator,W),pathLegs:this.transformNodeList(J.pathLegs,W)})}transformJSONPathLeg(J,W){return n({kind:"JSONPathLegNode",type:J.type,value:J.value})}transformJSONOperatorChain(J,W){return n({kind:"JSONOperatorChainNode",operator:this.transformNode(J.operator,W),values:this.transformNodeList(J.values,W)})}transformTuple(J,W){return n({kind:"TupleNode",values:this.transformNodeList(J.values,W)})}transformMergeQuery(J,W){return n({kind:"MergeQueryNode",into:this.transformNode(J.into,W),using:this.transformNode(J.using,W),whens:this.transformNodeList(J.whens,W),with:this.transformNode(J.with,W),top:this.transformNode(J.top,W),endModifiers:this.transformNodeList(J.endModifiers,W),output:this.transformNode(J.output,W),returning:this.transformNode(J.returning,W)})}transformMatched(J,W){return n({kind:"MatchedNode",not:J.not,bySource:J.bySource})}transformAddIndex(J,W){return n({kind:"AddIndexNode",name:this.transformNode(J.name,W),columns:this.transformNodeList(J.columns,W),unique:J.unique,using:this.transformNode(J.using,W),ifNotExists:J.ifNotExists})}transformCast(J,W){return n({kind:"CastNode",expression:this.transformNode(J.expression,W),dataType:this.transformNode(J.dataType,W)})}transformFetch(J,W){return n({kind:"FetchNode",rowCount:this.transformNode(J.rowCount,W),modifier:J.modifier})}transformTop(J,W){return n({kind:"TopNode",expression:J.expression,modifiers:J.modifiers})}transformOutput(J,W){return n({kind:"OutputNode",selections:this.transformNodeList(J.selections,W)})}transformDataType(J,W){return J}transformSelectAll(J,W){return J}transformIdentifier(J,W){return J}transformValue(J,W){return J}transformPrimitiveValueList(J,W){return J}transformOperator(J,W){return J}transformDefaultInsertValue(J,W){return J}transformOrAction(J,W){return J}transformCollate(J,W){return J}}var yX=M(()=>{R()});var vh,jh,xz;var lP=M(()=>{n8();W4();f1();XK();yX();eJ();m1();R();vh=Q({AlterTableNode:!0,CreateIndexNode:!0,CreateSchemaNode:!0,CreateTableNode:!0,CreateTypeNode:!0,CreateViewNode:!0,RefreshMaterializedViewNode:!0,DeleteQueryNode:!0,DropIndexNode:!0,DropSchemaNode:!0,DropTableNode:!0,DropTypeNode:!0,DropViewNode:!0,InsertQueryNode:!0,RawNode:!0,SelectQueryNode:!0,UpdateQueryNode:!0,MergeQueryNode:!0}),jh={json_agg:!0,to_json:!0};xz=class xz extends GJ{#J;#W=new Set;#X=new Set;constructor(J){super();this.#J=J}transformNodeImpl(J,W){if(!this.#G(J))return super.transformNodeImpl(J,W);let X=this.#K(J);for(let $ of X)this.#X.add($);let G=this.#w(J);for(let $ of G)this.#W.add($);let Y=super.transformNodeImpl(J,W);for(let $ of G)this.#W.delete($);for(let $ of X)this.#X.delete($);return Y}transformSchemableIdentifier(J,W){let X=super.transformSchemableIdentifier(J,W);if(X.schema||!this.#W.has(J.identifier.name))return X;return{...X,schema:$6.create(this.#J)}}transformReferences(J,W){let X=super.transformReferences(J,W);if(X.table.table.schema)return X;return{...X,table:z8.createWithSchema(this.#J,X.table.table.identifier.name)}}transformAggregateFunction(J,W){return{...super.transformAggregateFunction({...J,aggregated:[]},W),aggregated:this.#Y(J,W,"aggregated")}}transformFunction(J,W){return{...super.transformFunction({...J,arguments:[]},W),arguments:this.#Y(J,W,"arguments")}}#Y(J,W,X){return jh[J.func]?J[X].map((G)=>!z8.is(G)||G.table.schema?this.transformNode(G,W):{...G,table:this.transformIdentifier(G.table.identifier,W)}):this.transformNodeList(J[X],W)}#G(J){return J.kind in vh}#w(J){let W=new Set;if("name"in J&&J.name&&S0.is(J.name))this.#H(J.name,W);if("from"in J&&J.from)for(let X of J.from.froms)this.#$(X,W);if("into"in J&&J.into)this.#$(J.into,W);if("table"in J&&J.table)this.#$(J.table,W);if("joins"in J&&J.joins)for(let X of J.joins)this.#$(X.table,W);if("using"in J&&J.using)if(a8.is(J.using))this.#$(J.using.table,W);else this.#$(J.using,W);return W}#K(J){let W=new Set;if("with"in J&&J.with)this.#z(J.with,W);return W}#$(J,W){if(z8.is(J))this.#H(J.table,W);else if(o4.is(J)&&z8.is(J.node))this.#H(J.node.table,W);else if(WK.is(J))for(let X of J.items)this.#$(X,W)}#H(J,W){let X=J.identifier.name;if(!this.#W.has(X)&&!this.#X.has(X))W.add(X)}#z(J,W){for(let X of J.expressions){let G=X.name.table.table.identifier.name;if(!this.#X.has(G))W.add(G)}}}});class L8{#J;constructor(J){this.#J=new xz(J)}transformQuery(J){return this.#J.transformNode(J.node,J.queryId)}async transformResult(J){return J.result}}var xX=M(()=>{lP()});var pP;var uz=M(()=>{R();pP=Q({is(J){return J.kind==="MatchedNode"},create(J,W=!1){return Q({kind:"MatchedNode",not:J,bySource:W})}})});function cz(J,W,X){return g8.create(r1([pP.create(!J.isMatched,J.bySource),...W&&W.length>0?[W.length===3&&X?s4(W[0],W[1],W[2]):X4(W)]:[]],"and",!1))}function JY(J){if(m6(J))return E6.create([J],[]);if($4(J))return J.toOperationNode();return J}var dP=M(()=>{uz();i0();k8();gX();R();Q8()});class dW{#J;#W;#X;constructor(){this.#J=new Promise((J,W)=>{this.#X=W,this.#W=J})}get promise(){return this.#J}resolve=(J)=>{if(this.#W)this.#W(J)};reject=(J)=>{if(this.#X)this.#X(J)}}async function FK(J){let W=new dW,X=new dW;return J.provideConnection(async(G)=>{return W.resolve(G),await X.promise}).catch((G)=>W.reject(G)),Q({connection:await W.promise,release:X.resolve})}var lz=M(()=>{R()});class L9{#J;constructor(J=Sh){this.#J=J}get plugins(){return this.#J}transformQuery(J,W){for(let X of this.#J){let G=X.transformQuery({node:J,queryId:W});if(G.kind===J.kind)J=G;else throw Error(["KyselyPlugin.transformQuery must return a node","of the same kind that was given to it.",`The plugin was given a ${J.kind}`,`but it returned a ${G.kind}`].join(" "))}return J}async executeQuery(J){return await this.provideConnection(async(W)=>{let X=await W.executeQuery(J);if("numUpdatedOrDeletedRows"in X)o8("kysely:warning: outdated driver/plugin detected! `QueryResult.numUpdatedOrDeletedRows` has been replaced with `QueryResult.numAffectedRows`.");return await this.#W(X,J.queryId)})}async*stream(J,W){let{connection:X,release:G}=await FK(this);try{for await(let Y of X.streamQuery(J,W))yield await this.#W(Y,J.queryId)}finally{G()}}async#W(J,W){for(let X of this.#J)J=await X.transformResult({result:J,queryId:W});return J}}var Sh;var pz=M(()=>{R();lz();u1();Sh=Q([])});var WY,rW;var XY=M(()=>{pz();WY=class WY extends L9{get adapter(){throw Error("this query cannot be compiled to SQL")}compileQuery(){throw Error("this query cannot be compiled to SQL")}provideConnection(){throw Error("this query cannot be executed")}withConnectionProvider(){throw Error("this query cannot have a connection provider")}withPlugin(J){return new WY([...this.plugins,J])}withPlugins(J){return new WY([...this.plugins,...J])}withPluginAtFront(J){return new WY([J,...this.plugins])}withoutPlugins(){return new WY([])}};rW=new WY});class dz{numChangedRows;constructor(J){this.numChangedRows=J}}class $W{#J;constructor(J){this.#J=Q(J)}modifyEnd(J){return new $W({...this.#J,queryNode:t.cloneWithEndModifier(this.#J.queryNode,J.toOperationNode())})}top(J,W){return new $W({...this.#J,queryNode:t.cloneWithTop(this.#J.queryNode,XJ(J,W))})}using(...J){return new o0({...this.#J,queryNode:Z8.cloneWithUsing(this.#J.queryNode,pW("Using",J))})}returning(J){return new $W({...this.#J,queryNode:t.cloneWithReturning(this.#J.queryNode,d4(J))})}returningAll(J){return new $W({...this.#J,queryNode:t.cloneWithReturning(this.#J.queryNode,e4(J))})}output(J){return new $W({...this.#J,queryNode:t.cloneWithOutput(this.#J.queryNode,d4(J))})}outputAll(J){return new $W({...this.#J,queryNode:t.cloneWithOutput(this.#J.queryNode,e4(J))})}}class o0{#J;constructor(J){this.#J=Q(J)}modifyEnd(J){return new o0({...this.#J,queryNode:t.cloneWithEndModifier(this.#J.queryNode,J.toOperationNode())})}top(J,W){return new o0({...this.#J,queryNode:t.cloneWithTop(this.#J.queryNode,XJ(J,W))})}whenMatched(){return this.#W([])}whenMatchedAnd(...J){return this.#W(J)}whenMatchedAndRef(J,W,X){return this.#W([J,W,X],!0)}#W(J,W){return new rz({...this.#J,queryNode:Z8.cloneWithWhen(this.#J.queryNode,cz({isMatched:!0},J,W))})}whenNotMatched(){return this.#X([])}whenNotMatchedAnd(...J){return this.#X(J)}whenNotMatchedAndRef(J,W,X){return this.#X([J,W,X],!0)}whenNotMatchedBySource(){return this.#X([],!1,!0)}whenNotMatchedBySourceAnd(...J){return this.#X(J,!1,!0)}whenNotMatchedBySourceAndRef(J,W,X){return this.#X([J,W,X],!0,!0)}returning(J){return new o0({...this.#J,queryNode:t.cloneWithReturning(this.#J.queryNode,d4(J))})}returningAll(J){return new o0({...this.#J,queryNode:t.cloneWithReturning(this.#J.queryNode,e4(J))})}output(J){return new o0({...this.#J,queryNode:t.cloneWithOutput(this.#J.queryNode,d4(J))})}outputAll(J){return new o0({...this.#J,queryNode:t.cloneWithOutput(this.#J.queryNode,e4(J))})}#X(J,W=!1,X=!1){let G={...this.#J,queryNode:Z8.cloneWithWhen(this.#J.queryNode,cz({isMatched:!1,bySource:X},J,W))};return new(X?rz:rP)(G)}$call(J){return J(this)}$if(J,W){if(J)return W(this);return new o0({...this.#J})}toOperationNode(){return this.#J.executor.transformQuery(this.#J.queryNode,this.#J.queryId)}compile(){return this.#J.executor.compileQuery(this.toOperationNode(),this.#J.queryId)}async execute(){let J=this.compile(),W=await this.#J.executor.executeQuery(J),{adapter:X}=this.#J.executor,G=J.query;if(G.returning&&X.supportsReturning||G.output&&X.supportsOutput)return W.rows;return[new dz(W.numAffectedRows)]}async executeTakeFirst(){let[J]=await this.execute();return J}async executeTakeFirstOrThrow(J=WJ){let W=await this.executeTakeFirst();if(W===void 0)throw qJ(J)?new J(this.toOperationNode()):J(this.toOperationNode());return W}}class rz{#J;constructor(J){this.#J=Q(J)}thenDelete(){return new o0({...this.#J,queryNode:Z8.cloneWithThen(this.#J.queryNode,JY("delete"))})}thenDoNothing(){return new o0({...this.#J,queryNode:Z8.cloneWithThen(this.#J.queryNode,JY("do nothing"))})}thenUpdate(J){return new o0({...this.#J,queryNode:Z8.cloneWithThen(this.#J.queryNode,JY(J(new K4({queryId:this.#J.queryId,executor:rW,queryNode:TJ.createWithoutTable()}))))})}thenUpdateSet(...J){return this.thenUpdate((W)=>W.set(...J))}}class rP{#J;constructor(J){this.#J=Q(J)}thenDoNothing(){return new o0({...this.#J,queryNode:Z8.cloneWithThen(this.#J.queryNode,JY("do nothing"))})}thenInsertValues(J){let[W,X]=GK(J);return new o0({...this.#J,queryNode:Z8.cloneWithThen(this.#J.queryNode,JY(I4.cloneWith(I4.createWithoutInto(),{columns:W,values:X})))})}}var nz=M(()=>{hX();H9();h8();n1();Sz();U9();dP();cW();o1();XY();R();mX();wK()});class AJ{#J;constructor(J){this.#J=Q(J)}selectFrom(J){return YY({queryId:N6(),executor:this.#J.executor,queryNode:B6.createFrom(YJ(J),this.#J.withNode)})}selectNoFrom(J){return YY({queryId:N6(),executor:this.#J.executor,queryNode:B6.cloneWithSelections(B6.create(this.#J.withNode),d4(J))})}insertInto(J){return new a6({queryId:N6(),executor:this.#J.executor,queryNode:I4.create(I6(J),this.#J.withNode)})}replaceInto(J){return new a6({queryId:N6(),executor:this.#J.executor,queryNode:I4.create(I6(J),this.#J.withNode,!0)})}deleteFrom(J){return new D4({queryId:N6(),executor:this.#J.executor,queryNode:xW.create(YJ(J),this.#J.withNode)})}updateTable(J){return new K4({queryId:N6(),executor:this.#J.executor,queryNode:TJ.create(YJ(J),this.#J.withNode)})}mergeInto(J){return new $W({queryId:N6(),executor:this.#J.executor,queryNode:Z8.create(iz(J),this.#J.withNode)})}with(J,W){let X=mz(J,W);return new AJ({...this.#J,withNode:this.#J.withNode?Z9.cloneWithExpression(this.#J.withNode,X):Z9.create(X)})}withRecursive(J,W){let X=mz(J,W);return new AJ({...this.#J,withNode:this.#J.withNode?Z9.cloneWithExpression(this.#J.withNode,X):Z9.create(X,{recursive:!0})})}withPlugin(J){return new AJ({...this.#J,executor:this.#J.executor.withPlugin(J)})}withoutPlugins(){return new AJ({...this.#J,executor:this.#J.executor.withoutPlugins()})}withSchema(J){return new AJ({...this.#J,executor:this.#J.executor.withPluginAtFront(new L8(J))})}}var UK=M(()=>{V9();Rz();bz();wK();K9();hX();uW();n1();Z0();yP();fz();f8();xX();R();cW();nz();H9()});function xP(){return new AJ({executor:rW})}function nP(J,W){return new i1({joinNode:a8.create(J,uX(W))})}function iP(){return new a1({overNode:G9.create()})}var zK=M(()=>{f1();JK();uW();Mz();AP();V9();UK();XY();f8();Z0()});function pW(J,W){if(W.length===3)return Th(J,W[0],W[1],W[2]);else if(W.length===2)return _h(J,W[0],W[1]);else if(W.length===1)return qh(J,W[0]);else throw Error("not implemented")}function _h(J,W,X){return X(nP(J,W)).toOperationNode()}function Th(J,W,X,G){return a8.createWithOn(J,uX(W),s4(X,"=",G))}function qh(J,W){return a8.create(J,uX(W))}var U9=M(()=>{f1();Q8();zK();Z0()});var aP;var az=M(()=>{R();aP=Q({is(J){return J.kind==="OffsetNode"},create(J){return Q({kind:"OffsetNode",offset:J})}})});var tP;var tz=M(()=>{R();tP=Q({is(J){return J.kind==="GroupByItemNode"},create(J){return Q({kind:"GroupByItemNode",groupBy:J})}})});function oP(J){return J=f6(J)?J(m8()):J,YW(J).map(tP.create)}var sP=M(()=>{tz();lW();R();F0()});var QK;var ZK=M(()=>{R();QK=Q({is(J){return J.kind==="SetOperationNode"},create(J,W,X){return Q({kind:"SetOperationNode",operator:J,expression:W,all:X})}})});function cX(J,W,X){if(f6(W))W=W(LK());if(!t4(W))W=[W];return W.map((G)=>QK.create(J,t0(G),X))}var eP=M(()=>{lW();ZK();R();s8()});class y6{#J;constructor(J){this.#J=J}get expressionType(){return}as(J){return new MK(this,J)}or(...J){return new VK(i8.create(this.#J,X4(J)))}and(...J){return new DK(a0.create(this.#J,X4(J)))}$castTo(){return new y6(this.#J)}$notNull(){return new y6(this.#J)}toOperationNode(){return this.#J}}class MK{#J;#W;constructor(J,W){this.#J=J,this.#W=W}get expression(){return this.#J}get alias(){return this.#W}toOperationNode(){return o4.create(this.#J.toOperationNode(),$4(this.#W)?this.#W.toOperationNode():$6.create(this.#W))}}class VK{#J;constructor(J){this.#J=J}get expressionType(){return}as(J){return new MK(this,J)}or(...J){return new VK(i8.create(this.#J,X4(J)))}$castTo(){return new VK(this.#J)}toOperationNode(){return U8.create(this.#J)}}class DK{#J;constructor(J){this.#J=J}get expressionType(){return}as(J){return new MK(this,J)}and(...J){return new DK(a0.create(this.#J,X4(J)))}$castTo(){return new DK(this.#J)}toOperationNode(){return U8.create(this.#J)}}var GY=M(()=>{n8();gW();W4();i0();CX();d1();Q8()});var Jv;var oz=M(()=>{JJ();Jv={is(J){return J.kind==="FetchNode"},create(J,W){return{kind:"FetchNode",rowCount:g4.create(J),modifier:W}}}});function Wv(J,W){if(!d8(J)&&!kW(J))throw Error(`Invalid fetch row count: ${J}`);if(!Bh(W))throw Error(`Invalid fetch modifier: ${W}`);return Jv.create(J,W)}function Bh(J){return J==="only"||J==="with ties"}var Xv=M(()=>{oz();R()});class D6{#J;constructor(J){this.#J=Q(J)}get expressionType(){return}get isSelectQueryBuilder(){return!0}where(...J){return new D6({...this.#J,queryNode:t.cloneWithWhere(this.#J.queryNode,X4(J))})}whereRef(J,W,X){return new D6({...this.#J,queryNode:t.cloneWithWhere(this.#J.queryNode,s4(J,W,X))})}having(...J){return new D6({...this.#J,queryNode:B6.cloneWithHaving(this.#J.queryNode,X4(J))})}havingRef(J,W,X){return new D6({...this.#J,queryNode:B6.cloneWithHaving(this.#J.queryNode,s4(J,W,X))})}select(J){return new D6({...this.#J,queryNode:B6.cloneWithSelections(this.#J.queryNode,d4(J))})}distinctOn(J){return new D6({...this.#J,queryNode:B6.cloneWithDistinctOn(this.#J.queryNode,YW(J))})}modifyFront(J){return new D6({...this.#J,queryNode:B6.cloneWithFrontModifier(this.#J.queryNode,SJ.createWithExpression(J.toOperationNode()))})}modifyEnd(J){return new D6({...this.#J,queryNode:t.cloneWithEndModifier(this.#J.queryNode,SJ.createWithExpression(J.toOperationNode()))})}distinct(){return new D6({...this.#J,queryNode:B6.cloneWithFrontModifier(this.#J.queryNode,SJ.create("Distinct"))})}forUpdate(J){return new D6({...this.#J,queryNode:t.cloneWithEndModifier(this.#J.queryNode,SJ.create("ForUpdate",J?nG(J).map(I6):void 0))})}forShare(J){return new D6({...this.#J,queryNode:t.cloneWithEndModifier(this.#J.queryNode,SJ.create("ForShare",J?nG(J).map(I6):void 0))})}forKeyShare(J){return new D6({...this.#J,queryNode:t.cloneWithEndModifier(this.#J.queryNode,SJ.create("ForKeyShare",J?nG(J).map(I6):void 0))})}forNoKeyUpdate(J){return new D6({...this.#J,queryNode:t.cloneWithEndModifier(this.#J.queryNode,SJ.create("ForNoKeyUpdate",J?nG(J).map(I6):void 0))})}skipLocked(){return new D6({...this.#J,queryNode:t.cloneWithEndModifier(this.#J.queryNode,SJ.create("SkipLocked"))})}noWait(){return new D6({...this.#J,queryNode:t.cloneWithEndModifier(this.#J.queryNode,SJ.create("NoWait"))})}selectAll(J){return new D6({...this.#J,queryNode:B6.cloneWithSelections(this.#J.queryNode,e4(J))})}innerJoin(...J){return this.#W("InnerJoin",J)}leftJoin(...J){return this.#W("LeftJoin",J)}rightJoin(...J){return this.#W("RightJoin",J)}fullJoin(...J){return this.#W("FullJoin",J)}crossJoin(...J){return this.#W("CrossJoin",J)}innerJoinLateral(...J){return this.#W("LateralInnerJoin",J)}leftJoinLateral(...J){return this.#W("LateralLeftJoin",J)}crossJoinLateral(...J){return this.#W("LateralCrossJoin",J)}crossApply(...J){return this.#W("CrossApply",J)}outerApply(...J){return this.#W("OuterApply",J)}#W(J,W){return new D6({...this.#J,queryNode:t.cloneWithJoin(this.#J.queryNode,pW(J,W))})}orderBy(...J){return new D6({...this.#J,queryNode:t.cloneWithOrderByItems(this.#J.queryNode,F8(J))})}groupBy(J){return new D6({...this.#J,queryNode:B6.cloneWithGroupByItems(this.#J.queryNode,oP(J))})}limit(J){return new D6({...this.#J,queryNode:B6.cloneWithLimit(this.#J.queryNode,s1.create(i6(J)))})}offset(J){return new D6({...this.#J,queryNode:B6.cloneWithOffset(this.#J.queryNode,aP.create(i6(J)))})}fetch(J,W="only"){return new D6({...this.#J,queryNode:B6.cloneWithFetch(this.#J.queryNode,Wv(J,W))})}top(J,W){return new D6({...this.#J,queryNode:t.cloneWithTop(this.#J.queryNode,XJ(J,W))})}union(J){return new D6({...this.#J,queryNode:B6.cloneWithSetOperations(this.#J.queryNode,cX("union",J,!1))})}unionAll(J){return new D6({...this.#J,queryNode:B6.cloneWithSetOperations(this.#J.queryNode,cX("union",J,!0))})}intersect(J){return new D6({...this.#J,queryNode:B6.cloneWithSetOperations(this.#J.queryNode,cX("intersect",J,!1))})}intersectAll(J){return new D6({...this.#J,queryNode:B6.cloneWithSetOperations(this.#J.queryNode,cX("intersect",J,!0))})}except(J){return new D6({...this.#J,queryNode:B6.cloneWithSetOperations(this.#J.queryNode,cX("except",J,!1))})}exceptAll(J){return new D6({...this.#J,queryNode:B6.cloneWithSetOperations(this.#J.queryNode,cX("except",J,!0))})}as(J){return new Yv(this,J)}clearSelect(){return new D6({...this.#J,queryNode:B6.cloneWithoutSelections(this.#J.queryNode)})}clearWhere(){return new D6({...this.#J,queryNode:t.cloneWithoutWhere(this.#J.queryNode)})}clearLimit(){return new D6({...this.#J,queryNode:B6.cloneWithoutLimit(this.#J.queryNode)})}clearOffset(){return new D6({...this.#J,queryNode:B6.cloneWithoutOffset(this.#J.queryNode)})}clearOrderBy(){return new D6({...this.#J,queryNode:t.cloneWithoutOrderBy(this.#J.queryNode)})}clearGroupBy(){return new D6({...this.#J,queryNode:B6.cloneWithoutGroupBy(this.#J.queryNode)})}$call(J){return J(this)}$if(J,W){if(J)return W(this);return new D6({...this.#J})}$castTo(){return new D6(this.#J)}$narrowType(){return new D6(this.#J)}$assertType(){return new D6(this.#J)}$asTuple(){return new y6(this.toOperationNode())}$asScalar(){return new y6(this.toOperationNode())}withPlugin(J){return new D6({...this.#J,executor:this.#J.executor.withPlugin(J)})}toOperationNode(){return this.#J.executor.transformQuery(this.#J.queryNode,this.#J.queryId)}compile(){return this.#J.executor.compileQuery(this.toOperationNode(),this.#J.queryId)}async execute(){let J=this.compile();return(await this.#J.executor.executeQuery(J)).rows}async executeTakeFirst(){let[J]=await this.execute();return J}async executeTakeFirstOrThrow(J=WJ){let W=await this.executeTakeFirst();if(W===void 0)throw qJ(J)?new J(this.toOperationNode()):J(this.toOperationNode());return W}async*stream(J=100){let W=this.compile(),X=this.#J.executor.stream(W,J);for await(let G of X)yield*G.rows}async explain(J,W){return await new D6({...this.#J,queryNode:t.cloneWithExplain(this.#J.queryNode,J,W)}).execute()}}function YY(J){return new D6(J)}class Yv{#J;#W;constructor(J,W){this.#J=J,this.#W=W}get expression(){return this.#J}get alias(){return this.#W}get isAliasedSelectQueryBuilder(){return!0}toOperationNode(){return o4.create(this.#J.toOperationNode(),$6.create(this.#W))}}var V9=M(()=>{n8();r3();U9();Z0();cW();F0();uW();h8();bX();F9();az();R();sP();mX();W4();eP();Q8();GY();_J();Xv();o1()});var EJ;var OK=M(()=>{R();w9();Y9();EJ=Q({is(J){return J.kind==="AggregateFunctionNode"},create(J,W=[]){return Q({kind:"AggregateFunctionNode",func:J,aggregated:W})},cloneWithDistinct(J){return Q({...J,distinct:!0})},cloneWithOrderBy(J,W,X=!1){let G=X?"withinGroup":"orderBy";return Q({...J,[G]:J[G]?GW.cloneWithItems(J[G],W):GW.create(W)})},cloneWithFilter(J,W){return Q({...J,filter:J.filter?Q0.cloneWithOperation(J.filter,"And",W):Q0.create(W)})},cloneWithOrFilter(J,W){return Q({...J,filter:J.filter?Q0.cloneWithOperation(J.filter,"Or",W):Q0.create(W)})},cloneWithOver(J,W){return Q({...J,over:W})}})});var sz;var ez=M(()=>{R();sz=Q({is(J){return J.kind==="FunctionNode"},create(J,W){return Q({kind:"FunctionNode",func:J,arguments:W})}})});class s0{#J;constructor(J){this.#J=Q(J)}get expressionType(){return}as(J){return new Gv(this,J)}distinct(){return new s0({...this.#J,aggregateFunctionNode:EJ.cloneWithDistinct(this.#J.aggregateFunctionNode)})}orderBy(...J){return new s0({...this.#J,aggregateFunctionNode:t.cloneWithOrderByItems(this.#J.aggregateFunctionNode,F8(J))})}clearOrderBy(){return new s0({...this.#J,aggregateFunctionNode:t.cloneWithoutOrderBy(this.#J.aggregateFunctionNode)})}withinGroupOrderBy(...J){return new s0({...this.#J,aggregateFunctionNode:EJ.cloneWithOrderBy(this.#J.aggregateFunctionNode,F8(J),!0)})}filterWhere(...J){return new s0({...this.#J,aggregateFunctionNode:EJ.cloneWithFilter(this.#J.aggregateFunctionNode,X4(J))})}filterWhereRef(J,W,X){return new s0({...this.#J,aggregateFunctionNode:EJ.cloneWithFilter(this.#J.aggregateFunctionNode,s4(J,W,X))})}over(J){let W=iP();return new s0({...this.#J,aggregateFunctionNode:EJ.cloneWithOver(this.#J.aggregateFunctionNode,(J?J(W):W).toOperationNode())})}$call(J){return J(this)}$castTo(){return new s0(this.#J)}$notNull(){return new s0(this.#J)}toOperationNode(){return this.#J.aggregateFunctionNode}}class Gv{#J;#W;constructor(J,W){this.#J=J,this.#W=W}get expression(){return this.#J}get alias(){return this.#W}toOperationNode(){return o4.create(this.#J.toOperationNode(),$6.create(this.#W))}}var JN=M(()=>{R();OK();n8();W4();zK();Q8();bX();h8()});function PK(){let J=(X,G)=>{return new y6(sz.create(X,YW(G??[])))},W=(X,G)=>{return new s0({aggregateFunctionNode:EJ.create(X,G?YW(G):void 0)})};return Object.assign(J,{agg:W,avg(X){return W("avg",[X])},coalesce(...X){return J("coalesce",X)},count(X){return W("count",[X])},countAll(X){return new s0({aggregateFunctionNode:EJ.create("count",e4(X))})},max(X){return W("max",[X])},min(X){return W("min",[X])},sum(X){return W("sum",[X])},any(X){return J("any",[X])},jsonAgg(X){return new s0({aggregateFunctionNode:EJ.create("json_agg",[m6(X)?I6(X):X.toOperationNode()])})},toJson(X){return new y6(sz.create("to_json",[m6(X)?I6(X):X.toOperationNode()]))}})}var vK=M(()=>{GY();OK();ez();F0();cW();JN();R();Z0()});var $v;var WN=M(()=>{R();$v=Q({is(J){return J.kind==="UnaryOperationNode"},create(J,W){return Q({kind:"UnaryOperationNode",operator:J,operand:W})}})});function Kv(J,W){return $v.create(_0.create(J),U0(W))}var wv=M(()=>{WW();WN();F0()});var V8;var D9=M(()=>{R();gX();V8=Q({is(J){return J.kind==="CaseNode"},create(J){return Q({kind:"CaseNode",value:J})},cloneWithWhen(J,W){return Q({...J,when:Q(J.when?[...J.when,W]:[W])})},cloneWithThen(J,W){return Q({...J,when:J.when?Q([...J.when.slice(0,-1),g8.cloneWithResult(J.when[J.when.length-1],W)]):void 0})},cloneWith(J,W){return Q({...J,...W})}})});class M9{#J;constructor(J){this.#J=Q(J)}when(...J){return new XN({...this.#J,node:V8.cloneWithWhen(this.#J.node,g8.create(X4(J)))})}}class XN{#J;constructor(J){this.#J=Q(J)}then(J){return new Hv({...this.#J,node:V8.cloneWithThen(this.#J.node,s5(J)?X9(J):i6(J))})}}class Hv{#J;constructor(J){this.#J=Q(J)}when(...J){return new XN({...this.#J,node:V8.cloneWithWhen(this.#J.node,g8.create(X4(J)))})}else(J){return new zv({...this.#J,node:V8.cloneWith(this.#J.node,{else:s5(J)?X9(J):i6(J)})})}end(){return new y6(V8.cloneWith(this.#J.node,{isStatement:!1}))}endCase(){return new y6(V8.cloneWith(this.#J.node,{isStatement:!0}))}}class zv{#J;constructor(J){this.#J=Q(J)}end(){return new y6(V8.cloneWith(this.#J.node,{isStatement:!1}))}endCase(){return new y6(V8.cloneWith(this.#J.node,{isStatement:!0}))}}var jK=M(()=>{GY();R();D9();gX();Q8();_J()});var YN;var GN=M(()=>{R();YN=Q({is(J){return J.kind==="JSONPathLegNode"},create(J,W){return Q({kind:"JSONPathLegNode",type:J,value:W})}})});class P9{#J;constructor(J){this.#J=J}at(J){return this.#W("ArrayLocation",J)}key(J){return this.#W("Member",J)}#W(J,W){if(c1.is(this.#J))return new O9(c1.cloneWithTraversal(this.#J,fW.is(this.#J.traversal)?fW.cloneWithLeg(this.#J.traversal,YN.create(J,W)):t5.cloneWithValue(this.#J.traversal,g4.createImmediate(W))));return new O9(fW.cloneWithLeg(this.#J,YN.create(J,W)))}}class Nv{#J;#W;constructor(J,W){this.#J=J,this.#W=W}get expression(){return this.#J}get alias(){return this.#W}toOperationNode(){return o4.create(this.#J.toOperationNode(),$4(this.#W)?this.#W.toOperationNode():$6.create(this.#W))}}var O9;var $N=M(()=>{n8();W4();o5();GN();J9();a5();i0();JJ();O9=class O9 extends P9{#J;constructor(J){super(J);this.#J=J}get expressionType(){return}as(J){return new Nv(this,J)}$castTo(){return new O9(this.#J)}$notNull(){return new O9(this.#J)}toOperationNode(){return this.#J}}});var KN;var wN=M(()=>{R();KN=Q({is(J){return J.kind==="TupleNode"},create(J){return Q({kind:"TupleNode",values:Q(J)})}})});function Fv(J){if(Ah.includes(J))return!0;if(Eh.some((W)=>W.test(J)))return!0;return!1}var Ah,Eh,HN;var SK=M(()=>{R();Ah=["varchar","char","text","integer","int2","int4","int8","smallint","bigint","boolean","real","double precision","float4","float8","decimal","numeric","binary","bytea","date","datetime","time","timetz","timestamp","timestamptz","serial","bigserial","uuid","json","jsonb","blob","varbinary","int4range","int4multirange","int8range","int8multirange","numrange","nummultirange","tsrange","tsmultirange","tstzrange","tstzmultirange","daterange","datemultirange"],Eh=[/^varchar\(\d+\)$/,/^char\(\d+\)$/,/^decimal\(\d+, \d+\)$/,/^numeric\(\d+, \d+\)$/,/^binary\(\d+\)$/,/^datetime\(\d+\)$/,/^time\(\d+\)$/,/^timetz\(\d+\)$/,/^timestamp\(\d+\)$/,/^timestamptz\(\d+\)$/,/^varbinary\(\d+\)$/],HN=Q({is(J){return J.kind==="DataTypeNode"},create(J){return Q({kind:"DataTypeNode",dataType:J})}})});function $J(J){if($4(J))return J.toOperationNode();if(Fv(J))return HN.create(J);throw Error(`invalid column data type ${JSON.stringify(J)}`)}var v9=M(()=>{SK();i0()});var zN;var _K=M(()=>{R();zN=Q({is(J){return J.kind==="CastNode"},create(J,W){return Q({kind:"CastNode",expression:J,dataType:W})}})});function LK(J=rW){function W(Y,$,K){return new y6(e5(Y,$,K))}function X(Y,$){return new y6(Kv(Y,$))}let G=Object.assign(W,{fn:void 0,eb:void 0,selectFrom(Y){return YY({queryId:N6(),executor:J,queryNode:B6.createFrom(YJ(Y))})},case(Y){return new M9({node:V8.create(k0(Y)?void 0:U0(Y))})},ref(Y,$){if(k0($))return new y6(N8(Y));return new P9(OP(Y,$))},jsonPath(){return new P9(fW.create())},table(Y){return new y6(I6(Y))},val(Y){return new y6(i6(Y))},refTuple(...Y){return new y6(KN.create(Y.map(U0)))},tuple(...Y){return new y6(KN.create(Y.map(i6)))},lit(Y){return new y6(X9(Y))},unary:X,not(Y){return X("not",Y)},exists(Y){return X("exists",Y)},neg(Y){return X("-",Y)},between(Y,$,K){return new y6(JW.create(U0(Y),_0.create("between"),a0.create(i6($),i6(K))))},betweenSymmetric(Y,$,K){return new y6(JW.create(U0(Y),_0.create("between symmetric"),a0.create(i6($),i6(K))))},and(Y){if(t4(Y))return new y6(r1(Y,"and"));return new y6(Gz(Y,"and"))},or(Y){if(t4(Y))return new y6(r1(Y,"or"));return new y6(Gz(Y,"or"))},parens(...Y){let $=X4(Y);if(U8.is($))return new y6($);else return new y6(U8.create($))},cast(Y,$){return new y6(zN.create(U0(Y),$J($)))},withSchema(Y){return LK(J.withPluginAtFront(new L8(Y)))}});return G.fn=PK(),G.eb=G,G}function m8(J){return LK()}var lW=M(()=>{V9();uW();Z0();xX();f8();vK();F0();Q8();d1();GY();WW();wv();_J();XY();jK();D9();R();$N();oG();gW();wN();J9();v9();_K()});function t0(J){if($4(J))return J.toOperationNode();else if(f6(J))return J(m8()).toOperationNode();throw Error(`invalid expression: ${JSON.stringify(J)}`)}function YK(J){if($4(J))return J.toOperationNode();else if(f6(J))return J(m8()).toOperationNode();throw Error(`invalid aliased expression: ${JSON.stringify(J)}`)}function XW(J){return l5(J)||QP(J)||f6(J)}var s8=M(()=>{p5();i0();lW();R()});class NN{#J;get table(){return this.#J}constructor(J){this.#J=J}as(J){return new Uv(this.#J,J)}}class Uv{#J;#W;get table(){return this.#J}get alias(){return this.#W}constructor(J,W){this.#J=J,this.#W=W}toOperationNode(){return o4.create(I6(this.#J),$6.create(this.#W))}}function Qv(J){return J4(J)&&$4(J)&&m6(J.table)&&m6(J.alias)}var TK=M(()=>{n8();W4();i0();Z0();R()});function YJ(J){if(t4(J))return J.map((W)=>uX(W));else return[uX(J)]}function uX(J){if(m6(J))return iz(J);else if(Qv(J))return J.toOperationNode();else return YK(J)}function iz(J){if(J.includes(" as ")){let[X,G]=J.split(" as ").map(Zv);return o4.create(I6(X),$6.create(G))}else return I6(J)}function I6(J){if(J.includes(".")){let[X,G]=J.split(".").map(Zv);return z8.createWithSchema(X,G)}else return z8.create(J)}function Zv(J){return J.trim()}var Z0=M(()=>{R();n8();m1();s8();W4();TK()});var FN;var UN=M(()=>{R();FN=Q({is(J){return J.kind==="AddColumnNode"},create(J){return Q({kind:"AddColumnNode",column:J})}})});var w4;var j9=M(()=>{R();T0();w4=Q({is(J){return J.kind==="ColumnDefinitionNode"},create(J,W){return Q({kind:"ColumnDefinitionNode",column:q6.create(J),dataType:W})},cloneWithFrontModifier(J,W){return Q({...J,frontModifiers:J.frontModifiers?Q([...J.frontModifiers,W]):[W]})},cloneWithEndModifier(J,W){return Q({...J,endModifiers:J.endModifiers?Q([...J.endModifiers,W]):[W]})},cloneWith(J,W){return Q({...J,...W})}})});var QN;var ZN=M(()=>{R();T0();QN=Q({is(J){return J.kind==="DropColumnNode"},create(J){return Q({kind:"DropColumnNode",column:q6.create(J)})}})});var LN;var VN=M(()=>{R();T0();LN=Q({is(J){return J.kind==="RenameColumnNode"},create(J,W){return Q({kind:"RenameColumnNode",column:q6.create(J),renameTo:q6.create(W)})}})});var $Y;var S9=M(()=>{R();W4();$Y=Q({is(J){return J.kind==="CheckConstraintNode"},create(J,W){return Q({kind:"CheckConstraintNode",expression:J,name:W?$6.create(W):void 0})}})});var Lv,KY;var _9=M(()=>{R();Lv=["no action","restrict","cascade","set null","set default"],KY=Q({is(J){return J.kind==="ReferencesNode"},create(J,W){return Q({kind:"ReferencesNode",table:J,columns:Q([...W])})},cloneWithOnDelete(J,W){return Q({...J,onDelete:W})},cloneWithOnUpdate(J,W){return Q({...J,onUpdate:W})}})});function qK(J){return $4(J)?J.toOperationNode():g4.createImmediate(J)}var DN=M(()=>{i0();JJ()});var T9;var MN=M(()=>{R();T9=Q({is(J){return J.kind==="GeneratedNode"},create(J){return Q({kind:"GeneratedNode",...J})},createWithExpression(J){return Q({kind:"GeneratedNode",always:!0,expression:J})},cloneWith(J,W){return Q({...J,...W})}})});var Vv;var ON=M(()=>{R();Vv=Q({is(J){return J.kind==="DefaultValueNode"},create(J){return Q({kind:"DefaultValueNode",defaultValue:J})}})});function wY(J){if(Lv.includes(J))return J;throw Error(`invalid OnModifyForeignAction ${J}`)}var PN=M(()=>{_9()});class H4{#J;constructor(J){this.#J=J}autoIncrement(){return new H4(w4.cloneWith(this.#J,{autoIncrement:!0}))}identity(){return new H4(w4.cloneWith(this.#J,{identity:!0}))}primaryKey(){return new H4(w4.cloneWith(this.#J,{primaryKey:!0}))}references(J){let W=N8(J);if(!W.table||y1.is(W.column))throw Error(`invalid call references('${J}'). The reference must have format table.column or schema.table.column`);return new H4(w4.cloneWith(this.#J,{references:KY.create(W.table,[W.column])}))}onDelete(J){if(!this.#J.references)throw Error("on delete constraint can only be added for foreign keys");return new H4(w4.cloneWith(this.#J,{references:KY.cloneWithOnDelete(this.#J.references,wY(J))}))}onUpdate(J){if(!this.#J.references)throw Error("on update constraint can only be added for foreign keys");return new H4(w4.cloneWith(this.#J,{references:KY.cloneWithOnUpdate(this.#J.references,wY(J))}))}unique(){return new H4(w4.cloneWith(this.#J,{unique:!0}))}notNull(){return new H4(w4.cloneWith(this.#J,{notNull:!0}))}unsigned(){return new H4(w4.cloneWith(this.#J,{unsigned:!0}))}defaultTo(J){return new H4(w4.cloneWith(this.#J,{defaultTo:Vv.create(qK(J))}))}check(J){return new H4(w4.cloneWith(this.#J,{check:$Y.create(J.toOperationNode())}))}generatedAlwaysAs(J){return new H4(w4.cloneWith(this.#J,{generated:T9.createWithExpression(J.toOperationNode())}))}generatedAlwaysAsIdentity(){return new H4(w4.cloneWith(this.#J,{generated:T9.create({identity:!0,always:!0})}))}generatedByDefaultAsIdentity(){return new H4(w4.cloneWith(this.#J,{generated:T9.create({identity:!0,byDefault:!0})}))}stored(){if(!this.#J.generated)throw Error("stored() can only be called after generatedAlwaysAs");return new H4(w4.cloneWith(this.#J,{generated:T9.cloneWith(this.#J.generated,{stored:!0})}))}modifyFront(J){return new H4(w4.cloneWithFrontModifier(this.#J,J.toOperationNode()))}nullsNotDistinct(){return new H4(w4.cloneWith(this.#J,{nullsNotDistinct:!0}))}ifNotExists(){return new H4(w4.cloneWith(this.#J,{ifNotExists:!0}))}modifyEnd(J){return new H4(w4.cloneWithEndModifier(this.#J,J.toOperationNode()))}$call(J){return J(this)}toOperationNode(){return this.#J}}var BK=M(()=>{S9();_9();sG();F0();j9();DN();MN();ON();PN()});var vN;var jN=M(()=>{R();vN=Q({is(J){return J.kind==="ModifyColumnNode"},create(J){return Q({kind:"ModifyColumnNode",column:J})}})});var KJ;var q9=M(()=>{R();W4();_9();KJ=Q({is(J){return J.kind==="ForeignKeyConstraintNode"},create(J,W,X,G){return Q({kind:"ForeignKeyConstraintNode",columns:J,references:KY.create(W,X),name:G?$6.create(G):void 0})},cloneWith(J,W){return Q({...J,...W})}})});class wJ{#J;constructor(J){this.#J=J}onDelete(J){return new wJ(KJ.cloneWith(this.#J,{onDelete:wY(J)}))}onUpdate(J){return new wJ(KJ.cloneWith(this.#J,{onUpdate:wY(J)}))}deferrable(){return new wJ(KJ.cloneWith(this.#J,{deferrable:!0}))}notDeferrable(){return new wJ(KJ.cloneWith(this.#J,{deferrable:!1}))}initiallyDeferred(){return new wJ(KJ.cloneWith(this.#J,{initiallyDeferred:!0}))}initiallyImmediate(){return new wJ(KJ.cloneWith(this.#J,{initiallyDeferred:!1}))}$call(J){return J(this)}toOperationNode(){return this.#J}}var AK=M(()=>{q9();PN()});var HY;var EK=M(()=>{R();HY=Q({is(J){return J.kind==="AddConstraintNode"},create(J){return Q({kind:"AddConstraintNode",constraint:J})}})});var IJ;var B9=M(()=>{R();T0();W4();IJ=Q({is(J){return J.kind==="UniqueConstraintNode"},create(J,W,X){return Q({kind:"UniqueConstraintNode",columns:Q(J.map(q6.create)),name:W?$6.create(W):void 0,nullsNotDistinct:X})},cloneWith(J,W){return Q({...J,...W})}})});var zY;var IK=M(()=>{R();W4();zY=Q({is(J){return J.kind==="DropConstraintNode"},create(J){return Q({kind:"DropConstraintNode",constraintName:$6.create(J)})},cloneWith(J,W){return Q({...J,...W})}})});var NY;var SN=M(()=>{R();T0();NY=Q({is(J){return J.kind==="AlterColumnNode"},create(J,W,X){return Q({kind:"AlterColumnNode",column:q6.create(J),[W]:X})}})});class RK{#J;constructor(J){this.#J=J}setDataType(J){return new FY(NY.create(this.#J,"dataType",$J(J)))}setDefault(J){return new FY(NY.create(this.#J,"setDefault",qK(J)))}dropDefault(){return new FY(NY.create(this.#J,"dropDefault",!0))}setNotNull(){return new FY(NY.create(this.#J,"setNotNull",!0))}dropNotNull(){return new FY(NY.create(this.#J,"dropNotNull",!0))}$call(J){return J(this)}}class FY{#J;constructor(J){this.#J=J}toOperationNode(){return this.#J}}var _N=M(()=>{SN();v9();DN()});class nW{#J;constructor(J){this.#J=Q(J)}toOperationNode(){return this.#J.executor.transformQuery(this.#J.node,this.#J.queryId)}compile(){return this.#J.executor.compileQuery(this.toOperationNode(),this.#J.queryId)}async execute(){await this.#J.executor.executeQuery(this.compile())}}var Dv=M(()=>{R()});class KW{#J;constructor(J){this.#J=Q(J)}onDelete(J){return new KW({...this.#J,constraintBuilder:this.#J.constraintBuilder.onDelete(J)})}onUpdate(J){return new KW({...this.#J,constraintBuilder:this.#J.constraintBuilder.onUpdate(J)})}deferrable(){return new KW({...this.#J,constraintBuilder:this.#J.constraintBuilder.deferrable()})}notDeferrable(){return new KW({...this.#J,constraintBuilder:this.#J.constraintBuilder.notDeferrable()})}initiallyDeferred(){return new KW({...this.#J,constraintBuilder:this.#J.constraintBuilder.initiallyDeferred()})}initiallyImmediate(){return new KW({...this.#J,constraintBuilder:this.#J.constraintBuilder.initiallyImmediate()})}$call(J){return J(this)}toOperationNode(){return this.#J.executor.transformQuery(A6.cloneWithTableProps(this.#J.node,{addConstraint:HY.create(this.#J.constraintBuilder.toOperationNode())}),this.#J.queryId)}compile(){return this.#J.executor.compileQuery(this.toOperationNode(),this.#J.queryId)}async execute(){await this.#J.executor.executeQuery(this.compile())}}var Mv=M(()=>{EK();RX();R()});class lX{#J;constructor(J){this.#J=Q(J)}ifExists(){return new lX({...this.#J,node:A6.cloneWithTableProps(this.#J.node,{dropConstraint:zY.cloneWith(this.#J.node.dropConstraint,{ifExists:!0})})})}cascade(){return new lX({...this.#J,node:A6.cloneWithTableProps(this.#J.node,{dropConstraint:zY.cloneWith(this.#J.node.dropConstraint,{modifier:"cascade"})})})}restrict(){return new lX({...this.#J,node:A6.cloneWithTableProps(this.#J.node,{dropConstraint:zY.cloneWith(this.#J.node.dropConstraint,{modifier:"restrict"})})})}$call(J){return J(this)}toOperationNode(){return this.#J.executor.transformQuery(this.#J.node,this.#J.queryId)}compile(){return this.#J.executor.compileQuery(this.toOperationNode(),this.#J.queryId)}async execute(){await this.#J.executor.executeQuery(this.compile())}}var Ov=M(()=>{RX();IK();R()});var wW;var A9=M(()=>{R();T0();W4();wW=Q({is(J){return J.kind==="PrimaryKeyConstraintNode"},create(J,W){return Q({kind:"PrimaryKeyConstraintNode",columns:Q(J.map(q6.create)),name:W?$6.create(W):void 0})},cloneWith(J,W){return Q({...J,...W})}})});var iW;var CK=M(()=>{R();W4();iW=Q({is(J){return J.kind==="AddIndexNode"},create(J){return Q({kind:"AddIndexNode",name:$6.create(J)})},cloneWith(J,W){return Q({...J,...W})},cloneWithColumns(J,W){return Q({...J,columns:[...J.columns||[],...W]})}})});class aW{#J;constructor(J){this.#J=Q(J)}unique(){return new aW({...this.#J,node:A6.cloneWithTableProps(this.#J.node,{addIndex:iW.cloneWith(this.#J.node.addIndex,{unique:!0})})})}column(J){return new aW({...this.#J,node:A6.cloneWithTableProps(this.#J.node,{addIndex:iW.cloneWithColumns(this.#J.node.addIndex,[l1(J)])})})}columns(J){return new aW({...this.#J,node:A6.cloneWithTableProps(this.#J.node,{addIndex:iW.cloneWithColumns(this.#J.node.addIndex,J.map(l1))})})}expression(J){return new aW({...this.#J,node:A6.cloneWithTableProps(this.#J.node,{addIndex:iW.cloneWithColumns(this.#J.node.addIndex,[J.toOperationNode()])})})}using(J){return new aW({...this.#J,node:A6.cloneWithTableProps(this.#J.node,{addIndex:iW.cloneWith(this.#J.node.addIndex,{using:E6.createWithSql(J)})})})}$call(J){return J(this)}toOperationNode(){return this.#J.executor.transformQuery(this.#J.node,this.#J.queryId)}compile(){return this.#J.executor.compileQuery(this.toOperationNode(),this.#J.queryId)}async execute(){await this.#J.executor.executeQuery(this.compile())}}var Pv=M(()=>{CK();RX();k8();F0();R()});class RJ{#J;constructor(J){this.#J=J}nullsNotDistinct(){return new RJ(IJ.cloneWith(this.#J,{nullsNotDistinct:!0}))}deferrable(){return new RJ(IJ.cloneWith(this.#J,{deferrable:!0}))}notDeferrable(){return new RJ(IJ.cloneWith(this.#J,{deferrable:!1}))}initiallyDeferred(){return new RJ(IJ.cloneWith(this.#J,{initiallyDeferred:!0}))}initiallyImmediate(){return new RJ(IJ.cloneWith(this.#J,{initiallyDeferred:!1}))}$call(J){return J(this)}toOperationNode(){return this.#J}}var TN=M(()=>{B9()});class HW{#J;constructor(J){this.#J=J}deferrable(){return new HW(wW.cloneWith(this.#J,{deferrable:!0}))}notDeferrable(){return new HW(wW.cloneWith(this.#J,{deferrable:!1}))}initiallyDeferred(){return new HW(wW.cloneWith(this.#J,{initiallyDeferred:!0}))}initiallyImmediate(){return new HW(wW.cloneWith(this.#J,{initiallyDeferred:!1}))}$call(J){return J(this)}toOperationNode(){return this.#J}}var qN=M(()=>{A9()});class E9{#J;constructor(J){this.#J=J}$call(J){return J(this)}toOperationNode(){return this.#J}}var vv;var BN=M(()=>{R();W4();vv=Q({is(J){return J.kind==="RenameConstraintNode"},create(J,W){return Q({kind:"RenameConstraintNode",oldName:$6.create(J),newName:$6.create(W)})}})});class AN{#J;constructor(J){this.#J=Q(J)}renameTo(J){return new nW({...this.#J,node:A6.cloneWithTableProps(this.#J.node,{renameTo:I6(J)})})}setSchema(J){return new nW({...this.#J,node:A6.cloneWithTableProps(this.#J.node,{setSchema:$6.create(J)})})}alterColumn(J,W){let X=W(new RK(J));return new HJ({...this.#J,node:A6.cloneWithColumnAlteration(this.#J.node,X.toOperationNode())})}dropColumn(J){return new HJ({...this.#J,node:A6.cloneWithColumnAlteration(this.#J.node,QN.create(J))})}renameColumn(J,W){return new HJ({...this.#J,node:A6.cloneWithColumnAlteration(this.#J.node,LN.create(J,W))})}addColumn(J,W,X=h0){let G=X(new H4(w4.create(J,$J(W))));return new HJ({...this.#J,node:A6.cloneWithColumnAlteration(this.#J.node,FN.create(G.toOperationNode()))})}modifyColumn(J,W,X=h0){let G=X(new H4(w4.create(J,$J(W))));return new HJ({...this.#J,node:A6.cloneWithColumnAlteration(this.#J.node,vN.create(G.toOperationNode()))})}addUniqueConstraint(J,W,X=h0){let G=X(new RJ(IJ.create(W,J)));return new nW({...this.#J,node:A6.cloneWithTableProps(this.#J.node,{addConstraint:HY.create(G.toOperationNode())})})}addCheckConstraint(J,W,X=h0){let G=X(new E9($Y.create(W.toOperationNode(),J)));return new nW({...this.#J,node:A6.cloneWithTableProps(this.#J.node,{addConstraint:HY.create(G.toOperationNode())})})}addForeignKeyConstraint(J,W,X,G,Y=h0){let $=Y(new wJ(KJ.create(W.map(q6.create),I6(X),G.map(q6.create),J)));return new KW({...this.#J,constraintBuilder:$})}addPrimaryKeyConstraint(J,W,X=h0){let G=X(new HW(wW.create(W,J)));return new nW({...this.#J,node:A6.cloneWithTableProps(this.#J.node,{addConstraint:HY.create(G.toOperationNode())})})}dropConstraint(J){return new lX({...this.#J,node:A6.cloneWithTableProps(this.#J.node,{dropConstraint:zY.create(J)})})}renameConstraint(J,W){return new lX({...this.#J,node:A6.cloneWithTableProps(this.#J.node,{renameConstraint:vv.create(J,W)})})}addIndex(J){return new aW({...this.#J,node:A6.cloneWithTableProps(this.#J.node,{addIndex:iW.create(J)})})}dropIndex(J){return new nW({...this.#J,node:A6.cloneWithTableProps(this.#J.node,{dropIndex:hW.create(J)})})}$call(J){return J(this)}}class HJ{#J;constructor(J){this.#J=Q(J)}alterColumn(J,W){let X=W(new RK(J));return new HJ({...this.#J,node:A6.cloneWithColumnAlteration(this.#J.node,X.toOperationNode())})}dropColumn(J){return new HJ({...this.#J,node:A6.cloneWithColumnAlteration(this.#J.node,QN.create(J))})}renameColumn(J,W){return new HJ({...this.#J,node:A6.cloneWithColumnAlteration(this.#J.node,LN.create(J,W))})}addColumn(J,W,X=h0){let G=X(new H4(w4.create(J,$J(W))));return new HJ({...this.#J,node:A6.cloneWithColumnAlteration(this.#J.node,FN.create(G.toOperationNode()))})}modifyColumn(J,W,X=h0){let G=X(new H4(w4.create(J,$J(W))));return new HJ({...this.#J,node:A6.cloneWithColumnAlteration(this.#J.node,vN.create(G.toOperationNode()))})}toOperationNode(){return this.#J.executor.transformQuery(this.#J.node,this.#J.queryId)}compile(){return this.#J.executor.compileQuery(this.toOperationNode(),this.#J.queryId)}async execute(){await this.#J.executor.executeQuery(this.compile())}}var EN=M(()=>{UN();RX();j9();ZN();W4();VN();R();BK();jN();v9();AK();EK();B9();S9();q9();T0();Z0();IK();_N();Dv();Mv();Ov();A9();iG();CK();Pv();TN();qN();BN()});var I9;var IN=M(()=>{yX();yW();JJ();I9=class I9 extends GJ{transformPrimitiveValueList(J){return e8.create(J.values.map(g4.createImmediate))}transformValue(J){return g4.createImmediate(J.value)}}});class y8{#J;constructor(J){this.#J=Q(J)}ifNotExists(){return new y8({...this.#J,node:r8.cloneWith(this.#J.node,{ifNotExists:!0})})}unique(){return new y8({...this.#J,node:r8.cloneWith(this.#J.node,{unique:!0})})}nullsNotDistinct(){return new y8({...this.#J,node:r8.cloneWith(this.#J.node,{nullsNotDistinct:!0})})}on(J){return new y8({...this.#J,node:r8.cloneWith(this.#J.node,{table:I6(J)})})}column(J){return new y8({...this.#J,node:r8.cloneWithColumns(this.#J.node,[l1(J)])})}columns(J){return new y8({...this.#J,node:r8.cloneWithColumns(this.#J.node,J.map(l1))})}expression(J){return new y8({...this.#J,node:r8.cloneWithColumns(this.#J.node,[J.toOperationNode()])})}using(J){return new y8({...this.#J,node:r8.cloneWith(this.#J.node,{using:E6.createWithSql(J)})})}where(...J){let W=new I9;return new y8({...this.#J,node:t.cloneWithWhere(this.#J.node,W.transformNode(X4(J),this.#J.queryId))})}$call(J){return J(this)}toOperationNode(){return this.#J.executor.transformQuery(this.#J.node,this.#J.queryId)}compile(){return this.#J.executor.compileQuery(this.toOperationNode(),this.#J.queryId)}async execute(){await this.#J.executor.executeQuery(this.compile())}}var RN=M(()=>{f5();k8();F0();Z0();R();Q8();h8();IN()});class bK{#J;constructor(J){this.#J=Q(J)}ifNotExists(){return new bK({...this.#J,node:y5.cloneWith(this.#J.node,{ifNotExists:!0})})}$call(J){return J(this)}toOperationNode(){return this.#J.executor.transformQuery(this.#J.node,this.#J.queryId)}compile(){return this.#J.executor.compileQuery(this.toOperationNode(),this.#J.queryId)}async execute(){await this.#J.executor.executeQuery(this.compile())}}var CN=M(()=>{x5();R()});function jv(J){if(UP.includes(J))return J;throw Error(`invalid OnCommitAction ${J}`)}var Sv=M(()=>{g1()});class e0{#J;constructor(J){this.#J=Q(J)}temporary(){return new e0({...this.#J,node:j0.cloneWith(this.#J.node,{temporary:!0})})}onCommit(J){return new e0({...this.#J,node:j0.cloneWith(this.#J.node,{onCommit:jv(J)})})}ifNotExists(){return new e0({...this.#J,node:j0.cloneWith(this.#J.node,{ifNotExists:!0})})}addColumn(J,W,X=h0){let G=X(new H4(w4.create(J,$J(W))));return new e0({...this.#J,node:j0.cloneWithColumn(this.#J.node,G.toOperationNode())})}addPrimaryKeyConstraint(J,W,X=h0){let G=X(new HW(wW.create(W,J)));return new e0({...this.#J,node:j0.cloneWithConstraint(this.#J.node,G.toOperationNode())})}addUniqueConstraint(J,W,X=h0){let G=X(new RJ(IJ.create(W,J)));return new e0({...this.#J,node:j0.cloneWithConstraint(this.#J.node,G.toOperationNode())})}addCheckConstraint(J,W,X=h0){let G=X(new E9($Y.create(W.toOperationNode(),J)));return new e0({...this.#J,node:j0.cloneWithConstraint(this.#J.node,G.toOperationNode())})}addForeignKeyConstraint(J,W,X,G,Y=h0){let $=Y(new wJ(KJ.create(W.map(q6.create),I6(X),G.map(q6.create),J)));return new e0({...this.#J,node:j0.cloneWithConstraint(this.#J.node,$.toOperationNode())})}modifyFront(J){return new e0({...this.#J,node:j0.cloneWithFrontModifier(this.#J.node,J.toOperationNode())})}modifyEnd(J){return new e0({...this.#J,node:j0.cloneWithEndModifier(this.#J.node,J.toOperationNode())})}as(J){return new e0({...this.#J,node:j0.cloneWith(this.#J.node,{selectQuery:t0(J)})})}$call(J){return J(this)}toOperationNode(){return this.#J.executor.transformQuery(this.#J.node,this.#J.queryId)}compile(){return this.#J.executor.compileQuery(this.toOperationNode(),this.#J.queryId)}async execute(){await this.#J.executor.executeQuery(this.compile())}}var bN=M(()=>{j9();g1();BK();R();q9();T0();AK();v9();A9();B9();S9();Z0();Sv();TN();s8();qN()});class UY{#J;constructor(J){this.#J=Q(J)}on(J){return new UY({...this.#J,node:hW.cloneWith(this.#J.node,{table:I6(J)})})}ifExists(){return new UY({...this.#J,node:hW.cloneWith(this.#J.node,{ifExists:!0})})}cascade(){return new UY({...this.#J,node:hW.cloneWith(this.#J.node,{cascade:!0})})}$call(J){return J(this)}toOperationNode(){return this.#J.executor.transformQuery(this.#J.node,this.#J.queryId)}compile(){return this.#J.executor.compileQuery(this.toOperationNode(),this.#J.queryId)}async execute(){await this.#J.executor.executeQuery(this.compile())}}var kN=M(()=>{iG();Z0();R()});class R9{#J;constructor(J){this.#J=Q(J)}ifExists(){return new R9({...this.#J,node:aG.cloneWith(this.#J.node,{ifExists:!0})})}cascade(){return new R9({...this.#J,node:aG.cloneWith(this.#J.node,{cascade:!0})})}$call(J){return J(this)}toOperationNode(){return this.#J.executor.transformQuery(this.#J.node,this.#J.queryId)}compile(){return this.#J.executor.compileQuery(this.toOperationNode(),this.#J.queryId)}async execute(){await this.#J.executor.executeQuery(this.compile())}}var hN=M(()=>{u5();R()});class C9{#J;constructor(J){this.#J=Q(J)}ifExists(){return new C9({...this.#J,node:tG.cloneWith(this.#J.node,{ifExists:!0})})}cascade(){return new C9({...this.#J,node:tG.cloneWith(this.#J.node,{cascade:!0})})}$call(J){return J(this)}toOperationNode(){return this.#J.executor.transformQuery(this.#J.node,this.#J.queryId)}compile(){return this.#J.executor.compileQuery(this.toOperationNode(),this.#J.queryId)}async execute(){await this.#J.executor.executeQuery(this.compile())}}var gN=M(()=>{c5();R()});var zJ;var b9=M(()=>{R();eJ();zJ=Q({is(J){return J.kind==="CreateViewNode"},create(J){return Q({kind:"CreateViewNode",name:S0.create(J)})},cloneWith(J,W){return Q({...J,...W})}})});class mN{#J=new I9;transformQuery(J){return this.#J.transformNode(J.node,J.queryId)}transformResult(J){return Promise.resolve(J.result)}}var _v=M(()=>{IN()});class zW{#J;constructor(J){this.#J=Q(J)}temporary(){return new zW({...this.#J,node:zJ.cloneWith(this.#J.node,{temporary:!0})})}materialized(){return new zW({...this.#J,node:zJ.cloneWith(this.#J.node,{materialized:!0})})}ifNotExists(){return new zW({...this.#J,node:zJ.cloneWith(this.#J.node,{ifNotExists:!0})})}orReplace(){return new zW({...this.#J,node:zJ.cloneWith(this.#J.node,{orReplace:!0})})}columns(J){return new zW({...this.#J,node:zJ.cloneWith(this.#J.node,{columns:J.map(Wz)})})}as(J){let W=J.withPlugin(new mN).toOperationNode();return new zW({...this.#J,node:zJ.cloneWith(this.#J.node,{as:W})})}$call(J){return J(this)}toOperationNode(){return this.#J.executor.transformQuery(this.#J.node,this.#J.queryId)}compile(){return this.#J.executor.compileQuery(this.toOperationNode(),this.#J.queryId)}async execute(){await this.#J.executor.executeQuery(this.compile())}}var fN=M(()=>{R();b9();F0();_v()});var QY;var kK=M(()=>{R();eJ();QY=Q({is(J){return J.kind==="DropViewNode"},create(J){return Q({kind:"DropViewNode",name:S0.create(J)})},cloneWith(J,W){return Q({...J,...W})}})});class ZY{#J;constructor(J){this.#J=Q(J)}materialized(){return new ZY({...this.#J,node:QY.cloneWith(this.#J.node,{materialized:!0})})}ifExists(){return new ZY({...this.#J,node:QY.cloneWith(this.#J.node,{ifExists:!0})})}cascade(){return new ZY({...this.#J,node:QY.cloneWith(this.#J.node,{cascade:!0})})}$call(J){return J(this)}toOperationNode(){return this.#J.executor.transformQuery(this.#J.node,this.#J.queryId)}compile(){return this.#J.executor.compileQuery(this.toOperationNode(),this.#J.queryId)}async execute(){await this.#J.executor.executeQuery(this.compile())}}var yN=M(()=>{R();kK()});var hK;var gK=M(()=>{R();yW();JJ();hK=Q({is(J){return J.kind==="CreateTypeNode"},create(J){return Q({kind:"CreateTypeNode",name:J})},cloneWithEnum(J,W){return Q({...J,enum:e8.create(W.map(g4.createImmediate))})}})});class mK{#J;constructor(J){this.#J=Q(J)}toOperationNode(){return this.#J.executor.transformQuery(this.#J.node,this.#J.queryId)}asEnum(J){return new mK({...this.#J,node:hK.cloneWithEnum(this.#J.node,J)})}$call(J){return J(this)}compile(){return this.#J.executor.compileQuery(this.toOperationNode(),this.#J.queryId)}async execute(){await this.#J.executor.executeQuery(this.compile())}}var xN=M(()=>{R();gK()});var fK;var yK=M(()=>{R();fK=Q({is(J){return J.kind==="DropTypeNode"},create(J){return Q({kind:"DropTypeNode",name:J})},cloneWith(J,W){return Q({...J,...W})}})});class xK{#J;constructor(J){this.#J=Q(J)}ifExists(){return new xK({...this.#J,node:fK.cloneWith(this.#J.node,{ifExists:!0})})}$call(J){return J(this)}toOperationNode(){return this.#J.executor.transformQuery(this.#J.node,this.#J.queryId)}compile(){return this.#J.executor.compileQuery(this.toOperationNode(),this.#J.queryId)}async execute(){await this.#J.executor.executeQuery(this.compile())}}var uN=M(()=>{yK();R()});function cN(J){if(J.includes(".")){let X=J.split(".").map(Ih);if(X.length===2)return S0.createWithSchema(X[0],X[1]);else throw Error(`invalid schemable identifier ${J}`)}else return S0.create(J)}function Ih(J){return J.trim()}var Tv=M(()=>{eJ()});var LY;var uK=M(()=>{R();eJ();LY=Q({is(J){return J.kind==="RefreshMaterializedViewNode"},create(J){return Q({kind:"RefreshMaterializedViewNode",name:S0.create(J)})},cloneWith(J,W){return Q({...J,...W})}})});class VY{#J;constructor(J){this.#J=Q(J)}concurrently(){return new VY({...this.#J,node:LY.cloneWith(this.#J.node,{concurrently:!0,withNoData:!1})})}withData(){return new VY({...this.#J,node:LY.cloneWith(this.#J.node,{withNoData:!1})})}withNoData(){return new VY({...this.#J,node:LY.cloneWith(this.#J.node,{withNoData:!0,concurrently:!1})})}$call(J){return J(this)}toOperationNode(){return this.#J.executor.transformQuery(this.#J.node,this.#J.queryId)}compile(){return this.#J.executor.compileQuery(this.toOperationNode(),this.#J.queryId)}async execute(){await this.#J.executor.executeQuery(this.compile())}}var lN=M(()=>{R();uK()});class DY{#J;constructor(J){this.#J=J}createTable(J){return new e0({queryId:N6(),executor:this.#J,node:j0.create(I6(J))})}dropTable(J){return new C9({queryId:N6(),executor:this.#J,node:tG.create(I6(J))})}createIndex(J){return new y8({queryId:N6(),executor:this.#J,node:r8.create(J)})}dropIndex(J){return new UY({queryId:N6(),executor:this.#J,node:hW.create(J)})}createSchema(J){return new bK({queryId:N6(),executor:this.#J,node:y5.create(J)})}dropSchema(J){return new R9({queryId:N6(),executor:this.#J,node:aG.create(J)})}alterTable(J){return new AN({queryId:N6(),executor:this.#J,node:A6.create(I6(J))})}createView(J){return new zW({queryId:N6(),executor:this.#J,node:zJ.create(J)})}refreshMaterializedView(J){return new VY({queryId:N6(),executor:this.#J,node:LY.create(J)})}dropView(J){return new ZY({queryId:N6(),executor:this.#J,node:QY.create(J)})}createType(J){return new mK({queryId:N6(),executor:this.#J,node:hK.create(cN(J))})}dropType(J){return new xK({queryId:N6(),executor:this.#J,node:fK.create(cN(J))})}withPlugin(J){return new DY(this.#J.withPlugin(J))}withoutPlugins(){return new DY(this.#J.withoutPlugins())}withSchema(J){return new DY(this.#J.withPluginAtFront(new L8(J)))}}var pN=M(()=>{RX();f5();x5();g1();iG();u5();c5();Z0();EN();RN();CN();bN();kN();hN();gN();f8();xX();fN();b9();yN();kK();xN();uN();gK();yK();Tv();lN();uK()});class dN{ref(J){return new a3(J)}table(J){return new NN(J)}}var rN=M(()=>{eG();TK()});class nN{#J;constructor(J){this.#J=J}async provideConnection(J){let W=await this.#J.acquireConnection();try{return await J(W)}finally{await this.#J.releaseConnection(W)}}}var tW;var iN=M(()=>{pz();tW=class tW extends L9{#J;#W;#X;constructor(J,W,X,G=[]){super(G);this.#J=J,this.#W=W,this.#X=X}get adapter(){return this.#W}compileQuery(J,W){return this.#J.compileQuery(J,W)}provideConnection(J){return this.#X.provideConnection(J)}withPlugins(J){return new tW(this.#J,this.#W,this.#X,[...this.plugins,...J])}withPlugin(J){return new tW(this.#J,this.#W,this.#X,[...this.plugins,J])}withPluginAtFront(J){return new tW(this.#J,this.#W,this.#X,[J,...this.plugins])}withConnectionProvider(J){return new tW(this.#J,this.#W,J,[...this.plugins])}withoutPlugins(){return new tW(this.#J,this.#W,this.#X,[])}}});function cK(){if(typeof performance<"u"&&f6(performance.now))return performance.now();else return Date.now()}var qv=M(()=>{R()});class aN{#J;#W;#X;#Y;#G;#w=new WeakSet;constructor(J,W){this.#Y=!1,this.#J=J,this.#W=W}async init(){if(this.#G)throw Error("driver has already been destroyed");if(!this.#X)this.#X=this.#J.init().then(()=>{this.#Y=!0}).catch((J)=>{return this.#X=void 0,Promise.reject(J)});await this.#X}async acquireConnection(){if(this.#G)throw Error("driver has already been destroyed");if(!this.#Y)await this.init();let J=await this.#J.acquireConnection();if(!this.#w.has(J)){if(this.#K())this.#$(J);this.#w.add(J)}return J}async releaseConnection(J){await this.#J.releaseConnection(J)}beginTransaction(J,W){return this.#J.beginTransaction(J,W)}commitTransaction(J){return this.#J.commitTransaction(J)}rollbackTransaction(J){return this.#J.rollbackTransaction(J)}savepoint(J,W,X){if(this.#J.savepoint)return this.#J.savepoint(J,W,X);throw Error("The `savepoint` method is not supported by this driver")}rollbackToSavepoint(J,W,X){if(this.#J.rollbackToSavepoint)return this.#J.rollbackToSavepoint(J,W,X);throw Error("The `rollbackToSavepoint` method is not supported by this driver")}releaseSavepoint(J,W,X){if(this.#J.releaseSavepoint)return this.#J.releaseSavepoint(J,W,X);throw Error("The `releaseSavepoint` method is not supported by this driver")}async destroy(){if(!this.#X)return;if(await this.#X,!this.#G)this.#G=this.#J.destroy().catch((J)=>{return this.#G=void 0,Promise.reject(J)});await this.#G}#K(){return this.#W.isLevelEnabled("query")||this.#W.isLevelEnabled("error")}#$(J){let{executeQuery:W,streamQuery:X}=J,G=this;J.executeQuery=async(Y)=>{let $,K=cK();try{return await W.call(J,Y)}catch(w){throw $=w,await G.#H(w,Y,K),w}finally{if(!$)await G.#z(Y,K)}},J.streamQuery=async function*(Y,$){let K,w=cK();try{for await(let H of X.call(J,Y,$))yield H}catch(H){throw K=H,await G.#H(H,Y,w),H}finally{if(!K)await G.#z(Y,w,!0)}}}async#H(J,W,X){await this.#W.error(()=>({level:"error",error:J,query:W,queryDurationMillis:this.#F(X)}))}async#z(J,W,X=!1){await this.#W.query(()=>({level:"query",isStream:X,query:J,queryDurationMillis:this.#F(W)}))}#F(J){return cK()-J}}var Bv=M(()=>{qv()});class k9{#J;#W;constructor(J){this.#J=J}async provideConnection(J){while(this.#W)await this.#W.catch(Rh);return this.#W=this.#X(J).finally(()=>{this.#W=void 0}),this.#W}async#X(J){return await J(this.#J)}}var Rh=()=>{};function tN(J){if(J.accessMode&&!Ch.includes(J.accessMode))throw Error(`invalid transaction access mode ${J.accessMode}`);if(J.isolationLevel&&!bh.includes(J.isolationLevel))throw Error(`invalid transaction isolation level ${J.isolationLevel}`)}var Ch,bh;var oN=M(()=>{Ch=["read only","read write"],bh=["read uncommitted","read committed","repeatable read","serializable","snapshot"]});class sN{#J;#W;constructor(J){if(f6(J))this.#W=J,this.#J=Q({query:!0,error:!0});else this.#W=kh,this.#J=Q({query:J.includes("query"),error:J.includes("error")})}isLevelEnabled(J){return this.#J[J]}async query(J){if(this.#J.query)await this.#W(J())}async error(J){if(this.#J.error)await this.#W(J())}}function kh(J){if(J.level==="query"){let W=`kysely:query:${J.isStream?"stream:":""}`;console.log(`${W} ${J.query.sql}`),console.log(`${W} duration: ${J.queryDurationMillis.toFixed(1)}ms`)}else if(J.level==="error")if(J.error instanceof Error)console.error(`kysely:error: ${J.error.stack??J.error.message}`);else console.error(`kysely:error: ${JSON.stringify({error:J.error,query:J.query.sql,queryDurationMillis:J.queryDurationMillis})}`)}var VK6;var eN=M(()=>{R();VK6=Q(["query","error"])});function Av(J){return J4(J)&&f6(J.compile)}var JF=M(()=>{R()});function hh(J){return J4(J)&&J4(J.config)&&J4(J.driver)&&J4(J.executor)&&J4(J.dialect)}class Ev{#J;constructor(J){this.#J=Q(J)}async execute(J){return this.#J.executor.provideConnection(async(W)=>{let X=this.#J.executor.withConnectionProvider(new k9(W)),G=new D8({...this.#J,executor:X});return await J(G)})}}class lK{#J;constructor(J){this.#J=Q(J)}setAccessMode(J){return new lK({...this.#J,accessMode:J})}setIsolationLevel(J){return new lK({...this.#J,isolationLevel:J})}async execute(J){let{isolationLevel:W,accessMode:X,...G}=this.#J,Y={isolationLevel:W,accessMode:X};return tN(Y),this.#J.executor.provideConnection(async($)=>{let K=this.#J.executor.withConnectionProvider(new k9($)),w=new dX({...G,executor:K}),H=!1;try{await this.#J.driver.beginTransaction($,Y),H=!0;let z=await J(w);return await this.#J.driver.commitTransaction($),z}catch(z){if(H)await this.#J.driver.rollbackTransaction($);throw z}})}}class pK{#J;constructor(J){this.#J=Q(J)}setAccessMode(J){return new pK({...this.#J,accessMode:J})}setIsolationLevel(J){return new pK({...this.#J,isolationLevel:J})}async execute(){let{isolationLevel:J,accessMode:W,...X}=this.#J,G={isolationLevel:J,accessMode:W};tN(G);let Y=await FK(this.#J.executor);return await this.#J.driver.beginTransaction(Y.connection,G),new NW({...X,connection:Y,executor:this.#J.executor.withConnectionProvider(new k9(Y.connection))})}}class MY{#J;constructor(J){this.#J=J}async execute(){return await this.#J()}}function pX(J){if(J.isCommitted)throw Error("Transaction is already committed");if(J.isRolledBack)throw Error("Transaction is already rolled back")}class oW{#J;#W;constructor(J,W){if(J instanceof oW)this.#J=J.#J;else this.#J=J;this.#W=W}get adapter(){return this.#J.adapter}get plugins(){return this.#J.plugins}transformQuery(J,W){return this.#J.transformQuery(J,W)}compileQuery(J,W){return this.#J.compileQuery(J,W)}provideConnection(J){return this.#J.provideConnection(J)}executeQuery(J){return pX(this.#W),this.#J.executeQuery(J)}stream(J,W){return pX(this.#W),this.#J.stream(J,W)}withConnectionProvider(J){return new oW(this.#J.withConnectionProvider(J),this.#W)}withPlugin(J){return new oW(this.#J.withPlugin(J),this.#W)}withPlugins(J){return new oW(this.#J.withPlugins(J),this.#W)}withPluginAtFront(J){return new oW(this.#J.withPluginAtFront(J),this.#W)}withoutPlugins(){return new oW(this.#J.withoutPlugins(),this.#W)}}var D8,dX,NW;var Iv=M(()=>{pN();rN();UK();iN();R();Bv();oN();vK();eN();f8();JF();jK();D9();s8();xX();lz();u1();Symbol.asyncDispose??=Symbol("Symbol.asyncDispose");D8=class D8 extends AJ{#J;constructor(J){let W,X;if(hh(J))W={executor:J.executor},X={...J};else{let G=J.dialect,Y=G.createDriver(),$=G.createQueryCompiler(),K=G.createAdapter(),w=new sN(J.log??[]),H=new aN(Y,w),z=new nN(H),N=new tW($,K,z,J.plugins??[]);W={executor:N},X={config:J,executor:N,dialect:G,driver:H}}super(W);this.#J=Q(X)}get schema(){return new DY(this.#J.executor)}get dynamic(){return new dN}get introspection(){return this.#J.dialect.createIntrospector(this.withoutPlugins())}case(J){return new M9({node:V8.create(k0(J)?void 0:t0(J))})}get fn(){return PK()}transaction(){return new lK({...this.#J})}startTransaction(){return new pK({...this.#J})}connection(){return new Ev({...this.#J})}withPlugin(J){return new D8({...this.#J,executor:this.#J.executor.withPlugin(J)})}withoutPlugins(){return new D8({...this.#J,executor:this.#J.executor.withoutPlugins()})}withSchema(J){return new D8({...this.#J,executor:this.#J.executor.withPluginAtFront(new L8(J))})}withTables(){return new D8({...this.#J})}async destroy(){await this.#J.driver.destroy()}get isTransaction(){return!1}getExecutor(){return this.#J.executor}executeQuery(J,W){if(W!==void 0)o8("Passing `queryId` in `db.executeQuery` is deprecated and will result in a compile-time error in the future.");let X=Av(J)?J.compile():J;return this.getExecutor().executeQuery(X)}async[Symbol.asyncDispose](){await this.destroy()}};dX=class dX extends D8{#J;constructor(J){super(J);this.#J=J}get isTransaction(){return!0}transaction(){throw Error("calling the transaction method for a Transaction is not supported")}connection(){throw Error("calling the connection method for a Transaction is not supported")}async destroy(){throw Error("calling the destroy method for a Transaction is not supported")}withPlugin(J){return new dX({...this.#J,executor:this.#J.executor.withPlugin(J)})}withoutPlugins(){return new dX({...this.#J,executor:this.#J.executor.withoutPlugins()})}withSchema(J){return new dX({...this.#J,executor:this.#J.executor.withPluginAtFront(new L8(J))})}withTables(){return new dX({...this.#J})}};NW=class NW extends dX{#J;#W;#X;constructor(J){let W={isCommitted:!1,isRolledBack:!1};J={...J,executor:new oW(J.executor,W)};let{connection:X,...G}=J;super(G);this.#J=Q(J),this.#X=W;let Y=N6();this.#W=($)=>J.executor.compileQuery($,Y)}get isCommitted(){return this.#X.isCommitted}get isRolledBack(){return this.#X.isRolledBack}commit(){return pX(this.#X),new MY(async()=>{await this.#J.driver.commitTransaction(this.#J.connection.connection),this.#X.isCommitted=!0,this.#J.connection.release()})}rollback(){return pX(this.#X),new MY(async()=>{await this.#J.driver.rollbackTransaction(this.#J.connection.connection),this.#X.isRolledBack=!0,this.#J.connection.release()})}savepoint(J){return pX(this.#X),new MY(async()=>{return await this.#J.driver.savepoint?.(this.#J.connection.connection,J,this.#W),new NW({...this.#J})})}rollbackToSavepoint(J){return pX(this.#X),new MY(async()=>{return await this.#J.driver.rollbackToSavepoint?.(this.#J.connection.connection,J,this.#W),new NW({...this.#J})})}releaseSavepoint(J){return pX(this.#X),new MY(async()=>{return await this.#J.driver.releaseSavepoint?.(this.#J.connection.connection,J,this.#W),new NW({...this.#J})})}withPlugin(J){return new NW({...this.#J,executor:this.#J.executor.withPlugin(J)})}withoutPlugins(){return new NW({...this.#J,executor:this.#J.executor.withoutPlugins()})}withSchema(J){return new NW({...this.#J,executor:this.#J.executor.withPluginAtFront(new L8(J))})}withTables(){return new NW({...this.#J})}}});var Rv=()=>{};var Cv=()=>{};var bv=()=>{};var kv=()=>{};var hv=()=>{};class h9{#J;constructor(J){this.#J=Q(J)}get expressionType(){return}get isRawBuilder(){return!0}as(J){return new gv(this,J)}$castTo(){return new h9({...this.#J})}$notNull(){return new h9(this.#J)}withPlugin(J){return new h9({...this.#J,plugins:this.#J.plugins!==void 0?Q([...this.#J.plugins,J]):Q([J])})}toOperationNode(){return this.#X(this.#W())}compile(J){return this.#Y(this.#W(J))}async execute(J){let W=this.#W(J);return W.executeQuery(this.#Y(W))}#W(J){let W=J!==void 0?J.getExecutor():rW;return this.#J.plugins!==void 0?W.withPlugins(this.#J.plugins):W}#X(J){return J.transformQuery(this.#J.rawNode,this.#J.queryId)}#Y(J){return J.compileQuery(this.#X(J),this.#J.queryId)}}function FW(J){return new h9(J)}class gv{#J;#W;constructor(J,W){this.#J=J,this.#W=W}get expression(){return this.#J}get alias(){return this.#W}get rawBuilder(){return this.#J}toOperationNode(){return o4.create(this.#J.toOperationNode(),$4(this.#W)?this.#W.toOperationNode():$6.create(this.#W))}}var WF=M(()=>{n8();R();XY();W4();i0()});function mv(J){if($4(J))return J.toOperationNode();return i6(J)}var X6;var sW=M(()=>{W4();i0();k8();JJ();F0();Z0();_J();f8();WF();X6=Object.assign((J,...W)=>{return FW({queryId:N6(),rawNode:E6.create(J,W?.map(mv)??[])})},{ref(J){return FW({queryId:N6(),rawNode:E6.createWithChild(N8(J))})},val(J){return FW({queryId:N6(),rawNode:E6.createWithChild(i6(J))})},value(J){return this.val(J)},table(J){return FW({queryId:N6(),rawNode:E6.createWithChild(I6(J))})},id(...J){let W=Array(J.length+1).fill(".");return W[0]="",W[W.length-1]="",FW({queryId:N6(),rawNode:E6.create(W,J.map($6.create))})},lit(J){return FW({queryId:N6(),rawNode:E6.createWithChild(g4.createImmediate(J))})},literal(J){return this.lit(J)},raw(J){return FW({queryId:N6(),rawNode:E6.createWithSql(J)})},join(J,W=X6`, `){let X=Array(Math.max(2*J.length-1,0)),G=W.toOperationNode();for(let Y=0;Y<J.length;++Y)if(X[2*Y]=mv(J[Y]),Y!==J.length-1)X[2*Y+1]=G;return FW({queryId:N6(),rawNode:E6.createWithChildren(X)})}})});var fv=()=>{};var yv=()=>{};class XF{nodeStack=[];get parentNode(){return this.nodeStack[this.nodeStack.length-2]}#J=Q({AliasNode:this.visitAlias.bind(this),ColumnNode:this.visitColumn.bind(this),IdentifierNode:this.visitIdentifier.bind(this),SchemableIdentifierNode:this.visitSchemableIdentifier.bind(this),RawNode:this.visitRaw.bind(this),ReferenceNode:this.visitReference.bind(this),SelectQueryNode:this.visitSelectQuery.bind(this),SelectionNode:this.visitSelection.bind(this),TableNode:this.visitTable.bind(this),FromNode:this.visitFrom.bind(this),SelectAllNode:this.visitSelectAll.bind(this),AndNode:this.visitAnd.bind(this),OrNode:this.visitOr.bind(this),ValueNode:this.visitValue.bind(this),ValueListNode:this.visitValueList.bind(this),PrimitiveValueListNode:this.visitPrimitiveValueList.bind(this),ParensNode:this.visitParens.bind(this),JoinNode:this.visitJoin.bind(this),OperatorNode:this.visitOperator.bind(this),WhereNode:this.visitWhere.bind(this),InsertQueryNode:this.visitInsertQuery.bind(this),DeleteQueryNode:this.visitDeleteQuery.bind(this),ReturningNode:this.visitReturning.bind(this),CreateTableNode:this.visitCreateTable.bind(this),AddColumnNode:this.visitAddColumn.bind(this),ColumnDefinitionNode:this.visitColumnDefinition.bind(this),DropTableNode:this.visitDropTable.bind(this),DataTypeNode:this.visitDataType.bind(this),OrderByNode:this.visitOrderBy.bind(this),OrderByItemNode:this.visitOrderByItem.bind(this),GroupByNode:this.visitGroupBy.bind(this),GroupByItemNode:this.visitGroupByItem.bind(this),UpdateQueryNode:this.visitUpdateQuery.bind(this),ColumnUpdateNode:this.visitColumnUpdate.bind(this),LimitNode:this.visitLimit.bind(this),OffsetNode:this.visitOffset.bind(this),OnConflictNode:this.visitOnConflict.bind(this),OnDuplicateKeyNode:this.visitOnDuplicateKey.bind(this),CreateIndexNode:this.visitCreateIndex.bind(this),DropIndexNode:this.visitDropIndex.bind(this),ListNode:this.visitList.bind(this),PrimaryKeyConstraintNode:this.visitPrimaryKeyConstraint.bind(this),UniqueConstraintNode:this.visitUniqueConstraint.bind(this),ReferencesNode:this.visitReferences.bind(this),CheckConstraintNode:this.visitCheckConstraint.bind(this),WithNode:this.visitWith.bind(this),CommonTableExpressionNode:this.visitCommonTableExpression.bind(this),CommonTableExpressionNameNode:this.visitCommonTableExpressionName.bind(this),HavingNode:this.visitHaving.bind(this),CreateSchemaNode:this.visitCreateSchema.bind(this),DropSchemaNode:this.visitDropSchema.bind(this),AlterTableNode:this.visitAlterTable.bind(this),DropColumnNode:this.visitDropColumn.bind(this),RenameColumnNode:this.visitRenameColumn.bind(this),AlterColumnNode:this.visitAlterColumn.bind(this),ModifyColumnNode:this.visitModifyColumn.bind(this),AddConstraintNode:this.visitAddConstraint.bind(this),DropConstraintNode:this.visitDropConstraint.bind(this),RenameConstraintNode:this.visitRenameConstraint.bind(this),ForeignKeyConstraintNode:this.visitForeignKeyConstraint.bind(this),CreateViewNode:this.visitCreateView.bind(this),RefreshMaterializedViewNode:this.visitRefreshMaterializedView.bind(this),DropViewNode:this.visitDropView.bind(this),GeneratedNode:this.visitGenerated.bind(this),DefaultValueNode:this.visitDefaultValue.bind(this),OnNode:this.visitOn.bind(this),ValuesNode:this.visitValues.bind(this),SelectModifierNode:this.visitSelectModifier.bind(this),CreateTypeNode:this.visitCreateType.bind(this),DropTypeNode:this.visitDropType.bind(this),ExplainNode:this.visitExplain.bind(this),DefaultInsertValueNode:this.visitDefaultInsertValue.bind(this),AggregateFunctionNode:this.visitAggregateFunction.bind(this),OverNode:this.visitOver.bind(this),PartitionByNode:this.visitPartitionBy.bind(this),PartitionByItemNode:this.visitPartitionByItem.bind(this),SetOperationNode:this.visitSetOperation.bind(this),BinaryOperationNode:this.visitBinaryOperation.bind(this),UnaryOperationNode:this.visitUnaryOperation.bind(this),UsingNode:this.visitUsing.bind(this),FunctionNode:this.visitFunction.bind(this),CaseNode:this.visitCase.bind(this),WhenNode:this.visitWhen.bind(this),JSONReferenceNode:this.visitJSONReference.bind(this),JSONPathNode:this.visitJSONPath.bind(this),JSONPathLegNode:this.visitJSONPathLeg.bind(this),JSONOperatorChainNode:this.visitJSONOperatorChain.bind(this),TupleNode:this.visitTuple.bind(this),MergeQueryNode:this.visitMergeQuery.bind(this),MatchedNode:this.visitMatched.bind(this),AddIndexNode:this.visitAddIndex.bind(this),CastNode:this.visitCast.bind(this),FetchNode:this.visitFetch.bind(this),TopNode:this.visitTop.bind(this),OutputNode:this.visitOutput.bind(this),OrActionNode:this.visitOrAction.bind(this),CollateNode:this.visitCollate.bind(this)});visitNode=(J)=>{this.nodeStack.push(J),this.#J[J.kind](J),this.nodeStack.pop()}}var YF=M(()=>{R()});var gh,M8,mh,xv,fh;var rX=M(()=>{g1();hX();YF();WW();d1();k8();R();b9();ZK();gX();u1();gh=/'/g;M8=class M8 extends XF{#J="";#W=[];get numParameters(){return this.#W.length}compileQuery(J,W){return this.#J="",this.#W=[],this.nodeStack.splice(0,this.nodeStack.length),this.visitNode(J),Q({query:J,queryId:W,sql:this.getSql(),parameters:[...this.#W]})}getSql(){return this.#J}visitSelectQuery(J){let W=this.parentNode!==void 0&&!U8.is(this.parentNode)&&!I4.is(this.parentNode)&&!j0.is(this.parentNode)&&!zJ.is(this.parentNode)&&!QK.is(this.parentNode);if(this.parentNode===void 0&&J.explain)this.visitNode(J.explain),this.append(" ");if(W)this.append("(");if(J.with)this.visitNode(J.with),this.append(" ");if(this.append("select"),J.distinctOn)this.append(" "),this.compileDistinctOn(J.distinctOn);if(J.frontModifiers?.length)this.append(" "),this.compileList(J.frontModifiers," ");if(J.top)this.append(" "),this.visitNode(J.top);if(J.selections)this.append(" "),this.compileList(J.selections);if(J.from)this.append(" "),this.visitNode(J.from);if(J.joins)this.append(" "),this.compileList(J.joins," ");if(J.where)this.append(" "),this.visitNode(J.where);if(J.groupBy)this.append(" "),this.visitNode(J.groupBy);if(J.having)this.append(" "),this.visitNode(J.having);if(J.setOperations)this.append(" "),this.compileList(J.setOperations," ");if(J.orderBy)this.append(" "),this.visitNode(J.orderBy);if(J.limit)this.append(" "),this.visitNode(J.limit);if(J.offset)this.append(" "),this.visitNode(J.offset);if(J.fetch)this.append(" "),this.visitNode(J.fetch);if(J.endModifiers?.length)this.append(" "),this.compileList(this.sortSelectModifiers([...J.endModifiers])," ");if(W)this.append(")")}visitFrom(J){this.append("from "),this.compileList(J.froms)}visitSelection(J){this.visitNode(J.selection)}visitColumn(J){this.visitNode(J.column)}compileDistinctOn(J){this.append("distinct on ("),this.compileList(J),this.append(")")}compileList(J,W=", "){let X=J.length-1;for(let G=0;G<=X;G++)if(this.visitNode(J[G]),G<X)this.append(W)}visitWhere(J){this.append("where "),this.visitNode(J.where)}visitHaving(J){this.append("having "),this.visitNode(J.having)}visitInsertQuery(J){let W=this.parentNode!==void 0&&!U8.is(this.parentNode)&&!E6.is(this.parentNode)&&!g8.is(this.parentNode);if(this.parentNode===void 0&&J.explain)this.visitNode(J.explain),this.append(" ");if(W)this.append("(");if(J.with)this.visitNode(J.with),this.append(" ");if(this.append(J.replace?"replace":"insert"),J.ignore)o8("`InsertQueryNode.ignore` is deprecated. Use `InsertQueryNode.orAction` instead."),this.append(" ignore");if(J.orAction)this.append(" "),this.visitNode(J.orAction);if(J.top)this.append(" "),this.visitNode(J.top);if(J.into)this.append(" into "),this.visitNode(J.into);if(J.columns)this.append(" ("),this.compileList(J.columns),this.append(")");if(J.output)this.append(" "),this.visitNode(J.output);if(J.values)this.append(" "),this.visitNode(J.values);if(J.defaultValues)this.append(" "),this.append("default values");if(J.onConflict)this.append(" "),this.visitNode(J.onConflict);if(J.onDuplicateKey)this.append(" "),this.visitNode(J.onDuplicateKey);if(J.returning)this.append(" "),this.visitNode(J.returning);if(W)this.append(")");if(J.endModifiers?.length)this.append(" "),this.compileList(J.endModifiers," ")}visitValues(J){this.append("values "),this.compileList(J.values)}visitDeleteQuery(J){let W=this.parentNode!==void 0&&!U8.is(this.parentNode)&&!E6.is(this.parentNode);if(this.parentNode===void 0&&J.explain)this.visitNode(J.explain),this.append(" ");if(W)this.append("(");if(J.with)this.visitNode(J.with),this.append(" ");if(this.append("delete "),J.top)this.visitNode(J.top),this.append(" ");if(this.visitNode(J.from),J.output)this.append(" "),this.visitNode(J.output);if(J.using)this.append(" "),this.visitNode(J.using);if(J.joins)this.append(" "),this.compileList(J.joins," ");if(J.where)this.append(" "),this.visitNode(J.where);if(J.orderBy)this.append(" "),this.visitNode(J.orderBy);if(J.limit)this.append(" "),this.visitNode(J.limit);if(J.returning)this.append(" "),this.visitNode(J.returning);if(W)this.append(")");if(J.endModifiers?.length)this.append(" "),this.compileList(J.endModifiers," ")}visitReturning(J){this.append("returning "),this.compileList(J.selections)}visitAlias(J){this.visitNode(J.node),this.append(" as "),this.visitNode(J.alias)}visitReference(J){if(J.table)this.visitNode(J.table),this.append(".");this.visitNode(J.column)}visitSelectAll(J){this.append("*")}visitIdentifier(J){this.append(this.getLeftIdentifierWrapper()),this.compileUnwrappedIdentifier(J),this.append(this.getRightIdentifierWrapper())}compileUnwrappedIdentifier(J){if(!m6(J.name))throw Error("a non-string identifier was passed to compileUnwrappedIdentifier.");this.append(this.sanitizeIdentifier(J.name))}visitAnd(J){this.visitNode(J.left),this.append(" and "),this.visitNode(J.right)}visitOr(J){this.visitNode(J.left),this.append(" or "),this.visitNode(J.right)}visitValue(J){if(J.immediate)this.appendImmediateValue(J.value);else this.appendValue(J.value)}visitValueList(J){this.append("("),this.compileList(J.values),this.append(")")}visitTuple(J){this.append("("),this.compileList(J.values),this.append(")")}visitPrimitiveValueList(J){this.append("(");let{values:W}=J;for(let X=0;X<W.length;++X)if(this.appendValue(W[X]),X!==W.length-1)this.append(", ");this.append(")")}visitParens(J){this.append("("),this.visitNode(J.node),this.append(")")}visitJoin(J){if(this.append(fh[J.joinType]),this.append(" "),this.visitNode(J.table),J.on)this.append(" "),this.visitNode(J.on)}visitOn(J){this.append("on "),this.visitNode(J.on)}visitRaw(J){let{sqlFragments:W,parameters:X}=J;for(let G=0;G<W.length;++G)if(this.append(W[G]),X.length>G)this.visitNode(X[G])}visitOperator(J){this.append(J.operator)}visitTable(J){this.visitNode(J.table)}visitSchemableIdentifier(J){if(J.schema)this.visitNode(J.schema),this.append(".");this.visitNode(J.identifier)}visitCreateTable(J){if(this.append("create "),J.frontModifiers&&J.frontModifiers.length>0)this.compileList(J.frontModifiers," "),this.append(" ");if(J.temporary)this.append("temporary ");if(this.append("table "),J.ifNotExists)this.append("if not exists ");if(this.visitNode(J.table),J.selectQuery)this.append(" as "),this.visitNode(J.selectQuery);else{if(this.append(" ("),this.compileList([...J.columns,...J.constraints??[]]),this.append(")"),J.onCommit)this.append(" on commit "),this.append(J.onCommit);if(J.endModifiers&&J.endModifiers.length>0)this.append(" "),this.compileList(J.endModifiers," ")}}visitColumnDefinition(J){if(J.ifNotExists)this.append("if not exists ");if(this.visitNode(J.column),this.append(" "),this.visitNode(J.dataType),J.unsigned)this.append(" unsigned");if(J.frontModifiers&&J.frontModifiers.length>0)this.append(" "),this.compileList(J.frontModifiers," ");if(J.generated)this.append(" "),this.visitNode(J.generated);if(J.identity)this.append(" identity");if(J.defaultTo)this.append(" "),this.visitNode(J.defaultTo);if(J.notNull)this.append(" not null");if(J.unique)this.append(" unique");if(J.nullsNotDistinct)this.append(" nulls not distinct");if(J.primaryKey)this.append(" primary key");if(J.autoIncrement)this.append(" "),this.append(this.getAutoIncrement());if(J.references)this.append(" "),this.visitNode(J.references);if(J.check)this.append(" "),this.visitNode(J.check);if(J.endModifiers&&J.endModifiers.length>0)this.append(" "),this.compileList(J.endModifiers," ")}getAutoIncrement(){return"auto_increment"}visitReferences(J){if(this.append("references "),this.visitNode(J.table),this.append(" ("),this.compileList(J.columns),this.append(")"),J.onDelete)this.append(" on delete "),this.append(J.onDelete);if(J.onUpdate)this.append(" on update "),this.append(J.onUpdate)}visitDropTable(J){if(this.append("drop table "),J.ifExists)this.append("if exists ");if(this.visitNode(J.table),J.cascade)this.append(" cascade")}visitDataType(J){this.append(J.dataType)}visitOrderBy(J){this.append("order by "),this.compileList(J.items)}visitOrderByItem(J){if(this.visitNode(J.orderBy),J.collation)this.append(" "),this.visitNode(J.collation);if(J.direction)this.append(" "),this.visitNode(J.direction);if(J.nulls)this.append(" nulls "),this.append(J.nulls)}visitGroupBy(J){this.append("group by "),this.compileList(J.items)}visitGroupByItem(J){this.visitNode(J.groupBy)}visitUpdateQuery(J){let W=this.parentNode!==void 0&&!U8.is(this.parentNode)&&!E6.is(this.parentNode)&&!g8.is(this.parentNode);if(this.parentNode===void 0&&J.explain)this.visitNode(J.explain),this.append(" ");if(W)this.append("(");if(J.with)this.visitNode(J.with),this.append(" ");if(this.append("update "),J.top)this.visitNode(J.top),this.append(" ");if(J.table)this.visitNode(J.table),this.append(" ");if(this.append("set "),J.updates)this.compileList(J.updates);if(J.output)this.append(" "),this.visitNode(J.output);if(J.from)this.append(" "),this.visitNode(J.from);if(J.joins){if(!J.from)throw Error("Joins in an update query are only supported as a part of a PostgreSQL 'update set from join' query. If you want to create a MySQL 'update join set' query, see https://kysely.dev/docs/examples/update/my-sql-joins");this.append(" "),this.compileList(J.joins," ")}if(J.where)this.append(" "),this.visitNode(J.where);if(J.orderBy)this.append(" "),this.visitNode(J.orderBy);if(J.limit)this.append(" "),this.visitNode(J.limit);if(J.returning)this.append(" "),this.visitNode(J.returning);if(W)this.append(")");if(J.endModifiers?.length)this.append(" "),this.compileList(J.endModifiers," ")}visitColumnUpdate(J){this.visitNode(J.column),this.append(" = "),this.visitNode(J.value)}visitLimit(J){this.append("limit "),this.visitNode(J.limit)}visitOffset(J){this.append("offset "),this.visitNode(J.offset)}visitOnConflict(J){if(this.append("on conflict"),J.columns)this.append(" ("),this.compileList(J.columns),this.append(")");else if(J.constraint)this.append(" on constraint "),this.visitNode(J.constraint);else if(J.indexExpression)this.append(" ("),this.visitNode(J.indexExpression),this.append(")");if(J.indexWhere)this.append(" "),this.visitNode(J.indexWhere);if(J.doNothing===!0)this.append(" do nothing");else if(J.updates){if(this.append(" do update set "),this.compileList(J.updates),J.updateWhere)this.append(" "),this.visitNode(J.updateWhere)}}visitOnDuplicateKey(J){this.append("on duplicate key update "),this.compileList(J.updates)}visitCreateIndex(J){if(this.append("create "),J.unique)this.append("unique ");if(this.append("index "),J.ifNotExists)this.append("if not exists ");if(this.visitNode(J.name),J.table)this.append(" on "),this.visitNode(J.table);if(J.using)this.append(" using "),this.visitNode(J.using);if(J.columns)this.append(" ("),this.compileList(J.columns),this.append(")");if(J.nullsNotDistinct)this.append(" nulls not distinct");if(J.where)this.append(" "),this.visitNode(J.where)}visitDropIndex(J){if(this.append("drop index "),J.ifExists)this.append("if exists ");if(this.visitNode(J.name),J.table)this.append(" on "),this.visitNode(J.table);if(J.cascade)this.append(" cascade")}visitCreateSchema(J){if(this.append("create schema "),J.ifNotExists)this.append("if not exists ");this.visitNode(J.schema)}visitDropSchema(J){if(this.append("drop schema "),J.ifExists)this.append("if exists ");if(this.visitNode(J.schema),J.cascade)this.append(" cascade")}visitPrimaryKeyConstraint(J){if(J.name)this.append("constraint "),this.visitNode(J.name),this.append(" ");this.append("primary key ("),this.compileList(J.columns),this.append(")"),this.buildDeferrable(J)}buildDeferrable(J){if(J.deferrable!==void 0)if(J.deferrable)this.append(" deferrable");else this.append(" not deferrable");if(J.initiallyDeferred!==void 0)if(J.initiallyDeferred)this.append(" initially deferred");else this.append(" initially immediate")}visitUniqueConstraint(J){if(J.name)this.append("constraint "),this.visitNode(J.name),this.append(" ");if(this.append("unique"),J.nullsNotDistinct)this.append(" nulls not distinct");this.append(" ("),this.compileList(J.columns),this.append(")"),this.buildDeferrable(J)}visitCheckConstraint(J){if(J.name)this.append("constraint "),this.visitNode(J.name),this.append(" ");this.append("check ("),this.visitNode(J.expression),this.append(")")}visitForeignKeyConstraint(J){if(J.name)this.append("constraint "),this.visitNode(J.name),this.append(" ");if(this.append("foreign key ("),this.compileList(J.columns),this.append(") "),this.visitNode(J.references),J.onDelete)this.append(" on delete "),this.append(J.onDelete);if(J.onUpdate)this.append(" on update "),this.append(J.onUpdate);this.buildDeferrable(J)}visitList(J){this.compileList(J.items)}visitWith(J){if(this.append("with "),J.recursive)this.append("recursive ");this.compileList(J.expressions)}visitCommonTableExpression(J){if(this.visitNode(J.name),this.append(" as "),sJ(J.materialized)){if(!J.materialized)this.append("not ");this.append("materialized ")}this.visitNode(J.expression)}visitCommonTableExpressionName(J){if(this.visitNode(J.table),J.columns)this.append("("),this.compileList(J.columns),this.append(")")}visitAlterTable(J){if(this.append("alter table "),this.visitNode(J.table),this.append(" "),J.renameTo)this.append("rename to "),this.visitNode(J.renameTo);if(J.setSchema)this.append("set schema "),this.visitNode(J.setSchema);if(J.addConstraint)this.visitNode(J.addConstraint);if(J.dropConstraint)this.visitNode(J.dropConstraint);if(J.renameConstraint)this.visitNode(J.renameConstraint);if(J.columnAlterations)this.compileColumnAlterations(J.columnAlterations);if(J.addIndex)this.visitNode(J.addIndex);if(J.dropIndex)this.visitNode(J.dropIndex)}visitAddColumn(J){this.append("add column "),this.visitNode(J.column)}visitRenameColumn(J){this.append("rename column "),this.visitNode(J.column),this.append(" to "),this.visitNode(J.renameTo)}visitDropColumn(J){this.append("drop column "),this.visitNode(J.column)}visitAlterColumn(J){if(this.append("alter column "),this.visitNode(J.column),this.append(" "),J.dataType){if(this.announcesNewColumnDataType())this.append("type ");if(this.visitNode(J.dataType),J.dataTypeExpression)this.append("using "),this.visitNode(J.dataTypeExpression)}if(J.setDefault)this.append("set default "),this.visitNode(J.setDefault);if(J.dropDefault)this.append("drop default");if(J.setNotNull)this.append("set not null");if(J.dropNotNull)this.append("drop not null")}visitModifyColumn(J){this.append("modify column "),this.visitNode(J.column)}visitAddConstraint(J){this.append("add "),this.visitNode(J.constraint)}visitDropConstraint(J){if(this.append("drop constraint "),J.ifExists)this.append("if exists ");if(this.visitNode(J.constraintName),J.modifier==="cascade")this.append(" cascade");else if(J.modifier==="restrict")this.append(" restrict")}visitRenameConstraint(J){this.append("rename constraint "),this.visitNode(J.oldName),this.append(" to "),this.visitNode(J.newName)}visitSetOperation(J){if(this.append(J.operator),this.append(" "),J.all)this.append("all ");this.visitNode(J.expression)}visitCreateView(J){if(this.append("create "),J.orReplace)this.append("or replace ");if(J.materialized)this.append("materialized ");if(J.temporary)this.append("temporary ");if(this.append("view "),J.ifNotExists)this.append("if not exists ");if(this.visitNode(J.name),this.append(" "),J.columns)this.append("("),this.compileList(J.columns),this.append(") ");if(J.as)this.append("as "),this.visitNode(J.as)}visitRefreshMaterializedView(J){if(this.append("refresh materialized view "),J.concurrently)this.append("concurrently ");if(this.visitNode(J.name),J.withNoData)this.append(" with no data");else this.append(" with data")}visitDropView(J){if(this.append("drop "),J.materialized)this.append("materialized ");if(this.append("view "),J.ifExists)this.append("if exists ");if(this.visitNode(J.name),J.cascade)this.append(" cascade")}visitGenerated(J){if(this.append("generated "),J.always)this.append("always ");if(J.byDefault)this.append("by default ");if(this.append("as "),J.identity)this.append("identity");if(J.expression)this.append("("),this.visitNode(J.expression),this.append(")");if(J.stored)this.append(" stored")}visitDefaultValue(J){this.append("default "),this.visitNode(J.defaultValue)}visitSelectModifier(J){if(J.rawModifier)this.visitNode(J.rawModifier);else this.append(mh[J.modifier]);if(J.of)this.append(" of "),this.compileList(J.of,", ")}visitCreateType(J){if(this.append("create type "),this.visitNode(J.name),J.enum)this.append(" as enum "),this.visitNode(J.enum)}visitDropType(J){if(this.append("drop type "),J.ifExists)this.append("if exists ");this.visitNode(J.name)}visitExplain(J){if(this.append("explain"),J.options||J.format){if(this.append(" "),this.append(this.getLeftExplainOptionsWrapper()),J.options){if(this.visitNode(J.options),J.format)this.append(this.getExplainOptionsDelimiter())}if(J.format)this.append("format"),this.append(this.getExplainOptionAssignment()),this.append(J.format);this.append(this.getRightExplainOptionsWrapper())}}visitDefaultInsertValue(J){this.append("default")}visitAggregateFunction(J){if(this.append(J.func),this.append("("),J.distinct)this.append("distinct ");if(this.compileList(J.aggregated),J.orderBy)this.append(" "),this.visitNode(J.orderBy);if(this.append(")"),J.withinGroup)this.append(" within group ("),this.visitNode(J.withinGroup),this.append(")");if(J.filter)this.append(" filter("),this.visitNode(J.filter),this.append(")");if(J.over)this.append(" "),this.visitNode(J.over)}visitOver(J){if(this.append("over("),J.partitionBy){if(this.visitNode(J.partitionBy),J.orderBy)this.append(" ")}if(J.orderBy)this.visitNode(J.orderBy);this.append(")")}visitPartitionBy(J){this.append("partition by "),this.compileList(J.items)}visitPartitionByItem(J){this.visitNode(J.partitionBy)}visitBinaryOperation(J){this.visitNode(J.leftOperand),this.append(" "),this.visitNode(J.operator),this.append(" "),this.visitNode(J.rightOperand)}visitUnaryOperation(J){if(this.visitNode(J.operator),!this.isMinusOperator(J.operator))this.append(" ");this.visitNode(J.operand)}isMinusOperator(J){return _0.is(J)&&J.operator==="-"}visitUsing(J){this.append("using "),this.compileList(J.tables)}visitFunction(J){this.append(J.func),this.append("("),this.compileList(J.arguments),this.append(")")}visitCase(J){if(this.append("case"),J.value)this.append(" "),this.visitNode(J.value);if(J.when)this.append(" "),this.compileList(J.when," ");if(J.else)this.append(" else "),this.visitNode(J.else);if(this.append(" end"),J.isStatement)this.append(" case")}visitWhen(J){if(this.append("when "),this.visitNode(J.condition),J.result)this.append(" then "),this.visitNode(J.result)}visitJSONReference(J){this.visitNode(J.reference),this.visitNode(J.traversal)}visitJSONPath(J){if(J.inOperator)this.visitNode(J.inOperator);this.append("'$");for(let W of J.pathLegs)this.visitNode(W);this.append("'")}visitJSONPathLeg(J){let W=J.type==="ArrayLocation";if(this.append(W?"[":"."),this.append(String(J.value)),W)this.append("]")}visitJSONOperatorChain(J){for(let W=0,X=J.values.length;W<X;W++){if(W===X-1)this.visitNode(J.operator);else this.append("->");this.visitNode(J.values[W])}}visitMergeQuery(J){if(J.with)this.visitNode(J.with),this.append(" ");if(this.append("merge "),J.top)this.visitNode(J.top),this.append(" ");if(this.append("into "),this.visitNode(J.into),J.using)this.append(" "),this.visitNode(J.using);if(J.whens)this.append(" "),this.compileList(J.whens," ");if(J.returning)this.append(" "),this.visitNode(J.returning);if(J.output)this.append(" "),this.visitNode(J.output);if(J.endModifiers?.length)this.append(" "),this.compileList(J.endModifiers," ")}visitMatched(J){if(J.not)this.append("not ");if(this.append("matched"),J.bySource)this.append(" by source")}visitAddIndex(J){if(this.append("add "),J.unique)this.append("unique ");if(this.append("index "),this.visitNode(J.name),J.columns)this.append(" ("),this.compileList(J.columns),this.append(")");if(J.using)this.append(" using "),this.visitNode(J.using)}visitCast(J){this.append("cast("),this.visitNode(J.expression),this.append(" as "),this.visitNode(J.dataType),this.append(")")}visitFetch(J){this.append("fetch next "),this.visitNode(J.rowCount),this.append(` rows ${J.modifier}`)}visitOutput(J){this.append("output "),this.compileList(J.selections)}visitTop(J){if(this.append(`top(${J.expression})`),J.modifiers)this.append(` ${J.modifiers}`)}visitOrAction(J){this.append(J.action)}visitCollate(J){this.append("collate "),this.visitNode(J.collation)}append(J){this.#J+=J}appendValue(J){this.addParameter(J),this.append(this.getCurrentParameterPlaceholder())}getLeftIdentifierWrapper(){return'"'}getRightIdentifierWrapper(){return'"'}getCurrentParameterPlaceholder(){return"$"+this.numParameters}getLeftExplainOptionsWrapper(){return"("}getExplainOptionAssignment(){return" "}getExplainOptionsDelimiter(){return", "}getRightExplainOptionsWrapper(){return")"}sanitizeIdentifier(J){let W=this.getLeftIdentifierWrapper(),X=this.getRightIdentifierWrapper(),G="";for(let Y of J)if(G+=Y,Y===W)G+=W;else if(Y===X)G+=X;return G}sanitizeStringLiteral(J){return J.replace(gh,"''")}addParameter(J){this.#W.push(J)}appendImmediateValue(J){if(m6(J))this.appendStringLiteral(J);else if(d8(J)||sJ(J)||kW(J))this.append(J.toString());else if(bW(J))this.append("null");else if(h1(J))this.appendImmediateValue(J.toISOString());else throw Error(`invalid immediate value ${J}`)}appendStringLiteral(J){this.append("'"),this.append(this.sanitizeStringLiteral(J)),this.append("'")}sortSelectModifiers(J){return J.sort((W,X)=>W.modifier&&X.modifier?xv[W.modifier]-xv[X.modifier]:1),Q(J)}compileColumnAlterations(J){this.compileList(J)}announcesNewColumnDataType(){return!0}};mh=Q({ForKeyShare:"for key share",ForNoKeyUpdate:"for no key update",ForUpdate:"for update",ForShare:"for share",NoWait:"nowait",SkipLocked:"skip locked",Distinct:"distinct"}),xv=Q({ForKeyShare:1,ForNoKeyUpdate:1,ForUpdate:1,ForShare:1,NoWait:2,SkipLocked:2,Distinct:0}),fh=Q({InnerJoin:"inner join",LeftJoin:"left join",RightJoin:"right join",FullJoin:"full join",CrossJoin:"cross join",LateralInnerJoin:"inner join lateral",LateralLeftJoin:"left join lateral",LateralCrossJoin:"cross join lateral",OuterApply:"outer apply",CrossApply:"cross apply",Using:"using"})});var Y4;var OY=M(()=>{k8();R();f8();Y4=Q({raw(J,W=[]){return Q({sql:J,query:E6.createWithSql(J),parameters:Q(W),queryId:N6()})}})});var uv=()=>{};var cv=()=>{};var lv=()=>{};var pv=()=>{};class UW{get supportsCreateIfNotExists(){return!0}get supportsTransactionalDdl(){return!1}get supportsReturning(){return!1}get supportsOutput(){return!1}}var dv=()=>{};function x8(J,W){return E6.createWithChildren([E6.createWithSql(`${J} `),$6.create(W)])}var dK=M(()=>{W4();k8()});class GF{#J;#W=new nv;#X;#Y;constructor(J){this.#J=Q({...J})}async init(){if(this.#X=f6(this.#J.database)?await this.#J.database():this.#J.database,this.#Y=new rv(this.#X),this.#J.onCreateConnection)await this.#J.onCreateConnection(this.#Y)}async acquireConnection(){return await this.#W.lock(),this.#Y}async beginTransaction(J){await J.executeQuery(Y4.raw("begin"))}async commitTransaction(J){await J.executeQuery(Y4.raw("commit"))}async rollbackTransaction(J){await J.executeQuery(Y4.raw("rollback"))}async savepoint(J,W,X){await J.executeQuery(X(x8("savepoint",W),N6()))}async rollbackToSavepoint(J,W,X){await J.executeQuery(X(x8("rollback to",W),N6()))}async releaseSavepoint(J,W,X){await J.executeQuery(X(x8("release",W),N6()))}async releaseConnection(){this.#W.unlock()}async destroy(){this.#X?.close()}}class rv{#J;constructor(J){this.#J=J}executeQuery(J){let{sql:W,parameters:X}=J,G=this.#J.prepare(W);if(G.reader)return Promise.resolve({rows:G.all(X)});let{changes:Y,lastInsertRowid:$}=G.run(X);return Promise.resolve({numAffectedRows:Y!==void 0&&Y!==null?BigInt(Y):void 0,insertId:$!==void 0&&$!==null?BigInt($):void 0,rows:[]})}async*streamQuery(J,W){let{sql:X,parameters:G,query:Y}=J,$=this.#J.prepare(X);if(B6.is(Y)){let K=$.iterate(G);for(let w of K)yield{rows:[w]}}else throw Error("Sqlite driver only supports streaming of select queries")}}class nv{#J;#W;async lock(){while(this.#J)await this.#J;this.#J=new Promise((J)=>{this.#W=J})}unlock(){let J=this.#W;this.#J=void 0,this.#W=void 0,J?.()}}var $F=M(()=>{uW();dK();OY();R();f8()});var yh,g9;var KF=M(()=>{rX();yh=/"/g;g9=class g9 extends M8{visitOrAction(J){this.append("or "),this.append(J.action)}getCurrentParameterPlaceholder(){return"?"}getLeftExplainOptionsWrapper(){return""}getRightExplainOptionsWrapper(){return""}getLeftIdentifierWrapper(){return'"'}getRightIdentifierWrapper(){return'"'}getAutoIncrement(){return"autoincrement"}sanitizeIdentifier(J){return J.replace(yh,'""')}visitDefaultInsertValue(J){this.append("null")}}});class wF{transformQuery(J){return J.node}async transformResult(J){return J.result}}class zF{#J;constructor(J){this.#J=Q(J)}async getMigrations(){let J=await this.#N(this.#Y)?await this.#J.db.withPlugin(this.#K).selectFrom(this.#Y).select(["name","timestamp"]).$narrowType().execute():[];return(await this.#L()).map(({name:X,...G})=>{let Y=J.find(($)=>$.name===X);return{name:X,migration:G,executedAt:Y?new Date(Y.timestamp):void 0}})}async migrateToLatest(){return this.#W(()=>({direction:"Up",step:1/0}))}async migrateTo(J){return this.#W(({migrations:W,executedMigrations:X,pendingMigrations:G})=>{if(J4(J)&&J.__noMigrations__===!0)return{direction:"Down",step:1/0};if(!W.find((K)=>K.name===J))throw Error(`migration "${J}" doesn't exist`);let Y=X.indexOf(J),$=G.findIndex((K)=>K.name===J);if(Y!==-1)return{direction:"Down",step:X.length-Y-1};else if($!==-1)return{direction:"Up",step:$+1};else throw Error(`migration "${J}" isn't executed or pending`)})}async migrateUp(){return this.#W(()=>({direction:"Up",step:1}))}async migrateDown(){return this.#W(()=>({direction:"Down",step:1}))}async#W(J){try{return await this.#$(),await this.#D(J)}catch(W){if(W instanceof rK)return W.resultSet;return{error:W}}}get#X(){return this.#J.migrationTableSchema}get#Y(){return this.#J.migrationTableName??m0}get#G(){return this.#J.migrationLockTableName??J8}get#w(){return this.#J.allowUnorderedMigrations??xh}get#K(){if(this.#X)return new L8(this.#X);return new wF}async#$(){await this.#H(),await this.#z(),await this.#F(),await this.#V()}async#H(){if(!this.#X)return;if(!await this.#Q())try{await this.#U(this.#J.db.schema.createSchema(this.#X))}catch(J){if(!await this.#Q())throw J}}async#z(){if(!await this.#N(this.#Y))try{if(this.#X)await this.#U(this.#J.db.schema.createSchema(this.#X));await this.#U(this.#J.db.schema.withPlugin(this.#K).createTable(this.#Y).addColumn("name","varchar(255)",(J)=>J.notNull().primaryKey()).addColumn("timestamp","varchar(255)",(J)=>J.notNull()))}catch(J){if(!await this.#N(this.#Y))throw J}}async#F(){if(!await this.#N(this.#G))try{await this.#U(this.#J.db.schema.withPlugin(this.#K).createTable(this.#G).addColumn("id","varchar(255)",(J)=>J.notNull().primaryKey()).addColumn("is_locked","integer",(J)=>J.notNull().defaultTo(0)))}catch(J){if(!await this.#N(this.#G))throw J}}async#V(){if(!await this.#Z())try{await this.#J.db.withPlugin(this.#K).insertInto(this.#G).values({id:HF,is_locked:0}).execute()}catch(J){if(!await this.#Z())throw J}}async#Q(){return(await this.#J.db.introspection.getSchemas()).some((W)=>W.name===this.#X)}async#N(J){let W=this.#X;return(await this.#J.db.introspection.getTables({withInternalKyselyTables:!0})).some((G)=>G.name===J&&(!W||G.schema===W))}async#Z(){return!!await this.#J.db.withPlugin(this.#K).selectFrom(this.#G).where("id","=",HF).select("id").executeTakeFirst()}async#D(J){let W=this.#J.db.getExecutor().adapter,X=Q({lockTable:this.#J.migrationLockTableName??J8,lockRowId:HF,lockTableSchema:this.#J.migrationTableSchema}),G=async(Y)=>{try{await W.acquireMigrationLock(Y,X);let $=await this.#M(Y);if($.migrations.length===0)return{results:[]};let{direction:K,step:w}=J($);if(w<=0)return{results:[]};if(K==="Down")return await this.#S(Y,$,w);else if(K==="Up")return await this.#_(Y,$,w);return{results:[]}}finally{await W.releaseMigrationLock(Y,X)}};if(W.supportsTransactionalDdl&&!this.#J.disableTransactions)return this.#J.db.transaction().execute(G);else return this.#J.db.connection().execute(G)}async#M(J){let W=await this.#L(),X=await this.#P(J);if(this.#v(W,X),!this.#w)this.#j(W,X);let G=this.#O(W,X);return Q({migrations:W,executedMigrations:X,lastMigration:FP(X),pendingMigrations:G})}#O(J,W){return J.filter((X)=>{return!W.includes(X.name)})}async#L(){let J=await this.#J.provider.getMigrations();return Object.keys(J).sort().map((W)=>({...J[W],name:W}))}async#P(J){let W=await J.withPlugin(this.#K).selectFrom(this.#Y).select(["name","timestamp"]).$narrowType().execute(),X=this.#J.nameComparator||((G,Y)=>G.localeCompare(Y));return W.sort((G,Y)=>{if(G.timestamp===Y.timestamp)return X(G.name,Y.name);return new Date(G.timestamp).getTime()-new Date(Y.timestamp).getTime()}).map((G)=>G.name)}#v(J,W){for(let X of W)if(!J.some((G)=>G.name===X))throw Error(`corrupted migrations: previously executed migration ${X} is missing`)}#j(J,W){for(let X=0;X<W.length;++X)if(J[X].name!==W[X])throw Error(`corrupted migrations: expected previously executed migration ${W[X]} to be at index ${X} but ${J[X].name} was found in its place. New migrations must always have a name that comes alphabetically after the last executed migration.`)}async#S(J,W,X){let G=W.executedMigrations.slice().reverse().slice(0,X).map(($)=>{return W.migrations.find((K)=>K.name===$)}),Y=G.map(($)=>{return{migrationName:$.name,direction:"Down",status:"NotExecuted"}});for(let $=0;$<Y.length;++$){let K=G[$];try{if(K.down)await K.down(J),await J.withPlugin(this.#K).deleteFrom(this.#Y).where("name","=",K.name).execute(),Y[$]={migrationName:K.name,direction:"Down",status:"Success"}}catch(w){throw Y[$]={migrationName:K.name,direction:"Down",status:"Error"},new rK({error:w,results:Y})}}return{results:Y}}async#_(J,W,X){let Y=W.pendingMigrations.slice(0,X).map(($)=>{return{migrationName:$.name,direction:"Up",status:"NotExecuted"}});for(let $=0;$<Y.length;$++){let K=W.pendingMigrations[$];try{await K.up(J),await J.withPlugin(this.#K).insertInto(this.#Y).values({name:K.name,timestamp:new Date().toISOString()}).execute(),Y[$]={migrationName:K.name,direction:"Up",status:"Success"}}catch(w){throw Y[$]={migrationName:K.name,direction:"Up",status:"Error"},new rK({error:w,results:Y})}}return{results:Y}}async#U(J){if(this.#J.db.getExecutor().adapter.supportsCreateIfNotExists)J=J.ifNotExists();await J.execute()}}var m0="kysely_migration",J8="kysely_migration_lock",xh=!1,HF="migration_lock",mw6,rK;var nX=M(()=>{xX();R();mw6=Q({__noMigrations__:!0});rK=class rK extends Error{#J;constructor(J){super();this.#J=J}get resultSet(){return this.#J}}});class m9{#J;constructor(J){this.#J=J}async getSchemas(){return[]}async getTables(J={withInternalKyselyTables:!1}){return await this.#X(J)}async getMetadata(J){return{tables:await this.getTables(J)}}#W(J,W){let X=J.selectFrom("sqlite_master").where("type","in",["table","view"]).where("name","not like","sqlite_%").select(["name","sql","type"]).orderBy("name");if(!W.withInternalKyselyTables)X=X.where("name","!=",m0).where("name","!=",J8);return X}async#X(J){let W=await this.#W(this.#J,J).execute(),X=await this.#J.with("table_list",(Y)=>this.#W(Y,J)).selectFrom(["table_list as tl",X6`pragma_table_info(tl.name)`.as("p")]).select(["tl.name as table","p.cid","p.name","p.type","p.notnull","p.dflt_value","p.pk"]).orderBy("tl.name").orderBy("p.cid").execute(),G={};for(let Y of X)G[Y.table]??=[],G[Y.table].push(Y);return W.map(({name:Y,sql:$,type:K})=>{let w=$?.split(/[\(\),]/)?.find((z)=>z.toLowerCase().includes("autoincrement"))?.trimStart()?.split(/\s+/)?.[0]?.replace(/["`]/g,""),H=G[Y]??[];if(!w){let z=H.filter((N)=>N.pk>0);if(z.length===1&&z[0].type.toLowerCase()==="integer")w=z[0].name}return{name:Y,isView:K==="view",columns:H.map((z)=>({name:z.name,dataType:z.type,isNullable:!z.notnull,isAutoIncrementing:z.name===w,hasDefaultValue:z.dflt_value!=null,comment:void 0}))}})}}var NF=M(()=>{nX();sW()});var f9;var FF=M(()=>{f9=class f9 extends UW{get supportsTransactionalDdl(){return!1}get supportsReturning(){return!0}async acquireMigrationLock(J,W){}async releaseMigrationLock(J,W){}}});class nK{#J;constructor(J){this.#J=Q({...J})}createDriver(){return new GF(this.#J)}createQueryCompiler(){return new g9}createAdapter(){return new f9}createIntrospector(J){return new m9(J)}}var iv=M(()=>{$F();KF();NF();FF();R()});var av=()=>{};var uh,UF;var QF=M(()=>{rX();uh=/"/g;UF=class UF extends M8{sanitizeIdentifier(J){return J.replace(uh,'""')}}});class ZF{#J;constructor(J){this.#J=J}async getSchemas(){return(await this.#J.selectFrom("pg_catalog.pg_namespace").select("nspname").$castTo().execute()).map((W)=>({name:W.nspname}))}async getTables(J={withInternalKyselyTables:!1}){let W=this.#J.selectFrom("pg_catalog.pg_attribute as a").innerJoin("pg_catalog.pg_class as c","a.attrelid","c.oid").innerJoin("pg_catalog.pg_namespace as ns","c.relnamespace","ns.oid").innerJoin("pg_catalog.pg_type as typ","a.atttypid","typ.oid").innerJoin("pg_catalog.pg_namespace as dtns","typ.typnamespace","dtns.oid").select(["a.attname as column","a.attnotnull as not_null","a.atthasdef as has_default","c.relname as table","c.relkind as table_type","ns.nspname as schema","typ.typname as type","dtns.nspname as type_schema",X6`col_description(a.attrelid, a.attnum)`.as("column_description"),X6`pg_get_serial_sequence(quote_ident(ns.nspname) || '.' || quote_ident(c.relname), a.attname)`.as("auto_incrementing")]).where("c.relkind","in",["r","v","p"]).where("ns.nspname","!~","^pg_").where("ns.nspname","!=","information_schema").where("ns.nspname","!=","crdb_internal").where(X6`has_schema_privilege(ns.nspname, 'USAGE')`).where("a.attnum",">=",0).where("a.attisdropped","!=",!0).orderBy("ns.nspname").orderBy("c.relname").orderBy("a.attnum").$castTo();if(!J.withInternalKyselyTables)W=W.where("c.relname","!=",m0).where("c.relname","!=",J8);let X=await W.execute();return this.#W(X)}async getMetadata(J){return{tables:await this.getTables(J)}}#W(J){return J.reduce((W,X)=>{let G=W.find((Y)=>Y.name===X.table&&Y.schema===X.schema);if(!G)G=Q({name:X.table,isView:X.table_type==="v",schema:X.schema,columns:[]}),W.push(G);return G.columns.push(Q({name:X.column,dataType:X.type,dataTypeSchema:X.type_schema,isNullable:!X.not_null,isAutoIncrementing:X.auto_incrementing!==null,hasDefaultValue:X.has_default,comment:X.column_description??void 0})),W},[])}}var LF=M(()=>{nX();R();sW()});var ch,VF;var DF=M(()=>{sW();ch=BigInt("3853314791062309107");VF=class VF extends UW{get supportsTransactionalDdl(){return!0}get supportsReturning(){return!0}async acquireMigrationLock(J,W){await X6`select pg_advisory_xact_lock(${X6.lit(ch)})`.execute(J)}async releaseMigrationLock(J,W){}}});function PY(J,W){if(lh(J)&&W.stack){let X=W.stack.split(`
`).slice(1).join(`
`);return J.stack+=`
${X}`,J}return J}function lh(J){return J4(J)&&m6(J.stack)}var iK=M(()=>{R()});class MF{#J;#W=new WeakMap;#X;constructor(J){this.#J=Q({...J})}async init(){this.#X=f6(this.#J.pool)?await this.#J.pool():this.#J.pool}async acquireConnection(){let J=await this.#Y(),W=this.#W.get(J);if(!W){if(W=new ov(J),this.#W.set(J,W),this.#J?.onCreateConnection)await this.#J.onCreateConnection(W)}if(this.#J?.onReserveConnection)await this.#J.onReserveConnection(W);return W}async#Y(){return new Promise((J,W)=>{this.#X.getConnection(async(X,G)=>{if(X)W(X);else J(G)})})}async beginTransaction(J,W){if(W.isolationLevel||W.accessMode){let X=[];if(W.isolationLevel)X.push(`isolation level ${W.isolationLevel}`);if(W.accessMode)X.push(W.accessMode);let G=`set transaction ${X.join(", ")}`;await J.executeQuery(Y4.raw(G))}await J.executeQuery(Y4.raw("begin"))}async commitTransaction(J){await J.executeQuery(Y4.raw("commit"))}async rollbackTransaction(J){await J.executeQuery(Y4.raw("rollback"))}async savepoint(J,W,X){await J.executeQuery(X(x8("savepoint",W),N6()))}async rollbackToSavepoint(J,W,X){await J.executeQuery(X(x8("rollback to",W),N6()))}async releaseSavepoint(J,W,X){await J.executeQuery(X(x8("release savepoint",W),N6()))}async releaseConnection(J){J[tv]()}async destroy(){return new Promise((J,W)=>{this.#X.end((X)=>{if(X)W(X);else J()})})}}function ph(J){return J4(J)&&"insertId"in J&&"affectedRows"in J}var tv,ov;var OF=M(()=>{dK();OY();R();f8();iK();tv=Symbol();ov=class ov{#J;constructor(J){this.#J=J}async executeQuery(J){try{let W=await this.#W(J);if(ph(W)){let{insertId:X,affectedRows:G,changedRows:Y}=W;return{insertId:X!==void 0&&X!==null&&X.toString()!=="0"?BigInt(X):void 0,numAffectedRows:G!==void 0&&G!==null?BigInt(G):void 0,numChangedRows:Y!==void 0&&Y!==null?BigInt(Y):void 0,rows:[]}}else if(Array.isArray(W))return{rows:W};return{rows:[]}}catch(W){throw PY(W,Error())}}#W(J){return new Promise((W,X)=>{this.#J.query(J.sql,J.parameters,(G,Y)=>{if(G)X(G);else W(Y)})})}async*streamQuery(J,W){let X=this.#J.query(J.sql,J.parameters).stream({objectMode:!0});try{for await(let G of X)yield{rows:[G]}}catch(G){if(G&&typeof G==="object"&&"code"in G&&G.code==="ERR_STREAM_PREMATURE_CLOSE")return;throw G}}[tv](){this.#J.release()}}});var dh,PF;var vF=M(()=>{rX();dh=/`/g;PF=class PF extends M8{getCurrentParameterPlaceholder(){return"?"}getLeftExplainOptionsWrapper(){return""}getExplainOptionAssignment(){return"="}getExplainOptionsDelimiter(){return" "}getRightExplainOptionsWrapper(){return""}getLeftIdentifierWrapper(){return"`"}getRightIdentifierWrapper(){return"`"}sanitizeIdentifier(J){return J.replace(dh,"``")}visitCreateIndex(J){if(this.append("create "),J.unique)this.append("unique ");if(this.append("index "),J.ifNotExists)this.append("if not exists ");if(this.visitNode(J.name),J.using)this.append(" using "),this.visitNode(J.using);if(J.table)this.append(" on "),this.visitNode(J.table);if(J.columns)this.append(" ("),this.compileList(J.columns),this.append(")");if(J.where)this.append(" "),this.visitNode(J.where)}}});class jF{#J;constructor(J){this.#J=J}async getSchemas(){return(await this.#J.selectFrom("information_schema.schemata").select("schema_name").$castTo().execute()).map((W)=>({name:W.SCHEMA_NAME}))}async getTables(J={withInternalKyselyTables:!1}){let W=this.#J.selectFrom("information_schema.columns as columns").innerJoin("information_schema.tables as tables",(G)=>G.onRef("columns.TABLE_CATALOG","=","tables.TABLE_CATALOG").onRef("columns.TABLE_SCHEMA","=","tables.TABLE_SCHEMA").onRef("columns.TABLE_NAME","=","tables.TABLE_NAME")).select(["columns.COLUMN_NAME","columns.COLUMN_DEFAULT","columns.TABLE_NAME","columns.TABLE_SCHEMA","tables.TABLE_TYPE","columns.IS_NULLABLE","columns.DATA_TYPE","columns.EXTRA","columns.COLUMN_COMMENT"]).where("columns.TABLE_SCHEMA","=",X6`database()`).orderBy("columns.TABLE_NAME").orderBy("columns.ORDINAL_POSITION").$castTo();if(!J.withInternalKyselyTables)W=W.where("columns.TABLE_NAME","!=",m0).where("columns.TABLE_NAME","!=",J8);let X=await W.execute();return this.#W(X)}async getMetadata(J){return{tables:await this.getTables(J)}}#W(J){return J.reduce((W,X)=>{let G=W.find((Y)=>Y.name===X.TABLE_NAME);if(!G)G=Q({name:X.TABLE_NAME,isView:X.TABLE_TYPE==="VIEW",schema:X.TABLE_SCHEMA,columns:[]}),W.push(G);return G.columns.push(Q({name:X.COLUMN_NAME,dataType:X.DATA_TYPE,isNullable:X.IS_NULLABLE==="YES",isAutoIncrementing:X.EXTRA.toLowerCase().includes("auto_increment"),hasDefaultValue:X.COLUMN_DEFAULT!==null,comment:X.COLUMN_COMMENT===""?void 0:X.COLUMN_COMMENT})),W},[])}}var SF=M(()=>{nX();R();sW()});var sv="ea586330-2c93-47c8-908d-981d9d270f9d",rh=3600,_F;var TF=M(()=>{sW();_F=class _F extends UW{get supportsTransactionalDdl(){return!1}get supportsReturning(){return!1}async acquireMigrationLock(J,W){await X6`select get_lock(${X6.lit(sv)}, ${X6.lit(rh)})`.execute(J)}async releaseMigrationLock(J,W){await X6`select release_lock(${X6.lit(sv)})`.execute(J)}}});class aK{#J;constructor(J){this.#J=J}createDriver(){return new MF(this.#J)}createQueryCompiler(){return new PF}createAdapter(){return new _F}createIntrospector(J){return new jF(J)}}var ev=M(()=>{OF();vF();SF();TF()});var Jj=()=>{};class qF{#J;#W=new WeakMap;#X;constructor(J){this.#J=Q({...J})}async init(){this.#X=f6(this.#J.pool)?await this.#J.pool():this.#J.pool}async acquireConnection(){let J=await this.#X.connect(),W=this.#W.get(J);if(!W){if(W=new Xj(J,{cursor:this.#J.cursor??null}),this.#W.set(J,W),this.#J.onCreateConnection)await this.#J.onCreateConnection(W)}if(this.#J.onReserveConnection)await this.#J.onReserveConnection(W);return W}async beginTransaction(J,W){if(W.isolationLevel||W.accessMode){let X="start transaction";if(W.isolationLevel)X+=` isolation level ${W.isolationLevel}`;if(W.accessMode)X+=` ${W.accessMode}`;await J.executeQuery(Y4.raw(X))}else await J.executeQuery(Y4.raw("begin"))}async commitTransaction(J){await J.executeQuery(Y4.raw("commit"))}async rollbackTransaction(J){await J.executeQuery(Y4.raw("rollback"))}async savepoint(J,W,X){await J.executeQuery(X(x8("savepoint",W),N6()))}async rollbackToSavepoint(J,W,X){await J.executeQuery(X(x8("rollback to",W),N6()))}async releaseSavepoint(J,W,X){await J.executeQuery(X(x8("release",W),N6()))}async releaseConnection(J){J[Wj]()}async destroy(){if(this.#X){let J=this.#X;this.#X=void 0,await J.end()}}}var Wj,Xj;var BF=M(()=>{dK();OY();R();f8();iK();Wj=Symbol();Xj=class Xj{#J;#W;constructor(J,W){this.#J=J,this.#W=W}async executeQuery(J){try{let{command:W,rowCount:X,rows:G}=await this.#J.query(J.sql,[...J.parameters]);return{numAffectedRows:W==="INSERT"||W==="UPDATE"||W==="DELETE"||W==="MERGE"?BigInt(X):void 0,rows:G??[]}}catch(W){throw PY(W,Error())}}async*streamQuery(J,W){if(!this.#W.cursor)throw Error("'cursor' is not present in your postgres dialect config. It's required to make streaming work in postgres.");if(!Number.isInteger(W)||W<=0)throw Error("chunkSize must be a positive integer");let X=this.#J.query(new this.#W.cursor(J.sql,J.parameters.slice()));try{while(!0){let G=await X.read(W);if(G.length===0)break;yield{rows:G}}}finally{await X.close()}}[Wj](){this.#J.release()}}});var Yj=()=>{};class vY{#J;constructor(J){this.#J=J}createDriver(){return new qF(this.#J)}createQueryCompiler(){return new UF}createAdapter(){return new VF}createIntrospector(J){return new ZF(J)}}var Gj=M(()=>{BF();LF();QF();DF()});var AF;var EF=M(()=>{nX();sW();AF=class AF extends UW{get supportsCreateIfNotExists(){return!1}get supportsTransactionalDdl(){return!0}get supportsOutput(){return!0}async acquireMigrationLock(J){await X6`exec sp_getapplock @DbPrincipal = ${X6.lit("dbo")}, @Resource = ${X6.lit(m0)}, @LockMode = ${X6.lit("Exclusive")}`.execute(J)}async releaseMigrationLock(){}}});var $j=()=>{};class IF{#J;#W;constructor(J){this.#J=Q({...J});let{tarn:W,tedious:X,validateConnections:G}=this.#J,{validateConnections:Y,...$}=W.options;this.#W=new W.Pool({...$,create:async()=>{let K=await X.connectionFactory();return await new zj(K,X).connect()},destroy:async(K)=>{await K[wj]()},validate:G===!1||Y===!1?void 0:(K)=>K[Hj]()})}async init(){}async acquireConnection(){return await this.#W.acquire().promise}async beginTransaction(J,W){await J.beginTransaction(W)}async commitTransaction(J){await J.commitTransaction()}async rollbackTransaction(J){await J.rollbackTransaction()}async savepoint(J,W){await J.savepoint(W)}async rollbackToSavepoint(J,W){await J.rollbackTransaction(W)}async releaseConnection(J){if(this.#J.resetConnectionsOnRelease||this.#J.tedious.resetConnectionOnRelease)await J[Kj]();this.#W.release(J)}async destroy(){await this.#W.destroy()}}class tK{#J;#W;#X;#Y;#G;#w;constructor(J){let{compiledQuery:W,onDone:X,streamChunkSize:G,tedious:Y}=J;if(this.#W=[],this.#X=G,this.#Y={},this.#G=Y,X)this.#Y.onDone=(K,w)=>{if(K==="chunkReady")return;if(delete this.#Y.onDone,K==="error")return X.reject(w);X.resolve({rowCount:this.#w,rows:this.#W})};this.#J=new this.#G.Request(W.sql,($,K)=>{if($)return Object.values(this.#Y).forEach((w)=>w("error",$ instanceof AggregateError?$.errors:$));this.#w=K}),this.#K(W.parameters),this.#$()}get request(){return this.#J}readChunk(){let J=this.readChunk.name;return new Promise((W,X)=>{this.#Y[J]=(G,Y)=>{if(delete this.#Y[J],G==="error")return X(Y);W(this.#W.splice(0,this.#X))},this.#J.resume()})}#K(J){for(let W=0;W<J.length;W++){let X=J[W];this.#J.addParameter(String(W+1),this.#H(X),X)}}#$(){let J=this.#X?()=>{if(this.#X<=this.#W.length)this.#J.pause(),Object.values(this.#Y).forEach((X)=>X("chunkReady"))}:()=>{},W=(X)=>{let G={};for(let Y of X)G[Y.metadata.colName]=Y.value;this.#W.push(G),J()};this.#J.on("row",W),this.#J.once("requestCompleted",()=>{Object.values(this.#Y).forEach((X)=>X("completed")),this.#J.off("row",W)})}#H(J){if(bW(J)||k0(J)||m6(J))return this.#G.TYPES.NVarChar;if(kW(J)||d8(J)&&J%1===0)if(J<-2147483648||J>2147483647)return this.#G.TYPES.BigInt;else return this.#G.TYPES.Int;if(d8(J))return this.#G.TYPES.Float;if(sJ(J))return this.#G.TYPES.Bit;if(h1(J))return this.#G.TYPES.DateTime;if(h5(J))return this.#G.TYPES.VarBinary;return this.#G.TYPES.NVarChar}}var Kj,wj,Hj,zj;var RF=M(()=>{R();OY();iK();yz();Kj=Symbol(),wj=Symbol(),Hj=Symbol();zj=class zj{#J;#W;#X;constructor(J,W){this.#J=J,this.#W=!1,this.#X=W}async beginTransaction(J){let{isolationLevel:W}=J;await new Promise((X,G)=>this.#J.beginTransaction((Y)=>{if(Y)G(Y);else X(void 0)},W?NK(8):void 0,W?this.#Y(W):void 0))}async commitTransaction(){await new Promise((J,W)=>this.#J.commitTransaction((X)=>{if(X)W(X);else J(void 0)}))}async connect(){let{promise:J,reject:W,resolve:X}=new dW;this.#J.connect((Y)=>{if(Y)return W(Y);X()}),this.#J.on("error",(Y)=>{if(Y instanceof Error&&"code"in Y&&Y.code==="ESOCKET")this.#W=!0;console.error(Y),W(Y)});function G(){W(Error("The connection ended without ever completing the connection"))}return this.#J.once("end",G),await J,this.#J.off("end",G),this}async executeQuery(J){try{let W=new dW,X=new tK({compiledQuery:J,tedious:this.#X,onDone:W});this.#J.execSql(X.request);let{rowCount:G,rows:Y}=await W.promise;return{numAffectedRows:G!==void 0?BigInt(G):void 0,rows:Y}}catch(W){throw PY(W,Error())}}async rollbackTransaction(J){await new Promise((W,X)=>this.#J.rollbackTransaction((G)=>{if(G)X(G);else W(void 0)},J))}async savepoint(J){await new Promise((W,X)=>this.#J.saveTransaction((G)=>{if(G)X(G);else W(void 0)},J))}async*streamQuery(J,W){if(!Number.isInteger(W)||W<=0)throw Error("chunkSize must be a positive integer");let X=new tK({compiledQuery:J,streamChunkSize:W,tedious:this.#X});this.#J.execSql(X.request);try{while(!0){let G=await X.readChunk();if(G.length===0)break;if(yield{rows:G},G.length<W)break}}finally{await this.#G(X)}}#Y(J){let{ISOLATION_LEVEL:W}=this.#X,G={"read committed":W.READ_COMMITTED,"read uncommitted":W.READ_UNCOMMITTED,"repeatable read":W.REPEATABLE_READ,serializable:W.SERIALIZABLE,snapshot:W.SNAPSHOT}[J];if(G===void 0)throw Error(`Unknown isolation level: ${J}`);return G}#G(J){return new Promise((W)=>{if(J.request.once("requestCompleted",W),!this.#J.cancel())J.request.off("requestCompleted",W),W()})}[wj](){if("closed"in this.#J&&this.#J.closed)return Promise.resolve();return new Promise((J)=>{this.#J.once("end",J),this.#J.close()})}async[Kj](){await new Promise((J,W)=>{this.#J.reset((X)=>{if(X)return W(X);J()})})}async[Hj](){if(this.#W||this.#w())return!1;try{let J=new dW,W=new tK({compiledQuery:Y4.raw("select 1"),onDone:J,tedious:this.#X});return this.#J.execSql(W.request),await J.promise,!0}catch{return!1}}#w(){return"closed"in this.#J&&Boolean(this.#J.closed)}}});class CF{#J;constructor(J){this.#J=J}async getSchemas(){return await this.#J.selectFrom("sys.schemas").select("name").execute()}async getTables(J={withInternalKyselyTables:!1}){let W=await this.#J.selectFrom("sys.tables as tables").leftJoin("sys.schemas as table_schemas","table_schemas.schema_id","tables.schema_id").innerJoin("sys.columns as columns","columns.object_id","tables.object_id").innerJoin("sys.types as types","types.user_type_id","columns.user_type_id").leftJoin("sys.schemas as type_schemas","type_schemas.schema_id","types.schema_id").leftJoin("sys.extended_properties as comments",(G)=>G.onRef("comments.major_id","=","tables.object_id").onRef("comments.minor_id","=","columns.column_id").on("comments.name","=","MS_Description")).$if(!J.withInternalKyselyTables,(G)=>G.where("tables.name","!=",m0).where("tables.name","!=",J8)).select(["tables.name as table_name",(G)=>G.ref("tables.type").$castTo().as("table_type"),"table_schemas.name as table_schema_name","columns.default_object_id as column_default_object_id","columns.generated_always_type_desc as column_generated_always_type","columns.is_computed as column_is_computed","columns.is_identity as column_is_identity","columns.is_nullable as column_is_nullable","columns.is_rowguidcol as column_is_rowguidcol","columns.name as column_name","types.is_nullable as type_is_nullable","types.name as type_name","type_schemas.name as type_schema_name","comments.value as column_comment"]).unionAll(this.#J.selectFrom("sys.views as views").leftJoin("sys.schemas as view_schemas","view_schemas.schema_id","views.schema_id").innerJoin("sys.columns as columns","columns.object_id","views.object_id").innerJoin("sys.types as types","types.user_type_id","columns.user_type_id").leftJoin("sys.schemas as type_schemas","type_schemas.schema_id","types.schema_id").leftJoin("sys.extended_properties as comments",(G)=>G.onRef("comments.major_id","=","views.object_id").onRef("comments.minor_id","=","columns.column_id").on("comments.name","=","MS_Description")).select(["views.name as table_name","views.type as table_type","view_schemas.name as table_schema_name","columns.default_object_id as column_default_object_id","columns.generated_always_type_desc as column_generated_always_type","columns.is_computed as column_is_computed","columns.is_identity as column_is_identity","columns.is_nullable as column_is_nullable","columns.is_rowguidcol as column_is_rowguidcol","columns.name as column_name","types.is_nullable as type_is_nullable","types.name as type_name","type_schemas.name as type_schema_name","comments.value as column_comment"])).orderBy("table_schema_name").orderBy("table_name").orderBy("column_name").execute(),X={};for(let G of W){let Y=`${G.table_schema_name}.${G.table_name}`;(X[Y]=X[Y]||Q({columns:[],isView:G.table_type==="V ",name:G.table_name,schema:G.table_schema_name??void 0})).columns.push(Q({dataType:G.type_name,dataTypeSchema:G.type_schema_name??void 0,hasDefaultValue:G.column_default_object_id>0||G.column_generated_always_type!=="NOT_APPLICABLE"||G.column_is_identity||G.column_is_computed||G.column_is_rowguidcol,isAutoIncrementing:G.column_is_identity,isNullable:G.column_is_nullable&&G.type_is_nullable,name:G.column_name,comment:G.column_comment??void 0}))}return Object.values(X)}async getMetadata(J){return{tables:await this.getTables(J)}}}var bF=M(()=>{nX();R()});var nh,kF;var hF=M(()=>{rX();nh=/^[a-z0-9_]$/i;kF=class kF extends M8{getCurrentParameterPlaceholder(){return`@${this.numParameters}`}visitOffset(J){super.visitOffset(J),this.append(" rows")}compileColumnAlterations(J){let W={};for(let G of J){if(!W[G.kind])W[G.kind]=[];W[G.kind].push(G)}let X=!0;if(W.AddColumnNode)this.append("add "),this.compileList(W.AddColumnNode),X=!1;if(W.AlterColumnNode){if(!X)this.append(", ");this.compileList(W.AlterColumnNode)}if(W.DropColumnNode){if(!X)this.append(", ");this.append("drop column "),this.compileList(W.DropColumnNode)}if(W.ModifyColumnNode){if(!X)this.append(", ");this.compileList(W.ModifyColumnNode)}if(W.RenameColumnNode){if(!X)this.append(", ");this.compileList(W.RenameColumnNode)}}visitAddColumn(J){this.visitNode(J.column)}visitDropColumn(J){this.visitNode(J.column)}visitMergeQuery(J){super.visitMergeQuery(J),this.append(";")}visitCollate(J){this.append("collate ");let{name:W}=J.collation;for(let X of W)if(!nh.test(X))throw Error(`Invalid collation: ${W}`);this.append(W)}announcesNewColumnDataType(){return!1}}});class gF{#J;constructor(J){this.#J=J}createDriver(){return new IF(this.#J)}createQueryCompiler(){return new kF}createAdapter(){return new AF}createIntrospector(J){return new CF(J)}}var Nj=M(()=>{EF();RF();bF();hF()});var Fj=()=>{};class ih{#J;constructor(J){this.#J=J}async getMigrations(){let J={},W=await this.#J.fs.readdir(this.#J.migrationFolder);for(let X of W)if(X.endsWith(".js")||X.endsWith(".ts")&&!X.endsWith(".d.ts")||X.endsWith(".mjs")||X.endsWith(".mts")&&!X.endsWith(".d.mts")){let G=await import(this.#J.path.join(this.#J.migrationFolder,X)),Y=X.substring(0,X.lastIndexOf("."));if(Uj(G?.default))J[Y]=G.default;else if(Uj(G))J[Y]=G}return J}}function Uj(J){return J4(J)&&f6(J.up)}var Qj=M(()=>{R()});var Zj=()=>{};var mF;var Lj=M(()=>{yX();mF=class mF extends GJ{#J;constructor(J){super();this.#J=J}transformIdentifier(J,W){return J=super.transformIdentifier(J,W),{...J,name:this.#J(J.name)}}}});function Dj({upperCase:J=!1,underscoreBeforeDigits:W=!1,underscoreBetweenUppercaseLetters:X=!1}={}){return Oj((G)=>{if(G.length===0)return G;let Y=G.toUpperCase(),$=G.toLowerCase(),K=$[0];for(let w=1,H=G.length;w<H;++w){let z=G[w],N=G[w-1],U=Y[w],F=Y[w-1],Z=$[w],L=$[w-1];if(W&&Vj(z)&&!Vj(N)&&!K.endsWith("_")){K+="_"+z;continue}if(z===U&&U!==Z)if(X||!(N===F&&F!==L))K+="_"+Z;else K+=Z;else K+=z}if(J)return K.toUpperCase();else return K})}function Mj({upperCase:J=!1}={}){return Oj((W)=>{if(W.length===0)return W;if(J&&ah(W))W=W.toLowerCase();let X=W[0];for(let G=1,Y=W.length;G<Y;++G){let $=W[G],K=W[G-1];if($!=="_")if(K==="_")X+=$.toUpperCase();else X+=$}return X})}function ah(J){for(let W=1,X=J.length;W<X;++W){let G=J[W];if(G!=="_"&&G!==G.toUpperCase())return!1}return!0}function Vj(J){return J>="0"&&J<="9"}function Oj(J){let W=new Map;return(X)=>{let G=W.get(X);if(!G)G=J(X),W.set(X,G);return G}}class th{opt;#J;#W;#X;constructor(J={}){this.opt=J,this.#J=Mj(J),this.#W=Dj(J),this.#X=new mF(this.snakeCase.bind(this))}transformQuery(J){return this.#X.transformNode(J.node,J.queryId)}async transformResult(J){if(J.result.rows&&Array.isArray(J.result.rows))return{...J.result,rows:J.result.rows.map((W)=>this.mapRow(W))};return J.result}mapRow(J){return Object.keys(J).reduce((W,X)=>{let G=J[X];if(Array.isArray(G))G=G.map((Y)=>Pj(Y,this.opt)?this.mapRow(Y):Y);else if(Pj(G,this.opt))G=this.mapRow(G);return W[this.camelCase(X)]=G,W},{})}snakeCase(J){return this.#W(J)}camelCase(J){return this.#J(J)}}function Pj(J,W){return g5(J)&&!W?.maintainNestedObjectKeys}var vj=M(()=>{R();Lj()});var fF;var jj=M(()=>{yX();R();fF=class fF extends GJ{transformSelectQuery(J,W){return this.#J(super.transformSelectQuery(J,W))}transformUpdateQuery(J,W){return this.#J(super.transformUpdateQuery(J,W))}transformDeleteQuery(J,W){return this.#J(super.transformDeleteQuery(J,W))}#J(J){if(!J.joins||J.joins.length===0)return J;return Q({...J,joins:this.#W(J.joins)})}#W(J){let W=[];for(let X=0;X<J.length;++X){let G=!1;for(let Y=0;Y<W.length;++Y)if(m5(J[X],W[Y])){G=!0;break}if(!G)W.push(J[X])}return Q(W)}}});class oh{#J=new fF;transformQuery(J){return this.#J.transformNode(J.node,J.queryId)}transformResult(J){return Promise.resolve(J.result)}}var Sj=M(()=>{jj()});class sh{opt;#J;constructor(J={}){this.opt=J,this.#J=J.objectStrategy||"in-place"}transformQuery(J){return J.node}async transformResult(J){return{...J.result,rows:_j(J.result.rows,this.#J)}}}function _j(J,W){let X=W==="create"?Array(J.length):J;for(let G=0;G<J.length;++G)X[G]=yF(J[G],W);return X}function yF(J,W){if(m6(J))return eh(J);if(Array.isArray(J))return _j(J,W);if(g5(J))return Wg(J,W);return J}function eh(J){if(Jg(J))try{return yF(JSON.parse(J),"in-place")}catch(W){}return J}function Jg(J){return J.match(/^[\[\{]/)!=null}function Wg(J,W){let X=W==="create"?{}:J;for(let G in J)X[G]=yF(J[G],W);return X}var Tj=M(()=>{R()});var xF;var qj=M(()=>{yX();W9();WW();yW();xF=class xF extends GJ{#J;constructor(J){super();this.#J=J}transformBinaryOperation(J){if(this.#W(J))return this.#J(J);return J}#W(J){let{operator:W,rightOperand:X}=J;return(p1.is(X)||e8.is(X))&&X.values.length===0&&_0.is(W)&&(W.operator==="in"||W.operator==="not in")}}});class Xg{opt;#J;constructor(J){this.opt=J,this.#J=new xF(J.strategy)}transformQuery(J){return this.#J.transformNode(J.node,J.queryId)}async transformResult(J){return J.result}}var Bj=M(()=>{qj()});var Aj=M(()=>{oG();_K();SK();WW();yW();JJ();R()});var Ej=()=>{};var Ij=()=>{};var Rj=()=>{};var Cj=()=>{};var bj=()=>{};var kj=()=>{};var hj=()=>{};var NJ=M(()=>{lW();u1();f8();Iv();UK();p5();GY();Rv();Cv();bv();kv();hv();V9();Rz();wK();bz();mX();Mz();vK();Az();JN();jK();$N();nz();s3();WF();sW();fv();iN();XY();yv();rX();OY();pN();bN();xN();gN();uN();RN();kN();CN();hN();BK();AK();EN();fN();lN();yN();_N();rN();eG();TK();oN();uv();cv();lv();pv();dv();iv();av();$F();QF();LF();DF();ev();Jj();OF();vF();SF();TF();BF();Yj();Gj();KF();NF();FF();EF();$j();Nj();RF();bF();hF();rX();Fj();nX();Qj();Zj();vj();Sj();xX();Tj();Bj();Aj();UN();EK();CK();OK();n8();SN();RX();gW();oG();D9();_K();S9();o3();j9();T0();Tz();gz();HK();Ej();f5();x5();g1();gK();b9();uK();SK();jz();ON();K9();ZN();IK();iG();u5();c5();yK();kK();Lz();oz();q9();$9();ez();MN();tz();Hz();Nz();W4();hX();f1();o5();GN();J9();a5();F9();XK();uz();H9();jN();az();KK();qz();n3();i0();yX();YF();Ij();WW();Iz();CX();i5();Y9();Dz();JK();d1();Oz();Kz();A9();W9();h8();k8();r5();_9();VN();BN();Zz();eJ();sG();r3();uW();Pz();ZK();Rj();m1();Ez();wN();WN();B9();n1();Uz();yW();JJ();vz();gX();w9();fz();Cj();JF();bj();kj();eN();hj()});var mj={};N0(mj,{BunSqliteDialect:()=>Zg});var Hg=class{get supportsCreateIfNotExists(){return!0}get supportsTransactionalDdl(){return!1}get supportsReturning(){return!0}async acquireMigrationLock(){}async releaseMigrationLock(){}get supportsOutput(){return!0}},zg=class{#J;#W=new Fg;#X;#Y;constructor(J){this.#J={...J}}async init(){if(this.#X=this.#J.database,this.#Y=new Ng(this.#X),this.#J.onCreateConnection)await this.#J.onCreateConnection(this.#Y)}async acquireConnection(){return await this.#W.lock(),this.#Y}async beginTransaction(J){await J.executeQuery(Y4.raw("begin"))}async commitTransaction(J){await J.executeQuery(Y4.raw("commit"))}async rollbackTransaction(J){await J.executeQuery(Y4.raw("rollback"))}async releaseConnection(){this.#W.unlock()}async destroy(){this.#X?.close()}},Ng=class{#J;constructor(J){this.#J=J}executeQuery(J){let{sql:W,parameters:X}=J,G=this.#J.prepare(W);return Promise.resolve({rows:G.all(X)})}async*streamQuery(){throw Error("Streaming query is not supported by SQLite driver.")}},Fg=class{#J;#W;async lock(){while(this.#J)await this.#J;this.#J=new Promise((J)=>{this.#W=J})}unlock(){let J=this.#W;this.#J=void 0,this.#W=void 0,J?.()}},Ug=class{#J;constructor(J){this.#J=J}async getSchemas(){return[]}async getTables(J={withInternalKyselyTables:!1}){let W=this.#J.selectFrom("sqlite_schema").where("type","=","table").where("name","not like","sqlite_%").select("name").$castTo();if(!J.withInternalKyselyTables)W=W.where("name","!=",m0).where("name","!=",J8);let X=await W.execute();return Promise.all(X.map(({name:G})=>this.#W(G)))}async getMetadata(J){return{tables:await this.getTables(J)}}async#W(J){let W=this.#J,X=(await W.selectFrom("sqlite_master").where("name","=",J).select("sql").$castTo().execute())[0]?.sql?.split(/[\(\),]/)?.find((G)=>G.toLowerCase().includes("autoincrement"))?.split(/\s+/)?.[0]?.replace(/["`]/g,"");return{name:J,columns:(await W.selectFrom(X6`pragma_table_info(${J})`.as("table_info")).select(["name","type","notnull","dflt_value"]).execute()).map((G)=>({name:G.name,dataType:G.type,isNullable:!G.notnull,isAutoIncrementing:G.name===X,hasDefaultValue:G.dflt_value!=null})),isView:!0}}},Qg,Zg=class{#J;constructor(J){this.#J={...J}}createDriver(){return new zg(this.#J)}createQueryCompiler(){return new Qg}createAdapter(){return new Hg}createIntrospector(J){return new Ug(J)}};var fj=M(()=>{NJ();Qg=class extends M8{getCurrentParameterPlaceholder(){return"?"}getLeftIdentifierWrapper(){return'"'}getRightIdentifierWrapper(){return'"'}getAutoIncrement(){return"autoincrement"}}});var yj={};N0(yj,{NodeSqliteDialect:()=>vg});var Lg=class{get supportsCreateIfNotExists(){return!0}get supportsTransactionalDdl(){return!1}get supportsReturning(){return!0}async acquireMigrationLock(){}async releaseMigrationLock(){}get supportsOutput(){return!0}},Vg=class{#J;#W=new Mg;#X;#Y;constructor(J){this.#J={...J}}async init(){if(this.#X=this.#J.database,this.#Y=new Dg(this.#X),this.#J.onCreateConnection)await this.#J.onCreateConnection(this.#Y)}async acquireConnection(){return await this.#W.lock(),this.#Y}async beginTransaction(J){await J.executeQuery(Y4.raw("begin"))}async commitTransaction(J){await J.executeQuery(Y4.raw("commit"))}async rollbackTransaction(J){await J.executeQuery(Y4.raw("rollback"))}async releaseConnection(){this.#W.unlock()}async destroy(){this.#X?.close()}},Dg=class{#J;constructor(J){this.#J=J}executeQuery(J){let{sql:W,parameters:X}=J,G=this.#J.prepare(W).all(...X);return Promise.resolve({rows:G})}async*streamQuery(){throw Error("Streaming query is not supported by SQLite driver.")}},Mg=class{#J;#W;async lock(){while(this.#J)await this.#J;this.#J=new Promise((J)=>{this.#W=J})}unlock(){let J=this.#W;this.#J=void 0,this.#W=void 0,J?.()}},Og=class{#J;constructor(J){this.#J=J}async getSchemas(){return[]}async getTables(J={withInternalKyselyTables:!1}){let W=this.#J.selectFrom("sqlite_schema").where("type","=","table").where("name","not like","sqlite_%").select("name").$castTo();if(!J.withInternalKyselyTables)W=W.where("name","!=",m0).where("name","!=",J8);let X=await W.execute();return Promise.all(X.map(({name:G})=>this.#W(G)))}async getMetadata(J){return{tables:await this.getTables(J)}}async#W(J){let W=this.#J,X=(await W.selectFrom("sqlite_master").where("name","=",J).select("sql").$castTo().execute())[0]?.sql?.split(/[\(\),]/)?.find((G)=>G.toLowerCase().includes("autoincrement"))?.split(/\s+/)?.[0]?.replace(/["`]/g,"");return{name:J,columns:(await W.selectFrom(X6`pragma_table_info(${J})`.as("table_info")).select(["name","type","notnull","dflt_value"]).execute()).map((G)=>({name:G.name,dataType:G.type,isNullable:!G.notnull,isAutoIncrementing:G.name===X,hasDefaultValue:G.dflt_value!=null})),isView:!0}}},Pg,vg=class{#J;constructor(J){this.#J={...J}}createDriver(){return new Vg(this.#J)}createQueryCompiler(){return new Pg}createAdapter(){return new Lg}createIntrospector(J){return new Og(J)}};var xj=M(()=>{NJ();Pg=class extends M8{getCurrentParameterPlaceholder(){return"?"}getLeftIdentifierWrapper(){return'"'}getRightIdentifierWrapper(){return'"'}getAutoIncrement(){return"autoincrement"}}});function jY(J){if(!J)return null;if("dialect"in J)return jY(J.dialect);if("createDriver"in J){if(J instanceof nK)return"sqlite";if(J instanceof aK)return"mysql";if(J instanceof vY)return"postgres";if(J instanceof gF)return"mssql"}if("aggregate"in J)return"sqlite";if("getConnection"in J)return"mysql";if("connect"in J)return"postgres";if("fileControl"in J)return"sqlite";if("open"in J&&"close"in J&&"prepare"in J)return"sqlite";return null}var oK=async(J)=>{let W=J.database;if(!W)return{kysely:null,databaseType:null,transaction:void 0};if("db"in W)return{kysely:W.db,databaseType:W.type,transaction:W.transaction};if("dialect"in W)return{kysely:new D8({dialect:W.dialect}),databaseType:W.type,transaction:W.transaction};let X=void 0,G=jY(W);if("createDriver"in W)X=W;if("aggregate"in W&&!("createSession"in W))X=new nK({database:W});if("getConnection"in W)X=new aK(W);if("connect"in W)X=new vY({pool:W});if("fileControl"in W){let{BunSqliteDialect:Y}=await Promise.resolve().then(() => (fj(),mj));X=new Y({database:W})}if("createSession"in W&&typeof window>"u"){let Y=void 0;try{({DatabaseSync:Y}=await import("node:sqlite"))}catch($){if($!==null&&typeof $==="object"&&"code"in $&&$.code!=="ERR_UNKNOWN_BUILTIN_MODULE")throw $}if(Y&&W instanceof Y){let{NodeSqliteDialect:$}=await Promise.resolve().then(() => (xj(),yj));X=new $({database:W})}}return{kysely:X?new D8({dialect:X}):null,databaseType:G,transaction:void 0}};var iX=M(()=>{NJ()});function d6(J){return J}var y9=()=>{};var s,Y6;var lF=M(()=>{y9();s=d6({USER_NOT_FOUND:"User not found",FAILED_TO_CREATE_USER:"Failed to create user",FAILED_TO_CREATE_SESSION:"Failed to create session",FAILED_TO_UPDATE_USER:"Failed to update user",FAILED_TO_GET_SESSION:"Failed to get session",INVALID_PASSWORD:"Invalid password",INVALID_EMAIL:"Invalid email",INVALID_EMAIL_OR_PASSWORD:"Invalid email or password",SOCIAL_ACCOUNT_ALREADY_LINKED:"Social account already linked",PROVIDER_NOT_FOUND:"Provider not found",INVALID_TOKEN:"Invalid token",ID_TOKEN_NOT_SUPPORTED:"id_token not supported",FAILED_TO_GET_USER_INFO:"Failed to get user info",USER_EMAIL_NOT_FOUND:"User email not found",EMAIL_NOT_VERIFIED:"Email not verified",PASSWORD_TOO_SHORT:"Password too short",PASSWORD_TOO_LONG:"Password too long",USER_ALREADY_EXISTS:"User already exists.",USER_ALREADY_EXISTS_USE_ANOTHER_EMAIL:"User already exists. Use another email.",EMAIL_CAN_NOT_BE_UPDATED:"Email can not be updated",CREDENTIAL_ACCOUNT_NOT_FOUND:"Credential account not found",SESSION_EXPIRED:"Session expired. Re-authenticate to perform this action.",FAILED_TO_UNLINK_LAST_ACCOUNT:"You can't unlink your last account",ACCOUNT_NOT_FOUND:"Account not found",USER_ALREADY_HAS_PASSWORD:"User already has a password. Provide that to delete the account."}),Y6=class extends Error{constructor(J,W){super(J);this.name="BetterAuthError",this.message=J,this.cause=W,this.stack=""}}});var m4=M(()=>{y9();lF()});var O8=(J)=>{let W=(J.plugins??[]).reduce((z,N)=>{let U=N.schema;if(!U)return z;for(let[F,Z]of Object.entries(U))z[F]={fields:{...z[F]?.fields,...Z.fields},modelName:Z.modelName||F};return z},{}),X=J.rateLimit?.storage==="database",G={rateLimit:{modelName:J.rateLimit?.modelName||"rateLimit",fields:{key:{type:"string",fieldName:J.rateLimit?.fields?.key||"key"},count:{type:"number",fieldName:J.rateLimit?.fields?.count||"count"},lastRequest:{type:"number",bigint:!0,fieldName:J.rateLimit?.fields?.lastRequest||"lastRequest"}}}},{user:Y,session:$,account:K,...w}=W,H={session:{modelName:J.session?.modelName||"session",fields:{expiresAt:{type:"date",required:!0,fieldName:J.session?.fields?.expiresAt||"expiresAt"},token:{type:"string",required:!0,fieldName:J.session?.fields?.token||"token",unique:!0},createdAt:{type:"date",required:!0,fieldName:J.session?.fields?.createdAt||"createdAt",defaultValue:()=>new Date},updatedAt:{type:"date",required:!0,fieldName:J.session?.fields?.updatedAt||"updatedAt",onUpdate:()=>new Date},ipAddress:{type:"string",required:!1,fieldName:J.session?.fields?.ipAddress||"ipAddress"},userAgent:{type:"string",required:!1,fieldName:J.session?.fields?.userAgent||"userAgent"},userId:{type:"string",fieldName:J.session?.fields?.userId||"userId",references:{model:J.user?.modelName||"user",field:"id",onDelete:"cascade"},required:!0,index:!0},...$?.fields,...J.session?.additionalFields},order:2}};return{user:{modelName:J.user?.modelName||"user",fields:{name:{type:"string",required:!0,fieldName:J.user?.fields?.name||"name",sortable:!0},email:{type:"string",unique:!0,required:!0,fieldName:J.user?.fields?.email||"email",sortable:!0},emailVerified:{type:"boolean",defaultValue:!1,required:!0,fieldName:J.user?.fields?.emailVerified||"emailVerified",input:!1},image:{type:"string",required:!1,fieldName:J.user?.fields?.image||"image"},createdAt:{type:"date",defaultValue:()=>new Date,required:!0,fieldName:J.user?.fields?.createdAt||"createdAt"},updatedAt:{type:"date",defaultValue:()=>new Date,onUpdate:()=>new Date,required:!0,fieldName:J.user?.fields?.updatedAt||"updatedAt"},...Y?.fields,...J.user?.additionalFields},order:1},...!J.secondaryStorage||J.session?.storeSessionInDatabase?H:{},account:{modelName:J.account?.modelName||"account",fields:{accountId:{type:"string",required:!0,fieldName:J.account?.fields?.accountId||"accountId"},providerId:{type:"string",required:!0,fieldName:J.account?.fields?.providerId||"providerId"},userId:{type:"string",references:{model:J.user?.modelName||"user",field:"id",onDelete:"cascade"},required:!0,fieldName:J.account?.fields?.userId||"userId",index:!0},accessToken:{type:"string",required:!1,fieldName:J.account?.fields?.accessToken||"accessToken"},refreshToken:{type:"string",required:!1,fieldName:J.account?.fields?.refreshToken||"refreshToken"},idToken:{type:"string",required:!1,fieldName:J.account?.fields?.idToken||"idToken"},accessTokenExpiresAt:{type:"date",required:!1,fieldName:J.account?.fields?.accessTokenExpiresAt||"accessTokenExpiresAt"},refreshTokenExpiresAt:{type:"date",required:!1,fieldName:J.account?.fields?.refreshTokenExpiresAt||"refreshTokenExpiresAt"},scope:{type:"string",required:!1,fieldName:J.account?.fields?.scope||"scope"},password:{type:"string",required:!1,fieldName:J.account?.fields?.password||"password"},createdAt:{type:"date",required:!0,fieldName:J.account?.fields?.createdAt||"createdAt",defaultValue:()=>new Date},updatedAt:{type:"date",required:!0,fieldName:J.account?.fields?.updatedAt||"updatedAt",onUpdate:()=>new Date},...K?.fields,...J.account?.additionalFields},order:3},verification:{modelName:J.verification?.modelName||"verification",fields:{identifier:{type:"string",required:!0,fieldName:J.verification?.fields?.identifier||"identifier",index:!0},value:{type:"string",required:!0,fieldName:J.verification?.fields?.value||"value"},expiresAt:{type:"date",required:!0,fieldName:J.verification?.fields?.expiresAt||"expiresAt"},createdAt:{type:"date",required:!0,defaultValue:()=>new Date,fieldName:J.verification?.fields?.createdAt||"createdAt"},updatedAt:{type:"date",required:!0,defaultValue:()=>new Date,onUpdate:()=>new Date,fieldName:J.verification?.fields?.updatedAt||"updatedAt"}},order:4},...w,...X?G:{}}},aX=({usePlural:J,schema:W})=>{return(G)=>{if(J&&G.charAt(G.length-1)==="s"){let $=G.slice(0,-1),K=W[$]?$:void 0;if(!K)K=Object.entries(W).find(([w,H])=>H.modelName===$)?.[0];if(K)return K}let Y=W[G]?G:void 0;if(!Y)Y=Object.entries(W).find(([$,K])=>K.modelName===G)?.[0];if(!Y)throw new Y6(`Model "${G}" not found in schema`);return Y}},sK=({schema:J,usePlural:W})=>{let X=aX({schema:J,usePlural:W});return({field:Y,model:$})=>{if(Y==="id"||Y==="_id")return"id";let K=X($),w=J[K]?.fields[Y];if(!w){let H=Object.entries(J[K].fields).find(([z,N])=>N.fieldName===Y);if(H)w=H[1],Y=H[0]}if(!w)throw new Y6(`Field ${Y} not found in model ${K}`);return Y}},eK=({schema:J,usePlural:W})=>{let X=aX({schema:J,usePlural:W}),G=sK({schema:J,usePlural:W});function Y({model:$,field:K}){let w=X($),H=G({model:w,field:K});return J[w]?.fields[H]?.fieldName||H}return Y},Jw=({usePlural:J,schema:W})=>{let X=aX({schema:W,usePlural:J});return(Y)=>{let $=X(Y);if(W&&W[$]&&W[$].modelName!==Y)return J?`${W[$].modelName}s`:W[$].modelName;return J?`${Y}s`:Y}};var CJ=M(()=>{m4()});function Ww(J){return J?"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_":"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"}function uj(J,W,X){let G="",Y=0,$=0;for(let K of J){Y=Y<<8|K,$+=8;while($>=6)$-=6,G+=W[Y>>$&63]}if($>0)G+=W[Y<<6-$&63];if(X){let K=(4-G.length%4)%4;G+="=".repeat(K)}return G}function cj(J,W){let X=new Map;for(let K=0;K<W.length;K++)X.set(W[K],K);let G=[],Y=0,$=0;for(let K of J){if(K==="=")break;let w=X.get(K);if(w===void 0)throw Error(`Invalid Base64 character: ${K}`);if(Y=Y<<6|w,$+=6,$>=8)$-=8,G.push(Y>>$&255)}return Uint8Array.from(G)}var f4,L0;var f0=M(()=>{f4={encode(J,W={}){let X=Ww(!1),G=typeof J==="string"?new TextEncoder().encode(J):new Uint8Array(J);return uj(G,X,W.padding??!0)},decode(J){if(typeof J!=="string")J=new TextDecoder().decode(J);let W=J.includes("-")||J.includes("_"),X=Ww(W);return cj(J,X)}},L0={encode(J,W={}){let X=Ww(!0),G=typeof J==="string"?new TextEncoder().encode(J):new Uint8Array(J);return uj(G,X,W.padding??!0)},decode(J){let W=J.includes("-")||J.includes("_"),X=Ww(W);return cj(J,X)}}});function P8(){let J=typeof globalThis<"u"&&globalThis.crypto;if(J&&typeof J.subtle==="object"&&J.subtle!=null)return J.subtle;throw Error("crypto.subtle must be defined")}var tX=()=>{};function y0(J,W){return{digest:async(X)=>{let Y=typeof X==="string"?new TextEncoder().encode(X):X,$=await P8().digest(J,Y);if(W==="hex")return Array.from(new Uint8Array($)).map((H)=>H.toString(16).padStart(2,"0")).join("");if(W==="base64"||W==="base64url"||W==="base64urlnopad"){if(W.includes("url"))return L0.encode($,{padding:W!=="base64urlnopad"});return f4.encode($)}return $}}}var QW=M(()=>{f0();tX()});function jg(J){return J instanceof Uint8Array||ArrayBuffer.isView(J)&&J.constructor.name==="Uint8Array"}function Xw(J){if(typeof J!=="boolean")throw Error(`boolean expected, not ${J}`)}function x9(J){if(!Number.isSafeInteger(J)||J<0)throw Error("positive integer expected, got "+J)}function b4(J,W,X=""){let G=jg(J),Y=J?.length,$=W!==void 0;if(!G||$&&Y!==W){let K=X&&`"${X}" `,w=$?` of length ${W}`:"",H=G?`length=${Y}`:`type=${typeof J}`;throw Error(K+"expected Uint8Array"+w+", got "+H)}return J}function pF(J,W=!0){if(J.destroyed)throw Error("Hash instance has been destroyed");if(W&&J.finished)throw Error("Hash#digest() has already been called")}function pj(J,W){b4(J,void 0,"output");let X=W.outputLen;if(J.length<X)throw Error("digestInto() expects output buffer of length at least "+X)}function LW(J){return new Uint32Array(J.buffer,J.byteOffset,Math.floor(J.byteLength/4))}function VW(...J){for(let W=0;W<J.length;W++)J[W].fill(0)}function Sg(J){return new DataView(J.buffer,J.byteOffset,J.byteLength)}function dF(J){if(b4(J),dj)return J.toHex();let W="";for(let X=0;X<J.length;X++)W+=Tg[J[X]];return W}function lj(J){if(J>=ZW._0&&J<=ZW._9)return J-ZW._0;if(J>=ZW.A&&J<=ZW.F)return J-(ZW.A-10);if(J>=ZW.a&&J<=ZW.f)return J-(ZW.a-10);return}function rj(J){if(typeof J!=="string")throw Error("hex string expected, got "+typeof J);if(dj)return Uint8Array.fromHex(J);let W=J.length,X=W/2;if(W%2)throw Error("hex string expected, got unpadded hex of length "+W);let G=new Uint8Array(X);for(let Y=0,$=0;Y<X;Y++,$+=2){let K=lj(J.charCodeAt($)),w=lj(J.charCodeAt($+1));if(K===void 0||w===void 0){let H=J[$]+J[$+1];throw Error('hex string expected, got non-hex character "'+H+'" at index '+$)}G[Y]=K*16+w}return G}function nj(J){if(typeof J!=="string")throw Error("string expected");return new Uint8Array(new TextEncoder().encode(J))}function ij(...J){let W=0;for(let G=0;G<J.length;G++){let Y=J[G];b4(Y),W+=Y.length}let X=new Uint8Array(W);for(let G=0,Y=0;G<J.length;G++){let $=J[G];X.set($,Y),Y+=$.length}return X}function aj(J,W){if(W==null||typeof W!=="object")throw Error("options must be defined");return Object.assign(J,W)}function tj(J,W){if(J.length!==W.length)return!1;let X=0;for(let G=0;G<J.length;G++)X|=J[G]^W[G];return X===0}function nF(J,W,X=!0){if(W===void 0)return new Uint8Array(J);if(W.length!==J)throw Error('"output" expected Uint8Array of length '+J+", got: "+W.length);if(X&&!qg(W))throw Error("invalid output, must be aligned");return W}function oj(J,W,X){Xw(X);let G=new Uint8Array(16),Y=Sg(G);return Y.setBigUint64(0,BigInt(W),X),Y.setBigUint64(8,BigInt(J),X),G}function qg(J){return J.byteOffset%4===0}function SY(J){return Uint8Array.from(J)}function sj(J=32){let W=typeof globalThis==="object"?globalThis.crypto:null;if(typeof W?.getRandomValues!=="function")throw Error("crypto.getRandomValues must be defined");return W.getRandomValues(new Uint8Array(J))}function iF(J,W=sj){let{nonceLength:X}=J;x9(X);let G=(Y,$)=>{let K=ij(Y,$);return $.fill(0),K};return(Y,...$)=>({encrypt(K){b4(K);let w=W(X),H=J(Y,w,...$).encrypt(K);if(H instanceof Promise)return H.then((z)=>G(w,z));return G(w,H)},decrypt(K){b4(K);let w=K.subarray(0,X),H=K.subarray(X);return J(Y,w,...$).decrypt(H)}})}var _g,dj,Tg,ZW,rF=(J,W)=>{function X(G,...Y){if(b4(G,void 0,"key"),!_g)throw Error("Non little-endian hardware is not yet supported");if(J.nonceLength!==void 0){let N=Y[0];b4(N,J.varSizeNonce?void 0:J.nonceLength,"nonce")}let $=J.tagLength;if($&&Y[1]!==void 0)b4(Y[1],void 0,"AAD");let K=W(G,...Y),w=(N,U)=>{if(U!==void 0){if(N!==2)throw Error("cipher output not supported");b4(U,void 0,"output")}},H=!1;return{encrypt(N,U){if(H)throw Error("cannot encrypt() twice with same key + nonce");return H=!0,b4(N),w(K.encrypt.length,U),K.encrypt(N,U)},decrypt(N,U){if(b4(N),$&&N.length<$)throw Error('"ciphertext" expected length bigger than tagLength='+$);return w(K.decrypt.length,U),K.decrypt(N,U)}}}return Object.assign(X,J),X};var u9=M(()=>{/*! noble-ciphers - MIT License (c) 2023 Paul Miller (paulmillr.com) */_g=(()=>new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68)(),dj=(()=>typeof Uint8Array.from([]).toHex==="function"&&typeof Uint8Array.fromHex==="function")(),Tg=Array.from({length:256},(J,W)=>W.toString(16).padStart(2,"0"));ZW={_0:48,_9:57,A:65,F:70,a:97,f:102}});function J6(J,W){return J<<W|J>>>32-W}function aF(J){return J.byteOffset%4===0}function Cg(J,W,X,G,Y,$,K,w){let H=Y.length,z=new Uint8Array(Yw),N=LW(z),U=aF(Y)&&aF($),F=U?LW(Y):ej,Z=U?LW($):ej;for(let L=0;L<H;K++){if(J(W,X,G,N,K,w),K>=WS)throw Error("arx: counter overflow");let D=Math.min(Yw,H-L);if(U&&D===Yw){let O=L/4;if(L%4!==0)throw Error("arx: invalid block position");for(let P=0,_;P<Rg;P++)_=O+P,Z[_]=F[_]^N[P];L+=Yw;continue}for(let O=0,P;O<D;O++)P=L+O,$[P]=Y[P]^z[O];L+=D}}function tF(J,W){let{allowShortKeys:X,extendNonceFn:G,counterLength:Y,counterRight:$,rounds:K}=aj({allowShortKeys:!1,counterLength:8,counterRight:!1,rounds:20},W);if(typeof J!=="function")throw Error("core must be a function");return x9(Y),x9(K),Xw($),Xw(X),(w,H,z,N,U=0)=>{b4(w,void 0,"key"),b4(H,void 0,"nonce"),b4(z,void 0,"data");let F=z.length;if(N===void 0)N=new Uint8Array(F);if(b4(N,void 0,"output"),x9(U),U<0||U>=WS)throw Error("arx: counter overflow");if(N.length<F)throw Error(`arx: output (${N.length}) is shorter than data (${F})`);let Z=[],L=w.length,D,O;if(L===32)Z.push(D=SY(w)),O=Ig;else if(L===16&&X)D=new Uint8Array(32),D.set(w),D.set(w,16),O=Eg,Z.push(D);else throw b4(w,32,"arx key"),Error("invalid key size");if(!aF(H))Z.push(H=SY(H));let P=LW(D);if(G){if(H.length!==24)throw Error("arx: extended nonce must be 24 bytes");G(O,P,LW(H.subarray(0,16)),P),H=H.subarray(16)}let _=16-Y;if(_!==H.length)throw Error(`arx: nonce must be ${_} or 16 bytes`);if(_!==12){let v=new Uint8Array(12);v.set(H,$?0:12-H.length),H=v,Z.push(H)}let T=LW(H);return Cg(J,O,P,T,z,N,U,K),VW(...Z),N}}var JS=(J)=>Uint8Array.from(J.split(""),(W)=>W.charCodeAt(0)),Bg,Ag,Eg,Ig,Yw=64,Rg=16,WS=4294967295,ej;var XS=M(()=>{u9();Bg=JS("expand 16-byte k"),Ag=JS("expand 32-byte k"),Eg=LW(Bg),Ig=LW(Ag);ej=Uint32Array.of()});function V0(J,W){return J[W++]&255|(J[W++]&255)<<8}class YS{blockLen=16;outputLen=16;buffer=new Uint8Array(16);r=new Uint16Array(10);h=new Uint16Array(10);pad=new Uint16Array(8);pos=0;finished=!1;constructor(J){J=SY(b4(J,32,"key"));let W=V0(J,0),X=V0(J,2),G=V0(J,4),Y=V0(J,6),$=V0(J,8),K=V0(J,10),w=V0(J,12),H=V0(J,14);this.r[0]=W&8191,this.r[1]=(W>>>13|X<<3)&8191,this.r[2]=(X>>>10|G<<6)&7939,this.r[3]=(G>>>7|Y<<9)&8191,this.r[4]=(Y>>>4|$<<12)&255,this.r[5]=$>>>1&8190,this.r[6]=($>>>14|K<<2)&8191,this.r[7]=(K>>>11|w<<5)&8065,this.r[8]=(w>>>8|H<<8)&8191,this.r[9]=H>>>5&127;for(let z=0;z<8;z++)this.pad[z]=V0(J,16+2*z)}process(J,W,X=!1){let G=X?0:2048,{h:Y,r:$}=this,K=$[0],w=$[1],H=$[2],z=$[3],N=$[4],U=$[5],F=$[6],Z=$[7],L=$[8],D=$[9],O=V0(J,W+0),P=V0(J,W+2),_=V0(J,W+4),T=V0(J,W+6),v=V0(J,W+8),q=V0(J,W+10),S=V0(J,W+12),B=V0(J,W+14),A=Y[0]+(O&8191),E=Y[1]+((O>>>13|P<<3)&8191),I=Y[2]+((P>>>10|_<<6)&8191),m=Y[3]+((_>>>7|T<<9)&8191),u=Y[4]+((T>>>4|v<<12)&8191),b=Y[5]+(v>>>1&8191),g=Y[6]+((v>>>14|q<<2)&8191),f=Y[7]+((q>>>11|S<<5)&8191),p=Y[8]+((S>>>8|B<<8)&8191),l=Y[9]+(B>>>5|G),a=0,o=a+A*K+E*(5*D)+I*(5*L)+m*(5*Z)+u*(5*F);a=o>>>13,o&=8191,o+=b*(5*U)+g*(5*N)+f*(5*z)+p*(5*H)+l*(5*w),a+=o>>>13,o&=8191;let H6=a+A*w+E*K+I*(5*D)+m*(5*L)+u*(5*Z);a=H6>>>13,H6&=8191,H6+=b*(5*F)+g*(5*U)+f*(5*N)+p*(5*z)+l*(5*H),a+=H6>>>13,H6&=8191;let O6=a+A*H+E*w+I*K+m*(5*D)+u*(5*L);a=O6>>>13,O6&=8191,O6+=b*(5*Z)+g*(5*F)+f*(5*U)+p*(5*N)+l*(5*z),a+=O6>>>13,O6&=8191;let z6=a+A*z+E*H+I*w+m*K+u*(5*D);a=z6>>>13,z6&=8191,z6+=b*(5*L)+g*(5*Z)+f*(5*F)+p*(5*U)+l*(5*N),a+=z6>>>13,z6&=8191;let a4=a+A*N+E*z+I*H+m*w+u*K;a=a4>>>13,a4&=8191,a4+=b*(5*D)+g*(5*L)+f*(5*Z)+p*(5*F)+l*(5*U),a+=a4>>>13,a4&=8191;let IX=a+A*U+E*N+I*z+m*H+u*w;a=IX>>>13,IX&=8191,IX+=b*K+g*(5*D)+f*(5*L)+p*(5*Z)+l*(5*F),a+=IX>>>13,IX&=8191;let CW=a+A*F+E*U+I*N+m*z+u*H;a=CW>>>13,CW&=8191,CW+=b*w+g*K+f*(5*D)+p*(5*L)+l*(5*Z),a+=CW>>>13,CW&=8191;let C1=a+A*Z+E*F+I*U+m*N+u*z;a=C1>>>13,C1&=8191,C1+=b*H+g*w+f*K+p*(5*D)+l*(5*L),a+=C1>>>13,C1&=8191;let b1=a+A*L+E*Z+I*F+m*U+u*N;a=b1>>>13,b1&=8191,b1+=b*z+g*H+f*w+p*K+l*(5*D),a+=b1>>>13,b1&=8191;let k1=a+A*D+E*L+I*Z+m*F+u*U;a=k1>>>13,k1&=8191,k1+=b*N+g*z+f*H+p*w+l*K,a+=k1>>>13,k1&=8191,a=(a<<2)+a|0,a=a+o|0,o=a&8191,a=a>>>13,H6+=a,Y[0]=o,Y[1]=H6,Y[2]=O6,Y[3]=z6,Y[4]=a4,Y[5]=IX,Y[6]=CW,Y[7]=C1,Y[8]=b1,Y[9]=k1}finalize(){let{h:J,pad:W}=this,X=new Uint16Array(10),G=J[1]>>>13;J[1]&=8191;for(let K=2;K<10;K++)J[K]+=G,G=J[K]>>>13,J[K]&=8191;J[0]+=G*5,G=J[0]>>>13,J[0]&=8191,J[1]+=G,G=J[1]>>>13,J[1]&=8191,J[2]+=G,X[0]=J[0]+5,G=X[0]>>>13,X[0]&=8191;for(let K=1;K<10;K++)X[K]=J[K]+G,G=X[K]>>>13,X[K]&=8191;X[9]-=8192;let Y=(G^1)-1;for(let K=0;K<10;K++)X[K]&=Y;Y=~Y;for(let K=0;K<10;K++)J[K]=J[K]&Y|X[K];J[0]=(J[0]|J[1]<<13)&65535,J[1]=(J[1]>>>3|J[2]<<10)&65535,J[2]=(J[2]>>>6|J[3]<<7)&65535,J[3]=(J[3]>>>9|J[4]<<4)&65535,J[4]=(J[4]>>>12|J[5]<<1|J[6]<<14)&65535,J[5]=(J[6]>>>2|J[7]<<11)&65535,J[6]=(J[7]>>>5|J[8]<<8)&65535,J[7]=(J[8]>>>8|J[9]<<5)&65535;let $=J[0]+W[0];J[0]=$&65535;for(let K=1;K<8;K++)$=(J[K]+W[K]|0)+($>>>16)|0,J[K]=$&65535;VW(X)}update(J){pF(this),b4(J),J=SY(J);let{buffer:W,blockLen:X}=this,G=J.length;for(let Y=0;Y<G;){let $=Math.min(X-this.pos,G-Y);if($===X){for(;X<=G-Y;Y+=X)this.process(J,Y);continue}if(W.set(J.subarray(Y,Y+$),this.pos),this.pos+=$,Y+=$,this.pos===X)this.process(W,0,!1),this.pos=0}return this}destroy(){VW(this.h,this.r,this.buffer,this.pad)}digestInto(J){pF(this),pj(J,this),this.finished=!0;let{buffer:W,h:X}=this,{pos:G}=this;if(G){W[G++]=1;for(;G<16;G++)W[G]=0;this.process(W,0,!0)}this.finalize();let Y=0;for(let $=0;$<8;$++)J[Y++]=X[$]>>>0,J[Y++]=X[$]>>>8;return J}digest(){let{buffer:J,outputLen:W}=this;this.digestInto(J);let X=J.slice(0,W);return this.destroy(),X}}function bg(J){let W=(G,Y)=>J(Y).update(G).digest(),X=J(new Uint8Array(32));return W.outputLen=X.outputLen,W.blockLen=X.blockLen,W.create=(G)=>J(G),W}var GS;var $S=M(()=>{u9();GS=(()=>bg((J)=>new YS(J)))()});function HS(J,W,X,G,Y,$=20){let K=J[0],w=J[1],H=J[2],z=J[3],N=W[0],U=W[1],F=W[2],Z=W[3],L=W[4],D=W[5],O=W[6],P=W[7],_=Y,T=X[0],v=X[1],q=X[2],S=K,B=w,A=H,E=z,I=N,m=U,u=F,b=Z,g=L,f=D,p=O,l=P,a=_,o=T,H6=v,O6=q;for(let a4=0;a4<$;a4+=2)S=S+I|0,a=J6(a^S,16),g=g+a|0,I=J6(I^g,12),S=S+I|0,a=J6(a^S,8),g=g+a|0,I=J6(I^g,7),B=B+m|0,o=J6(o^B,16),f=f+o|0,m=J6(m^f,12),B=B+m|0,o=J6(o^B,8),f=f+o|0,m=J6(m^f,7),A=A+u|0,H6=J6(H6^A,16),p=p+H6|0,u=J6(u^p,12),A=A+u|0,H6=J6(H6^A,8),p=p+H6|0,u=J6(u^p,7),E=E+b|0,O6=J6(O6^E,16),l=l+O6|0,b=J6(b^l,12),E=E+b|0,O6=J6(O6^E,8),l=l+O6|0,b=J6(b^l,7),S=S+m|0,O6=J6(O6^S,16),p=p+O6|0,m=J6(m^p,12),S=S+m|0,O6=J6(O6^S,8),p=p+O6|0,m=J6(m^p,7),B=B+u|0,a=J6(a^B,16),l=l+a|0,u=J6(u^l,12),B=B+u|0,a=J6(a^B,8),l=l+a|0,u=J6(u^l,7),A=A+b|0,o=J6(o^A,16),g=g+o|0,b=J6(b^g,12),A=A+b|0,o=J6(o^A,8),g=g+o|0,b=J6(b^g,7),E=E+I|0,H6=J6(H6^E,16),f=f+H6|0,I=J6(I^f,12),E=E+I|0,H6=J6(H6^E,8),f=f+H6|0,I=J6(I^f,7);let z6=0;G[z6++]=K+S|0,G[z6++]=w+B|0,G[z6++]=H+A|0,G[z6++]=z+E|0,G[z6++]=N+I|0,G[z6++]=U+m|0,G[z6++]=F+u|0,G[z6++]=Z+b|0,G[z6++]=L+g|0,G[z6++]=D+f|0,G[z6++]=O+p|0,G[z6++]=P+l|0,G[z6++]=_+a|0,G[z6++]=T+o|0,G[z6++]=v+H6|0,G[z6++]=q+O6|0}function kg(J,W,X,G){let Y=J[0],$=J[1],K=J[2],w=J[3],H=W[0],z=W[1],N=W[2],U=W[3],F=W[4],Z=W[5],L=W[6],D=W[7],O=X[0],P=X[1],_=X[2],T=X[3];for(let q=0;q<20;q+=2)Y=Y+H|0,O=J6(O^Y,16),F=F+O|0,H=J6(H^F,12),Y=Y+H|0,O=J6(O^Y,8),F=F+O|0,H=J6(H^F,7),$=$+z|0,P=J6(P^$,16),Z=Z+P|0,z=J6(z^Z,12),$=$+z|0,P=J6(P^$,8),Z=Z+P|0,z=J6(z^Z,7),K=K+N|0,_=J6(_^K,16),L=L+_|0,N=J6(N^L,12),K=K+N|0,_=J6(_^K,8),L=L+_|0,N=J6(N^L,7),w=w+U|0,T=J6(T^w,16),D=D+T|0,U=J6(U^D,12),w=w+U|0,T=J6(T^w,8),D=D+T|0,U=J6(U^D,7),Y=Y+z|0,T=J6(T^Y,16),L=L+T|0,z=J6(z^L,12),Y=Y+z|0,T=J6(T^Y,8),L=L+T|0,z=J6(z^L,7),$=$+N|0,O=J6(O^$,16),D=D+O|0,N=J6(N^D,12),$=$+N|0,O=J6(O^$,8),D=D+O|0,N=J6(N^D,7),K=K+U|0,P=J6(P^K,16),F=F+P|0,U=J6(U^F,12),K=K+U|0,P=J6(P^K,8),F=F+P|0,U=J6(U^F,7),w=w+H|0,_=J6(_^w,16),Z=Z+_|0,H=J6(H^Z,12),w=w+H|0,_=J6(_^w,8),Z=Z+_|0,H=J6(H^Z,7);let v=0;G[v++]=Y,G[v++]=$,G[v++]=K,G[v++]=w,G[v++]=O,G[v++]=P,G[v++]=_,G[v++]=T}function wS(J,W,X,G,Y){if(Y!==void 0)b4(Y,void 0,"AAD");let $=J(W,X,fg),K=oj(G.length,Y?Y.length:0,!0),w=GS.create($);if(Y)KS(w,Y);KS(w,G),w.update(K);let H=w.digest();return VW($,K),H}var hg,gg,mg,KS=(J,W)=>{J.update(W);let X=W.length%16;if(X)J.update(mg.subarray(X))},fg,zS=(J)=>(W,X,G)=>{return{encrypt($,K){let w=$.length;K=nF(w+16,K,!1),K.set($);let H=K.subarray(0,-16);J(W,X,H,H,1);let z=wS(J,W,X,H,G);return K.set(z,w),VW(z),K},decrypt($,K){K=nF($.length-16,K,!1);let w=$.subarray(0,-16),H=$.subarray(-16),z=wS(J,W,X,w,G);if(!tj(H,z))throw Error("invalid tag");return K.set($.subarray(0,-16)),J(W,X,K,K,1),VW(z),K}}},TU6,oF;var NS=M(()=>{XS();$S();u9();hg=tF(HS,{counterRight:!1,counterLength:4,allowShortKeys:!1}),gg=tF(HS,{counterRight:!1,counterLength:8,extendNonceFn:kg,allowShortKeys:!1}),mg=new Uint8Array(16),fg=new Uint8Array(32);TU6=rF({blockSize:64,nonceLength:12,tagLength:16},zS(hg)),oF=rF({blockSize:64,nonceLength:24,tagLength:16},zS(gg))});var _Y;var Gw=M(()=>{_Y={encode:(J)=>{if(typeof J==="string")J=new TextEncoder().encode(J);if(J.byteLength===0)return"";let W=new Uint8Array(J),X="";for(let G of W)X+=G.toString(16).padStart(2,"0");return X},decode:(J)=>{if(!J)return"";if(typeof J==="string"){if(J.length%2!==0)throw Error("Invalid hexadecimal string");if(!new RegExp("^[0123456789abcdef]+$").test(J))throw Error("Invalid hexadecimal string");let W=new Uint8Array(J.length/2);for(let X=0;X<J.length;X+=2)W[X/2]=parseInt(J.slice(X,X+2),16);return new TextDecoder().decode(W)}return new TextDecoder().decode(J)}}});function yg(J){return J instanceof Uint8Array||ArrayBuffer.isView(J)&&J.constructor.name==="Uint8Array"}function x0(J,W=""){if(!Number.isSafeInteger(J)||J<0){let X=W&&`"${W}" `;throw Error(`${X}expected integer >= 0, got ${J}`)}}function MW(J,W,X=""){let G=yg(J),Y=J?.length,$=W!==void 0;if(!G||$&&Y!==W){let K=X&&`"${X}" `,w=$?` of length ${W}`:"",H=G?`length=${Y}`:`type=${typeof J}`;throw Error(K+"expected Uint8Array"+w+", got "+H)}return J}function oX(J){if(typeof J!=="function"||typeof J.create!=="function")throw Error("Hash must wrapped by utils.createHasher");x0(J.outputLen),x0(J.blockLen)}function TY(J,W=!0){if(J.destroyed)throw Error("Hash instance has been destroyed");if(W&&J.finished)throw Error("Hash#digest() has already been called")}function US(J,W){MW(J,void 0,"digestInto() output");let X=W.outputLen;if(J.length<X)throw Error('"digestInto() output" expected to be of length >='+X)}function $w(J){return new Uint32Array(J.buffer,J.byteOffset,Math.floor(J.byteLength/4))}function u0(...J){for(let W=0;W<J.length;W++)J[W].fill(0)}function qY(J){return new DataView(J.buffer,J.byteOffset,J.byteLength)}function FJ(J,W){return J<<32-W|J>>>W}function b6(J,W){return J<<W|J>>>32-W>>>0}function ug(J){return J<<24&4278190080|J<<8&16711680|J>>>8&65280|J>>>24&255}function cg(J){for(let W=0;W<J.length;W++)J[W]=ug(J[W]);return J}function FS(J){if(J>=DW._0&&J<=DW._9)return J-DW._0;if(J>=DW.A&&J<=DW.F)return J-(DW.A-10);if(J>=DW.a&&J<=DW.f)return J-(DW.a-10);return}function QS(J){if(typeof J!=="string")throw Error("hex string expected, got "+typeof J);if(lg)return Uint8Array.fromHex(J);let W=J.length,X=W/2;if(W%2)throw Error("hex string expected, got unpadded hex of length "+W);let G=new Uint8Array(X);for(let Y=0,$=0;Y<X;Y++,$+=2){let K=FS(J.charCodeAt($)),w=FS(J.charCodeAt($+1));if(K===void 0||w===void 0){let H=J[$]+J[$+1];throw Error('hex string expected, got non-hex character "'+H+'" at index '+$)}G[Y]=K*16+w}return G}async function Kw(J,W,X){let G=Date.now();for(let Y=0;Y<J;Y++){X(Y);let $=Date.now()-G;if($>=0&&$<W)continue;await pg(),G+=$}}function dg(J){if(typeof J!=="string")throw Error("string expected");return new Uint8Array(new TextEncoder().encode(J))}function eF(J,W=""){if(typeof J==="string")return dg(J);return MW(J,void 0,W)}function ww(J,W){if(W!==void 0&&{}.toString.call(W)!=="[object Object]")throw Error("options must be object or undefined");return Object.assign(J,W)}function ZS(J,W={}){let X=(Y,$)=>J($).update(Y).digest(),G=J(void 0);return X.outputLen=G.outputLen,X.blockLen=G.blockLen,X.create=(Y)=>J(Y),Object.assign(X,W),Object.freeze(X)}var xg,sF,lg,DW,pg=async()=>{},LS=(J)=>({oid:Uint8Array.from([6,9,96,134,72,1,101,3,4,2,J])});var eW=M(()=>{/*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) */xg=(()=>new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68)();sF=xg?(J)=>J:cg,lg=(()=>typeof Uint8Array.from([]).toHex==="function"&&typeof Uint8Array.fromHex==="function")(),DW={_0:48,_9:57,A:65,F:70,a:97,f:102}});class JU{oHash;iHash;blockLen;outputLen;finished=!1;destroyed=!1;constructor(J,W){if(oX(J),MW(W,void 0,"key"),this.iHash=J.create(),typeof this.iHash.update!=="function")throw Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;let X=this.blockLen,G=new Uint8Array(X);G.set(W.length>X?J.create().update(W).digest():W);for(let Y=0;Y<G.length;Y++)G[Y]^=54;this.iHash.update(G),this.oHash=J.create();for(let Y=0;Y<G.length;Y++)G[Y]^=106;this.oHash.update(G),u0(G)}update(J){return TY(this),this.iHash.update(J),this}digestInto(J){TY(this),MW(J,this.outputLen,"output"),this.finished=!0,this.iHash.digestInto(J),this.oHash.update(J),this.oHash.digestInto(J),this.destroy()}digest(){let J=new Uint8Array(this.oHash.outputLen);return this.digestInto(J),J}_cloneInto(J){J||=Object.create(Object.getPrototypeOf(this),{});let{oHash:W,iHash:X,finished:G,destroyed:Y,blockLen:$,outputLen:K}=this;return J=J,J.finished=G,J.destroyed=Y,J.blockLen=$,J.outputLen=K,J.oHash=W._cloneInto(J.oHash),J.iHash=X._cloneInto(J.iHash),J}clone(){return this._cloneInto()}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}}var BY=(J,W,X)=>new JU(J,W).update(X).digest();var WU=M(()=>{eW();BY.create=(J,W)=>new JU(J,W)});function rg(J,W,X,G){oX(J);let Y=ww({dkLen:32,asyncTick:10},G),{c:$,dkLen:K,asyncTick:w}=Y;if(x0($,"c"),x0(K,"dkLen"),x0(w,"asyncTick"),$<1)throw Error("iterations (c) must be >= 1");let H=eF(W,"password"),z=eF(X,"salt"),N=new Uint8Array(K),U=BY.create(J,H),F=U._cloneInto().update(z);return{c:$,dkLen:K,asyncTick:w,DK:N,PRF:U,PRFSalt:F}}function ng(J,W,X,G,Y){if(J.destroy(),W.destroy(),G)G.destroy();return u0(Y),X}function XU(J,W,X,G){let{c:Y,dkLen:$,DK:K,PRF:w,PRFSalt:H}=rg(J,W,X,G),z,N=new Uint8Array(4),U=qY(N),F=new Uint8Array(w.outputLen);for(let Z=1,L=0;L<$;Z++,L+=w.outputLen){let D=K.subarray(L,L+w.outputLen);U.setInt32(0,Z,!1),(z=H._cloneInto(z)).update(N).digestInto(F),D.set(F.subarray(0,D.length));for(let O=1;O<Y;O++){w._cloneInto(z).update(F).digestInto(F);for(let P=0;P<D.length;P++)D[P]^=F[P]}}return ng(w,H,K,z,F)}var VS=M(()=>{WU();eW()});function DS(J,W,X){return J&W^~J&X}function MS(J,W,X){return J&W^J&X^W&X}class Hw{blockLen;outputLen;padOffset;isLE;buffer;view;finished=!1;length=0;pos=0;destroyed=!1;constructor(J,W,X,G){this.blockLen=J,this.outputLen=W,this.padOffset=X,this.isLE=G,this.buffer=new Uint8Array(J),this.view=qY(this.buffer)}update(J){TY(this),MW(J);let{view:W,buffer:X,blockLen:G}=this,Y=J.length;for(let $=0;$<Y;){let K=Math.min(G-this.pos,Y-$);if(K===G){let w=qY(J);for(;G<=Y-$;$+=G)this.process(w,$);continue}if(X.set(J.subarray($,$+K),this.pos),this.pos+=K,$+=K,this.pos===G)this.process(W,0),this.pos=0}return this.length+=J.length,this.roundClean(),this}digestInto(J){TY(this),US(J,this),this.finished=!0;let{buffer:W,view:X,blockLen:G,isLE:Y}=this,{pos:$}=this;if(W[$++]=128,u0(this.buffer.subarray($)),this.padOffset>G-$)this.process(X,0),$=0;for(let N=$;N<G;N++)W[N]=0;X.setBigUint64(G-8,BigInt(this.length*8),Y),this.process(X,0);let K=qY(J),w=this.outputLen;if(w%4)throw Error("_sha2: outputLen must be aligned to 32bit");let H=w/4,z=this.get();if(H>z.length)throw Error("_sha2: outputLen bigger than state");for(let N=0;N<H;N++)K.setUint32(4*N,z[N],Y)}digest(){let{buffer:J,outputLen:W}=this;this.digestInto(J);let X=J.slice(0,W);return this.destroy(),X}_cloneInto(J){J||=new this.constructor,J.set(...this.get());let{blockLen:W,buffer:X,length:G,finished:Y,destroyed:$,pos:K}=this;if(J.destroyed=$,J.finished=Y,J.length=G,J.pos=K,G%W)J.buffer.set(X);return J}clone(){return this._cloneInto()}}var OW,PW,D0,M0;var OS=M(()=>{eW();OW=Uint32Array.from([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),PW=Uint32Array.from([3238371032,914150663,812702999,4144912697,4290775857,1750603025,1694076839,3204075428]),D0=Uint32Array.from([3418070365,3238371032,1654270250,914150663,2438529370,812702999,355462360,4144912697,1731405415,4290775857,2394180231,1750603025,3675008525,1694076839,1203062813,3204075428]),M0=Uint32Array.from([1779033703,4089235720,3144134277,2227873595,1013904242,4271175723,2773480762,1595750129,1359893119,2917565137,2600822924,725511199,528734635,4215389547,1541459225,327033209])});function ig(J,W=!1){if(W)return{h:Number(J&zw),l:Number(J>>PS&zw)};return{h:Number(J>>PS&zw)|0,l:Number(J&zw)|0}}function vS(J,W=!1){let X=J.length,G=new Uint32Array(X),Y=new Uint32Array(X);for(let $=0;$<X;$++){let{h:K,l:w}=ig(J[$],W);[G[$],Y[$]]=[K,w]}return[G,Y]}function bJ(J,W,X,G){let Y=(W>>>0)+(G>>>0);return{h:J+X+(Y/4294967296|0)|0,l:Y|0}}var zw,PS,YU=(J,W,X)=>J>>>X,GU=(J,W,X)=>J<<32-X|W>>>X,sX=(J,W,X)=>J>>>X|W<<32-X,eX=(J,W,X)=>J<<32-X|W>>>X,c9=(J,W,X)=>J<<64-X|W>>>X-32,l9=(J,W,X)=>J>>>X-32|W<<64-X,jS=(J,W,X)=>(J>>>0)+(W>>>0)+(X>>>0),SS=(J,W,X,G)=>W+X+G+(J/4294967296|0)|0,_S=(J,W,X,G)=>(J>>>0)+(W>>>0)+(X>>>0)+(G>>>0),TS=(J,W,X,G,Y)=>W+X+G+Y+(J/4294967296|0)|0,qS=(J,W,X,G,Y)=>(J>>>0)+(W>>>0)+(X>>>0)+(G>>>0)+(Y>>>0),BS=(J,W,X,G,Y,$)=>W+X+G+Y+$+(J/4294967296|0)|0;var AS=M(()=>{zw=BigInt(4294967295),PS=BigInt(32)});var tg,JX,$U,ES,og,IS,sg,eg,WX,XX,p9,Jm,Wm,q0,B0,Xm,Ym,AY;var KU=M(()=>{OS();AS();eW();tg=Uint32Array.from([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),JX=new Uint32Array(64);$U=class $U extends Hw{constructor(J){super(64,J,8,!1)}get(){let{A:J,B:W,C:X,D:G,E:Y,F:$,G:K,H:w}=this;return[J,W,X,G,Y,$,K,w]}set(J,W,X,G,Y,$,K,w){this.A=J|0,this.B=W|0,this.C=X|0,this.D=G|0,this.E=Y|0,this.F=$|0,this.G=K|0,this.H=w|0}process(J,W){for(let N=0;N<16;N++,W+=4)JX[N]=J.getUint32(W,!1);for(let N=16;N<64;N++){let U=JX[N-15],F=JX[N-2],Z=FJ(U,7)^FJ(U,18)^U>>>3,L=FJ(F,17)^FJ(F,19)^F>>>10;JX[N]=L+JX[N-7]+Z+JX[N-16]|0}let{A:X,B:G,C:Y,D:$,E:K,F:w,G:H,H:z}=this;for(let N=0;N<64;N++){let U=FJ(K,6)^FJ(K,11)^FJ(K,25),F=z+U+DS(K,w,H)+tg[N]+JX[N]|0,L=(FJ(X,2)^FJ(X,13)^FJ(X,22))+MS(X,G,Y)|0;z=H,H=w,w=K,K=$+F|0,$=Y,Y=G,G=X,X=F+L|0}X=X+this.A|0,G=G+this.B|0,Y=Y+this.C|0,$=$+this.D|0,K=K+this.E|0,w=w+this.F|0,H=H+this.G|0,z=z+this.H|0,this.set(X,G,Y,$,K,w,H,z)}roundClean(){u0(JX)}destroy(){this.set(0,0,0,0,0,0,0,0),u0(this.buffer)}};ES=class ES extends $U{A=OW[0]|0;B=OW[1]|0;C=OW[2]|0;D=OW[3]|0;E=OW[4]|0;F=OW[5]|0;G=OW[6]|0;H=OW[7]|0;constructor(){super(32)}};og=class og extends $U{A=PW[0]|0;B=PW[1]|0;C=PW[2]|0;D=PW[3]|0;E=PW[4]|0;F=PW[5]|0;G=PW[6]|0;H=PW[7]|0;constructor(){super(28)}};IS=(()=>vS(["0x428a2f98d728ae22","0x7137449123ef65cd","0xb5c0fbcfec4d3b2f","0xe9b5dba58189dbbc","0x3956c25bf348b538","0x59f111f1b605d019","0x923f82a4af194f9b","0xab1c5ed5da6d8118","0xd807aa98a3030242","0x12835b0145706fbe","0x243185be4ee4b28c","0x550c7dc3d5ffb4e2","0x72be5d74f27b896f","0x80deb1fe3b1696b1","0x9bdc06a725c71235","0xc19bf174cf692694","0xe49b69c19ef14ad2","0xefbe4786384f25e3","0x0fc19dc68b8cd5b5","0x240ca1cc77ac9c65","0x2de92c6f592b0275","0x4a7484aa6ea6e483","0x5cb0a9dcbd41fbd4","0x76f988da831153b5","0x983e5152ee66dfab","0xa831c66d2db43210","0xb00327c898fb213f","0xbf597fc7beef0ee4","0xc6e00bf33da88fc2","0xd5a79147930aa725","0x06ca6351e003826f","0x142929670a0e6e70","0x27b70a8546d22ffc","0x2e1b21385c26c926","0x4d2c6dfc5ac42aed","0x53380d139d95b3df","0x650a73548baf63de","0x766a0abb3c77b2a8","0x81c2c92e47edaee6","0x92722c851482353b","0xa2bfe8a14cf10364","0xa81a664bbc423001","0xc24b8b70d0f89791","0xc76c51a30654be30","0xd192e819d6ef5218","0xd69906245565a910","0xf40e35855771202a","0x106aa07032bbd1b8","0x19a4c116b8d2d0c8","0x1e376c085141ab53","0x2748774cdf8eeb99","0x34b0bcb5e19b48a8","0x391c0cb3c5c95a63","0x4ed8aa4ae3418acb","0x5b9cca4f7763e373","0x682e6ff3d6b2b8a3","0x748f82ee5defb2fc","0x78a5636f43172f60","0x84c87814a1f0ab72","0x8cc702081a6439ec","0x90befffa23631e28","0xa4506cebde82bde9","0xbef9a3f7b2c67915","0xc67178f2e372532b","0xca273eceea26619c","0xd186b8c721c0c207","0xeada7dd6cde0eb1e","0xf57d4f7fee6ed178","0x06f067aa72176fba","0x0a637dc5a2c898a6","0x113f9804bef90dae","0x1b710b35131c471b","0x28db77f523047d84","0x32caab7b40c72493","0x3c9ebe0a15c9bebc","0x431d67c49c100d4c","0x4cc5d4becb3e42b6","0x597f299cfc657e2a","0x5fcb6fab3ad6faec","0x6c44198c4a475817"].map((J)=>BigInt(J))))(),sg=(()=>IS[0])(),eg=(()=>IS[1])(),WX=new Uint32Array(80),XX=new Uint32Array(80);p9=class p9 extends Hw{constructor(J){super(128,J,16,!1)}get(){let{Ah:J,Al:W,Bh:X,Bl:G,Ch:Y,Cl:$,Dh:K,Dl:w,Eh:H,El:z,Fh:N,Fl:U,Gh:F,Gl:Z,Hh:L,Hl:D}=this;return[J,W,X,G,Y,$,K,w,H,z,N,U,F,Z,L,D]}set(J,W,X,G,Y,$,K,w,H,z,N,U,F,Z,L,D){this.Ah=J|0,this.Al=W|0,this.Bh=X|0,this.Bl=G|0,this.Ch=Y|0,this.Cl=$|0,this.Dh=K|0,this.Dl=w|0,this.Eh=H|0,this.El=z|0,this.Fh=N|0,this.Fl=U|0,this.Gh=F|0,this.Gl=Z|0,this.Hh=L|0,this.Hl=D|0}process(J,W){for(let _=0;_<16;_++,W+=4)WX[_]=J.getUint32(W),XX[_]=J.getUint32(W+=4);for(let _=16;_<80;_++){let T=WX[_-15]|0,v=XX[_-15]|0,q=sX(T,v,1)^sX(T,v,8)^YU(T,v,7),S=eX(T,v,1)^eX(T,v,8)^GU(T,v,7),B=WX[_-2]|0,A=XX[_-2]|0,E=sX(B,A,19)^c9(B,A,61)^YU(B,A,6),I=eX(B,A,19)^l9(B,A,61)^GU(B,A,6),m=_S(S,I,XX[_-7],XX[_-16]),u=TS(m,q,E,WX[_-7],WX[_-16]);WX[_]=u|0,XX[_]=m|0}let{Ah:X,Al:G,Bh:Y,Bl:$,Ch:K,Cl:w,Dh:H,Dl:z,Eh:N,El:U,Fh:F,Fl:Z,Gh:L,Gl:D,Hh:O,Hl:P}=this;for(let _=0;_<80;_++){let T=sX(N,U,14)^sX(N,U,18)^c9(N,U,41),v=eX(N,U,14)^eX(N,U,18)^l9(N,U,41),q=N&F^~N&L,S=U&Z^~U&D,B=qS(P,v,S,eg[_],XX[_]),A=BS(B,O,T,q,sg[_],WX[_]),E=B|0,I=sX(X,G,28)^c9(X,G,34)^c9(X,G,39),m=eX(X,G,28)^l9(X,G,34)^l9(X,G,39),u=X&Y^X&K^Y&K,b=G&$^G&w^$&w;O=L|0,P=D|0,L=F|0,D=Z|0,F=N|0,Z=U|0,{h:N,l:U}=bJ(H|0,z|0,A|0,E|0),H=K|0,z=w|0,K=Y|0,w=$|0,Y=X|0,$=G|0;let g=jS(E,m,b);X=SS(g,A,I,u),G=g|0}({h:X,l:G}=bJ(this.Ah|0,this.Al|0,X|0,G|0)),{h:Y,l:$}=bJ(this.Bh|0,this.Bl|0,Y|0,$|0),{h:K,l:w}=bJ(this.Ch|0,this.Cl|0,K|0,w|0),{h:H,l:z}=bJ(this.Dh|0,this.Dl|0,H|0,z|0),{h:N,l:U}=bJ(this.Eh|0,this.El|0,N|0,U|0),{h:F,l:Z}=bJ(this.Fh|0,this.Fl|0,F|0,Z|0),{h:L,l:D}=bJ(this.Gh|0,this.Gl|0,L|0,D|0),{h:O,l:P}=bJ(this.Hh|0,this.Hl|0,O|0,P|0),this.set(X,G,Y,$,K,w,H,z,N,U,F,Z,L,D,O,P)}roundClean(){u0(WX,XX)}destroy(){u0(this.buffer),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}};Jm=class Jm extends p9{Ah=M0[0]|0;Al=M0[1]|0;Bh=M0[2]|0;Bl=M0[3]|0;Ch=M0[4]|0;Cl=M0[5]|0;Dh=M0[6]|0;Dl=M0[7]|0;Eh=M0[8]|0;El=M0[9]|0;Fh=M0[10]|0;Fl=M0[11]|0;Gh=M0[12]|0;Gl=M0[13]|0;Hh=M0[14]|0;Hl=M0[15]|0;constructor(){super(64)}};Wm=class Wm extends p9{Ah=D0[0]|0;Al=D0[1]|0;Bh=D0[2]|0;Bl=D0[3]|0;Ch=D0[4]|0;Cl=D0[5]|0;Dh=D0[6]|0;Dl=D0[7]|0;Eh=D0[8]|0;El=D0[9]|0;Fh=D0[10]|0;Fl=D0[11]|0;Gh=D0[12]|0;Gl=D0[13]|0;Hh=D0[14]|0;Hl=D0[15]|0;constructor(){super(48)}};q0=Uint32Array.from([2352822216,424955298,1944164710,2312950998,502970286,855612546,1738396948,1479516111,258812777,2077511080,2011393907,79989058,1067287976,1780299464,286451373,2446758561]),B0=Uint32Array.from([573645204,4230739756,2673172387,3360449730,596883563,1867755857,2520282905,1497426621,2519219938,2827943907,3193839141,1401305490,721525244,746961066,246885852,2177182882]);Xm=class Xm extends p9{Ah=q0[0]|0;Al=q0[1]|0;Bh=q0[2]|0;Bl=q0[3]|0;Ch=q0[4]|0;Cl=q0[5]|0;Dh=q0[6]|0;Dl=q0[7]|0;Eh=q0[8]|0;El=q0[9]|0;Fh=q0[10]|0;Fl=q0[11]|0;Gh=q0[12]|0;Gl=q0[13]|0;Hh=q0[14]|0;Hl=q0[15]|0;constructor(){super(28)}};Ym=class Ym extends p9{Ah=B0[0]|0;Al=B0[1]|0;Bh=B0[2]|0;Bl=B0[3]|0;Ch=B0[4]|0;Cl=B0[5]|0;Dh=B0[6]|0;Dl=B0[7]|0;Eh=B0[8]|0;El=B0[9]|0;Fh=B0[10]|0;Fl=B0[11]|0;Gh=B0[12]|0;Gl=B0[13]|0;Hh=B0[14]|0;Hl=B0[15]|0;constructor(){super(32)}};AY=ZS(()=>new ES,LS(1))});function RS(J,W,X,G,Y,$){let K=J[W++]^X[G++],w=J[W++]^X[G++],H=J[W++]^X[G++],z=J[W++]^X[G++],N=J[W++]^X[G++],U=J[W++]^X[G++],F=J[W++]^X[G++],Z=J[W++]^X[G++],L=J[W++]^X[G++],D=J[W++]^X[G++],O=J[W++]^X[G++],P=J[W++]^X[G++],_=J[W++]^X[G++],T=J[W++]^X[G++],v=J[W++]^X[G++],q=J[W++]^X[G++],S=K,B=w,A=H,E=z,I=N,m=U,u=F,b=Z,g=L,f=D,p=O,l=P,a=_,o=T,H6=v,O6=q;for(let z6=0;z6<8;z6+=2)I^=b6(S+a|0,7),g^=b6(I+S|0,9),a^=b6(g+I|0,13),S^=b6(a+g|0,18),f^=b6(m+B|0,7),o^=b6(f+m|0,9),B^=b6(o+f|0,13),m^=b6(B+o|0,18),H6^=b6(p+u|0,7),A^=b6(H6+p|0,9),u^=b6(A+H6|0,13),p^=b6(u+A|0,18),E^=b6(O6+l|0,7),b^=b6(E+O6|0,9),l^=b6(b+E|0,13),O6^=b6(l+b|0,18),B^=b6(S+E|0,7),A^=b6(B+S|0,9),E^=b6(A+B|0,13),S^=b6(E+A|0,18),u^=b6(m+I|0,7),b^=b6(u+m|0,9),I^=b6(b+u|0,13),m^=b6(I+b|0,18),l^=b6(p+f|0,7),g^=b6(l+p|0,9),f^=b6(g+l|0,13),p^=b6(f+g|0,18),a^=b6(O6+H6|0,7),o^=b6(a+O6|0,9),H6^=b6(o+a|0,13),O6^=b6(H6+o|0,18);Y[$++]=K+S|0,Y[$++]=w+B|0,Y[$++]=H+A|0,Y[$++]=z+E|0,Y[$++]=N+I|0,Y[$++]=U+m|0,Y[$++]=F+u|0,Y[$++]=Z+b|0,Y[$++]=L+g|0,Y[$++]=D+f|0,Y[$++]=O+p|0,Y[$++]=P+l|0,Y[$++]=_+a|0,Y[$++]=T+o|0,Y[$++]=v+H6|0,Y[$++]=q+O6|0}function wU(J,W,X,G,Y){let $=G+0,K=G+16*Y;for(let w=0;w<16;w++)X[K+w]=J[W+(2*Y-1)*16+w];for(let w=0;w<Y;w++,$+=16,W+=16){if(RS(X,K,J,W,X,$),w>0)K+=16;RS(X,$,J,W+=16,X,K)}}function Gm(J,W,X){let G=ww({dkLen:32,asyncTick:10,maxmem:1073742848},X),{N:Y,r:$,p:K,dkLen:w,asyncTick:H,maxmem:z,onProgress:N}=G;if(x0(Y,"N"),x0($,"r"),x0(K,"p"),x0(w,"dkLen"),x0(H,"asyncTick"),x0(z,"maxmem"),N!==void 0&&typeof N!=="function")throw Error("progressCb must be a function");let U=128*$,F=U/4,Z=Math.pow(2,32);if(Y<=1||(Y&Y-1)!==0||Y>Z)throw Error('"N" expected a power of 2, and 2^1 <= N <= 2^32');if(K<1||K>(Z-1)*32/U)throw Error('"p" expected integer 1..((2^32 - 1) * 32) / (128 * r)');if(w<1||w>(Z-1)*32)throw Error('"dkLen" expected integer 1..(2^32 - 1) * 32');if(U*(Y+K)>z)throw Error('"maxmem" limit was hit, expected 128*r*(N+p) <= "maxmem"='+z);let D=XU(AY,J,W,{c:1,dkLen:U*K}),O=$w(D),P=$w(new Uint8Array(U*Y)),_=$w(new Uint8Array(U)),T=()=>{};if(N){let v=2*Y*K,q=Math.max(Math.floor(v/1e4),1),S=0;T=()=>{if(S++,N&&(!(S%q)||S===v))N(S/v)}}return{N:Y,r:$,p:K,dkLen:w,blockSize32:F,V:P,B32:O,B:D,tmp:_,blockMixCb:T,asyncTick:H}}function $m(J,W,X,G,Y){let $=XU(AY,J,X,{c:1,dkLen:W});return u0(X,G,Y),$}async function CS(J,W,X){let{N:G,r:Y,p:$,dkLen:K,blockSize32:w,V:H,B32:z,B:N,tmp:U,blockMixCb:F,asyncTick:Z}=Gm(J,W,X);sF(z);for(let L=0;L<$;L++){let D=w*L;for(let P=0;P<w;P++)H[P]=z[D+P];let O=0;await Kw(G-1,Z,()=>{wU(H,O,H,O+=w,Y),F()}),wU(H,(G-1)*w,z,D,Y),F(),await Kw(G,Z,()=>{let P=(z[D+w-16]&G-1)>>>0;for(let _=0;_<w;_++)U[_]=z[D+_]^H[P*w+_];wU(U,0,z,D,Y),F()})}return sF(z),$m(J,K,N,H,U)}var bS=M(()=>{VS();KU();eW()});function kS(J){switch(J){case"a-z":return"abcdefghijklmnopqrstuvwxyz";case"A-Z":return"ABCDEFGHIJKLMNOPQRSTUVWXYZ";case"0-9":return"0123456789";case"-_":return"-_";default:throw Error(`Unsupported alphabet: ${J}`)}}function EY(...J){let W=J.map(kS).join("");if(W.length===0)throw Error("No valid characters provided for random string generation.");let X=W.length;return(G,...Y)=>{if(G<=0)throw Error("Length must be a positive integer.");let $=W,K=X;if(Y.length>0)$=Y.map(kS).join(""),K=$.length;let w=Math.floor(256/K)*K,H=new Uint8Array(G*2),z=H.length,N="",U=z,F;while(N.length<G){if(U>=z)crypto.getRandomValues(H),U=0;if(F=H[U++],F<w)N+=$[F%K]}return N}}var Nw=()=>{};function HU(J,W){if(typeof J==="string")J=new TextEncoder().encode(J);if(typeof W==="string")W=new TextEncoder().encode(W);let X=new Uint8Array(J),G=new Uint8Array(W),Y=X.length^G.length,$=Math.max(X.length,G.length);for(let K=0;K<$;K++)Y|=(K<X.length?X[K]:0)^(K<G.length?G[K]:0);return Y===0}async function hS(J,W){return await CS(J.normalize("NFKC"),W,{N:IY.N,p:IY.p,r:IY.r,dkLen:IY.dkLen,maxmem:128*IY.N*IY.r*2})}var IY,gS=async(J)=>{let W=_Y.encode(crypto.getRandomValues(new Uint8Array(16))),X=await hS(J,W);return`${W}:${_Y.encode(X)}`},mS=async({hash:J,password:W})=>{let[X,G]=J.split(":");if(!X||!G)throw new Y6("Invalid password hash");return HU(await hS(W,X),QS(G))},t6,UJ=async({key:J,data:W})=>{let X=await y0("SHA-256").digest(J),G=nj(W);return dF(iF(oF)(new Uint8Array(X)).encrypt(G))},QJ=async({key:J,data:W})=>{let X=await y0("SHA-256").digest(J),G=rj(W),Y=iF(oF)(new Uint8Array(X));return new TextDecoder().decode(Y.decrypt(G))};var J0=M(()=>{m4();QW();NS();u9();Gw();bS();eW();Nw();IY={N:16384,r:16,p:1,dkLen:64};t6=EY("a-z","0-9","A-Z","-_")});async function Fw(){return Km}var Km;var Uw=M(()=>{Km=import("async_hooks").then((J)=>J.AsyncLocalStorage).catch((J)=>{if("AsyncLocalStorage"in globalThis)return globalThis.AsyncLocalStorage;throw console.warn("[better-auth] Warning: AsyncLocalStorage is not available in this environment. Some features may not work as expected."),console.warn("[better-auth] Please read more about this warning at https://better-auth.com/docs/installation#mount-handler"),console.warn("[better-auth] If you are using Cloudflare Workers, please see: https://developers.cloudflare.com/workers/configuration/compatibility-flags/#nodejs-compatibility-flag"),J})});async function v8(){let J=(await fS()).getStore();if(!J)throw Error("No auth context found. Please make sure you are calling this function within a `runWithEndpointContext` callback.");return J}async function RY(J,W){return(await fS()).run(J,W)}async function ZU(){return(await QU()).getStore()!==void 0}async function UU(){let J=(await QU()).getStore();if(!J)throw Error("No request state found. Please make sure you are calling this function within a `runWithRequestState` callback.");return J}async function LU(J,W){return(await QU()).run(J,W)}function VU(J){let W=Object.freeze({});return{get ref(){return W},async get(){let X=await UU();if(!X.has(W)){let G=await J();return X.set(W,G),G}return X.get(W)},async set(X){(await UU()).set(W,X)}}}var zU=null,fS=async()=>{if(!zU)zU=new(await Fw());return zU},NU=null,QU=async()=>{if(!NU)NU=new(await Fw());return NU},FU=null,DU=async()=>{if(!FU)FU=new(await Fw());return FU},e=async(J)=>{return DU().then((W)=>{return W.getStore()||J}).catch(()=>{return J})},MU=async(J,W)=>{let X=!0;return DU().then((G)=>{return X=!0,G.run(J,W)}).catch((G)=>{if(!X)return W();throw G})},d9=async(J,W)=>{let X=!0;return DU().then((G)=>{return X=!0,J.transaction(async(Y)=>{return G.run(Y,W)})}).catch((G)=>{if(!X)return W();throw G})};var OU=M(()=>{Uw()});var kJ=M(()=>{Uw();OU()});function jU(){return{root:{key:""},static:new Qw}}function SU(J){return J.split("/").filter(Boolean)}function yS(J,W){let X=new Qw;for(let[G,Y]of W){let $=G<0?J.slice(-1*G).join("/"):J[G];if(typeof Y==="string")X[Y]=$;else{let K=$.match(Y);if(K)for(let w in K.groups)X[w]=K.groups[w]}}return X}function _U(J,W="",X,G){let Y=SU(X),$=J.root,K=0,w=[];for(let z=0;z<Y.length;z++){let N=Y[z];if(N.startsWith("**")){if(!$.wildcard)$.wildcard={key:"**"};$=$.wildcard,w.push([-z,N.split(":")[1]||"_",N.length===2]);break}if(N==="*"||N.includes(":")){if(!$.param)$.param={key:"*"};$=$.param;let F=N==="*";w.push([z,F?`_${K++}`:wm(N),F]);continue}let U=$.static?.[N];if(U)$=U;else{let F={key:N};if(!$.static)$.static=new Qw;$.static[N]=F,$=F}}let H=w.length>0;if(!$.methods)$.methods=new Qw;if(!$.methods[W])$.methods[W]=[];if($.methods[W].push({data:G||null,paramsMap:H?w:void 0}),!H)J.static[X]=$}function wm(J){if(!J.includes(":",1))return J.slice(1);let W=J.replace(/:(\w+)/g,(X,G)=>`(?<${G}>\\w+)`);return new RegExp(`^${W}$`)}function xS(J,W="",X,G){if(X[X.length-1]==="/")X=X.slice(0,-1);let Y=J.static[X];if(Y&&Y.methods){let w=Y.methods[W]||Y.methods[""];if(w!==void 0)return w[0]}let $=SU(X),K=PU(J,J.root,W,$,0)?.[0];if(K===void 0)return;if(G?.params===!1)return K;return{data:K.data,params:K.paramsMap?yS($,K.paramsMap):void 0}}function PU(J,W,X,G,Y){if(Y===G.length){if(W.methods){let K=W.methods[X]||W.methods[""];if(K)return K}if(W.param&&W.param.methods){let K=W.param.methods[X]||W.param.methods[""];if(K){let w=K[0].paramsMap;if(w?.[w?.length-1]?.[2])return K}}if(W.wildcard&&W.wildcard.methods){let K=W.wildcard.methods[X]||W.wildcard.methods[""];if(K){let w=K[0].paramsMap;if(w?.[w?.length-1]?.[2])return K}}return}let $=G[Y];if(W.static){let K=W.static[$];if(K){let w=PU(J,K,X,G,Y+1);if(w)return w}}if(W.param){let K=PU(J,W.param,X,G,Y+1);if(K)return K}if(W.wildcard&&W.wildcard.methods)return W.wildcard.methods[X]||W.wildcard.methods[""];return}function uS(J,W="",X,G){if(X[X.length-1]==="/")X=X.slice(0,-1);let Y=SU(X),$=vU(J,J.root,W,Y,0);if(G?.params===!1)return $;return $.map((K)=>{return{data:K.data,params:K.paramsMap?yS(Y,K.paramsMap):void 0}})}function vU(J,W,X,G,Y,$=[]){let K=G[Y];if(W.wildcard&&W.wildcard.methods){let H=W.wildcard.methods[X]||W.wildcard.methods[""];if(H)$.push(...H)}if(W.param){if(vU(J,W.param,X,G,Y+1,$),Y===G.length&&W.param.methods){let H=W.param.methods[X]||W.param.methods[""];if(H)$.push(...H)}}let w=W.static?.[K];if(w)vU(J,w,X,G,Y+1,$);if(Y===G.length&&W.methods){let H=W.methods[X]||W.methods[""];if(H)$.push(...H)}return $}var Qw;var cS=M(()=>{Qw=(()=>{let J=function(){};return J.prototype=Object.create(null),J})()});function Hm(){let J=Object.getOwnPropertyDescriptor(Error,"stackTraceLimit");if(J===void 0)return Object.isExtensible(Error);return Object.prototype.hasOwnProperty.call(J,"writable")?J.writable:J.set!==void 0}function zm(J){let W=J.split(`
    at `);if(W.length<=1)return J;return W.splice(1,1),W.join(`
    at `)}function Nm(J,W){class X extends J{#J;constructor(...G){if(Hm()){let $=Error.stackTraceLimit;Error.stackTraceLimit=0;super(...G);Error.stackTraceLimit=$}else super(...G);let Y=Error().stack;if(Y)this.#J=zm(Y.replace(/^Error/,this.name))}get errorStack(){return this.#J}}return Object.defineProperty(X.prototype,"constructor",{get(){return W},enumerable:!1,configurable:!0}),X}async function Zm(J,W){let X=J.headers.get("content-type")||"",G=X.toLowerCase();if(!J.body)return;if(W&&W.length>0){if(!W.some((Y)=>{let $=G.split(";")[0].trim(),K=Y.toLowerCase().trim();return $===K||$.includes(K)})){if(!G)throw new V(415,{message:`Content-Type is required. Allowed types: ${W.join(", ")}`,code:"UNSUPPORTED_MEDIA_TYPE"});throw new V(415,{message:`Content-Type "${X}" is not allowed. Allowed types: ${W.join(", ")}`,code:"UNSUPPORTED_MEDIA_TYPE"})}}if(G.includes("application/json"))return await J.json();if(G.includes("application/x-www-form-urlencoded")){let Y=await J.formData(),$={};return Y.forEach((K,w)=>{$[w]=K.toString()}),$}if(G.includes("multipart/form-data")){let Y=await J.formData(),$={};return Y.forEach((K,w)=>{$[w]=K}),$}if(G.includes("text/plain"))return await J.text();if(G.includes("application/octet-stream"))return await J.arrayBuffer();if(G.includes("application/pdf")||G.includes("image/")||G.includes("video/"))return await J.blob();if(G.includes("application/stream")||J.body instanceof ReadableStream)return J.body;return await J.text()}function Dw(J){return J instanceof V||J?.name==="APIError"}function Lm(J){try{return J.includes("%")?decodeURIComponent(J):J}catch{return J}}function Vm(J){if(J===void 0)return!1;let W=typeof J;if(W==="string"||W==="number"||W==="boolean"||W===null)return!0;if(W!=="object")return!1;if(Array.isArray(J))return!0;if(J.buffer)return!1;return J.constructor&&J.constructor.name==="Object"||typeof J.toJSON==="function"}function Dm(J,W,X){let G=0,Y=new WeakMap;return JSON.stringify(J,(K,w)=>{if(typeof w==="bigint")return w.toString();if(typeof w==="object"&&w!==null){if(Y.has(w))return`[Circular ref-${Y.get(w)}]`;Y.set(w,G++)}if(W)return W(K,w);return w},X)}function Mm(J){if(!J||typeof J!=="object")return!1;return"_flag"in J&&J._flag==="json"}function YX(J,W){if(J instanceof Response){if(W?.headers instanceof Headers)W.headers.forEach((Y,$)=>{J.headers.set($,Y)});return J}if(Mm(J)){let{body:Y,routerResponse:$}=J;if($ instanceof Response)return $;let K=new Headers;if($?.headers){let w=new Headers($.headers);for(let[H,z]of w.entries())w.set(H,z)}if(J.headers)for(let[w,H]of new Headers(J.headers).entries())K.set(w,H);if(W?.headers)for(let[w,H]of new Headers(W.headers).entries())K.set(w,H);return K.set("Content-Type","application/json"),new Response(JSON.stringify(Y),{...$,headers:K,status:J.status??W?.status??$?.status,statusText:W?.statusText??$?.statusText})}if(Dw(J))return YX(J.body,{status:W?.status??J.statusCode,statusText:J.status.toString(),headers:W?.headers||J.headers});let X=J,G=new Headers(W?.headers);if(!J){if(J===null)X=JSON.stringify(null);G.set("content-type","application/json")}else if(typeof J==="string")X=J,G.set("Content-Type","text/plain");else if(J instanceof ArrayBuffer||ArrayBuffer.isView(J))X=J,G.set("Content-Type","application/octet-stream");else if(J instanceof Blob)X=J,G.set("Content-Type",J.type||"application/octet-stream");else if(J instanceof FormData)X=J;else if(J instanceof URLSearchParams)X=J,G.set("Content-Type","application/x-www-form-urlencoded");else if(J instanceof ReadableStream)X=J,G.set("Content-Type","application/octet-stream");else if(Vm(J))X=Dm(J),G.set("Content-Type","application/json");return new Response(X,{...W,headers:G})}async function Om(J,W={}){let X={body:W.body,query:W.query};if(J.body){let G=await J.body["~standard"].validate(W.body);if(G.issues)return{data:null,error:lS(G.issues,"body")};X.body=G.value}if(J.query){let G=await J.query["~standard"].validate(W.query);if(G.issues)return{data:null,error:lS(G.issues,"query")};X.query=G.value}if(J.requireHeaders&&!W.headers)return{data:null,error:{message:"Headers is required"}};if(J.requireRequest&&!W.request)return{data:null,error:{message:"Request is required"}};return{data:X,error:null}}function lS(J,W){let X=[];for(let G of J){let Y=G.message;X.push(Y)}return{message:`Invalid ${W} parameters`}}function Sm(J){if(typeof J!=="string")throw TypeError("argument str must be a string");let W=new Map,X=0;while(X<J.length){let G=J.indexOf("=",X);if(G===-1)break;let Y=J.indexOf(";",X);if(Y===-1)Y=J.length;else if(Y<G){X=J.lastIndexOf(";",G-1)+1;continue}let $=J.slice(X,G).trim();if(!W.has($)){let K=J.slice(G+1,Y).trim();if(K.codePointAt(0)===34)K=K.slice(1,-1);W.set($,Lm(K))}X=Y+1}return W}function a9(J,W,X){let G=typeof J==="string"?J:void 0,Y=typeof W==="object"?W:J,$=typeof W==="function"?W:X;if((Y.method==="GET"||Y.method==="HEAD")&&Y.body)throw new Qm("Body is not allowed with GET or HEAD methods");let K=async(...w)=>{let H=w[0]||{},z=await N_(H,{options:Y,path:G}),N=await $(z).catch(async(Z)=>{if(Dw(Z)){let L=Y.onAPIError;if(L)await L(Z);if(H.asResponse)return Z}throw Z}),U=z.responseHeaders,F=z.responseStatus;return H.asResponse?YX(N,{headers:U,status:F}):H.returnHeaders?H.returnStatus?{headers:U,response:N,status:F}:{headers:U,response:N}:H.returnStatus?{response:N,status:F}:N};return K.options=Y,K.path=G,K}function J1(J,W){let X=async(G)=>{let Y=G,$=typeof J==="function"?J:W,K=await N_(Y,{options:typeof J==="function"?{}:J,path:"/"});if(!$)throw Error("handler must be defined");let w=await $(K),H=K.responseHeaders;return Y.returnHeaders?{headers:H,response:w}:w};return X.options=typeof J==="function"?{}:J,X}function L6(J,W,X){function G(w,H){var z;Object.defineProperty(w,"_zod",{value:w._zod??{},enumerable:!1}),(z=w._zod).traits??(z.traits=new Set),w._zod.traits.add(J),W(w,H);for(let N in K.prototype)if(!(N in w))Object.defineProperty(w,N,{value:K.prototype[N].bind(w)});w._zod.constr=K,w._zod.def=H}let Y=X?.Parent??Object;class $ extends Y{}Object.defineProperty($,"name",{value:J});function K(w){var H;let z=X?.Parent?new $:this;G(z,w),(H=z._zod).deferred??(H.deferred=[]);for(let N of z._zod.deferred)N();return z}return Object.defineProperty(K,"init",{value:G}),Object.defineProperty(K,Symbol.hasInstance,{value:(w)=>{if(X?.Parent&&w instanceof X.Parent)return!0;return w?._zod?.traits?.has(J)}}),Object.defineProperty(K,"name",{value:J}),K}function W1(J){if(J)Object.assign(qU,J);return qU}function Tm(J){let W=Object.values(J).filter((X)=>typeof X==="number");return Object.entries(J).filter(([X,G])=>W.indexOf(+X)===-1).map(([X,G])=>G)}function qm(J,W){if(typeof W==="bigint")return W.toString();return W}function F_(J){return{get value(){{let W=J();return Object.defineProperty(this,"value",{value:W}),W}throw Error("cached value already set")}}}function CU(J){return J===null||J===void 0}function bU(J){let W=J.startsWith("^")?1:0,X=J.endsWith("$")?J.length-1:J.length;return J.slice(W,X)}function j4(J,W,X){Object.defineProperty(J,W,{get(){{let G=X();return J[W]=G,G}throw Error("cached value already set")},set(G){Object.defineProperty(J,W,{value:G})},configurable:!0})}function U_(J,W,X){Object.defineProperty(J,W,{value:X,writable:!0,enumerable:!0,configurable:!0})}function r9(J){return JSON.stringify(J)}function BU(J){return typeof J==="object"&&J!==null&&!Array.isArray(J)}function AU(J){if(BU(J)===!1)return!1;let W=J.constructor;if(W===void 0)return!0;let X=W.prototype;if(BU(X)===!1)return!1;if(Object.prototype.hasOwnProperty.call(X,"isPrototypeOf")===!1)return!1;return!0}function Em(J){return J.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function Y1(J,W,X){let G=new J._zod.constr(W??J._zod.def);if(!W||X?.parent)G._zod.parent=J;return G}function ZJ(J){let W=J;if(!W)return{};if(typeof W==="string")return{error:()=>W};if(W?.message!==void 0){if(W?.error!==void 0)throw Error("Cannot specify both `message` and `error` params");W.error=W.message}if(delete W.message,typeof W.error==="string")return{...W,error:()=>W.error};return W}function Im(J){return Object.keys(J).filter((W)=>{return J[W]._zod.optin==="optional"&&J[W]._zod.optout==="optional"})}function Rm(J,W){let X={},G=J._zod.def;for(let Y in W){if(!(Y in G.shape))throw Error(`Unrecognized key: "${Y}"`);if(!W[Y])continue;X[Y]=G.shape[Y]}return Y1(J,{...J._zod.def,shape:X,checks:[]})}function Cm(J,W){let X={...J._zod.def.shape},G=J._zod.def;for(let Y in W){if(!(Y in G.shape))throw Error(`Unrecognized key: "${Y}"`);if(!W[Y])continue;delete X[Y]}return Y1(J,{...J._zod.def,shape:X,checks:[]})}function bm(J,W){if(!AU(W))throw Error("Invalid input to extend: expected a plain object");return Y1(J,{...J._zod.def,get shape(){let X={...J._zod.def.shape,...W};return U_(this,"shape",X),X},checks:[]})}function km(J,W){return Y1(J,{...J._zod.def,get shape(){let X={...J._zod.def.shape,...W._zod.def.shape};return U_(this,"shape",X),X},catchall:W._zod.def.catchall,checks:[]})}function hm(J,W,X){let G=W._zod.def.shape,Y={...G};if(X)for(let $ in X){if(!($ in G))throw Error(`Unrecognized key: "${$}"`);if(!X[$])continue;Y[$]=J?new J({type:"optional",innerType:G[$]}):G[$]}else for(let $ in G)Y[$]=J?new J({type:"optional",innerType:G[$]}):G[$];return Y1(W,{...W._zod.def,shape:Y,checks:[]})}function gm(J,W,X){let G=W._zod.def.shape,Y={...G};if(X)for(let $ in X){if(!($ in Y))throw Error(`Unrecognized key: "${$}"`);if(!X[$])continue;Y[$]=new J({type:"nonoptional",innerType:G[$]})}else for(let $ in G)Y[$]=new J({type:"nonoptional",innerType:G[$]});return Y1(W,{...W._zod.def,shape:Y,checks:[]})}function n9(J,W=0){for(let X=W;X<J.issues.length;X++)if(J.issues[X]?.continue!==!0)return!0;return!1}function kU(J,W){return W.map((X)=>{var G;return(G=X).path??(G.path=[]),X.path.unshift(J),X})}function Zw(J){return typeof J==="string"?J:J?.message}function X1(J,W,X){let G={...J,path:J.path??[]};if(!J.message)G.message=Zw(J.inst?._zod.def?.error?.(J))??Zw(W?.error?.(J))??Zw(X.customError?.(J))??Zw(X.localeError?.(J))??"Invalid input";if(delete G.inst,delete G.continue,!W?.reportInput)delete G.input;return G}function hU(J){if(Array.isArray(J))return"array";if(typeof J==="string")return"string";return"unknown"}function o9(...J){let[W,X,G]=J;if(typeof W==="string")return{message:W,code:"custom",input:X,inst:G};return{...W}}function mm(J,W=(X)=>X.message){let X={},G=[];for(let Y of J.issues)if(Y.path.length>0)X[Y.path[0]]=X[Y.path[0]]||[],X[Y.path[0]].push(W(Y));else G.push(W(Y));return{formErrors:G,fieldErrors:X}}function fm(J,W){let X=W||function($){return $.message},G={_errors:[]},Y=($)=>{for(let K of $.issues)if(K.code==="invalid_union"&&K.errors.length)K.errors.map((w)=>Y({issues:w}));else if(K.code==="invalid_key")Y({issues:K.issues});else if(K.code==="invalid_element")Y({issues:K.issues});else if(K.path.length===0)G._errors.push(X(K));else{let w=G,H=0;while(H<K.path.length){let z=K.path[H];if(H!==K.path.length-1)w[z]=w[z]||{_errors:[]};else w[z]=w[z]||{_errors:[]},w[z]._errors.push(X(K));w=w[z],H++}}};return Y(J),G}function dS(J,W,X){if(J.issues.length)W.issues.push(...kU(X,J.issues));W.value[X]=J.value}function Lw(J,W,X){if(J.issues.length)W.issues.push(...kU(X,J.issues));W.value[X]=J.value}function rS(J,W,X,G){if(J.issues.length)if(G[X]===void 0)if(X in G)W.value[X]=void 0;else W.value[X]=J.value;else W.issues.push(...kU(X,J.issues));else if(J.value===void 0){if(X in G)W.value[X]=void 0}else W.value[X]=J.value}function nS(J,W,X,G){for(let Y of J)if(Y.issues.length===0)return W.value=Y.value,W;return W.issues.push({code:"invalid_union",input:W.value,inst:X,errors:J.map((Y)=>Y.issues.map(($)=>X1($,G,W1())))}),W}function EU(J,W){if(J===W)return{valid:!0,data:J};if(J instanceof Date&&W instanceof Date&&+J===+W)return{valid:!0,data:J};if(AU(J)&&AU(W)){let X=Object.keys(W),G=Object.keys(J).filter(($)=>X.indexOf($)!==-1),Y={...J,...W};for(let $ of G){let K=EU(J[$],W[$]);if(!K.valid)return{valid:!1,mergeErrorPath:[$,...K.mergeErrorPath]};Y[$]=K.data}return{valid:!0,data:Y}}if(Array.isArray(J)&&Array.isArray(W)){if(J.length!==W.length)return{valid:!1,mergeErrorPath:[]};let X=[];for(let G=0;G<J.length;G++){let Y=J[G],$=W[G],K=EU(Y,$);if(!K.valid)return{valid:!1,mergeErrorPath:[G,...K.mergeErrorPath]};X.push(K.data)}return{valid:!0,data:X}}return{valid:!1,mergeErrorPath:[]}}function iS(J,W,X){if(W.issues.length)J.issues.push(...W.issues);if(X.issues.length)J.issues.push(...X.issues);if(n9(J))return J;let G=EU(W.value,X.value);if(!G.valid)throw Error(`Unmergable intersection. Error path: ${JSON.stringify(G.mergeErrorPath)}`);return J.value=G.data,J}function aS(J,W){if(J.value===void 0)J.value=W.defaultValue;return J}function tS(J,W){if(!J.issues.length&&J.value===void 0)J.issues.push({code:"invalid_type",expected:"nonoptional",input:J.value,inst:W});return J}function oS(J,W,X){if(n9(J))return J;return W.out._zod.run({value:J.value,issues:J.issues},X)}function sS(J){return J.value=Object.freeze(J.value),J}function eS(J,W,X,G){if(!J){let Y={code:"custom",input:X,inst:G,path:[...G._zod.def.path??[]],continue:!G._zod.def.abort};if(G._zod.def.params)Y.params=G._zod.def.params;W.issues.push(o9(Y))}}function Qf(){return new Uf}function Zf(J){return new J({type:"unknown"})}function Lf(J,W){return new J({type:"never",...ZJ(W)})}function Vf(J,W){return new lm({check:"max_length",...ZJ(W),maximum:J})}function J_(J,W){return new pm({check:"min_length",...ZJ(W),minimum:J})}function Df(J,W){return new dm({check:"length_equals",...ZJ(W),length:J})}function Mf(J){return new rm({check:"overwrite",tx:J})}function Of(J,W,X){return new J({type:"array",element:W,...ZJ(X)})}function Pf(J,W,X){return new J({type:"custom",check:"custom",fn:W,...ZJ(X)})}function W_(){return Zf(Tf)}function Bf(J){return Lf(qf,J)}function Ef(J,W){return Of(Af,J,W)}function Rf(J,W){return new If({type:"union",options:J,...ZJ(W)})}function bf(J,W){return new Cf({type:"intersection",left:J,right:W})}function kf(J,W){return new IU({type:"enum",entries:Array.isArray(J)?Object.fromEntries(J.map((X)=>[X,X])):J,...ZJ(W)})}function gf(J){return new hf({type:"transform",transform:J})}function X_(J){return new i9({type:"optional",innerType:J})}function Y_(J){return new mf({type:"nullable",innerType:J})}function yf(J,W){return new ff({type:"default",innerType:J,get defaultValue(){return typeof W==="function"?W():W}})}function uf(J,W){return new xf({type:"prefault",innerType:J,get defaultValue(){return typeof W==="function"?W():W}})}function cf(J,W){return new P_({type:"nonoptional",innerType:J,...ZJ(W)})}function pf(J,W){return new lf({type:"catch",innerType:J,catchValue:typeof W==="function"?W:()=>W})}function G_(J,W){return new df({type:"pipe",in:J,out:W})}function nf(J){return new rf({type:"readonly",innerType:J})}function tf(J){let W=new CY({check:"custom"});return W._zod.check=J,W}function of(J,W={}){return Pf(af,J,W)}function sf(J){let W=tf((X)=>{return X.addIssue=(G)=>{if(typeof G==="string")X.issues.push(o9(G,X.value,W._zod.def));else{let Y=G;if(Y.fatal)Y.continue=!1;Y.code??(Y.code="custom"),Y.input??(Y.input=X.value),Y.inst??(Y.inst=W),Y.continue??(Y.continue=!W._zod.def.abort),X.issues.push(o9(Y))}},J(X.value,X)});return W}function v_(J){switch(J.constructor.name){case"ZodString":return"string";case"ZodNumber":return"number";case"ZodBoolean":return"boolean";case"ZodObject":return"object";case"ZodArray":return"array";default:return"string"}}function $_(J){let W=[];if(J.metadata?.openapi?.parameters)return W.push(...J.metadata.openapi.parameters),W;if(J.query instanceof Mw)Object.entries(J.query.shape).forEach(([X,G])=>{if(G instanceof Mw)W.push({name:X,in:"query",schema:{type:v_(G),..."minLength"in G&&G.minLength?{minLength:G.minLength}:{},description:G.description}})});return W}function ef(J){if(J.metadata?.openapi?.requestBody)return J.metadata.openapi.requestBody;if(!J.body)return;if(J.body instanceof Mw||J.body instanceof i9){let W=J.body.shape;if(!W)return;let X={},G=[];return Object.entries(W).forEach(([Y,$])=>{if($ instanceof Mw){if(X[Y]={type:v_($),description:$.description},!($ instanceof i9))G.push(Y)}}),{required:J.body instanceof i9?!1:J.body?!0:!1,content:{"application/json":{schema:{type:"object",properties:X,required:G}}}}}}function K_(J){return{"400":{content:{"application/json":{schema:{type:"object",properties:{message:{type:"string"}},required:["message"]}}},description:"Bad Request. Usually due to missing parameters, or invalid parameters."},"401":{content:{"application/json":{schema:{type:"object",properties:{message:{type:"string"}},required:["message"]}}},description:"Unauthorized. Due to missing or invalid authentication."},"403":{content:{"application/json":{schema:{type:"object",properties:{message:{type:"string"}}}}},description:"Forbidden. You do not have permission to access this resource or to perform this action."},"404":{content:{"application/json":{schema:{type:"object",properties:{message:{type:"string"}}}}},description:"Not Found. The requested resource was not found."},"429":{content:{"application/json":{schema:{type:"object",properties:{message:{type:"string"}}}}},description:"Too Many Requests. You have exceeded the rate limit. Try again later."},"500":{content:{"application/json":{schema:{type:"object",properties:{message:{type:"string"}}}}},description:"Internal Server Error. This is a problem with the server that you cannot fix."},...J}}async function Jy(J,W){let X={schemas:{}};return Object.entries(J).forEach(([G,Y])=>{let $=Y.options;if(!Y.path||$.metadata?.SERVER_ONLY)return;if($.method==="GET")TU[Y.path]={get:{tags:["Default",...$.metadata?.openapi?.tags||[]],description:$.metadata?.openapi?.description,operationId:$.metadata?.openapi?.operationId,security:[{bearerAuth:[]}],parameters:$_($),responses:K_($.metadata?.openapi?.responses)}};if($.method==="POST"){let K=ef($);TU[Y.path]={post:{tags:["Default",...$.metadata?.openapi?.tags||[]],description:$.metadata?.openapi?.description,operationId:$.metadata?.openapi?.operationId,security:[{bearerAuth:[]}],parameters:$_($),...K?{requestBody:K}:{requestBody:{content:{"application/json":{schema:{type:"object",properties:{}}}}}},responses:K_($.metadata?.openapi?.responses)}}}}),{openapi:"3.1.1",info:{title:"Better Auth",description:"API Reference for your Better Auth Instance",version:"1.1.0"},components:X,security:[{apiKeyCookie:[]}],servers:[{url:W?.url}],tags:[{name:"Default",description:"Default endpoints that are included with Better Auth by default. These endpoints are not part of any plugin."}],paths:TU}}var Fm,Um,Qm,V,RU,w_=async(J)=>{let W=typeof J==="string"?new TextEncoder().encode(J):J;return await P8().importKey("raw",W,RU,!1,["sign","verify"])},Pm=async(J,W,X)=>{try{let G=atob(J),Y=new Uint8Array(G.length);for(let $=0,K=G.length;$<K;$++)Y[$]=G.charCodeAt($);return await P8().verify(RU,X,Y,new TextEncoder().encode(W))}catch(G){return!1}},vm=async(J,W)=>{let X=await w_(W),G=await P8().sign(RU.name,X,new TextEncoder().encode(J));return btoa(String.fromCharCode(...new Uint8Array(G)))},jm=async(J,W)=>{let X=await vm(J,W);return J=`${J}.${X}`,J=encodeURIComponent(J),J},pS=(J,W)=>{let X=J;if(W)if(W==="secure")X="__Secure-"+J;else if(W==="host")X="__Host-"+J;else return;return X},H_=(J,W,X={})=>{let G;if(X?.prefix==="secure")G=`${`__Secure-${J}`}=${W}`;else if(X?.prefix==="host")G=`${`__Host-${J}`}=${W}`;else G=`${J}=${W}`;if(J.startsWith("__Secure-")&&!X.secure)X.secure=!0;if(J.startsWith("__Host-")){if(!X.secure)X.secure=!0;if(X.path!=="/")X.path="/";if(X.domain)X.domain=void 0}if(X&&typeof X.maxAge==="number"&&X.maxAge>=0){if(X.maxAge>34560000)throw Error("Cookies Max-Age SHOULD NOT be greater than 400 days (34560000 seconds) in duration.");G+=`; Max-Age=${Math.floor(X.maxAge)}`}if(X.domain&&X.prefix!=="host")G+=`; Domain=${X.domain}`;if(X.path)G+=`; Path=${X.path}`;if(X.expires){if(X.expires.getTime()-Date.now()>34560000000)throw Error("Cookies Expires SHOULD NOT be greater than 400 days (34560000 seconds) in the future.");G+=`; Expires=${X.expires.toUTCString()}`}if(X.httpOnly)G+="; HttpOnly";if(X.secure)G+="; Secure";if(X.sameSite)G+=`; SameSite=${X.sameSite.charAt(0).toUpperCase()+X.sameSite.slice(1)}`;if(X.partitioned){if(!X.secure)X.secure=!0;G+="; Partitioned"}return G},_m=(J,W,X)=>{return W=encodeURIComponent(W),H_(J,W,X)},z_=async(J,W,X,G)=>{return W=await jm(W,X),H_(J,W,G)},N_=async(J,{options:W,path:X})=>{let G=new Headers,Y=void 0,{data:$,error:K}=await Om(W,J);if(K)throw new V(400,{message:K.message,code:"VALIDATION_ERROR"});let w="headers"in J?J.headers instanceof Headers?J.headers:new Headers(J.headers):("request"in J)&&J.request instanceof Request?J.request.headers:null,H=w?.get("cookie"),z=H?Sm(H):void 0,N={...J,body:$.body,query:$.query,path:J.path||X||"virtual:",context:"context"in J&&J.context?J.context:{},returned:void 0,headers:J?.headers,request:J?.request,params:"params"in J?J.params:void 0,method:J.method,setHeader:(U,F)=>{G.set(U,F)},getHeader:(U)=>{if(!w)return null;return w.get(U)},getCookie:(U,F)=>{let Z=pS(U,F);if(!Z)return null;return z?.get(Z)||null},getSignedCookie:async(U,F,Z)=>{let L=pS(U,Z);if(!L)return null;let D=z?.get(L);if(!D)return null;let O=D.lastIndexOf(".");if(O<1)return null;let P=D.substring(0,O),_=D.substring(O+1);if(_.length!==44||!_.endsWith("="))return null;return await Pm(_,P,await w_(F))?P:!1},setCookie:(U,F,Z)=>{let L=_m(U,F,Z);return G.append("set-cookie",L),L},setSignedCookie:async(U,F,Z,L)=>{let D=await z_(U,F,Z,L);return G.append("set-cookie",D),D},redirect:(U)=>{return G.set("location",U),new V("FOUND",void 0,G)},error:(U,F,Z)=>{return new V(U,F,Z)},setStatus:(U)=>{Y=U},json:(U,F)=>{if(!J.asResponse)return U;return{body:F?.body||U,routerResponse:F,_flag:"json"}},responseHeaders:G,get responseStatus(){return Y}};for(let U of W.use||[]){let F=await U({...N,returnHeaders:!0,asResponse:!1});if(F.response)Object.assign(N.context,F.response);if(F.headers)F.headers.forEach((Z,L)=>{N.responseHeaders.set(L,Z)})}return N},FQ6,UQ6,t9,qU,Q_,Bm,Am,QQ6,Z_=(J,W)=>{J.name="$ZodError",Object.defineProperty(J,"_zod",{value:J._zod,enumerable:!1}),Object.defineProperty(J,"issues",{value:W,enumerable:!1}),Object.defineProperty(J,"message",{get(){return JSON.stringify(W,qm,2)},enumerable:!0}),Object.defineProperty(J,"toString",{value:()=>J.message,enumerable:!1})},L_,V_,ym=(J)=>(W,X,G,Y)=>{let $=G?Object.assign(G,{async:!1}):{async:!1},K=W._zod.run({value:X,issues:[]},$);if(K instanceof Promise)throw new t9;if(K.issues.length){let w=new(Y?.Err??J)(K.issues.map((H)=>X1(H,$,W1())));throw Q_(w,Y?.callee),w}return K.value},xm=(J)=>async(W,X,G,Y)=>{let $=G?Object.assign(G,{async:!0}):{async:!0},K=W._zod.run({value:X,issues:[]},$);if(K instanceof Promise)K=await K;if(K.issues.length){let w=new(Y?.Err??J)(K.issues.map((H)=>X1(H,$,W1())));throw Q_(w,Y?.callee),w}return K.value},D_=(J)=>(W,X,G)=>{let Y=G?{...G,async:!1}:{async:!1},$=W._zod.run({value:X,issues:[]},Y);if($ instanceof Promise)throw new t9;return $.issues.length?{success:!1,error:new(J??L_)($.issues.map((K)=>X1(K,Y,W1())))}:{success:!0,data:$.value}},um,M_=(J)=>async(W,X,G)=>{let Y=G?Object.assign(G,{async:!0}):{async:!0},$=W._zod.run({value:X,issues:[]},Y);if($ instanceof Promise)$=await $;return $.issues.length?{success:!1,error:new J($.issues.map((K)=>X1(K,Y,W1())))}:{success:!0,data:$.value}},cm,CY,lm,pm,dm,rm,nm=class{constructor(J=[]){if(this.content=[],this.indent=0,this)this.args=J}indented(J){this.indent+=1,J(this),this.indent-=1}write(J){if(typeof J==="function"){J(this,{execution:"sync"}),J(this,{execution:"async"});return}let W=J.split(`
`).filter((Y)=>Y),X=Math.min(...W.map((Y)=>Y.length-Y.trimStart().length)),G=W.map((Y)=>Y.slice(X)).map((Y)=>" ".repeat(this.indent*2)+Y);for(let Y of G)this.content.push(Y)}compile(){let J=Function,W=this?.args,X=[...(this?.content??[""]).map((G)=>`  ${G}`)];return new J(...W,X.join(`
`))}},im,r4,am,tm,om,sm,em,Jf,Wf,Xf,Yf,Gf,$f,Kf,wf,Hf,zf,Nf,Ff,ZQ6,LQ6,Uf=class{constructor(){this._map=new Map,this._idmap=new Map}add(J,...W){let X=W[0];if(this._map.set(J,X),X&&typeof X==="object"&&"id"in X){if(this._idmap.has(X.id))throw Error(`ID ${X.id} already exists in the registry`);this._idmap.set(X.id,J)}return this}clear(){return this._map=new Map,this._idmap=new Map,this}remove(J){let W=this._map.get(J);if(W&&typeof W==="object"&&"id"in W)this._idmap.delete(W.id);return this._map.delete(J),this}get(J){let W=J._zod.parent;if(W){let X={...this.get(W)??{}};return delete X.id,{...X,...this._map.get(J)}}return this._map.get(J)}has(J){return this._map.has(J)}},Vw,O_=(J,W)=>{L_.init(J,W),J.name="ZodError",Object.defineProperties(J,{format:{value:(X)=>fm(J,X)},flatten:{value:(X)=>mm(J,X)},addIssue:{value:(X)=>J.issues.push(X)},addIssues:{value:(X)=>J.issues.push(...X)},isEmpty:{get(){return J.issues.length===0}}})},VQ6,Ow,vf,jf,Sf,_f,O0,Tf,qf,Af,Mw,If,Cf,IU,hf,i9,mf,ff,xf,P_,lf,df,rf,af,TU,Wy=(J,W)=>`<!doctype html>
<html>
  <head>
    <title>Scalar API Reference</title>
    <meta charset="utf-8" />
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1" />
  </head>
  <body>
    <script
      id="api-reference"
      type="application/json">
    ${JSON.stringify(J)}
    </script>
	 <script>
      var configuration = {
	  	favicon: ${W?.logo?`data:image/svg+xml;utf8,${encodeURIComponent(W.logo)}`:void 0} ,
	   	theme: ${W?.theme||"saturn"},
        metaData: {
			title: ${W?.title||"Open API Reference"},
			description: ${W?.description||"Better Call Open API"},
		}
      }
      document.getElementById('api-reference').dataset.configuration =
        JSON.stringify(configuration)
    </script>
	  <script src="https://cdn.jsdelivr.net/npm/@scalar/api-reference"></script>
  </body>
</html>`,j_=(J,W)=>{if(!W?.openapi?.disabled){let $={path:"/api/reference",...W?.openapi};J.openapi=a9($.path,{method:"GET"},async(K)=>{let w=await Jy(J);return new Response(Wy(w,$.scalar),{headers:{"Content-Type":"text/html"}})})}let X=jU(),G=jU();for(let $ of Object.values(J)){if(!$.options||!$.path)continue;if($.options?.metadata?.SERVER_ONLY)continue;let K=Array.isArray($.options?.method)?$.options.method:[$.options?.method];for(let w of K)_U(X,w,$.path,$)}if(W?.routerMiddleware?.length)for(let{path:$,middleware:K}of W.routerMiddleware)_U(G,"*",$,K);let Y=async($)=>{let K=new URL($.url),w=W?.basePath?K.pathname.split(W.basePath).reduce((U,F,Z)=>{if(Z!==0)if(Z>1)U.push(`${W.basePath}${F}`);else U.push(F);return U},[]).join(""):K.pathname;if(!w?.length)return new Response(null,{status:404,statusText:"Not Found"});let H=xS(X,$.method,w);if(!H?.data)return new Response(null,{status:404,statusText:"Not Found"});let z={};K.searchParams.forEach((U,F)=>{if(F in z)if(Array.isArray(z[F]))z[F].push(U);else z[F]=[z[F],U];else z[F]=U});let N=H.data;try{let U=N.options.metadata?.allowedMediaTypes||W?.allowedMediaTypes,F={path:w,method:$.method,headers:$.headers,params:H.params?JSON.parse(JSON.stringify(H.params)):{},request:$,body:N.options.disableBody?void 0:await Zm(N.options.cloneRequest?$.clone():$,U),query:z,_flag:"router",asResponse:!0,context:W?.routerContext},Z=uS(G,"*",w);if(Z?.length)for(let{data:L,params:D}of Z){let O=await L({...F,params:D,asResponse:!1});if(O instanceof Response)return O}return await N(F)}catch(U){if(W?.onError)try{let F=await W.onError(U);if(F instanceof Response)return YX(F)}catch(F){if(Dw(F))return YX(F);throw F}if(W?.throwError)throw U;if(Dw(U))return YX(U);return console.error("# SERVER_ERROR: ",U),new Response(null,{status:500,statusText:"Internal Server Error"})}};return{handler:async($)=>{let K=await W?.onRequest?.($);if(K instanceof Response)return K;let w=await Y(K instanceof Request?K:$),H=await W?.onResponse?.(w);if(H instanceof Response)return H;return w},endpoints:J}};var W0=M(()=>{tX();cS();Fm={OK:200,CREATED:201,ACCEPTED:202,NO_CONTENT:204,MULTIPLE_CHOICES:300,MOVED_PERMANENTLY:301,FOUND:302,SEE_OTHER:303,NOT_MODIFIED:304,TEMPORARY_REDIRECT:307,BAD_REQUEST:400,UNAUTHORIZED:401,PAYMENT_REQUIRED:402,FORBIDDEN:403,NOT_FOUND:404,METHOD_NOT_ALLOWED:405,NOT_ACCEPTABLE:406,PROXY_AUTHENTICATION_REQUIRED:407,REQUEST_TIMEOUT:408,CONFLICT:409,GONE:410,LENGTH_REQUIRED:411,PRECONDITION_FAILED:412,PAYLOAD_TOO_LARGE:413,URI_TOO_LONG:414,UNSUPPORTED_MEDIA_TYPE:415,RANGE_NOT_SATISFIABLE:416,EXPECTATION_FAILED:417,"I'M_A_TEAPOT":418,MISDIRECTED_REQUEST:421,UNPROCESSABLE_ENTITY:422,LOCKED:423,FAILED_DEPENDENCY:424,TOO_EARLY:425,UPGRADE_REQUIRED:426,PRECONDITION_REQUIRED:428,TOO_MANY_REQUESTS:429,REQUEST_HEADER_FIELDS_TOO_LARGE:431,UNAVAILABLE_FOR_LEGAL_REASONS:451,INTERNAL_SERVER_ERROR:500,NOT_IMPLEMENTED:501,BAD_GATEWAY:502,SERVICE_UNAVAILABLE:503,GATEWAY_TIMEOUT:504,HTTP_VERSION_NOT_SUPPORTED:505,VARIANT_ALSO_NEGOTIATES:506,INSUFFICIENT_STORAGE:507,LOOP_DETECTED:508,NOT_EXTENDED:510,NETWORK_AUTHENTICATION_REQUIRED:511},Um=class extends Error{constructor(J="INTERNAL_SERVER_ERROR",W=void 0,X={},G=typeof J==="number"?J:Fm[J]){super(W?.message,W?.cause?{cause:W.cause}:void 0);this.status=J,this.body=W,this.headers=X,this.statusCode=G,this.name="APIError",this.status=J,this.headers=X,this.statusCode=G,this.body=W?{code:W?.message?.toUpperCase().replace(/ /g,"_").replace(/[^A-Z0-9_]/g,""),...W}:void 0}},Qm=class extends Error{constructor(J){super(J);this.name="BetterCallError"}},V=Nm(Um,Error);RU={name:"HMAC",hash:"SHA-256"};a9.create=(J)=>{return(W,X,G)=>{return a9(W,{...X,use:[...X?.use||[],...J?.use||[]]},G)}};J1.create=(J)=>{function W(X,G){if(typeof X==="function")return J1({use:J?.use},X);if(!G)throw Error("Middleware handler is required");return J1({...X,method:"*",use:[...J?.use||[],...X.use||[]]},G)}return W};FQ6=Object.freeze({status:"aborted"});UQ6=Symbol("zod_brand"),t9=class extends Error{constructor(){super("Encountered Promise during synchronous parse. Use .parseAsync() instead.")}},qU={};Q_=Error.captureStackTrace?Error.captureStackTrace:(...J)=>{};Bm=F_(()=>{if(typeof navigator<"u"&&navigator?.userAgent?.includes("Cloudflare"))return!1;try{return Function(""),!0}catch(J){return!1}});Am=new Set(["string","number","symbol"]);QQ6={safeint:[Number.MIN_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],int32:[-2147483648,2147483647],uint32:[0,4294967295],float32:[-340282346638528860000000000000000000000,340282346638528860000000000000000000000],float64:[-Number.MAX_VALUE,Number.MAX_VALUE]};L_=L6("$ZodError",Z_),V_=L6("$ZodError",Z_,{Parent:Error});um=D_(V_),cm=M_(V_),CY=L6("$ZodCheck",(J,W)=>{var X;J._zod??(J._zod={}),J._zod.def=W,(X=J._zod).onattach??(X.onattach=[])}),lm=L6("$ZodCheckMaxLength",(J,W)=>{var X;CY.init(J,W),(X=J._zod.def).when??(X.when=(G)=>{let Y=G.value;return!CU(Y)&&Y.length!==void 0}),J._zod.onattach.push((G)=>{let Y=G._zod.bag.maximum??Number.POSITIVE_INFINITY;if(W.maximum<Y)G._zod.bag.maximum=W.maximum}),J._zod.check=(G)=>{let Y=G.value;if(Y.length<=W.maximum)return;let $=hU(Y);G.issues.push({origin:$,code:"too_big",maximum:W.maximum,inclusive:!0,input:Y,inst:J,continue:!W.abort})}}),pm=L6("$ZodCheckMinLength",(J,W)=>{var X;CY.init(J,W),(X=J._zod.def).when??(X.when=(G)=>{let Y=G.value;return!CU(Y)&&Y.length!==void 0}),J._zod.onattach.push((G)=>{let Y=G._zod.bag.minimum??Number.NEGATIVE_INFINITY;if(W.minimum>Y)G._zod.bag.minimum=W.minimum}),J._zod.check=(G)=>{let Y=G.value;if(Y.length>=W.minimum)return;let $=hU(Y);G.issues.push({origin:$,code:"too_small",minimum:W.minimum,inclusive:!0,input:Y,inst:J,continue:!W.abort})}}),dm=L6("$ZodCheckLengthEquals",(J,W)=>{var X;CY.init(J,W),(X=J._zod.def).when??(X.when=(G)=>{let Y=G.value;return!CU(Y)&&Y.length!==void 0}),J._zod.onattach.push((G)=>{let Y=G._zod.bag;Y.minimum=W.length,Y.maximum=W.length,Y.length=W.length}),J._zod.check=(G)=>{let Y=G.value,$=Y.length;if($===W.length)return;let K=hU(Y),w=$>W.length;G.issues.push({origin:K,...w?{code:"too_big",maximum:W.length}:{code:"too_small",minimum:W.length},inclusive:!0,exact:!0,input:G.value,inst:J,continue:!W.abort})}}),rm=L6("$ZodCheckOverwrite",(J,W)=>{CY.init(J,W),J._zod.check=(X)=>{X.value=W.tx(X.value)}}),im={major:4,minor:0,patch:0},r4=L6("$ZodType",(J,W)=>{var X;J??(J={}),J._zod.def=W,J._zod.bag=J._zod.bag||{},J._zod.version=im;let G=[...J._zod.def.checks??[]];if(J._zod.traits.has("$ZodCheck"))G.unshift(J);for(let Y of G)for(let $ of Y._zod.onattach)$(J);if(G.length===0)(X=J._zod).deferred??(X.deferred=[]),J._zod.deferred?.push(()=>{J._zod.run=J._zod.parse});else{let Y=($,K,w)=>{let H=n9($),z;for(let N of K){if(N._zod.def.when){if(!N._zod.def.when($))continue}else if(H)continue;let U=$.issues.length,F=N._zod.check($);if(F instanceof Promise&&w?.async===!1)throw new t9;if(z||F instanceof Promise)z=(z??Promise.resolve()).then(async()=>{if(await F,$.issues.length===U)return;if(!H)H=n9($,U)});else{if($.issues.length===U)continue;if(!H)H=n9($,U)}}if(z)return z.then(()=>{return $});return $};J._zod.run=($,K)=>{let w=J._zod.parse($,K);if(w instanceof Promise){if(K.async===!1)throw new t9;return w.then((H)=>Y(H,G,K))}return Y(w,G,K)}}J["~standard"]={validate:(Y)=>{try{let $=um(J,Y);return $.success?{value:$.data}:{issues:$.error?.issues}}catch($){return cm(J,Y).then((K)=>K.success?{value:K.data}:{issues:K.error?.issues})}},vendor:"zod",version:1}}),am=L6("$ZodUnknown",(J,W)=>{r4.init(J,W),J._zod.parse=(X)=>X}),tm=L6("$ZodNever",(J,W)=>{r4.init(J,W),J._zod.parse=(X,G)=>{return X.issues.push({expected:"never",code:"invalid_type",input:X.value,inst:J}),X}});om=L6("$ZodArray",(J,W)=>{r4.init(J,W),J._zod.parse=(X,G)=>{let Y=X.value;if(!Array.isArray(Y))return X.issues.push({expected:"array",code:"invalid_type",input:Y,inst:J}),X;X.value=Array(Y.length);let $=[];for(let K=0;K<Y.length;K++){let w=Y[K],H=W.element._zod.run({value:w,issues:[]},G);if(H instanceof Promise)$.push(H.then((z)=>dS(z,X,K)));else dS(H,X,K)}if($.length)return Promise.all($).then(()=>X);return X}});sm=L6("$ZodObject",(J,W)=>{r4.init(J,W);let X=F_(()=>{let U=Object.keys(W.shape);for(let Z of U)if(!(W.shape[Z]instanceof r4))throw Error(`Invalid element at key "${Z}": expected a Zod schema`);let F=Im(W.shape);return{shape:W.shape,keys:U,keySet:new Set(U),numKeys:U.length,optionalKeys:new Set(F)}});j4(J._zod,"propValues",()=>{let U=W.shape,F={};for(let Z in U){let L=U[Z]._zod;if(L.values){F[Z]??(F[Z]=new Set);for(let D of L.values)F[Z].add(D)}}return F});let G=(U)=>{let F=new nm(["shape","payload","ctx"]),Z=X.value,L=(_)=>{let T=r9(_);return`shape[${T}]._zod.run({ value: input[${T}], issues: [] }, ctx)`};F.write("const input = payload.value;");let D=Object.create(null),O=0;for(let _ of Z.keys)D[_]=`key_${O++}`;F.write("const newResult = {}");for(let _ of Z.keys)if(Z.optionalKeys.has(_)){let T=D[_];F.write(`const ${T} = ${L(_)};`);let v=r9(_);F.write(`
        if (${T}.issues.length) {
          if (input[${v}] === undefined) {
            if (${v} in input) {
              newResult[${v}] = undefined;
            }
          } else {
            payload.issues = payload.issues.concat(
              ${T}.issues.map((iss) => ({
                ...iss,
                path: iss.path ? [${v}, ...iss.path] : [${v}],
              }))
            );
          }
        } else if (${T}.value === undefined) {
          if (${v} in input) newResult[${v}] = undefined;
        } else {
          newResult[${v}] = ${T}.value;
        }
        `)}else{let T=D[_];F.write(`const ${T} = ${L(_)};`),F.write(`
          if (${T}.issues.length) payload.issues = payload.issues.concat(${T}.issues.map(iss => ({
            ...iss,
            path: iss.path ? [${r9(_)}, ...iss.path] : [${r9(_)}]
          })));`),F.write(`newResult[${r9(_)}] = ${T}.value`)}F.write("payload.value = newResult;"),F.write("return payload;");let P=F.compile();return(_,T)=>P(U,_,T)},Y,$=BU,K=!qU.jitless,H=K&&Bm.value,z=W.catchall,N;J._zod.parse=(U,F)=>{N??(N=X.value);let Z=U.value;if(!$(Z))return U.issues.push({expected:"object",code:"invalid_type",input:Z,inst:J}),U;let L=[];if(K&&H&&F?.async===!1&&F.jitless!==!0){if(!Y)Y=G(W.shape);U=Y(U,F)}else{U.value={};let T=N.shape;for(let v of N.keys){let q=T[v],S=q._zod.run({value:Z[v],issues:[]},F),B=q._zod.optin==="optional"&&q._zod.optout==="optional";if(S instanceof Promise)L.push(S.then((A)=>B?rS(A,U,v,Z):Lw(A,U,v)));else if(B)rS(S,U,v,Z);else Lw(S,U,v)}}if(!z)return L.length?Promise.all(L).then(()=>U):U;let D=[],O=N.keySet,P=z._zod,_=P.def.type;for(let T of Object.keys(Z)){if(O.has(T))continue;if(_==="never"){D.push(T);continue}let v=P.run({value:Z[T],issues:[]},F);if(v instanceof Promise)L.push(v.then((q)=>Lw(q,U,T)));else Lw(v,U,T)}if(D.length)U.issues.push({code:"unrecognized_keys",keys:D,input:Z,inst:J});if(!L.length)return U;return Promise.all(L).then(()=>{return U})}});em=L6("$ZodUnion",(J,W)=>{r4.init(J,W),j4(J._zod,"optin",()=>W.options.some((X)=>X._zod.optin==="optional")?"optional":void 0),j4(J._zod,"optout",()=>W.options.some((X)=>X._zod.optout==="optional")?"optional":void 0),j4(J._zod,"values",()=>{if(W.options.every((X)=>X._zod.values))return new Set(W.options.flatMap((X)=>Array.from(X._zod.values)))}),j4(J._zod,"pattern",()=>{if(W.options.every((X)=>X._zod.pattern)){let X=W.options.map((G)=>G._zod.pattern);return new RegExp(`^(${X.map((G)=>bU(G.source)).join("|")})$`)}}),J._zod.parse=(X,G)=>{let Y=!1,$=[];for(let K of W.options){let w=K._zod.run({value:X.value,issues:[]},G);if(w instanceof Promise)$.push(w),Y=!0;else{if(w.issues.length===0)return w;$.push(w)}}if(!Y)return nS($,X,J,G);return Promise.all($).then((K)=>{return nS(K,X,J,G)})}}),Jf=L6("$ZodIntersection",(J,W)=>{r4.init(J,W),J._zod.parse=(X,G)=>{let Y=X.value,$=W.left._zod.run({value:Y,issues:[]},G),K=W.right._zod.run({value:Y,issues:[]},G);if($ instanceof Promise||K instanceof Promise)return Promise.all([$,K]).then(([w,H])=>{return iS(X,w,H)});return iS(X,$,K)}});Wf=L6("$ZodEnum",(J,W)=>{r4.init(J,W);let X=Tm(W.entries);J._zod.values=new Set(X),J._zod.pattern=new RegExp(`^(${X.filter((G)=>Am.has(typeof G)).map((G)=>typeof G==="string"?Em(G):G.toString()).join("|")})$`),J._zod.parse=(G,Y)=>{let $=G.value;if(J._zod.values.has($))return G;return G.issues.push({code:"invalid_value",values:X,input:$,inst:J}),G}}),Xf=L6("$ZodTransform",(J,W)=>{r4.init(J,W),J._zod.parse=(X,G)=>{let Y=W.transform(X.value,X);if(G.async)return(Y instanceof Promise?Y:Promise.resolve(Y)).then(($)=>{return X.value=$,X});if(Y instanceof Promise)throw new t9;return X.value=Y,X}}),Yf=L6("$ZodOptional",(J,W)=>{r4.init(J,W),J._zod.optin="optional",J._zod.optout="optional",j4(J._zod,"values",()=>{return W.innerType._zod.values?new Set([...W.innerType._zod.values,void 0]):void 0}),j4(J._zod,"pattern",()=>{let X=W.innerType._zod.pattern;return X?new RegExp(`^(${bU(X.source)})?$`):void 0}),J._zod.parse=(X,G)=>{if(W.innerType._zod.optin==="optional")return W.innerType._zod.run(X,G);if(X.value===void 0)return X;return W.innerType._zod.run(X,G)}}),Gf=L6("$ZodNullable",(J,W)=>{r4.init(J,W),j4(J._zod,"optin",()=>W.innerType._zod.optin),j4(J._zod,"optout",()=>W.innerType._zod.optout),j4(J._zod,"pattern",()=>{let X=W.innerType._zod.pattern;return X?new RegExp(`^(${bU(X.source)}|null)$`):void 0}),j4(J._zod,"values",()=>{return W.innerType._zod.values?new Set([...W.innerType._zod.values,null]):void 0}),J._zod.parse=(X,G)=>{if(X.value===null)return X;return W.innerType._zod.run(X,G)}}),$f=L6("$ZodDefault",(J,W)=>{r4.init(J,W),J._zod.optin="optional",j4(J._zod,"values",()=>W.innerType._zod.values),J._zod.parse=(X,G)=>{if(X.value===void 0)return X.value=W.defaultValue,X;let Y=W.innerType._zod.run(X,G);if(Y instanceof Promise)return Y.then(($)=>aS($,W));return aS(Y,W)}});Kf=L6("$ZodPrefault",(J,W)=>{r4.init(J,W),J._zod.optin="optional",j4(J._zod,"values",()=>W.innerType._zod.values),J._zod.parse=(X,G)=>{if(X.value===void 0)X.value=W.defaultValue;return W.innerType._zod.run(X,G)}}),wf=L6("$ZodNonOptional",(J,W)=>{r4.init(J,W),j4(J._zod,"values",()=>{let X=W.innerType._zod.values;return X?new Set([...X].filter((G)=>G!==void 0)):void 0}),J._zod.parse=(X,G)=>{let Y=W.innerType._zod.run(X,G);if(Y instanceof Promise)return Y.then(($)=>tS($,J));return tS(Y,J)}});Hf=L6("$ZodCatch",(J,W)=>{r4.init(J,W),J._zod.optin="optional",j4(J._zod,"optout",()=>W.innerType._zod.optout),j4(J._zod,"values",()=>W.innerType._zod.values),J._zod.parse=(X,G)=>{let Y=W.innerType._zod.run(X,G);if(Y instanceof Promise)return Y.then(($)=>{if(X.value=$.value,$.issues.length)X.value=W.catchValue({...X,error:{issues:$.issues.map((K)=>X1(K,G,W1()))},input:X.value}),X.issues=[];return X});if(X.value=Y.value,Y.issues.length)X.value=W.catchValue({...X,error:{issues:Y.issues.map(($)=>X1($,G,W1()))},input:X.value}),X.issues=[];return X}}),zf=L6("$ZodPipe",(J,W)=>{r4.init(J,W),j4(J._zod,"values",()=>W.in._zod.values),j4(J._zod,"optin",()=>W.in._zod.optin),j4(J._zod,"optout",()=>W.out._zod.optout),J._zod.parse=(X,G)=>{let Y=W.in._zod.run(X,G);if(Y instanceof Promise)return Y.then(($)=>oS($,W,G));return oS(Y,W,G)}});Nf=L6("$ZodReadonly",(J,W)=>{r4.init(J,W),j4(J._zod,"propValues",()=>W.innerType._zod.propValues),j4(J._zod,"values",()=>W.innerType._zod.values),j4(J._zod,"optin",()=>W.innerType._zod.optin),j4(J._zod,"optout",()=>W.innerType._zod.optout),J._zod.parse=(X,G)=>{let Y=W.innerType._zod.run(X,G);if(Y instanceof Promise)return Y.then(sS);return sS(Y)}});Ff=L6("$ZodCustom",(J,W)=>{CY.init(J,W),r4.init(J,W),J._zod.parse=(X,G)=>{return X},J._zod.check=(X)=>{let G=X.value,Y=W.fn(G);if(Y instanceof Promise)return Y.then(($)=>eS($,X,G,J));eS(Y,X,G,J)}});ZQ6=Symbol("ZodOutput"),LQ6=Symbol("ZodInput");Vw=Qf();VQ6=L6("ZodError",O_),Ow=L6("ZodError",O_,{Parent:Error}),vf=ym(Ow),jf=xm(Ow),Sf=D_(Ow),_f=M_(Ow),O0=L6("ZodType",(J,W)=>{return r4.init(J,W),J.def=W,Object.defineProperty(J,"_def",{value:W}),J.check=(...X)=>{return J.clone({...W,checks:[...W.checks??[],...X.map((G)=>typeof G==="function"?{_zod:{check:G,def:{check:"custom"},onattach:[]}}:G)]})},J.clone=(X,G)=>Y1(J,X,G),J.brand=()=>J,J.register=(X,G)=>{return X.add(J,G),J},J.parse=(X,G)=>vf(J,X,G,{callee:J.parse}),J.safeParse=(X,G)=>Sf(J,X,G),J.parseAsync=async(X,G)=>jf(J,X,G,{callee:J.parseAsync}),J.safeParseAsync=async(X,G)=>_f(J,X,G),J.spa=J.safeParseAsync,J.refine=(X,G)=>J.check(of(X,G)),J.superRefine=(X)=>J.check(sf(X)),J.overwrite=(X)=>J.check(Mf(X)),J.optional=()=>X_(J),J.nullable=()=>Y_(J),J.nullish=()=>X_(Y_(J)),J.nonoptional=(X)=>cf(J,X),J.array=()=>Ef(J),J.or=(X)=>Rf([J,X]),J.and=(X)=>bf(J,X),J.transform=(X)=>G_(J,gf(X)),J.default=(X)=>yf(J,X),J.prefault=(X)=>uf(J,X),J.catch=(X)=>pf(J,X),J.pipe=(X)=>G_(J,X),J.readonly=()=>nf(J),J.describe=(X)=>{let G=J.clone();return Vw.add(G,{description:X}),G},Object.defineProperty(J,"description",{get(){return Vw.get(J)?.description},configurable:!0}),J.meta=(...X)=>{if(X.length===0)return Vw.get(J);let G=J.clone();return Vw.add(G,X[0]),G},J.isOptional=()=>J.safeParse(void 0).success,J.isNullable=()=>J.safeParse(null).success,J}),Tf=L6("ZodUnknown",(J,W)=>{am.init(J,W),O0.init(J,W)});qf=L6("ZodNever",(J,W)=>{tm.init(J,W),O0.init(J,W)});Af=L6("ZodArray",(J,W)=>{om.init(J,W),O0.init(J,W),J.element=W.element,J.min=(X,G)=>J.check(J_(X,G)),J.nonempty=(X)=>J.check(J_(1,X)),J.max=(X,G)=>J.check(Vf(X,G)),J.length=(X,G)=>J.check(Df(X,G)),J.unwrap=()=>J.element});Mw=L6("ZodObject",(J,W)=>{sm.init(J,W),O0.init(J,W),j4(J,"shape",()=>W.shape),J.keyof=()=>kf(Object.keys(J._zod.def.shape)),J.catchall=(X)=>J.clone({...J._zod.def,catchall:X}),J.passthrough=()=>J.clone({...J._zod.def,catchall:W_()}),J.loose=()=>J.clone({...J._zod.def,catchall:W_()}),J.strict=()=>J.clone({...J._zod.def,catchall:Bf()}),J.strip=()=>J.clone({...J._zod.def,catchall:void 0}),J.extend=(X)=>{return bm(J,X)},J.merge=(X)=>km(J,X),J.pick=(X)=>Rm(J,X),J.omit=(X)=>Cm(J,X),J.partial=(...X)=>hm(i9,J,X[0]),J.required=(...X)=>gm(P_,J,X[0])}),If=L6("ZodUnion",(J,W)=>{em.init(J,W),O0.init(J,W),J.options=W.options});Cf=L6("ZodIntersection",(J,W)=>{Jf.init(J,W),O0.init(J,W)});IU=L6("ZodEnum",(J,W)=>{Wf.init(J,W),O0.init(J,W),J.enum=W.entries,J.options=Object.values(W.entries);let X=new Set(Object.keys(W.entries));J.extract=(G,Y)=>{let $={};for(let K of G)if(X.has(K))$[K]=W.entries[K];else throw Error(`Key ${K} not found in enum`);return new IU({...W,checks:[],...ZJ(Y),entries:$})},J.exclude=(G,Y)=>{let $={...W.entries};for(let K of G)if(X.has(K))delete $[K];else throw Error(`Key ${K} not found in enum`);return new IU({...W,checks:[],...ZJ(Y),entries:$})}});hf=L6("ZodTransform",(J,W)=>{Xf.init(J,W),O0.init(J,W),J._zod.parse=(X,G)=>{X.addIssue=($)=>{if(typeof $==="string")X.issues.push(o9($,X.value,W));else{let K=$;if(K.fatal)K.continue=!1;K.code??(K.code="custom"),K.input??(K.input=X.value),K.inst??(K.inst=J),K.continue??(K.continue=!0),X.issues.push(o9(K))}};let Y=W.transform(X.value,X);if(Y instanceof Promise)return Y.then(($)=>{return X.value=$,X});return X.value=Y,X}});i9=L6("ZodOptional",(J,W)=>{Yf.init(J,W),O0.init(J,W),J.unwrap=()=>J._zod.def.innerType});mf=L6("ZodNullable",(J,W)=>{Gf.init(J,W),O0.init(J,W),J.unwrap=()=>J._zod.def.innerType});ff=L6("ZodDefault",(J,W)=>{$f.init(J,W),O0.init(J,W),J.unwrap=()=>J._zod.def.innerType,J.removeDefault=J.unwrap});xf=L6("ZodPrefault",(J,W)=>{Kf.init(J,W),O0.init(J,W),J.unwrap=()=>J._zod.def.innerType});P_=L6("ZodNonOptional",(J,W)=>{wf.init(J,W),O0.init(J,W),J.unwrap=()=>J._zod.def.innerType});lf=L6("ZodCatch",(J,W)=>{Hf.init(J,W),O0.init(J,W),J.unwrap=()=>J._zod.def.innerType,J.removeCatch=J.unwrap});df=L6("ZodPipe",(J,W)=>{zf.init(J,W),O0.init(J,W),J.in=W.in,J.out=W.out});rf=L6("ZodReadonly",(J,W)=>{Nf.init(J,W),O0.init(J,W)});af=L6("ZodCustom",(J,W)=>{Ff.init(J,W),O0.init(J,W)});TU={}});function C(J,W,X){function G(w,H){var z;Object.defineProperty(w,"_zod",{value:w._zod??{},enumerable:!1}),(z=w._zod).traits??(z.traits=new Set),w._zod.traits.add(J),W(w,H);for(let N in K.prototype)if(!(N in w))Object.defineProperty(w,N,{value:K.prototype[N].bind(w)});w._zod.constr=K,w._zod.def=H}let Y=X?.Parent??Object;class $ extends Y{}Object.defineProperty($,"name",{value:J});function K(w){var H;let z=X?.Parent?new $:this;G(z,w),(H=z._zod).deferred??(H.deferred=[]);for(let N of z._zod.deferred)N();return z}return Object.defineProperty(K,"init",{value:G}),Object.defineProperty(K,Symbol.hasInstance,{value:(w)=>{if(X?.Parent&&w instanceof X.Parent)return!0;return w?._zod?.traits?.has(J)}}),Object.defineProperty(K,"name",{value:J}),K}function y4(J){if(J)Object.assign(s9,J);return s9}var Pw,vw,hJ,G1,s9;var bY=M(()=>{Pw=Object.freeze({status:"aborted"});vw=Symbol("zod_brand");hJ=class hJ extends Error{constructor(){super("Encountered Promise during synchronous parse. Use .parseAsync() instead.")}};G1=class G1 extends Error{constructor(J){super(`Encountered unidirectional transform during encode: ${J}`);this.name="ZodEncodeError"}};s9={}});var r={};N0(r,{unwrapMessage:()=>e9,uint8ArrayToHex:()=>qy,uint8ArrayToBase64url:()=>_y,uint8ArrayToBase64:()=>T_,stringifyPrimitive:()=>d,shallowClone:()=>yU,safeExtend:()=>My,required:()=>vy,randomString:()=>Fy,propertyKeyTypes:()=>X$,promiseAllObject:()=>Ny,primitiveTypes:()=>xU,prefixIssues:()=>j8,pick:()=>Ly,partial:()=>Py,optionalKeys:()=>uU,omit:()=>Vy,objectClone:()=>wy,numKeys:()=>Uy,nullish:()=>GX,normalizeParams:()=>i,mergeDefs:()=>KX,merge:()=>Oy,jsonStringifyReplacer:()=>kY,joinValues:()=>h,issue:()=>gY,isPlainObject:()=>wX,isObject:()=>$1,hexToUint8Array:()=>Ty,getSizableOrigin:()=>Y$,getParsedType:()=>Qy,getLengthableOrigin:()=>G$,getEnumValues:()=>J$,getElementAtPath:()=>zy,floatSafeRemainder:()=>mU,finalizeIssue:()=>S8,extend:()=>Dy,escapeRegex:()=>gJ,esc:()=>jw,defineLazy:()=>S6,createTransparentProxy:()=>Zy,cloneDef:()=>Hy,clone:()=>A0,cleanRegex:()=>W$,cleanEnum:()=>jy,captureStackTrace:()=>Sw,cached:()=>hY,base64urlToUint8Array:()=>Sy,base64ToUint8Array:()=>__,assignProp:()=>$X,assertNotEqual:()=>Yy,assertNever:()=>$y,assertIs:()=>Gy,assertEqual:()=>Xy,assert:()=>Ky,allowsEval:()=>fU,aborted:()=>HX,NUMBER_FORMAT_RANGES:()=>cU,Class:()=>q_,BIGINT_FORMAT_RANGES:()=>lU});function Xy(J){return J}function Yy(J){return J}function Gy(J){}function $y(J){throw Error()}function Ky(J){}function J$(J){let W=Object.values(J).filter((G)=>typeof G==="number");return Object.entries(J).filter(([G,Y])=>W.indexOf(+G)===-1).map(([G,Y])=>Y)}function h(J,W="|"){return J.map((X)=>d(X)).join(W)}function kY(J,W){if(typeof W==="bigint")return W.toString();return W}function hY(J){return{get value(){{let X=J();return Object.defineProperty(this,"value",{value:X}),X}throw Error("cached value already set")}}}function GX(J){return J===null||J===void 0}function W$(J){let W=J.startsWith("^")?1:0,X=J.endsWith("$")?J.length-1:J.length;return J.slice(W,X)}function mU(J,W){let X=(J.toString().split(".")[1]||"").length,G=W.toString(),Y=(G.split(".")[1]||"").length;if(Y===0&&/\d?e-\d?/.test(G)){let H=G.match(/\d?e-(\d?)/);if(H?.[1])Y=Number.parseInt(H[1])}let $=X>Y?X:Y,K=Number.parseInt(J.toFixed($).replace(".","")),w=Number.parseInt(W.toFixed($).replace(".",""));return K%w/10**$}function S6(J,W,X){let G=void 0;Object.defineProperty(J,W,{get(){if(G===S_)return;if(G===void 0)G=S_,G=X();return G},set(Y){Object.defineProperty(J,W,{value:Y})},configurable:!0})}function wy(J){return Object.create(Object.getPrototypeOf(J),Object.getOwnPropertyDescriptors(J))}function $X(J,W,X){Object.defineProperty(J,W,{value:X,writable:!0,enumerable:!0,configurable:!0})}function KX(...J){let W={};for(let X of J){let G=Object.getOwnPropertyDescriptors(X);Object.assign(W,G)}return Object.defineProperties({},W)}function Hy(J){return KX(J._zod.def)}function zy(J,W){if(!W)return J;return W.reduce((X,G)=>X?.[G],J)}function Ny(J){let W=Object.keys(J),X=W.map((G)=>J[G]);return Promise.all(X).then((G)=>{let Y={};for(let $=0;$<W.length;$++)Y[W[$]]=G[$];return Y})}function Fy(J=10){let X="";for(let G=0;G<J;G++)X+="abcdefghijklmnopqrstuvwxyz"[Math.floor(Math.random()*26)];return X}function jw(J){return JSON.stringify(J)}function $1(J){return typeof J==="object"&&J!==null&&!Array.isArray(J)}function wX(J){if($1(J)===!1)return!1;let W=J.constructor;if(W===void 0)return!0;let X=W.prototype;if($1(X)===!1)return!1;if(Object.prototype.hasOwnProperty.call(X,"isPrototypeOf")===!1)return!1;return!0}function yU(J){if(wX(J))return{...J};if(Array.isArray(J))return[...J];return J}function Uy(J){let W=0;for(let X in J)if(Object.prototype.hasOwnProperty.call(J,X))W++;return W}function gJ(J){return J.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function A0(J,W,X){let G=new J._zod.constr(W??J._zod.def);if(!W||X?.parent)G._zod.parent=J;return G}function i(J){let W=J;if(!W)return{};if(typeof W==="string")return{error:()=>W};if(W?.message!==void 0){if(W?.error!==void 0)throw Error("Cannot specify both `message` and `error` params");W.error=W.message}if(delete W.message,typeof W.error==="string")return{...W,error:()=>W.error};return W}function Zy(J){let W;return new Proxy({},{get(X,G,Y){return W??(W=J()),Reflect.get(W,G,Y)},set(X,G,Y,$){return W??(W=J()),Reflect.set(W,G,Y,$)},has(X,G){return W??(W=J()),Reflect.has(W,G)},deleteProperty(X,G){return W??(W=J()),Reflect.deleteProperty(W,G)},ownKeys(X){return W??(W=J()),Reflect.ownKeys(W)},getOwnPropertyDescriptor(X,G){return W??(W=J()),Reflect.getOwnPropertyDescriptor(W,G)},defineProperty(X,G,Y){return W??(W=J()),Reflect.defineProperty(W,G,Y)}})}function d(J){if(typeof J==="bigint")return J.toString()+"n";if(typeof J==="string")return`"${J}"`;return`${J}`}function uU(J){return Object.keys(J).filter((W)=>{return J[W]._zod.optin==="optional"&&J[W]._zod.optout==="optional"})}function Ly(J,W){let X=J._zod.def,G=KX(J._zod.def,{get shape(){let Y={};for(let $ in W){if(!($ in X.shape))throw Error(`Unrecognized key: "${$}"`);if(!W[$])continue;Y[$]=X.shape[$]}return $X(this,"shape",Y),Y},checks:[]});return A0(J,G)}function Vy(J,W){let X=J._zod.def,G=KX(J._zod.def,{get shape(){let Y={...J._zod.def.shape};for(let $ in W){if(!($ in X.shape))throw Error(`Unrecognized key: "${$}"`);if(!W[$])continue;delete Y[$]}return $X(this,"shape",Y),Y},checks:[]});return A0(J,G)}function Dy(J,W){if(!wX(W))throw Error("Invalid input to extend: expected a plain object");let X=J._zod.def.checks;if(X&&X.length>0)throw Error("Object schemas containing refinements cannot be extended. Use `.safeExtend()` instead.");let Y=KX(J._zod.def,{get shape(){let $={...J._zod.def.shape,...W};return $X(this,"shape",$),$},checks:[]});return A0(J,Y)}function My(J,W){if(!wX(W))throw Error("Invalid input to safeExtend: expected a plain object");let X={...J._zod.def,get shape(){let G={...J._zod.def.shape,...W};return $X(this,"shape",G),G},checks:J._zod.def.checks};return A0(J,X)}function Oy(J,W){let X=KX(J._zod.def,{get shape(){let G={...J._zod.def.shape,...W._zod.def.shape};return $X(this,"shape",G),G},get catchall(){return W._zod.def.catchall},checks:[]});return A0(J,X)}function Py(J,W,X){let G=KX(W._zod.def,{get shape(){let Y=W._zod.def.shape,$={...Y};if(X)for(let K in X){if(!(K in Y))throw Error(`Unrecognized key: "${K}"`);if(!X[K])continue;$[K]=J?new J({type:"optional",innerType:Y[K]}):Y[K]}else for(let K in Y)$[K]=J?new J({type:"optional",innerType:Y[K]}):Y[K];return $X(this,"shape",$),$},checks:[]});return A0(W,G)}function vy(J,W,X){let G=KX(W._zod.def,{get shape(){let Y=W._zod.def.shape,$={...Y};if(X)for(let K in X){if(!(K in $))throw Error(`Unrecognized key: "${K}"`);if(!X[K])continue;$[K]=new J({type:"nonoptional",innerType:Y[K]})}else for(let K in Y)$[K]=new J({type:"nonoptional",innerType:Y[K]});return $X(this,"shape",$),$},checks:[]});return A0(W,G)}function HX(J,W=0){if(J.aborted===!0)return!0;for(let X=W;X<J.issues.length;X++)if(J.issues[X]?.continue!==!0)return!0;return!1}function j8(J,W){return W.map((X)=>{var G;return(G=X).path??(G.path=[]),X.path.unshift(J),X})}function e9(J){return typeof J==="string"?J:J?.message}function S8(J,W,X){let G={...J,path:J.path??[]};if(!J.message){let Y=e9(J.inst?._zod.def?.error?.(J))??e9(W?.error?.(J))??e9(X.customError?.(J))??e9(X.localeError?.(J))??"Invalid input";G.message=Y}if(delete G.inst,delete G.continue,!W?.reportInput)delete G.input;return G}function Y$(J){if(J instanceof Set)return"set";if(J instanceof Map)return"map";if(J instanceof File)return"file";return"unknown"}function G$(J){if(Array.isArray(J))return"array";if(typeof J==="string")return"string";return"unknown"}function gY(...J){let[W,X,G]=J;if(typeof W==="string")return{message:W,code:"custom",input:X,inst:G};return{...W}}function jy(J){return Object.entries(J).filter(([W,X])=>{return Number.isNaN(Number.parseInt(W,10))}).map((W)=>W[1])}function __(J){let W=atob(J),X=new Uint8Array(W.length);for(let G=0;G<W.length;G++)X[G]=W.charCodeAt(G);return X}function T_(J){let W="";for(let X=0;X<J.length;X++)W+=String.fromCharCode(J[X]);return btoa(W)}function Sy(J){let W=J.replace(/-/g,"+").replace(/_/g,"/"),X="=".repeat((4-W.length%4)%4);return __(W+X)}function _y(J){return T_(J).replace(/\+/g,"-").replace(/\//g,"_").replace(/=/g,"")}function Ty(J){let W=J.replace(/^0x/,"");if(W.length%2!==0)throw Error("Invalid hex string length");let X=new Uint8Array(W.length/2);for(let G=0;G<W.length;G+=2)X[G/2]=Number.parseInt(W.slice(G,G+2),16);return X}function qy(J){return Array.from(J).map((W)=>W.toString(16).padStart(2,"0")).join("")}class q_{constructor(...J){}}var S_,Sw,fU,Qy=(J)=>{let W=typeof J;switch(W){case"undefined":return"undefined";case"string":return"string";case"number":return Number.isNaN(J)?"nan":"number";case"boolean":return"boolean";case"function":return"function";case"bigint":return"bigint";case"symbol":return"symbol";case"object":if(Array.isArray(J))return"array";if(J===null)return"null";if(J.then&&typeof J.then==="function"&&J.catch&&typeof J.catch==="function")return"promise";if(typeof Map<"u"&&J instanceof Map)return"map";if(typeof Set<"u"&&J instanceof Set)return"set";if(typeof Date<"u"&&J instanceof Date)return"date";if(typeof File<"u"&&J instanceof File)return"file";return"object";default:throw Error(`Unknown data type: ${W}`)}},X$,xU,cU,lU;var K6=M(()=>{S_=Symbol("evaluating");Sw="captureStackTrace"in Error?Error.captureStackTrace:(...J)=>{};fU=hY(()=>{if(typeof navigator<"u"&&navigator?.userAgent?.includes("Cloudflare"))return!1;try{return new Function(""),!0}catch(J){return!1}});X$=new Set(["string","number","symbol"]),xU=new Set(["string","number","bigint","boolean","symbol","undefined"]);cU={safeint:[Number.MIN_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],int32:[-2147483648,2147483647],uint32:[0,4294967295],float32:[-340282346638528860000000000000000000000,340282346638528860000000000000000000000],float64:[-Number.MAX_VALUE,Number.MAX_VALUE]},lU={int64:[BigInt("-9223372036854775808"),BigInt("9223372036854775807")],uint64:[BigInt(0),BigInt("18446744073709551615")]}});function mY(J,W=(X)=>X.message){let X={},G=[];for(let Y of J.issues)if(Y.path.length>0)X[Y.path[0]]=X[Y.path[0]]||[],X[Y.path[0]].push(W(Y));else G.push(W(Y));return{formErrors:G,fieldErrors:X}}function fY(J,W=(X)=>X.message){let X={_errors:[]},G=(Y)=>{for(let $ of Y.issues)if($.code==="invalid_union"&&$.errors.length)$.errors.map((K)=>G({issues:K}));else if($.code==="invalid_key")G({issues:$.issues});else if($.code==="invalid_element")G({issues:$.issues});else if($.path.length===0)X._errors.push(W($));else{let K=X,w=0;while(w<$.path.length){let H=$.path[w];if(w!==$.path.length-1)K[H]=K[H]||{_errors:[]};else K[H]=K[H]||{_errors:[]},K[H]._errors.push(W($));K=K[H],w++}}};return G(J),X}function _w(J,W=(X)=>X.message){let X={errors:[]},G=(Y,$=[])=>{var K,w;for(let H of Y.issues)if(H.code==="invalid_union"&&H.errors.length)H.errors.map((z)=>G({issues:z},H.path));else if(H.code==="invalid_key")G({issues:H.issues},H.path);else if(H.code==="invalid_element")G({issues:H.issues},H.path);else{let z=[...$,...H.path];if(z.length===0){X.errors.push(W(H));continue}let N=X,U=0;while(U<z.length){let F=z[U],Z=U===z.length-1;if(typeof F==="string")N.properties??(N.properties={}),(K=N.properties)[F]??(K[F]={errors:[]}),N=N.properties[F];else N.items??(N.items=[]),(w=N.items)[F]??(w[F]={errors:[]}),N=N.items[F];if(Z)N.errors.push(W(H));U++}}};return G(J),X}function A_(J){let W=[],X=J.map((G)=>typeof G==="object"?G.key:G);for(let G of X)if(typeof G==="number")W.push(`[${G}]`);else if(typeof G==="symbol")W.push(`[${JSON.stringify(String(G))}]`);else if(/[^\w$]/.test(G))W.push(`[${JSON.stringify(G)}]`);else{if(W.length)W.push(".");W.push(G)}return W.join("")}function Tw(J){let W=[],X=[...J.issues].sort((G,Y)=>(G.path??[]).length-(Y.path??[]).length);for(let G of X)if(W.push(`\u2716 ${G.message}`),G.path?.length)W.push(`  \u2192 at ${A_(G.path)}`);return W.join(`
`)}var B_=(J,W)=>{J.name="$ZodError",Object.defineProperty(J,"_zod",{value:J._zod,enumerable:!1}),Object.defineProperty(J,"issues",{value:W,enumerable:!1}),J.message=JSON.stringify(W,kY,2),Object.defineProperty(J,"toString",{value:()=>J.message,enumerable:!1})},$$,W8;var pU=M(()=>{bY();K6();$$=C("$ZodError",B_),W8=C("$ZodError",B_,{Parent:Error})});var yY=(J)=>(W,X,G,Y)=>{let $=G?Object.assign(G,{async:!1}):{async:!1},K=W._zod.run({value:X,issues:[]},$);if(K instanceof Promise)throw new hJ;if(K.issues.length){let w=new(Y?.Err??J)(K.issues.map((H)=>S8(H,$,y4())));throw Sw(w,Y?.callee),w}return K.value},qw,xY=(J)=>async(W,X,G,Y)=>{let $=G?Object.assign(G,{async:!0}):{async:!0},K=W._zod.run({value:X,issues:[]},$);if(K instanceof Promise)K=await K;if(K.issues.length){let w=new(Y?.Err??J)(K.issues.map((H)=>S8(H,$,y4())));throw Sw(w,Y?.callee),w}return K.value},Bw,uY=(J)=>(W,X,G)=>{let Y=G?{...G,async:!1}:{async:!1},$=W._zod.run({value:X,issues:[]},Y);if($ instanceof Promise)throw new hJ;return $.issues.length?{success:!1,error:new(J??$$)($.issues.map((K)=>S8(K,Y,y4())))}:{success:!0,data:$.value}},dU,cY=(J)=>async(W,X,G)=>{let Y=G?Object.assign(G,{async:!0}):{async:!0},$=W._zod.run({value:X,issues:[]},Y);if($ instanceof Promise)$=await $;return $.issues.length?{success:!1,error:new J($.issues.map((K)=>S8(K,Y,y4())))}:{success:!0,data:$.value}},rU,Aw=(J)=>(W,X,G)=>{let Y=G?Object.assign(G,{direction:"backward"}):{direction:"backward"};return yY(J)(W,X,Y)},Ay,Ew=(J)=>(W,X,G)=>{return yY(J)(W,X,G)},Ey,Iw=(J)=>async(W,X,G)=>{let Y=G?Object.assign(G,{direction:"backward"}):{direction:"backward"};return xY(J)(W,X,Y)},Iy,Rw=(J)=>async(W,X,G)=>{return xY(J)(W,X,G)},Ry,Cw=(J)=>(W,X,G)=>{let Y=G?Object.assign(G,{direction:"backward"}):{direction:"backward"};return uY(J)(W,X,Y)},Cy,bw=(J)=>(W,X,G)=>{return uY(J)(W,X,G)},by,kw=(J)=>async(W,X,G)=>{let Y=G?Object.assign(G,{direction:"backward"}):{direction:"backward"};return cY(J)(W,X,Y)},ky,hw=(J)=>async(W,X,G)=>{return cY(J)(W,X,G)},hy;var nU=M(()=>{bY();pU();K6();qw=yY(W8),Bw=xY(W8),dU=uY(W8),rU=cY(W8),Ay=Aw(W8),Ey=Ew(W8),Iy=Iw(W8),Ry=Rw(W8),Cy=Cw(W8),by=bw(W8),ky=kw(W8),hy=hw(W8)});var _8={};N0(_8,{xid:()=>oU,uuid7:()=>yy,uuid6:()=>fy,uuid4:()=>my,uuid:()=>K1,uppercase:()=>jQ,unicodeEmail:()=>E_,undefined:()=>PQ,ulid:()=>tU,time:()=>UQ,string:()=>ZQ,sha512_hex:()=>Gx,sha512_base64url:()=>Kx,sha512_base64:()=>$x,sha384_hex:()=>Wx,sha384_base64url:()=>Yx,sha384_base64:()=>Xx,sha256_hex:()=>sy,sha256_base64url:()=>Jx,sha256_base64:()=>ey,sha1_hex:()=>ay,sha1_base64url:()=>oy,sha1_base64:()=>ty,rfc5322Email:()=>uy,number:()=>DQ,null:()=>OQ,nanoid:()=>eU,md5_hex:()=>ry,md5_base64url:()=>iy,md5_base64:()=>ny,lowercase:()=>vQ,ksuid:()=>sU,ipv6:()=>$Q,ipv4:()=>GQ,integer:()=>VQ,idnEmail:()=>cy,html5Email:()=>xy,hostname:()=>zQ,hex:()=>dy,guid:()=>WQ,extendedDuration:()=>gy,emoji:()=>YQ,email:()=>XQ,e164:()=>NQ,duration:()=>JQ,domain:()=>py,datetime:()=>QQ,date:()=>FQ,cuid2:()=>aU,cuid:()=>iU,cidrv6:()=>wQ,cidrv4:()=>KQ,browserEmail:()=>ly,boolean:()=>MQ,bigint:()=>LQ,base64url:()=>gw,base64:()=>HQ});function YQ(){return new RegExp("^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$","u")}function R_(J){return typeof J.precision==="number"?J.precision===-1?"(?:[01]\\d|2[0-3]):[0-5]\\d":J.precision===0?"(?:[01]\\d|2[0-3]):[0-5]\\d:[0-5]\\d":`(?:[01]\\d|2[0-3]):[0-5]\\d:[0-5]\\d\\.\\d{${J.precision}}`:"(?:[01]\\d|2[0-3]):[0-5]\\d(?::[0-5]\\d(?:\\.\\d+)?)?"}function UQ(J){return new RegExp(`^${R_(J)}$`)}function QQ(J){let W=R_({precision:J.precision}),X=["Z"];if(J.local)X.push("");if(J.offset)X.push("([+-](?:[01]\\d|2[0-3]):[0-5]\\d)");let G=`${W}(?:${X.join("|")})`;return new RegExp(`^${I_}T(?:${G})$`)}function K$(J,W){return new RegExp(`^[A-Za-z0-9+/]{${J}}${W}$`)}function w$(J){return new RegExp(`^[A-Za-z0-9_-]{${J}}$`)}var iU,aU,tU,oU,sU,eU,JQ,gy,WQ,K1=(J)=>{if(!J)return/^([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[1-8][0-9a-fA-F]{3}-[89abAB][0-9a-fA-F]{3}-[0-9a-fA-F]{12}|00000000-0000-0000-0000-000000000000|ffffffff-ffff-ffff-ffff-ffffffffffff)$/;return new RegExp(`^([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-${J}[0-9a-fA-F]{3}-[89abAB][0-9a-fA-F]{3}-[0-9a-fA-F]{12})$`)},my,fy,yy,XQ,xy,uy,E_,cy,ly,GQ,$Q,KQ,wQ,HQ,gw,zQ,py,NQ,I_="(?:(?:\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-(?:(?:0[13578]|1[02])-(?:0[1-9]|[12]\\d|3[01])|(?:0[469]|11)-(?:0[1-9]|[12]\\d|30)|(?:02)-(?:0[1-9]|1\\d|2[0-8])))",FQ,ZQ=(J)=>{let W=J?`[\\s\\S]{${J?.minimum??0},${J?.maximum??""}}`:"[\\s\\S]*";return new RegExp(`^${W}$`)},LQ,VQ,DQ,MQ,OQ,PQ,vQ,jQ,dy,ry,ny,iy,ay,ty,oy,sy,ey,Jx,Wx,Xx,Yx,Gx,$x,Kx;var mw=M(()=>{iU=/^[cC][^\s-]{8,}$/,aU=/^[0-9a-z]+$/,tU=/^[0-9A-HJKMNP-TV-Za-hjkmnp-tv-z]{26}$/,oU=/^[0-9a-vA-V]{20}$/,sU=/^[A-Za-z0-9]{27}$/,eU=/^[a-zA-Z0-9_-]{21}$/,JQ=/^P(?:(\d+W)|(?!.*W)(?=\d|T\d)(\d+Y)?(\d+M)?(\d+D)?(T(?=\d)(\d+H)?(\d+M)?(\d+([.,]\d+)?S)?)?)$/,gy=/^[-+]?P(?!$)(?:(?:[-+]?\d+Y)|(?:[-+]?\d+[.,]\d+Y$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:(?:[-+]?\d+W)|(?:[-+]?\d+[.,]\d+W$))?(?:(?:[-+]?\d+D)|(?:[-+]?\d+[.,]\d+D$))?(?:T(?=[\d+-])(?:(?:[-+]?\d+H)|(?:[-+]?\d+[.,]\d+H$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:[-+]?\d+(?:[.,]\d+)?S)?)??$/,WQ=/^([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{12})$/,my=K1(4),fy=K1(6),yy=K1(7),XQ=/^(?!\.)(?!.*\.\.)([A-Za-z0-9_'+\-\.]*)[A-Za-z0-9_+-]@([A-Za-z0-9][A-Za-z0-9\-]*\.)+[A-Za-z]{2,}$/,xy=/^[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/,uy=/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/,E_=/^[^\s@"]{1,64}@[^\s@]{1,255}$/u,cy=E_,ly=/^[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/;GQ=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,$Q=/^(([0-9a-fA-F]{1,4}:){7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:))$/,KQ=/^((25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/([0-9]|[1-2][0-9]|3[0-2])$/,wQ=/^(([0-9a-fA-F]{1,4}:){7}[0-9a-fA-F]{1,4}|::|([0-9a-fA-F]{1,4})?::([0-9a-fA-F]{1,4}:?){0,6})\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,HQ=/^$|^(?:[0-9a-zA-Z+/]{4})*(?:(?:[0-9a-zA-Z+/]{2}==)|(?:[0-9a-zA-Z+/]{3}=))?$/,gw=/^[A-Za-z0-9_-]*$/,zQ=/^(?=.{1,253}\.?$)[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[-0-9a-zA-Z]{0,61}[0-9a-zA-Z])?)*\.?$/,py=/^([a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?\.)+[a-zA-Z]{2,}$/,NQ=/^\+(?:[0-9]){6,14}[0-9]$/,FQ=new RegExp(`^${I_}$`);LQ=/^-?\d+n?$/,VQ=/^-?\d+$/,DQ=/^-?\d+(?:\.\d+)?/,MQ=/^(?:true|false)$/i,OQ=/^null$/i,PQ=/^undefined$/i,vQ=/^[^A-Z]*$/,jQ=/^[^a-z]*$/,dy=/^[0-9a-fA-F]*$/;ry=/^[0-9a-fA-F]{32}$/,ny=K$(22,"=="),iy=w$(22),ay=/^[0-9a-fA-F]{40}$/,ty=K$(27,"="),oy=w$(27),sy=/^[0-9a-fA-F]{64}$/,ey=K$(43,"="),Jx=w$(43),Wx=/^[0-9a-fA-F]{96}$/,Xx=K$(64,""),Yx=w$(64),Gx=/^[0-9a-fA-F]{128}$/,$x=K$(86,"=="),Kx=w$(86)});function C_(J,W,X){if(J.issues.length)W.issues.push(...j8(X,J.issues))}var M4,b_,fw,yw,SQ,_Q,TQ,qQ,BQ,AQ,EQ,IQ,RQ,lY,CQ,bQ,kQ,hQ,gQ,mQ,fQ,yQ,xQ;var xw=M(()=>{bY();mw();K6();M4=C("$ZodCheck",(J,W)=>{var X;J._zod??(J._zod={}),J._zod.def=W,(X=J._zod).onattach??(X.onattach=[])}),b_={number:"number",bigint:"bigint",object:"date"},fw=C("$ZodCheckLessThan",(J,W)=>{M4.init(J,W);let X=b_[typeof W.value];J._zod.onattach.push((G)=>{let Y=G._zod.bag,$=(W.inclusive?Y.maximum:Y.exclusiveMaximum)??Number.POSITIVE_INFINITY;if(W.value<$)if(W.inclusive)Y.maximum=W.value;else Y.exclusiveMaximum=W.value}),J._zod.check=(G)=>{if(W.inclusive?G.value<=W.value:G.value<W.value)return;G.issues.push({origin:X,code:"too_big",maximum:W.value,input:G.value,inclusive:W.inclusive,inst:J,continue:!W.abort})}}),yw=C("$ZodCheckGreaterThan",(J,W)=>{M4.init(J,W);let X=b_[typeof W.value];J._zod.onattach.push((G)=>{let Y=G._zod.bag,$=(W.inclusive?Y.minimum:Y.exclusiveMinimum)??Number.NEGATIVE_INFINITY;if(W.value>$)if(W.inclusive)Y.minimum=W.value;else Y.exclusiveMinimum=W.value}),J._zod.check=(G)=>{if(W.inclusive?G.value>=W.value:G.value>W.value)return;G.issues.push({origin:X,code:"too_small",minimum:W.value,input:G.value,inclusive:W.inclusive,inst:J,continue:!W.abort})}}),SQ=C("$ZodCheckMultipleOf",(J,W)=>{M4.init(J,W),J._zod.onattach.push((X)=>{var G;(G=X._zod.bag).multipleOf??(G.multipleOf=W.value)}),J._zod.check=(X)=>{if(typeof X.value!==typeof W.value)throw Error("Cannot mix number and bigint in multiple_of check.");if(typeof X.value==="bigint"?X.value%W.value===BigInt(0):mU(X.value,W.value)===0)return;X.issues.push({origin:typeof X.value,code:"not_multiple_of",divisor:W.value,input:X.value,inst:J,continue:!W.abort})}}),_Q=C("$ZodCheckNumberFormat",(J,W)=>{M4.init(J,W),W.format=W.format||"float64";let X=W.format?.includes("int"),G=X?"int":"number",[Y,$]=cU[W.format];J._zod.onattach.push((K)=>{let w=K._zod.bag;if(w.format=W.format,w.minimum=Y,w.maximum=$,X)w.pattern=VQ}),J._zod.check=(K)=>{let w=K.value;if(X){if(!Number.isInteger(w)){K.issues.push({expected:G,format:W.format,code:"invalid_type",continue:!1,input:w,inst:J});return}if(!Number.isSafeInteger(w)){if(w>0)K.issues.push({input:w,code:"too_big",maximum:Number.MAX_SAFE_INTEGER,note:"Integers must be within the safe integer range.",inst:J,origin:G,continue:!W.abort});else K.issues.push({input:w,code:"too_small",minimum:Number.MIN_SAFE_INTEGER,note:"Integers must be within the safe integer range.",inst:J,origin:G,continue:!W.abort});return}}if(w<Y)K.issues.push({origin:"number",input:w,code:"too_small",minimum:Y,inclusive:!0,inst:J,continue:!W.abort});if(w>$)K.issues.push({origin:"number",input:w,code:"too_big",maximum:$,inst:J})}}),TQ=C("$ZodCheckBigIntFormat",(J,W)=>{M4.init(J,W);let[X,G]=lU[W.format];J._zod.onattach.push((Y)=>{let $=Y._zod.bag;$.format=W.format,$.minimum=X,$.maximum=G}),J._zod.check=(Y)=>{let $=Y.value;if($<X)Y.issues.push({origin:"bigint",input:$,code:"too_small",minimum:X,inclusive:!0,inst:J,continue:!W.abort});if($>G)Y.issues.push({origin:"bigint",input:$,code:"too_big",maximum:G,inst:J})}}),qQ=C("$ZodCheckMaxSize",(J,W)=>{var X;M4.init(J,W),(X=J._zod.def).when??(X.when=(G)=>{let Y=G.value;return!GX(Y)&&Y.size!==void 0}),J._zod.onattach.push((G)=>{let Y=G._zod.bag.maximum??Number.POSITIVE_INFINITY;if(W.maximum<Y)G._zod.bag.maximum=W.maximum}),J._zod.check=(G)=>{let Y=G.value;if(Y.size<=W.maximum)return;G.issues.push({origin:Y$(Y),code:"too_big",maximum:W.maximum,inclusive:!0,input:Y,inst:J,continue:!W.abort})}}),BQ=C("$ZodCheckMinSize",(J,W)=>{var X;M4.init(J,W),(X=J._zod.def).when??(X.when=(G)=>{let Y=G.value;return!GX(Y)&&Y.size!==void 0}),J._zod.onattach.push((G)=>{let Y=G._zod.bag.minimum??Number.NEGATIVE_INFINITY;if(W.minimum>Y)G._zod.bag.minimum=W.minimum}),J._zod.check=(G)=>{let Y=G.value;if(Y.size>=W.minimum)return;G.issues.push({origin:Y$(Y),code:"too_small",minimum:W.minimum,inclusive:!0,input:Y,inst:J,continue:!W.abort})}}),AQ=C("$ZodCheckSizeEquals",(J,W)=>{var X;M4.init(J,W),(X=J._zod.def).when??(X.when=(G)=>{let Y=G.value;return!GX(Y)&&Y.size!==void 0}),J._zod.onattach.push((G)=>{let Y=G._zod.bag;Y.minimum=W.size,Y.maximum=W.size,Y.size=W.size}),J._zod.check=(G)=>{let Y=G.value,$=Y.size;if($===W.size)return;let K=$>W.size;G.issues.push({origin:Y$(Y),...K?{code:"too_big",maximum:W.size}:{code:"too_small",minimum:W.size},inclusive:!0,exact:!0,input:G.value,inst:J,continue:!W.abort})}}),EQ=C("$ZodCheckMaxLength",(J,W)=>{var X;M4.init(J,W),(X=J._zod.def).when??(X.when=(G)=>{let Y=G.value;return!GX(Y)&&Y.length!==void 0}),J._zod.onattach.push((G)=>{let Y=G._zod.bag.maximum??Number.POSITIVE_INFINITY;if(W.maximum<Y)G._zod.bag.maximum=W.maximum}),J._zod.check=(G)=>{let Y=G.value;if(Y.length<=W.maximum)return;let K=G$(Y);G.issues.push({origin:K,code:"too_big",maximum:W.maximum,inclusive:!0,input:Y,inst:J,continue:!W.abort})}}),IQ=C("$ZodCheckMinLength",(J,W)=>{var X;M4.init(J,W),(X=J._zod.def).when??(X.when=(G)=>{let Y=G.value;return!GX(Y)&&Y.length!==void 0}),J._zod.onattach.push((G)=>{let Y=G._zod.bag.minimum??Number.NEGATIVE_INFINITY;if(W.minimum>Y)G._zod.bag.minimum=W.minimum}),J._zod.check=(G)=>{let Y=G.value;if(Y.length>=W.minimum)return;let K=G$(Y);G.issues.push({origin:K,code:"too_small",minimum:W.minimum,inclusive:!0,input:Y,inst:J,continue:!W.abort})}}),RQ=C("$ZodCheckLengthEquals",(J,W)=>{var X;M4.init(J,W),(X=J._zod.def).when??(X.when=(G)=>{let Y=G.value;return!GX(Y)&&Y.length!==void 0}),J._zod.onattach.push((G)=>{let Y=G._zod.bag;Y.minimum=W.length,Y.maximum=W.length,Y.length=W.length}),J._zod.check=(G)=>{let Y=G.value,$=Y.length;if($===W.length)return;let K=G$(Y),w=$>W.length;G.issues.push({origin:K,...w?{code:"too_big",maximum:W.length}:{code:"too_small",minimum:W.length},inclusive:!0,exact:!0,input:G.value,inst:J,continue:!W.abort})}}),lY=C("$ZodCheckStringFormat",(J,W)=>{var X,G;if(M4.init(J,W),J._zod.onattach.push((Y)=>{let $=Y._zod.bag;if($.format=W.format,W.pattern)$.patterns??($.patterns=new Set),$.patterns.add(W.pattern)}),W.pattern)(X=J._zod).check??(X.check=(Y)=>{if(W.pattern.lastIndex=0,W.pattern.test(Y.value))return;Y.issues.push({origin:"string",code:"invalid_format",format:W.format,input:Y.value,...W.pattern?{pattern:W.pattern.toString()}:{},inst:J,continue:!W.abort})});else(G=J._zod).check??(G.check=()=>{})}),CQ=C("$ZodCheckRegex",(J,W)=>{lY.init(J,W),J._zod.check=(X)=>{if(W.pattern.lastIndex=0,W.pattern.test(X.value))return;X.issues.push({origin:"string",code:"invalid_format",format:"regex",input:X.value,pattern:W.pattern.toString(),inst:J,continue:!W.abort})}}),bQ=C("$ZodCheckLowerCase",(J,W)=>{W.pattern??(W.pattern=vQ),lY.init(J,W)}),kQ=C("$ZodCheckUpperCase",(J,W)=>{W.pattern??(W.pattern=jQ),lY.init(J,W)}),hQ=C("$ZodCheckIncludes",(J,W)=>{M4.init(J,W);let X=gJ(W.includes),G=new RegExp(typeof W.position==="number"?`^.{${W.position}}${X}`:X);W.pattern=G,J._zod.onattach.push((Y)=>{let $=Y._zod.bag;$.patterns??($.patterns=new Set),$.patterns.add(G)}),J._zod.check=(Y)=>{if(Y.value.includes(W.includes,W.position))return;Y.issues.push({origin:"string",code:"invalid_format",format:"includes",includes:W.includes,input:Y.value,inst:J,continue:!W.abort})}}),gQ=C("$ZodCheckStartsWith",(J,W)=>{M4.init(J,W);let X=new RegExp(`^${gJ(W.prefix)}.*`);W.pattern??(W.pattern=X),J._zod.onattach.push((G)=>{let Y=G._zod.bag;Y.patterns??(Y.patterns=new Set),Y.patterns.add(X)}),J._zod.check=(G)=>{if(G.value.startsWith(W.prefix))return;G.issues.push({origin:"string",code:"invalid_format",format:"starts_with",prefix:W.prefix,input:G.value,inst:J,continue:!W.abort})}}),mQ=C("$ZodCheckEndsWith",(J,W)=>{M4.init(J,W);let X=new RegExp(`.*${gJ(W.suffix)}$`);W.pattern??(W.pattern=X),J._zod.onattach.push((G)=>{let Y=G._zod.bag;Y.patterns??(Y.patterns=new Set),Y.patterns.add(X)}),J._zod.check=(G)=>{if(G.value.endsWith(W.suffix))return;G.issues.push({origin:"string",code:"invalid_format",format:"ends_with",suffix:W.suffix,input:G.value,inst:J,continue:!W.abort})}});fQ=C("$ZodCheckProperty",(J,W)=>{M4.init(J,W),J._zod.check=(X)=>{let G=W.schema._zod.run({value:X.value[W.property],issues:[]},{});if(G instanceof Promise)return G.then((Y)=>C_(Y,X,W.property));C_(G,X,W.property);return}}),yQ=C("$ZodCheckMimeType",(J,W)=>{M4.init(J,W);let X=new Set(W.mime);J._zod.onattach.push((G)=>{G._zod.bag.mime=W.mime}),J._zod.check=(G)=>{if(X.has(G.value.type))return;G.issues.push({code:"invalid_value",values:W.mime,input:G.value.type,inst:J,continue:!W.abort})}}),xQ=C("$ZodCheckOverwrite",(J,W)=>{M4.init(J,W),J._zod.check=(X)=>{X.value=W.tx(X.value)}})});class uw{constructor(J=[]){if(this.content=[],this.indent=0,this)this.args=J}indented(J){this.indent+=1,J(this),this.indent-=1}write(J){if(typeof J==="function"){J(this,{execution:"sync"}),J(this,{execution:"async"});return}let X=J.split(`
`).filter(($)=>$),G=Math.min(...X.map(($)=>$.length-$.trimStart().length)),Y=X.map(($)=>$.slice(G)).map(($)=>" ".repeat(this.indent*2)+$);for(let $ of Y)this.content.push($)}compile(){let J=Function,W=this?.args,G=[...(this?.content??[""]).map((Y)=>`  ${Y}`)];return new J(...W,G.join(`
`))}}var uQ;var cQ=M(()=>{uQ={major:4,minor:1,patch:12}});function zZ(J){if(J==="")return!0;if(J.length%4!==0)return!1;try{return atob(J),!0}catch{return!1}}function d_(J){if(!gw.test(J))return!1;let W=J.replace(/[-_]/g,(G)=>G==="-"?"+":"/"),X=W.padEnd(Math.ceil(W.length/4)*4,"=");return zZ(X)}function r_(J,W=null){try{let X=J.split(".");if(X.length!==3)return!1;let[G]=X;if(!G)return!1;let Y=JSON.parse(atob(G));if("typ"in Y&&Y?.typ!=="JWT")return!1;if(!Y.alg)return!1;if(W&&(!("alg"in Y)||Y.alg!==W))return!1;return!0}catch{return!1}}function h_(J,W,X){if(J.issues.length)W.issues.push(...j8(X,J.issues));W.value[X]=J.value}function rw(J,W,X,G){if(J.issues.length)W.issues.push(...j8(X,J.issues));if(J.value===void 0){if(X in G)W.value[X]=void 0}else W.value[X]=J.value}function n_(J){let W=Object.keys(J.shape);for(let G of W)if(!J.shape?.[G]?._zod?.traits?.has("$ZodType"))throw Error(`Invalid element at key "${G}": expected a Zod schema`);let X=uU(J.shape);return{...J,keys:W,keySet:new Set(W),numKeys:W.length,optionalKeys:new Set(X)}}function i_(J,W,X,G,Y,$){let K=[],w=Y.keySet,H=Y.catchall._zod,z=H.def.type;for(let N of Object.keys(W)){if(w.has(N))continue;if(z==="never"){K.push(N);continue}let U=H.run({value:W[N],issues:[]},G);if(U instanceof Promise)J.push(U.then((F)=>rw(F,X,N,W)));else rw(U,X,N,W)}if(K.length)X.issues.push({code:"unrecognized_keys",keys:K,input:W,inst:$});if(!J.length)return X;return Promise.all(J).then(()=>{return X})}function g_(J,W,X,G){for(let $ of J)if($.issues.length===0)return W.value=$.value,W;let Y=J.filter(($)=>!HX($));if(Y.length===1)return W.value=Y[0].value,Y[0];return W.issues.push({code:"invalid_union",input:W.value,inst:X,errors:J.map(($)=>$.issues.map((K)=>S8(K,G,y4())))}),W}function lQ(J,W){if(J===W)return{valid:!0,data:J};if(J instanceof Date&&W instanceof Date&&+J===+W)return{valid:!0,data:J};if(wX(J)&&wX(W)){let X=Object.keys(W),G=Object.keys(J).filter(($)=>X.indexOf($)!==-1),Y={...J,...W};for(let $ of G){let K=lQ(J[$],W[$]);if(!K.valid)return{valid:!1,mergeErrorPath:[$,...K.mergeErrorPath]};Y[$]=K.data}return{valid:!0,data:Y}}if(Array.isArray(J)&&Array.isArray(W)){if(J.length!==W.length)return{valid:!1,mergeErrorPath:[]};let X=[];for(let G=0;G<J.length;G++){let Y=J[G],$=W[G],K=lQ(Y,$);if(!K.valid)return{valid:!1,mergeErrorPath:[G,...K.mergeErrorPath]};X.push(K.data)}return{valid:!0,data:X}}return{valid:!1,mergeErrorPath:[]}}function m_(J,W,X){if(W.issues.length)J.issues.push(...W.issues);if(X.issues.length)J.issues.push(...X.issues);if(HX(J))return J;let G=lQ(W.value,X.value);if(!G.valid)throw Error(`Unmergable intersection. Error path: ${JSON.stringify(G.mergeErrorPath)}`);return J.value=G.data,J}function cw(J,W,X){if(J.issues.length)W.issues.push(...j8(X,J.issues));W.value[X]=J.value}function f_(J,W,X,G,Y,$,K){if(J.issues.length)if(X$.has(typeof G))X.issues.push(...j8(G,J.issues));else X.issues.push({code:"invalid_key",origin:"map",input:Y,inst:$,issues:J.issues.map((w)=>S8(w,K,y4()))});if(W.issues.length)if(X$.has(typeof G))X.issues.push(...j8(G,W.issues));else X.issues.push({origin:"map",code:"invalid_element",input:Y,inst:$,key:G,issues:W.issues.map((w)=>S8(w,K,y4()))});X.value.set(J.value,W.value)}function y_(J,W){if(J.issues.length)W.issues.push(...J.issues);W.value.add(J.value)}function x_(J,W){if(J.issues.length&&W===void 0)return{issues:[],value:void 0};return J}function u_(J,W){if(J.value===void 0)J.value=W.defaultValue;return J}function c_(J,W){if(!J.issues.length&&J.value===void 0)J.issues.push({code:"invalid_type",expected:"nonoptional",input:J.value,inst:W});return J}function lw(J,W,X){if(J.issues.length)return J.aborted=!0,J;return W._zod.run({value:J.value,issues:J.issues},X)}function pw(J,W,X){if(J.issues.length)return J.aborted=!0,J;if((X.direction||"forward")==="forward"){let Y=W.transform(J.value,J);if(Y instanceof Promise)return Y.then(($)=>dw(J,$,W.out,X));return dw(J,Y,W.out,X)}else{let Y=W.reverseTransform(J.value,J);if(Y instanceof Promise)return Y.then(($)=>dw(J,$,W.in,X));return dw(J,Y,W.in,X)}}function dw(J,W,X,G){if(J.issues.length)return J.aborted=!0,J;return X._zod.run({value:W,issues:J.issues},G)}function l_(J){return J.value=Object.freeze(J.value),J}function p_(J,W,X,G){if(!J){let Y={code:"custom",input:X,inst:G,path:[...G._zod.def.path??[]],continue:!G._zod.def.abort};if(G._zod.def.params)Y.params=G._zod.def.params;W.issues.push(gY(Y))}}var Z6,w1,z4,pQ,dQ,rQ,nQ,iQ,aQ,tQ,oQ,sQ,eQ,JZ,WZ,XZ,YZ,GZ,$Z,KZ,wZ,HZ,NZ,FZ,UZ,QZ,ZZ,nw,LZ,H$,iw,VZ,DZ,MZ,OZ,PZ,vZ,jZ,SZ,_Z,TZ,a_,qZ,aw,BZ,AZ,tw,EZ,IZ,RZ,CZ,bZ,kZ,hZ,gZ,mZ,fZ,yZ,xZ,uZ,cZ,lZ,pZ,z$,dZ,rZ,nZ,iZ,aZ,tZ;var oZ=M(()=>{xw();bY();nU();mw();K6();cQ();K6();Z6=C("$ZodType",(J,W)=>{var X;J??(J={}),J._zod.def=W,J._zod.bag=J._zod.bag||{},J._zod.version=uQ;let G=[...J._zod.def.checks??[]];if(J._zod.traits.has("$ZodCheck"))G.unshift(J);for(let Y of G)for(let $ of Y._zod.onattach)$(J);if(G.length===0)(X=J._zod).deferred??(X.deferred=[]),J._zod.deferred?.push(()=>{J._zod.run=J._zod.parse});else{let Y=(K,w,H)=>{let z=HX(K),N;for(let U of w){if(U._zod.def.when){if(!U._zod.def.when(K))continue}else if(z)continue;let F=K.issues.length,Z=U._zod.check(K);if(Z instanceof Promise&&H?.async===!1)throw new hJ;if(N||Z instanceof Promise)N=(N??Promise.resolve()).then(async()=>{if(await Z,K.issues.length===F)return;if(!z)z=HX(K,F)});else{if(K.issues.length===F)continue;if(!z)z=HX(K,F)}}if(N)return N.then(()=>{return K});return K},$=(K,w,H)=>{if(HX(K))return K.aborted=!0,K;let z=Y(w,G,H);if(z instanceof Promise){if(H.async===!1)throw new hJ;return z.then((N)=>J._zod.parse(N,H))}return J._zod.parse(z,H)};J._zod.run=(K,w)=>{if(w.skipChecks)return J._zod.parse(K,w);if(w.direction==="backward"){let z=J._zod.parse({value:K.value,issues:[]},{...w,skipChecks:!0});if(z instanceof Promise)return z.then((N)=>{return $(N,K,w)});return $(z,K,w)}let H=J._zod.parse(K,w);if(H instanceof Promise){if(w.async===!1)throw new hJ;return H.then((z)=>Y(z,G,w))}return Y(H,G,w)}}J["~standard"]={validate:(Y)=>{try{let $=dU(J,Y);return $.success?{value:$.data}:{issues:$.error?.issues}}catch($){return rU(J,Y).then((K)=>K.success?{value:K.data}:{issues:K.error?.issues})}},vendor:"zod",version:1}}),w1=C("$ZodString",(J,W)=>{Z6.init(J,W),J._zod.pattern=[...J?._zod.bag?.patterns??[]].pop()??ZQ(J._zod.bag),J._zod.parse=(X,G)=>{if(W.coerce)try{X.value=String(X.value)}catch(Y){}if(typeof X.value==="string")return X;return X.issues.push({expected:"string",code:"invalid_type",input:X.value,inst:J}),X}}),z4=C("$ZodStringFormat",(J,W)=>{lY.init(J,W),w1.init(J,W)}),pQ=C("$ZodGUID",(J,W)=>{W.pattern??(W.pattern=WQ),z4.init(J,W)}),dQ=C("$ZodUUID",(J,W)=>{if(W.version){let G={v1:1,v2:2,v3:3,v4:4,v5:5,v6:6,v7:7,v8:8}[W.version];if(G===void 0)throw Error(`Invalid UUID version: "${W.version}"`);W.pattern??(W.pattern=K1(G))}else W.pattern??(W.pattern=K1());z4.init(J,W)}),rQ=C("$ZodEmail",(J,W)=>{W.pattern??(W.pattern=XQ),z4.init(J,W)}),nQ=C("$ZodURL",(J,W)=>{z4.init(J,W),J._zod.check=(X)=>{try{let G=X.value.trim(),Y=new URL(G);if(W.hostname){if(W.hostname.lastIndex=0,!W.hostname.test(Y.hostname))X.issues.push({code:"invalid_format",format:"url",note:"Invalid hostname",pattern:zQ.source,input:X.value,inst:J,continue:!W.abort})}if(W.protocol){if(W.protocol.lastIndex=0,!W.protocol.test(Y.protocol.endsWith(":")?Y.protocol.slice(0,-1):Y.protocol))X.issues.push({code:"invalid_format",format:"url",note:"Invalid protocol",pattern:W.protocol.source,input:X.value,inst:J,continue:!W.abort})}if(W.normalize)X.value=Y.href;else X.value=G;return}catch(G){X.issues.push({code:"invalid_format",format:"url",input:X.value,inst:J,continue:!W.abort})}}}),iQ=C("$ZodEmoji",(J,W)=>{W.pattern??(W.pattern=YQ()),z4.init(J,W)}),aQ=C("$ZodNanoID",(J,W)=>{W.pattern??(W.pattern=eU),z4.init(J,W)}),tQ=C("$ZodCUID",(J,W)=>{W.pattern??(W.pattern=iU),z4.init(J,W)}),oQ=C("$ZodCUID2",(J,W)=>{W.pattern??(W.pattern=aU),z4.init(J,W)}),sQ=C("$ZodULID",(J,W)=>{W.pattern??(W.pattern=tU),z4.init(J,W)}),eQ=C("$ZodXID",(J,W)=>{W.pattern??(W.pattern=oU),z4.init(J,W)}),JZ=C("$ZodKSUID",(J,W)=>{W.pattern??(W.pattern=sU),z4.init(J,W)}),WZ=C("$ZodISODateTime",(J,W)=>{W.pattern??(W.pattern=QQ(W)),z4.init(J,W)}),XZ=C("$ZodISODate",(J,W)=>{W.pattern??(W.pattern=FQ),z4.init(J,W)}),YZ=C("$ZodISOTime",(J,W)=>{W.pattern??(W.pattern=UQ(W)),z4.init(J,W)}),GZ=C("$ZodISODuration",(J,W)=>{W.pattern??(W.pattern=JQ),z4.init(J,W)}),$Z=C("$ZodIPv4",(J,W)=>{W.pattern??(W.pattern=GQ),z4.init(J,W),J._zod.onattach.push((X)=>{let G=X._zod.bag;G.format="ipv4"})}),KZ=C("$ZodIPv6",(J,W)=>{W.pattern??(W.pattern=$Q),z4.init(J,W),J._zod.onattach.push((X)=>{let G=X._zod.bag;G.format="ipv6"}),J._zod.check=(X)=>{try{new URL(`http://[${X.value}]`)}catch{X.issues.push({code:"invalid_format",format:"ipv6",input:X.value,inst:J,continue:!W.abort})}}}),wZ=C("$ZodCIDRv4",(J,W)=>{W.pattern??(W.pattern=KQ),z4.init(J,W)}),HZ=C("$ZodCIDRv6",(J,W)=>{W.pattern??(W.pattern=wQ),z4.init(J,W),J._zod.check=(X)=>{let G=X.value.split("/");try{if(G.length!==2)throw Error();let[Y,$]=G;if(!$)throw Error();let K=Number($);if(`${K}`!==$)throw Error();if(K<0||K>128)throw Error();new URL(`http://[${Y}]`)}catch{X.issues.push({code:"invalid_format",format:"cidrv6",input:X.value,inst:J,continue:!W.abort})}}});NZ=C("$ZodBase64",(J,W)=>{W.pattern??(W.pattern=HQ),z4.init(J,W),J._zod.onattach.push((X)=>{X._zod.bag.contentEncoding="base64"}),J._zod.check=(X)=>{if(zZ(X.value))return;X.issues.push({code:"invalid_format",format:"base64",input:X.value,inst:J,continue:!W.abort})}});FZ=C("$ZodBase64URL",(J,W)=>{W.pattern??(W.pattern=gw),z4.init(J,W),J._zod.onattach.push((X)=>{X._zod.bag.contentEncoding="base64url"}),J._zod.check=(X)=>{if(d_(X.value))return;X.issues.push({code:"invalid_format",format:"base64url",input:X.value,inst:J,continue:!W.abort})}}),UZ=C("$ZodE164",(J,W)=>{W.pattern??(W.pattern=NQ),z4.init(J,W)});QZ=C("$ZodJWT",(J,W)=>{z4.init(J,W),J._zod.check=(X)=>{if(r_(X.value,W.alg))return;X.issues.push({code:"invalid_format",format:"jwt",input:X.value,inst:J,continue:!W.abort})}}),ZZ=C("$ZodCustomStringFormat",(J,W)=>{z4.init(J,W),J._zod.check=(X)=>{if(W.fn(X.value))return;X.issues.push({code:"invalid_format",format:W.format,input:X.value,inst:J,continue:!W.abort})}}),nw=C("$ZodNumber",(J,W)=>{Z6.init(J,W),J._zod.pattern=J._zod.bag.pattern??DQ,J._zod.parse=(X,G)=>{if(W.coerce)try{X.value=Number(X.value)}catch(K){}let Y=X.value;if(typeof Y==="number"&&!Number.isNaN(Y)&&Number.isFinite(Y))return X;let $=typeof Y==="number"?Number.isNaN(Y)?"NaN":!Number.isFinite(Y)?"Infinity":void 0:void 0;return X.issues.push({expected:"number",code:"invalid_type",input:Y,inst:J,...$?{received:$}:{}}),X}}),LZ=C("$ZodNumber",(J,W)=>{_Q.init(J,W),nw.init(J,W)}),H$=C("$ZodBoolean",(J,W)=>{Z6.init(J,W),J._zod.pattern=MQ,J._zod.parse=(X,G)=>{if(W.coerce)try{X.value=Boolean(X.value)}catch($){}let Y=X.value;if(typeof Y==="boolean")return X;return X.issues.push({expected:"boolean",code:"invalid_type",input:Y,inst:J}),X}}),iw=C("$ZodBigInt",(J,W)=>{Z6.init(J,W),J._zod.pattern=LQ,J._zod.parse=(X,G)=>{if(W.coerce)try{X.value=BigInt(X.value)}catch(Y){}if(typeof X.value==="bigint")return X;return X.issues.push({expected:"bigint",code:"invalid_type",input:X.value,inst:J}),X}}),VZ=C("$ZodBigInt",(J,W)=>{TQ.init(J,W),iw.init(J,W)}),DZ=C("$ZodSymbol",(J,W)=>{Z6.init(J,W),J._zod.parse=(X,G)=>{let Y=X.value;if(typeof Y==="symbol")return X;return X.issues.push({expected:"symbol",code:"invalid_type",input:Y,inst:J}),X}}),MZ=C("$ZodUndefined",(J,W)=>{Z6.init(J,W),J._zod.pattern=PQ,J._zod.values=new Set([void 0]),J._zod.optin="optional",J._zod.optout="optional",J._zod.parse=(X,G)=>{let Y=X.value;if(typeof Y>"u")return X;return X.issues.push({expected:"undefined",code:"invalid_type",input:Y,inst:J}),X}}),OZ=C("$ZodNull",(J,W)=>{Z6.init(J,W),J._zod.pattern=OQ,J._zod.values=new Set([null]),J._zod.parse=(X,G)=>{let Y=X.value;if(Y===null)return X;return X.issues.push({expected:"null",code:"invalid_type",input:Y,inst:J}),X}}),PZ=C("$ZodAny",(J,W)=>{Z6.init(J,W),J._zod.parse=(X)=>X}),vZ=C("$ZodUnknown",(J,W)=>{Z6.init(J,W),J._zod.parse=(X)=>X}),jZ=C("$ZodNever",(J,W)=>{Z6.init(J,W),J._zod.parse=(X,G)=>{return X.issues.push({expected:"never",code:"invalid_type",input:X.value,inst:J}),X}}),SZ=C("$ZodVoid",(J,W)=>{Z6.init(J,W),J._zod.parse=(X,G)=>{let Y=X.value;if(typeof Y>"u")return X;return X.issues.push({expected:"void",code:"invalid_type",input:Y,inst:J}),X}}),_Z=C("$ZodDate",(J,W)=>{Z6.init(J,W),J._zod.parse=(X,G)=>{if(W.coerce)try{X.value=new Date(X.value)}catch(w){}let Y=X.value,$=Y instanceof Date;if($&&!Number.isNaN(Y.getTime()))return X;return X.issues.push({expected:"date",code:"invalid_type",input:Y,...$?{received:"Invalid Date"}:{},inst:J}),X}});TZ=C("$ZodArray",(J,W)=>{Z6.init(J,W),J._zod.parse=(X,G)=>{let Y=X.value;if(!Array.isArray(Y))return X.issues.push({expected:"array",code:"invalid_type",input:Y,inst:J}),X;X.value=Array(Y.length);let $=[];for(let K=0;K<Y.length;K++){let w=Y[K],H=W.element._zod.run({value:w,issues:[]},G);if(H instanceof Promise)$.push(H.then((z)=>h_(z,X,K)));else h_(H,X,K)}if($.length)return Promise.all($).then(()=>X);return X}});a_=C("$ZodObject",(J,W)=>{if(Z6.init(J,W),!Object.getOwnPropertyDescriptor(W,"shape")?.get){let w=W.shape;Object.defineProperty(W,"shape",{get:()=>{let H={...w};return Object.defineProperty(W,"shape",{value:H}),H}})}let G=hY(()=>n_(W));S6(J._zod,"propValues",()=>{let w=W.shape,H={};for(let z in w){let N=w[z]._zod;if(N.values){H[z]??(H[z]=new Set);for(let U of N.values)H[z].add(U)}}return H});let Y=$1,$=W.catchall,K;J._zod.parse=(w,H)=>{K??(K=G.value);let z=w.value;if(!Y(z))return w.issues.push({expected:"object",code:"invalid_type",input:z,inst:J}),w;w.value={};let N=[],U=K.shape;for(let F of K.keys){let L=U[F]._zod.run({value:z[F],issues:[]},H);if(L instanceof Promise)N.push(L.then((D)=>rw(D,w,F,z)));else rw(L,w,F,z)}if(!$)return N.length?Promise.all(N).then(()=>w):w;return i_(N,z,w,H,G.value,J)}}),qZ=C("$ZodObjectJIT",(J,W)=>{a_.init(J,W);let X=J._zod.parse,G=hY(()=>n_(W)),Y=(F)=>{let Z=new uw(["shape","payload","ctx"]),L=G.value,D=(T)=>{let v=jw(T);return`shape[${v}]._zod.run({ value: input[${v}], issues: [] }, ctx)`};Z.write("const input = payload.value;");let O=Object.create(null),P=0;for(let T of L.keys)O[T]=`key_${P++}`;Z.write("const newResult = {};");for(let T of L.keys){let v=O[T],q=jw(T);Z.write(`const ${v} = ${D(T)};`),Z.write(`
        if (${v}.issues.length) {
          payload.issues = payload.issues.concat(${v}.issues.map(iss => ({
            ...iss,
            path: iss.path ? [${q}, ...iss.path] : [${q}]
          })));
        }
        
        
        if (${v}.value === undefined) {
          if (${q} in input) {
            newResult[${q}] = undefined;
          }
        } else {
          newResult[${q}] = ${v}.value;
        }
        
      `)}Z.write("payload.value = newResult;"),Z.write("return payload;");let _=Z.compile();return(T,v)=>_(F,T,v)},$,K=$1,w=!s9.jitless,z=w&&fU.value,N=W.catchall,U;J._zod.parse=(F,Z)=>{U??(U=G.value);let L=F.value;if(!K(L))return F.issues.push({expected:"object",code:"invalid_type",input:L,inst:J}),F;if(w&&z&&Z?.async===!1&&Z.jitless!==!0){if(!$)$=Y(W.shape);if(F=$(F,Z),!N)return F;return i_([],L,F,Z,U,J)}return X(F,Z)}});aw=C("$ZodUnion",(J,W)=>{Z6.init(J,W),S6(J._zod,"optin",()=>W.options.some((Y)=>Y._zod.optin==="optional")?"optional":void 0),S6(J._zod,"optout",()=>W.options.some((Y)=>Y._zod.optout==="optional")?"optional":void 0),S6(J._zod,"values",()=>{if(W.options.every((Y)=>Y._zod.values))return new Set(W.options.flatMap((Y)=>Array.from(Y._zod.values)));return}),S6(J._zod,"pattern",()=>{if(W.options.every((Y)=>Y._zod.pattern)){let Y=W.options.map(($)=>$._zod.pattern);return new RegExp(`^(${Y.map(($)=>W$($.source)).join("|")})$`)}return});let X=W.options.length===1,G=W.options[0]._zod.run;J._zod.parse=(Y,$)=>{if(X)return G(Y,$);let K=!1,w=[];for(let H of W.options){let z=H._zod.run({value:Y.value,issues:[]},$);if(z instanceof Promise)w.push(z),K=!0;else{if(z.issues.length===0)return z;w.push(z)}}if(!K)return g_(w,Y,J,$);return Promise.all(w).then((H)=>{return g_(H,Y,J,$)})}}),BZ=C("$ZodDiscriminatedUnion",(J,W)=>{aw.init(J,W);let X=J._zod.parse;S6(J._zod,"propValues",()=>{let Y={};for(let $ of W.options){let K=$._zod.propValues;if(!K||Object.keys(K).length===0)throw Error(`Invalid discriminated union option at index "${W.options.indexOf($)}"`);for(let[w,H]of Object.entries(K)){if(!Y[w])Y[w]=new Set;for(let z of H)Y[w].add(z)}}return Y});let G=hY(()=>{let Y=W.options,$=new Map;for(let K of Y){let w=K._zod.propValues?.[W.discriminator];if(!w||w.size===0)throw Error(`Invalid discriminated union option at index "${W.options.indexOf(K)}"`);for(let H of w){if($.has(H))throw Error(`Duplicate discriminator value "${String(H)}"`);$.set(H,K)}}return $});J._zod.parse=(Y,$)=>{let K=Y.value;if(!$1(K))return Y.issues.push({code:"invalid_type",expected:"object",input:K,inst:J}),Y;let w=G.value.get(K?.[W.discriminator]);if(w)return w._zod.run(Y,$);if(W.unionFallback)return X(Y,$);return Y.issues.push({code:"invalid_union",errors:[],note:"No matching discriminator",discriminator:W.discriminator,input:K,path:[W.discriminator],inst:J}),Y}}),AZ=C("$ZodIntersection",(J,W)=>{Z6.init(J,W),J._zod.parse=(X,G)=>{let Y=X.value,$=W.left._zod.run({value:Y,issues:[]},G),K=W.right._zod.run({value:Y,issues:[]},G);if($ instanceof Promise||K instanceof Promise)return Promise.all([$,K]).then(([H,z])=>{return m_(X,H,z)});return m_(X,$,K)}});tw=C("$ZodTuple",(J,W)=>{Z6.init(J,W);let X=W.items,G=X.length-[...X].reverse().findIndex((Y)=>Y._zod.optin!=="optional");J._zod.parse=(Y,$)=>{let K=Y.value;if(!Array.isArray(K))return Y.issues.push({input:K,inst:J,expected:"tuple",code:"invalid_type"}),Y;Y.value=[];let w=[];if(!W.rest){let z=K.length>X.length,N=K.length<G-1;if(z||N)return Y.issues.push({...z?{code:"too_big",maximum:X.length}:{code:"too_small",minimum:X.length},input:K,inst:J,origin:"array"}),Y}let H=-1;for(let z of X){if(H++,H>=K.length){if(H>=G)continue}let N=z._zod.run({value:K[H],issues:[]},$);if(N instanceof Promise)w.push(N.then((U)=>cw(U,Y,H)));else cw(N,Y,H)}if(W.rest){let z=K.slice(X.length);for(let N of z){H++;let U=W.rest._zod.run({value:N,issues:[]},$);if(U instanceof Promise)w.push(U.then((F)=>cw(F,Y,H)));else cw(U,Y,H)}}if(w.length)return Promise.all(w).then(()=>Y);return Y}});EZ=C("$ZodRecord",(J,W)=>{Z6.init(J,W),J._zod.parse=(X,G)=>{let Y=X.value;if(!wX(Y))return X.issues.push({expected:"record",code:"invalid_type",input:Y,inst:J}),X;let $=[];if(W.keyType._zod.values){let K=W.keyType._zod.values;X.value={};for(let H of K)if(typeof H==="string"||typeof H==="number"||typeof H==="symbol"){let z=W.valueType._zod.run({value:Y[H],issues:[]},G);if(z instanceof Promise)$.push(z.then((N)=>{if(N.issues.length)X.issues.push(...j8(H,N.issues));X.value[H]=N.value}));else{if(z.issues.length)X.issues.push(...j8(H,z.issues));X.value[H]=z.value}}let w;for(let H in Y)if(!K.has(H))w=w??[],w.push(H);if(w&&w.length>0)X.issues.push({code:"unrecognized_keys",input:Y,inst:J,keys:w})}else{X.value={};for(let K of Reflect.ownKeys(Y)){if(K==="__proto__")continue;let w=W.keyType._zod.run({value:K,issues:[]},G);if(w instanceof Promise)throw Error("Async schemas not supported in object keys currently");if(w.issues.length){X.issues.push({code:"invalid_key",origin:"record",issues:w.issues.map((z)=>S8(z,G,y4())),input:K,path:[K],inst:J}),X.value[w.value]=w.value;continue}let H=W.valueType._zod.run({value:Y[K],issues:[]},G);if(H instanceof Promise)$.push(H.then((z)=>{if(z.issues.length)X.issues.push(...j8(K,z.issues));X.value[w.value]=z.value}));else{if(H.issues.length)X.issues.push(...j8(K,H.issues));X.value[w.value]=H.value}}}if($.length)return Promise.all($).then(()=>X);return X}}),IZ=C("$ZodMap",(J,W)=>{Z6.init(J,W),J._zod.parse=(X,G)=>{let Y=X.value;if(!(Y instanceof Map))return X.issues.push({expected:"map",code:"invalid_type",input:Y,inst:J}),X;let $=[];X.value=new Map;for(let[K,w]of Y){let H=W.keyType._zod.run({value:K,issues:[]},G),z=W.valueType._zod.run({value:w,issues:[]},G);if(H instanceof Promise||z instanceof Promise)$.push(Promise.all([H,z]).then(([N,U])=>{f_(N,U,X,K,Y,J,G)}));else f_(H,z,X,K,Y,J,G)}if($.length)return Promise.all($).then(()=>X);return X}});RZ=C("$ZodSet",(J,W)=>{Z6.init(J,W),J._zod.parse=(X,G)=>{let Y=X.value;if(!(Y instanceof Set))return X.issues.push({input:Y,inst:J,expected:"set",code:"invalid_type"}),X;let $=[];X.value=new Set;for(let K of Y){let w=W.valueType._zod.run({value:K,issues:[]},G);if(w instanceof Promise)$.push(w.then((H)=>y_(H,X)));else y_(w,X)}if($.length)return Promise.all($).then(()=>X);return X}});CZ=C("$ZodEnum",(J,W)=>{Z6.init(J,W);let X=J$(W.entries),G=new Set(X);J._zod.values=G,J._zod.pattern=new RegExp(`^(${X.filter((Y)=>X$.has(typeof Y)).map((Y)=>typeof Y==="string"?gJ(Y):Y.toString()).join("|")})$`),J._zod.parse=(Y,$)=>{let K=Y.value;if(G.has(K))return Y;return Y.issues.push({code:"invalid_value",values:X,input:K,inst:J}),Y}}),bZ=C("$ZodLiteral",(J,W)=>{if(Z6.init(J,W),W.values.length===0)throw Error("Cannot create literal schema with no valid values");J._zod.values=new Set(W.values),J._zod.pattern=new RegExp(`^(${W.values.map((X)=>typeof X==="string"?gJ(X):X?gJ(X.toString()):String(X)).join("|")})$`),J._zod.parse=(X,G)=>{let Y=X.value;if(J._zod.values.has(Y))return X;return X.issues.push({code:"invalid_value",values:W.values,input:Y,inst:J}),X}}),kZ=C("$ZodFile",(J,W)=>{Z6.init(J,W),J._zod.parse=(X,G)=>{let Y=X.value;if(Y instanceof File)return X;return X.issues.push({expected:"file",code:"invalid_type",input:Y,inst:J}),X}}),hZ=C("$ZodTransform",(J,W)=>{Z6.init(J,W),J._zod.parse=(X,G)=>{if(G.direction==="backward")throw new G1(J.constructor.name);let Y=W.transform(X.value,X);if(G.async)return(Y instanceof Promise?Y:Promise.resolve(Y)).then((K)=>{return X.value=K,X});if(Y instanceof Promise)throw new hJ;return X.value=Y,X}});gZ=C("$ZodOptional",(J,W)=>{Z6.init(J,W),J._zod.optin="optional",J._zod.optout="optional",S6(J._zod,"values",()=>{return W.innerType._zod.values?new Set([...W.innerType._zod.values,void 0]):void 0}),S6(J._zod,"pattern",()=>{let X=W.innerType._zod.pattern;return X?new RegExp(`^(${W$(X.source)})?$`):void 0}),J._zod.parse=(X,G)=>{if(W.innerType._zod.optin==="optional"){let Y=W.innerType._zod.run(X,G);if(Y instanceof Promise)return Y.then(($)=>x_($,X.value));return x_(Y,X.value)}if(X.value===void 0)return X;return W.innerType._zod.run(X,G)}}),mZ=C("$ZodNullable",(J,W)=>{Z6.init(J,W),S6(J._zod,"optin",()=>W.innerType._zod.optin),S6(J._zod,"optout",()=>W.innerType._zod.optout),S6(J._zod,"pattern",()=>{let X=W.innerType._zod.pattern;return X?new RegExp(`^(${W$(X.source)}|null)$`):void 0}),S6(J._zod,"values",()=>{return W.innerType._zod.values?new Set([...W.innerType._zod.values,null]):void 0}),J._zod.parse=(X,G)=>{if(X.value===null)return X;return W.innerType._zod.run(X,G)}}),fZ=C("$ZodDefault",(J,W)=>{Z6.init(J,W),J._zod.optin="optional",S6(J._zod,"values",()=>W.innerType._zod.values),J._zod.parse=(X,G)=>{if(G.direction==="backward")return W.innerType._zod.run(X,G);if(X.value===void 0)return X.value=W.defaultValue,X;let Y=W.innerType._zod.run(X,G);if(Y instanceof Promise)return Y.then(($)=>u_($,W));return u_(Y,W)}});yZ=C("$ZodPrefault",(J,W)=>{Z6.init(J,W),J._zod.optin="optional",S6(J._zod,"values",()=>W.innerType._zod.values),J._zod.parse=(X,G)=>{if(G.direction==="backward")return W.innerType._zod.run(X,G);if(X.value===void 0)X.value=W.defaultValue;return W.innerType._zod.run(X,G)}}),xZ=C("$ZodNonOptional",(J,W)=>{Z6.init(J,W),S6(J._zod,"values",()=>{let X=W.innerType._zod.values;return X?new Set([...X].filter((G)=>G!==void 0)):void 0}),J._zod.parse=(X,G)=>{let Y=W.innerType._zod.run(X,G);if(Y instanceof Promise)return Y.then(($)=>c_($,J));return c_(Y,J)}});uZ=C("$ZodSuccess",(J,W)=>{Z6.init(J,W),J._zod.parse=(X,G)=>{if(G.direction==="backward")throw new G1("ZodSuccess");let Y=W.innerType._zod.run(X,G);if(Y instanceof Promise)return Y.then(($)=>{return X.value=$.issues.length===0,X});return X.value=Y.issues.length===0,X}}),cZ=C("$ZodCatch",(J,W)=>{Z6.init(J,W),S6(J._zod,"optin",()=>W.innerType._zod.optin),S6(J._zod,"optout",()=>W.innerType._zod.optout),S6(J._zod,"values",()=>W.innerType._zod.values),J._zod.parse=(X,G)=>{if(G.direction==="backward")return W.innerType._zod.run(X,G);let Y=W.innerType._zod.run(X,G);if(Y instanceof Promise)return Y.then(($)=>{if(X.value=$.value,$.issues.length)X.value=W.catchValue({...X,error:{issues:$.issues.map((K)=>S8(K,G,y4()))},input:X.value}),X.issues=[];return X});if(X.value=Y.value,Y.issues.length)X.value=W.catchValue({...X,error:{issues:Y.issues.map(($)=>S8($,G,y4()))},input:X.value}),X.issues=[];return X}}),lZ=C("$ZodNaN",(J,W)=>{Z6.init(J,W),J._zod.parse=(X,G)=>{if(typeof X.value!=="number"||!Number.isNaN(X.value))return X.issues.push({input:X.value,inst:J,expected:"nan",code:"invalid_type"}),X;return X}}),pZ=C("$ZodPipe",(J,W)=>{Z6.init(J,W),S6(J._zod,"values",()=>W.in._zod.values),S6(J._zod,"optin",()=>W.in._zod.optin),S6(J._zod,"optout",()=>W.out._zod.optout),S6(J._zod,"propValues",()=>W.in._zod.propValues),J._zod.parse=(X,G)=>{if(G.direction==="backward"){let $=W.out._zod.run(X,G);if($ instanceof Promise)return $.then((K)=>lw(K,W.in,G));return lw($,W.in,G)}let Y=W.in._zod.run(X,G);if(Y instanceof Promise)return Y.then(($)=>lw($,W.out,G));return lw(Y,W.out,G)}});z$=C("$ZodCodec",(J,W)=>{Z6.init(J,W),S6(J._zod,"values",()=>W.in._zod.values),S6(J._zod,"optin",()=>W.in._zod.optin),S6(J._zod,"optout",()=>W.out._zod.optout),S6(J._zod,"propValues",()=>W.in._zod.propValues),J._zod.parse=(X,G)=>{if((G.direction||"forward")==="forward"){let $=W.in._zod.run(X,G);if($ instanceof Promise)return $.then((K)=>pw(K,W,G));return pw($,W,G)}else{let $=W.out._zod.run(X,G);if($ instanceof Promise)return $.then((K)=>pw(K,W,G));return pw($,W,G)}}});dZ=C("$ZodReadonly",(J,W)=>{Z6.init(J,W),S6(J._zod,"propValues",()=>W.innerType._zod.propValues),S6(J._zod,"values",()=>W.innerType._zod.values),S6(J._zod,"optin",()=>W.innerType._zod.optin),S6(J._zod,"optout",()=>W.innerType._zod.optout),J._zod.parse=(X,G)=>{if(G.direction==="backward")return W.innerType._zod.run(X,G);let Y=W.innerType._zod.run(X,G);if(Y instanceof Promise)return Y.then(l_);return l_(Y)}});rZ=C("$ZodTemplateLiteral",(J,W)=>{Z6.init(J,W);let X=[];for(let G of W.parts)if(typeof G==="object"&&G!==null){if(!G._zod.pattern)throw Error(`Invalid template literal part, no pattern found: ${[...G._zod.traits].shift()}`);let Y=G._zod.pattern instanceof RegExp?G._zod.pattern.source:G._zod.pattern;if(!Y)throw Error(`Invalid template literal part: ${G._zod.traits}`);let $=Y.startsWith("^")?1:0,K=Y.endsWith("$")?Y.length-1:Y.length;X.push(Y.slice($,K))}else if(G===null||xU.has(typeof G))X.push(gJ(`${G}`));else throw Error(`Invalid template literal part: ${G}`);J._zod.pattern=new RegExp(`^${X.join("")}$`),J._zod.parse=(G,Y)=>{if(typeof G.value!=="string")return G.issues.push({input:G.value,inst:J,expected:"template_literal",code:"invalid_type"}),G;if(J._zod.pattern.lastIndex=0,!J._zod.pattern.test(G.value))return G.issues.push({input:G.value,inst:J,code:"invalid_format",format:W.format??"template_literal",pattern:J._zod.pattern.source}),G;return G}}),nZ=C("$ZodFunction",(J,W)=>{return Z6.init(J,W),J._def=W,J._zod.def=W,J.implement=(X)=>{if(typeof X!=="function")throw Error("implement() must be called with a function");return function(...G){let Y=J._def.input?qw(J._def.input,G):G,$=Reflect.apply(X,this,Y);if(J._def.output)return qw(J._def.output,$);return $}},J.implementAsync=(X)=>{if(typeof X!=="function")throw Error("implementAsync() must be called with a function");return async function(...G){let Y=J._def.input?await Bw(J._def.input,G):G,$=await Reflect.apply(X,this,Y);if(J._def.output)return await Bw(J._def.output,$);return $}},J._zod.parse=(X,G)=>{if(typeof X.value!=="function")return X.issues.push({code:"invalid_type",expected:"function",input:X.value,inst:J}),X;if(J._def.output&&J._def.output._zod.def.type==="promise")X.value=J.implementAsync(X.value);else X.value=J.implement(X.value);return X},J.input=(...X)=>{let G=J.constructor;if(Array.isArray(X[0]))return new G({type:"function",input:new tw({type:"tuple",items:X[0],rest:X[1]}),output:J._def.output});return new G({type:"function",input:X[0],output:J._def.output})},J.output=(X)=>{return new J.constructor({type:"function",input:J._def.input,output:X})},J}),iZ=C("$ZodPromise",(J,W)=>{Z6.init(J,W),J._zod.parse=(X,G)=>{return Promise.resolve(X.value).then((Y)=>W.innerType._zod.run({value:Y,issues:[]},G))}}),aZ=C("$ZodLazy",(J,W)=>{Z6.init(J,W),S6(J._zod,"innerType",()=>W.getter()),S6(J._zod,"pattern",()=>J._zod.innerType._zod.pattern),S6(J._zod,"propValues",()=>J._zod.innerType._zod.propValues),S6(J._zod,"optin",()=>J._zod.innerType._zod.optin??void 0),S6(J._zod,"optout",()=>J._zod.innerType._zod.optout??void 0),J._zod.parse=(X,G)=>{return J._zod.innerType._zod.run(X,G)}}),tZ=C("$ZodCustom",(J,W)=>{M4.init(J,W),Z6.init(J,W),J._zod.parse=(X,G)=>{return X},J._zod.check=(X)=>{let G=X.value,Y=W.fn(G);if(Y instanceof Promise)return Y.then(($)=>p_($,X,G,J));p_(Y,X,G,J);return}})});function sZ(){return{localeError:Hx()}}var Hx=()=>{let J={string:{unit:"\u062D\u0631\u0641",verb:"\u0623\u0646 \u064A\u062D\u0648\u064A"},file:{unit:"\u0628\u0627\u064A\u062A",verb:"\u0623\u0646 \u064A\u062D\u0648\u064A"},array:{unit:"\u0639\u0646\u0635\u0631",verb:"\u0623\u0646 \u064A\u062D\u0648\u064A"},set:{unit:"\u0639\u0646\u0635\u0631",verb:"\u0623\u0646 \u064A\u062D\u0648\u064A"}};function W(Y){return J[Y]??null}let X=(Y)=>{let $=typeof Y;switch($){case"number":return Number.isNaN(Y)?"NaN":"number";case"object":{if(Array.isArray(Y))return"array";if(Y===null)return"null";if(Object.getPrototypeOf(Y)!==Object.prototype&&Y.constructor)return Y.constructor.name}}return $},G={regex:"\u0645\u062F\u062E\u0644",email:"\u0628\u0631\u064A\u062F \u0625\u0644\u0643\u062A\u0631\u0648\u0646\u064A",url:"\u0631\u0627\u0628\u0637",emoji:"\u0625\u064A\u0645\u0648\u062C\u064A",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"\u062A\u0627\u0631\u064A\u062E \u0648\u0648\u0642\u062A \u0628\u0645\u0639\u064A\u0627\u0631 ISO",date:"\u062A\u0627\u0631\u064A\u062E \u0628\u0645\u0639\u064A\u0627\u0631 ISO",time:"\u0648\u0642\u062A \u0628\u0645\u0639\u064A\u0627\u0631 ISO",duration:"\u0645\u062F\u0629 \u0628\u0645\u0639\u064A\u0627\u0631 ISO",ipv4:"\u0639\u0646\u0648\u0627\u0646 IPv4",ipv6:"\u0639\u0646\u0648\u0627\u0646 IPv6",cidrv4:"\u0645\u062F\u0649 \u0639\u0646\u0627\u0648\u064A\u0646 \u0628\u0635\u064A\u063A\u0629 IPv4",cidrv6:"\u0645\u062F\u0649 \u0639\u0646\u0627\u0648\u064A\u0646 \u0628\u0635\u064A\u063A\u0629 IPv6",base64:"\u0646\u064E\u0635 \u0628\u062A\u0631\u0645\u064A\u0632 base64-encoded",base64url:"\u0646\u064E\u0635 \u0628\u062A\u0631\u0645\u064A\u0632 base64url-encoded",json_string:"\u0646\u064E\u0635 \u0639\u0644\u0649 \u0647\u064A\u0626\u0629 JSON",e164:"\u0631\u0642\u0645 \u0647\u0627\u062A\u0641 \u0628\u0645\u0639\u064A\u0627\u0631 E.164",jwt:"JWT",template_literal:"\u0645\u062F\u062E\u0644"};return(Y)=>{switch(Y.code){case"invalid_type":return`\u0645\u062F\u062E\u0644\u0627\u062A \u063A\u064A\u0631 \u0645\u0642\u0628\u0648\u0644\u0629: \u064A\u0641\u062A\u0631\u0636 \u0625\u062F\u062E\u0627\u0644 ${Y.expected}\u060C \u0648\u0644\u0643\u0646 \u062A\u0645 \u0625\u062F\u062E\u0627\u0644 ${X(Y.input)}`;case"invalid_value":if(Y.values.length===1)return`\u0645\u062F\u062E\u0644\u0627\u062A \u063A\u064A\u0631 \u0645\u0642\u0628\u0648\u0644\u0629: \u064A\u0641\u062A\u0631\u0636 \u0625\u062F\u062E\u0627\u0644 ${d(Y.values[0])}`;return`\u0627\u062E\u062A\u064A\u0627\u0631 \u063A\u064A\u0631 \u0645\u0642\u0628\u0648\u0644: \u064A\u062A\u0648\u0642\u0639 \u0627\u0646\u062A\u0642\u0627\u0621 \u0623\u062D\u062F \u0647\u0630\u0647 \u0627\u0644\u062E\u064A\u0627\u0631\u0627\u062A: ${h(Y.values,"|")}`;case"too_big":{let $=Y.inclusive?"<=":"<",K=W(Y.origin);if(K)return` \u0623\u0643\u0628\u0631 \u0645\u0646 \u0627\u0644\u0644\u0627\u0632\u0645: \u064A\u0641\u062A\u0631\u0636 \u0623\u0646 \u062A\u0643\u0648\u0646 ${Y.origin??"\u0627\u0644\u0642\u064A\u0645\u0629"} ${$} ${Y.maximum.toString()} ${K.unit??"\u0639\u0646\u0635\u0631"}`;return`\u0623\u0643\u0628\u0631 \u0645\u0646 \u0627\u0644\u0644\u0627\u0632\u0645: \u064A\u0641\u062A\u0631\u0636 \u0623\u0646 \u062A\u0643\u0648\u0646 ${Y.origin??"\u0627\u0644\u0642\u064A\u0645\u0629"} ${$} ${Y.maximum.toString()}`}case"too_small":{let $=Y.inclusive?">=":">",K=W(Y.origin);if(K)return`\u0623\u0635\u063A\u0631 \u0645\u0646 \u0627\u0644\u0644\u0627\u0632\u0645: \u064A\u0641\u062A\u0631\u0636 \u0644\u0640 ${Y.origin} \u0623\u0646 \u064A\u0643\u0648\u0646 ${$} ${Y.minimum.toString()} ${K.unit}`;return`\u0623\u0635\u063A\u0631 \u0645\u0646 \u0627\u0644\u0644\u0627\u0632\u0645: \u064A\u0641\u062A\u0631\u0636 \u0644\u0640 ${Y.origin} \u0623\u0646 \u064A\u0643\u0648\u0646 ${$} ${Y.minimum.toString()}`}case"invalid_format":{let $=Y;if($.format==="starts_with")return`\u0646\u064E\u0635 \u063A\u064A\u0631 \u0645\u0642\u0628\u0648\u0644: \u064A\u062C\u0628 \u0623\u0646 \u064A\u0628\u062F\u0623 \u0628\u0640 "${Y.prefix}"`;if($.format==="ends_with")return`\u0646\u064E\u0635 \u063A\u064A\u0631 \u0645\u0642\u0628\u0648\u0644: \u064A\u062C\u0628 \u0623\u0646 \u064A\u0646\u062A\u0647\u064A \u0628\u0640 "${$.suffix}"`;if($.format==="includes")return`\u0646\u064E\u0635 \u063A\u064A\u0631 \u0645\u0642\u0628\u0648\u0644: \u064A\u062C\u0628 \u0623\u0646 \u064A\u062A\u0636\u0645\u0651\u064E\u0646 "${$.includes}"`;if($.format==="regex")return`\u0646\u064E\u0635 \u063A\u064A\u0631 \u0645\u0642\u0628\u0648\u0644: \u064A\u062C\u0628 \u0623\u0646 \u064A\u0637\u0627\u0628\u0642 \u0627\u0644\u0646\u0645\u0637 ${$.pattern}`;return`${G[$.format]??Y.format} \u063A\u064A\u0631 \u0645\u0642\u0628\u0648\u0644`}case"not_multiple_of":return`\u0631\u0642\u0645 \u063A\u064A\u0631 \u0645\u0642\u0628\u0648\u0644: \u064A\u062C\u0628 \u0623\u0646 \u064A\u0643\u0648\u0646 \u0645\u0646 \u0645\u0636\u0627\u0639\u0641\u0627\u062A ${Y.divisor}`;case"unrecognized_keys":return`\u0645\u0639\u0631\u0641${Y.keys.length>1?"\u0627\u062A":""} \u063A\u0631\u064A\u0628${Y.keys.length>1?"\u0629":""}: ${h(Y.keys,"\u060C ")}`;case"invalid_key":return`\u0645\u0639\u0631\u0641 \u063A\u064A\u0631 \u0645\u0642\u0628\u0648\u0644 \u0641\u064A ${Y.origin}`;case"invalid_union":return"\u0645\u062F\u062E\u0644 \u063A\u064A\u0631 \u0645\u0642\u0628\u0648\u0644";case"invalid_element":return`\u0645\u062F\u062E\u0644 \u063A\u064A\u0631 \u0645\u0642\u0628\u0648\u0644 \u0641\u064A ${Y.origin}`;default:return"\u0645\u062F\u062E\u0644 \u063A\u064A\u0631 \u0645\u0642\u0628\u0648\u0644"}}};var t_=M(()=>{K6()});function eZ(){return{localeError:zx()}}var zx=()=>{let J={string:{unit:"simvol",verb:"olmal\u0131d\u0131r"},file:{unit:"bayt",verb:"olmal\u0131d\u0131r"},array:{unit:"element",verb:"olmal\u0131d\u0131r"},set:{unit:"element",verb:"olmal\u0131d\u0131r"}};function W(Y){return J[Y]??null}let X=(Y)=>{let $=typeof Y;switch($){case"number":return Number.isNaN(Y)?"NaN":"number";case"object":{if(Array.isArray(Y))return"array";if(Y===null)return"null";if(Object.getPrototypeOf(Y)!==Object.prototype&&Y.constructor)return Y.constructor.name}}return $},G={regex:"input",email:"email address",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO datetime",date:"ISO date",time:"ISO time",duration:"ISO duration",ipv4:"IPv4 address",ipv6:"IPv6 address",cidrv4:"IPv4 range",cidrv6:"IPv6 range",base64:"base64-encoded string",base64url:"base64url-encoded string",json_string:"JSON string",e164:"E.164 number",jwt:"JWT",template_literal:"input"};return(Y)=>{switch(Y.code){case"invalid_type":return`Yanl\u0131\u015F d\u0259y\u0259r: g\xF6zl\u0259nil\u0259n ${Y.expected}, daxil olan ${X(Y.input)}`;case"invalid_value":if(Y.values.length===1)return`Yanl\u0131\u015F d\u0259y\u0259r: g\xF6zl\u0259nil\u0259n ${d(Y.values[0])}`;return`Yanl\u0131\u015F se\xE7im: a\u015Fa\u011F\u0131dak\u0131lardan biri olmal\u0131d\u0131r: ${h(Y.values,"|")}`;case"too_big":{let $=Y.inclusive?"<=":"<",K=W(Y.origin);if(K)return`\xC7ox b\xF6y\xFCk: g\xF6zl\u0259nil\u0259n ${Y.origin??"d\u0259y\u0259r"} ${$}${Y.maximum.toString()} ${K.unit??"element"}`;return`\xC7ox b\xF6y\xFCk: g\xF6zl\u0259nil\u0259n ${Y.origin??"d\u0259y\u0259r"} ${$}${Y.maximum.toString()}`}case"too_small":{let $=Y.inclusive?">=":">",K=W(Y.origin);if(K)return`\xC7ox ki\xE7ik: g\xF6zl\u0259nil\u0259n ${Y.origin} ${$}${Y.minimum.toString()} ${K.unit}`;return`\xC7ox ki\xE7ik: g\xF6zl\u0259nil\u0259n ${Y.origin} ${$}${Y.minimum.toString()}`}case"invalid_format":{let $=Y;if($.format==="starts_with")return`Yanl\u0131\u015F m\u0259tn: "${$.prefix}" il\u0259 ba\u015Flamal\u0131d\u0131r`;if($.format==="ends_with")return`Yanl\u0131\u015F m\u0259tn: "${$.suffix}" il\u0259 bitm\u0259lidir`;if($.format==="includes")return`Yanl\u0131\u015F m\u0259tn: "${$.includes}" daxil olmal\u0131d\u0131r`;if($.format==="regex")return`Yanl\u0131\u015F m\u0259tn: ${$.pattern} \u015Fablonuna uy\u011Fun olmal\u0131d\u0131r`;return`Yanl\u0131\u015F ${G[$.format]??Y.format}`}case"not_multiple_of":return`Yanl\u0131\u015F \u0259d\u0259d: ${Y.divisor} il\u0259 b\xF6l\xFCn\u0259 bil\u0259n olmal\u0131d\u0131r`;case"unrecognized_keys":return`Tan\u0131nmayan a\xE7ar${Y.keys.length>1?"lar":""}: ${h(Y.keys,", ")}`;case"invalid_key":return`${Y.origin} daxilind\u0259 yanl\u0131\u015F a\xE7ar`;case"invalid_union":return"Yanl\u0131\u015F d\u0259y\u0259r";case"invalid_element":return`${Y.origin} daxilind\u0259 yanl\u0131\u015F d\u0259y\u0259r`;default:return"Yanl\u0131\u015F d\u0259y\u0259r"}}};var o_=M(()=>{K6()});function s_(J,W,X,G){let Y=Math.abs(J),$=Y%10,K=Y%100;if(K>=11&&K<=19)return G;if($===1)return W;if($>=2&&$<=4)return X;return G}function JL(){return{localeError:Nx()}}var Nx=()=>{let J={string:{unit:{one:"\u0441\u0456\u043C\u0432\u0430\u043B",few:"\u0441\u0456\u043C\u0432\u0430\u043B\u044B",many:"\u0441\u0456\u043C\u0432\u0430\u043B\u0430\u045E"},verb:"\u043C\u0435\u0446\u044C"},array:{unit:{one:"\u044D\u043B\u0435\u043C\u0435\u043D\u0442",few:"\u044D\u043B\u0435\u043C\u0435\u043D\u0442\u044B",many:"\u044D\u043B\u0435\u043C\u0435\u043D\u0442\u0430\u045E"},verb:"\u043C\u0435\u0446\u044C"},set:{unit:{one:"\u044D\u043B\u0435\u043C\u0435\u043D\u0442",few:"\u044D\u043B\u0435\u043C\u0435\u043D\u0442\u044B",many:"\u044D\u043B\u0435\u043C\u0435\u043D\u0442\u0430\u045E"},verb:"\u043C\u0435\u0446\u044C"},file:{unit:{one:"\u0431\u0430\u0439\u0442",few:"\u0431\u0430\u0439\u0442\u044B",many:"\u0431\u0430\u0439\u0442\u0430\u045E"},verb:"\u043C\u0435\u0446\u044C"}};function W(Y){return J[Y]??null}let X=(Y)=>{let $=typeof Y;switch($){case"number":return Number.isNaN(Y)?"NaN":"\u043B\u0456\u043A";case"object":{if(Array.isArray(Y))return"\u043C\u0430\u0441\u0456\u045E";if(Y===null)return"null";if(Object.getPrototypeOf(Y)!==Object.prototype&&Y.constructor)return Y.constructor.name}}return $},G={regex:"\u0443\u0432\u043E\u0434",email:"email \u0430\u0434\u0440\u0430\u0441",url:"URL",emoji:"\u044D\u043C\u043E\u0434\u0437\u0456",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO \u0434\u0430\u0442\u0430 \u0456 \u0447\u0430\u0441",date:"ISO \u0434\u0430\u0442\u0430",time:"ISO \u0447\u0430\u0441",duration:"ISO \u043F\u0440\u0430\u0446\u044F\u0433\u043B\u0430\u0441\u0446\u044C",ipv4:"IPv4 \u0430\u0434\u0440\u0430\u0441",ipv6:"IPv6 \u0430\u0434\u0440\u0430\u0441",cidrv4:"IPv4 \u0434\u044B\u044F\u043F\u0430\u0437\u043E\u043D",cidrv6:"IPv6 \u0434\u044B\u044F\u043F\u0430\u0437\u043E\u043D",base64:"\u0440\u0430\u0434\u043E\u043A \u0443 \u0444\u0430\u0440\u043C\u0430\u0446\u0435 base64",base64url:"\u0440\u0430\u0434\u043E\u043A \u0443 \u0444\u0430\u0440\u043C\u0430\u0446\u0435 base64url",json_string:"JSON \u0440\u0430\u0434\u043E\u043A",e164:"\u043D\u0443\u043C\u0430\u0440 E.164",jwt:"JWT",template_literal:"\u0443\u0432\u043E\u0434"};return(Y)=>{switch(Y.code){case"invalid_type":return`\u041D\u044F\u043F\u0440\u0430\u0432\u0456\u043B\u044C\u043D\u044B \u045E\u0432\u043E\u0434: \u0447\u0430\u043A\u0430\u045E\u0441\u044F ${Y.expected}, \u0430\u0442\u0440\u044B\u043C\u0430\u043D\u0430 ${X(Y.input)}`;case"invalid_value":if(Y.values.length===1)return`\u041D\u044F\u043F\u0440\u0430\u0432\u0456\u043B\u044C\u043D\u044B \u045E\u0432\u043E\u0434: \u0447\u0430\u043A\u0430\u043B\u0430\u0441\u044F ${d(Y.values[0])}`;return`\u041D\u044F\u043F\u0440\u0430\u0432\u0456\u043B\u044C\u043D\u044B \u0432\u0430\u0440\u044B\u044F\u043D\u0442: \u0447\u0430\u043A\u0430\u045E\u0441\u044F \u0430\u0434\u0437\u0456\u043D \u0437 ${h(Y.values,"|")}`;case"too_big":{let $=Y.inclusive?"<=":"<",K=W(Y.origin);if(K){let w=Number(Y.maximum),H=s_(w,K.unit.one,K.unit.few,K.unit.many);return`\u0417\u0430\u043D\u0430\u0434\u0442\u0430 \u0432\u044F\u043B\u0456\u043A\u0456: \u0447\u0430\u043A\u0430\u043B\u0430\u0441\u044F, \u0448\u0442\u043E ${Y.origin??"\u0437\u043D\u0430\u0447\u044D\u043D\u043D\u0435"} \u043F\u0430\u0432\u0456\u043D\u043D\u0430 ${K.verb} ${$}${Y.maximum.toString()} ${H}`}return`\u0417\u0430\u043D\u0430\u0434\u0442\u0430 \u0432\u044F\u043B\u0456\u043A\u0456: \u0447\u0430\u043A\u0430\u043B\u0430\u0441\u044F, \u0448\u0442\u043E ${Y.origin??"\u0437\u043D\u0430\u0447\u044D\u043D\u043D\u0435"} \u043F\u0430\u0432\u0456\u043D\u043D\u0430 \u0431\u044B\u0446\u044C ${$}${Y.maximum.toString()}`}case"too_small":{let $=Y.inclusive?">=":">",K=W(Y.origin);if(K){let w=Number(Y.minimum),H=s_(w,K.unit.one,K.unit.few,K.unit.many);return`\u0417\u0430\u043D\u0430\u0434\u0442\u0430 \u043C\u0430\u043B\u044B: \u0447\u0430\u043A\u0430\u043B\u0430\u0441\u044F, \u0448\u0442\u043E ${Y.origin} \u043F\u0430\u0432\u0456\u043D\u043D\u0430 ${K.verb} ${$}${Y.minimum.toString()} ${H}`}return`\u0417\u0430\u043D\u0430\u0434\u0442\u0430 \u043C\u0430\u043B\u044B: \u0447\u0430\u043A\u0430\u043B\u0430\u0441\u044F, \u0448\u0442\u043E ${Y.origin} \u043F\u0430\u0432\u0456\u043D\u043D\u0430 \u0431\u044B\u0446\u044C ${$}${Y.minimum.toString()}`}case"invalid_format":{let $=Y;if($.format==="starts_with")return`\u041D\u044F\u043F\u0440\u0430\u0432\u0456\u043B\u044C\u043D\u044B \u0440\u0430\u0434\u043E\u043A: \u043F\u0430\u0432\u0456\u043D\u0435\u043D \u043F\u0430\u0447\u044B\u043D\u0430\u0446\u0446\u0430 \u0437 "${$.prefix}"`;if($.format==="ends_with")return`\u041D\u044F\u043F\u0440\u0430\u0432\u0456\u043B\u044C\u043D\u044B \u0440\u0430\u0434\u043E\u043A: \u043F\u0430\u0432\u0456\u043D\u0435\u043D \u0437\u0430\u043A\u0430\u043D\u0447\u0432\u0430\u0446\u0446\u0430 \u043D\u0430 "${$.suffix}"`;if($.format==="includes")return`\u041D\u044F\u043F\u0440\u0430\u0432\u0456\u043B\u044C\u043D\u044B \u0440\u0430\u0434\u043E\u043A: \u043F\u0430\u0432\u0456\u043D\u0435\u043D \u0437\u043C\u044F\u0448\u0447\u0430\u0446\u044C "${$.includes}"`;if($.format==="regex")return`\u041D\u044F\u043F\u0440\u0430\u0432\u0456\u043B\u044C\u043D\u044B \u0440\u0430\u0434\u043E\u043A: \u043F\u0430\u0432\u0456\u043D\u0435\u043D \u0430\u0434\u043F\u0430\u0432\u044F\u0434\u0430\u0446\u044C \u0448\u0430\u0431\u043B\u043E\u043D\u0443 ${$.pattern}`;return`\u041D\u044F\u043F\u0440\u0430\u0432\u0456\u043B\u044C\u043D\u044B ${G[$.format]??Y.format}`}case"not_multiple_of":return`\u041D\u044F\u043F\u0440\u0430\u0432\u0456\u043B\u044C\u043D\u044B \u043B\u0456\u043A: \u043F\u0430\u0432\u0456\u043D\u0435\u043D \u0431\u044B\u0446\u044C \u043A\u0440\u0430\u0442\u043D\u044B\u043C ${Y.divisor}`;case"unrecognized_keys":return`\u041D\u0435\u0440\u0430\u0441\u043F\u0430\u0437\u043D\u0430\u043D\u044B ${Y.keys.length>1?"\u043A\u043B\u044E\u0447\u044B":"\u043A\u043B\u044E\u0447"}: ${h(Y.keys,", ")}`;case"invalid_key":return`\u041D\u044F\u043F\u0440\u0430\u0432\u0456\u043B\u044C\u043D\u044B \u043A\u043B\u044E\u0447 \u0443 ${Y.origin}`;case"invalid_union":return"\u041D\u044F\u043F\u0440\u0430\u0432\u0456\u043B\u044C\u043D\u044B \u045E\u0432\u043E\u0434";case"invalid_element":return`\u041D\u044F\u043F\u0440\u0430\u0432\u0456\u043B\u044C\u043D\u0430\u0435 \u0437\u043D\u0430\u0447\u044D\u043D\u043D\u0435 \u045E ${Y.origin}`;default:return"\u041D\u044F\u043F\u0440\u0430\u0432\u0456\u043B\u044C\u043D\u044B \u045E\u0432\u043E\u0434"}}};var e_=M(()=>{K6()});function WL(){return{localeError:Ux()}}var Fx=(J)=>{let W=typeof J;switch(W){case"number":return Number.isNaN(J)?"NaN":"\u0447\u0438\u0441\u043B\u043E";case"object":{if(Array.isArray(J))return"\u043C\u0430\u0441\u0438\u0432";if(J===null)return"null";if(Object.getPrototypeOf(J)!==Object.prototype&&J.constructor)return J.constructor.name}}return W},Ux=()=>{let J={string:{unit:"\u0441\u0438\u043C\u0432\u043E\u043B\u0430",verb:"\u0434\u0430 \u0441\u044A\u0434\u044A\u0440\u0436\u0430"},file:{unit:"\u0431\u0430\u0439\u0442\u0430",verb:"\u0434\u0430 \u0441\u044A\u0434\u044A\u0440\u0436\u0430"},array:{unit:"\u0435\u043B\u0435\u043C\u0435\u043D\u0442\u0430",verb:"\u0434\u0430 \u0441\u044A\u0434\u044A\u0440\u0436\u0430"},set:{unit:"\u0435\u043B\u0435\u043C\u0435\u043D\u0442\u0430",verb:"\u0434\u0430 \u0441\u044A\u0434\u044A\u0440\u0436\u0430"}};function W(G){return J[G]??null}let X={regex:"\u0432\u0445\u043E\u0434",email:"\u0438\u043C\u0435\u0439\u043B \u0430\u0434\u0440\u0435\u0441",url:"URL",emoji:"\u0435\u043C\u043E\u0434\u0436\u0438",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO \u0432\u0440\u0435\u043C\u0435",date:"ISO \u0434\u0430\u0442\u0430",time:"ISO \u0432\u0440\u0435\u043C\u0435",duration:"ISO \u043F\u0440\u043E\u0434\u044A\u043B\u0436\u0438\u0442\u0435\u043B\u043D\u043E\u0441\u0442",ipv4:"IPv4 \u0430\u0434\u0440\u0435\u0441",ipv6:"IPv6 \u0430\u0434\u0440\u0435\u0441",cidrv4:"IPv4 \u0434\u0438\u0430\u043F\u0430\u0437\u043E\u043D",cidrv6:"IPv6 \u0434\u0438\u0430\u043F\u0430\u0437\u043E\u043D",base64:"base64-\u043A\u043E\u0434\u0438\u0440\u0430\u043D \u043D\u0438\u0437",base64url:"base64url-\u043A\u043E\u0434\u0438\u0440\u0430\u043D \u043D\u0438\u0437",json_string:"JSON \u043D\u0438\u0437",e164:"E.164 \u043D\u043E\u043C\u0435\u0440",jwt:"JWT",template_literal:"\u0432\u0445\u043E\u0434"};return(G)=>{switch(G.code){case"invalid_type":return`\u041D\u0435\u0432\u0430\u043B\u0438\u0434\u0435\u043D \u0432\u0445\u043E\u0434: \u043E\u0447\u0430\u043A\u0432\u0430\u043D ${G.expected}, \u043F\u043E\u043B\u0443\u0447\u0435\u043D ${Fx(G.input)}`;case"invalid_value":if(G.values.length===1)return`\u041D\u0435\u0432\u0430\u043B\u0438\u0434\u0435\u043D \u0432\u0445\u043E\u0434: \u043E\u0447\u0430\u043A\u0432\u0430\u043D ${d(G.values[0])}`;return`\u041D\u0435\u0432\u0430\u043B\u0438\u0434\u043D\u0430 \u043E\u043F\u0446\u0438\u044F: \u043E\u0447\u0430\u043A\u0432\u0430\u043D\u043E \u0435\u0434\u043D\u043E \u043E\u0442 ${h(G.values,"|")}`;case"too_big":{let Y=G.inclusive?"<=":"<",$=W(G.origin);if($)return`\u0422\u0432\u044A\u0440\u0434\u0435 \u0433\u043E\u043B\u044F\u043C\u043E: \u043E\u0447\u0430\u043A\u0432\u0430 \u0441\u0435 ${G.origin??"\u0441\u0442\u043E\u0439\u043D\u043E\u0441\u0442"} \u0434\u0430 \u0441\u044A\u0434\u044A\u0440\u0436\u0430 ${Y}${G.maximum.toString()} ${$.unit??"\u0435\u043B\u0435\u043C\u0435\u043D\u0442\u0430"}`;return`\u0422\u0432\u044A\u0440\u0434\u0435 \u0433\u043E\u043B\u044F\u043C\u043E: \u043E\u0447\u0430\u043A\u0432\u0430 \u0441\u0435 ${G.origin??"\u0441\u0442\u043E\u0439\u043D\u043E\u0441\u0442"} \u0434\u0430 \u0431\u044A\u0434\u0435 ${Y}${G.maximum.toString()}`}case"too_small":{let Y=G.inclusive?">=":">",$=W(G.origin);if($)return`\u0422\u0432\u044A\u0440\u0434\u0435 \u043C\u0430\u043B\u043A\u043E: \u043E\u0447\u0430\u043A\u0432\u0430 \u0441\u0435 ${G.origin} \u0434\u0430 \u0441\u044A\u0434\u044A\u0440\u0436\u0430 ${Y}${G.minimum.toString()} ${$.unit}`;return`\u0422\u0432\u044A\u0440\u0434\u0435 \u043C\u0430\u043B\u043A\u043E: \u043E\u0447\u0430\u043A\u0432\u0430 \u0441\u0435 ${G.origin} \u0434\u0430 \u0431\u044A\u0434\u0435 ${Y}${G.minimum.toString()}`}case"invalid_format":{let Y=G;if(Y.format==="starts_with")return`\u041D\u0435\u0432\u0430\u043B\u0438\u0434\u0435\u043D \u043D\u0438\u0437: \u0442\u0440\u044F\u0431\u0432\u0430 \u0434\u0430 \u0437\u0430\u043F\u043E\u0447\u0432\u0430 \u0441 "${Y.prefix}"`;if(Y.format==="ends_with")return`\u041D\u0435\u0432\u0430\u043B\u0438\u0434\u0435\u043D \u043D\u0438\u0437: \u0442\u0440\u044F\u0431\u0432\u0430 \u0434\u0430 \u0437\u0430\u0432\u044A\u0440\u0448\u0432\u0430 \u0441 "${Y.suffix}"`;if(Y.format==="includes")return`\u041D\u0435\u0432\u0430\u043B\u0438\u0434\u0435\u043D \u043D\u0438\u0437: \u0442\u0440\u044F\u0431\u0432\u0430 \u0434\u0430 \u0432\u043A\u043B\u044E\u0447\u0432\u0430 "${Y.includes}"`;if(Y.format==="regex")return`\u041D\u0435\u0432\u0430\u043B\u0438\u0434\u0435\u043D \u043D\u0438\u0437: \u0442\u0440\u044F\u0431\u0432\u0430 \u0434\u0430 \u0441\u044A\u0432\u043F\u0430\u0434\u0430 \u0441 ${Y.pattern}`;let $="\u041D\u0435\u0432\u0430\u043B\u0438\u0434\u0435\u043D";if(Y.format==="emoji")$="\u041D\u0435\u0432\u0430\u043B\u0438\u0434\u043D\u043E";if(Y.format==="datetime")$="\u041D\u0435\u0432\u0430\u043B\u0438\u0434\u043D\u043E";if(Y.format==="date")$="\u041D\u0435\u0432\u0430\u043B\u0438\u0434\u043D\u0430";if(Y.format==="time")$="\u041D\u0435\u0432\u0430\u043B\u0438\u0434\u043D\u043E";if(Y.format==="duration")$="\u041D\u0435\u0432\u0430\u043B\u0438\u0434\u043D\u0430";return`${$} ${X[Y.format]??G.format}`}case"not_multiple_of":return`\u041D\u0435\u0432\u0430\u043B\u0438\u0434\u043D\u043E \u0447\u0438\u0441\u043B\u043E: \u0442\u0440\u044F\u0431\u0432\u0430 \u0434\u0430 \u0431\u044A\u0434\u0435 \u043A\u0440\u0430\u0442\u043D\u043E \u043D\u0430 ${G.divisor}`;case"unrecognized_keys":return`\u041D\u0435\u0440\u0430\u0437\u043F\u043E\u0437\u043D\u0430\u0442${G.keys.length>1?"\u0438":""} \u043A\u043B\u044E\u0447${G.keys.length>1?"\u043E\u0432\u0435":""}: ${h(G.keys,", ")}`;case"invalid_key":return`\u041D\u0435\u0432\u0430\u043B\u0438\u0434\u0435\u043D \u043A\u043B\u044E\u0447 \u0432 ${G.origin}`;case"invalid_union":return"\u041D\u0435\u0432\u0430\u043B\u0438\u0434\u0435\u043D \u0432\u0445\u043E\u0434";case"invalid_element":return`\u041D\u0435\u0432\u0430\u043B\u0438\u0434\u043D\u0430 \u0441\u0442\u043E\u0439\u043D\u043E\u0441\u0442 \u0432 ${G.origin}`;default:return"\u041D\u0435\u0432\u0430\u043B\u0438\u0434\u0435\u043D \u0432\u0445\u043E\u0434"}}};var J2=M(()=>{K6()});function XL(){return{localeError:Qx()}}var Qx=()=>{let J={string:{unit:"car\xE0cters",verb:"contenir"},file:{unit:"bytes",verb:"contenir"},array:{unit:"elements",verb:"contenir"},set:{unit:"elements",verb:"contenir"}};function W(Y){return J[Y]??null}let X=(Y)=>{let $=typeof Y;switch($){case"number":return Number.isNaN(Y)?"NaN":"number";case"object":{if(Array.isArray(Y))return"array";if(Y===null)return"null";if(Object.getPrototypeOf(Y)!==Object.prototype&&Y.constructor)return Y.constructor.name}}return $},G={regex:"entrada",email:"adre\xE7a electr\xF2nica",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"data i hora ISO",date:"data ISO",time:"hora ISO",duration:"durada ISO",ipv4:"adre\xE7a IPv4",ipv6:"adre\xE7a IPv6",cidrv4:"rang IPv4",cidrv6:"rang IPv6",base64:"cadena codificada en base64",base64url:"cadena codificada en base64url",json_string:"cadena JSON",e164:"n\xFAmero E.164",jwt:"JWT",template_literal:"entrada"};return(Y)=>{switch(Y.code){case"invalid_type":return`Tipus inv\xE0lid: s'esperava ${Y.expected}, s'ha rebut ${X(Y.input)}`;case"invalid_value":if(Y.values.length===1)return`Valor inv\xE0lid: s'esperava ${d(Y.values[0])}`;return`Opci\xF3 inv\xE0lida: s'esperava una de ${h(Y.values," o ")}`;case"too_big":{let $=Y.inclusive?"com a m\xE0xim":"menys de",K=W(Y.origin);if(K)return`Massa gran: s'esperava que ${Y.origin??"el valor"} contingu\xE9s ${$} ${Y.maximum.toString()} ${K.unit??"elements"}`;return`Massa gran: s'esperava que ${Y.origin??"el valor"} fos ${$} ${Y.maximum.toString()}`}case"too_small":{let $=Y.inclusive?"com a m\xEDnim":"m\xE9s de",K=W(Y.origin);if(K)return`Massa petit: s'esperava que ${Y.origin} contingu\xE9s ${$} ${Y.minimum.toString()} ${K.unit}`;return`Massa petit: s'esperava que ${Y.origin} fos ${$} ${Y.minimum.toString()}`}case"invalid_format":{let $=Y;if($.format==="starts_with")return`Format inv\xE0lid: ha de comen\xE7ar amb "${$.prefix}"`;if($.format==="ends_with")return`Format inv\xE0lid: ha d'acabar amb "${$.suffix}"`;if($.format==="includes")return`Format inv\xE0lid: ha d'incloure "${$.includes}"`;if($.format==="regex")return`Format inv\xE0lid: ha de coincidir amb el patr\xF3 ${$.pattern}`;return`Format inv\xE0lid per a ${G[$.format]??Y.format}`}case"not_multiple_of":return`N\xFAmero inv\xE0lid: ha de ser m\xFAltiple de ${Y.divisor}`;case"unrecognized_keys":return`Clau${Y.keys.length>1?"s":""} no reconeguda${Y.keys.length>1?"s":""}: ${h(Y.keys,", ")}`;case"invalid_key":return`Clau inv\xE0lida a ${Y.origin}`;case"invalid_union":return"Entrada inv\xE0lida";case"invalid_element":return`Element inv\xE0lid a ${Y.origin}`;default:return"Entrada inv\xE0lida"}}};var W2=M(()=>{K6()});function YL(){return{localeError:Zx()}}var Zx=()=>{let J={string:{unit:"znak\u016F",verb:"m\xEDt"},file:{unit:"bajt\u016F",verb:"m\xEDt"},array:{unit:"prvk\u016F",verb:"m\xEDt"},set:{unit:"prvk\u016F",verb:"m\xEDt"}};function W(Y){return J[Y]??null}let X=(Y)=>{let $=typeof Y;switch($){case"number":return Number.isNaN(Y)?"NaN":"\u010D\xEDslo";case"string":return"\u0159et\u011Bzec";case"boolean":return"boolean";case"bigint":return"bigint";case"function":return"funkce";case"symbol":return"symbol";case"undefined":return"undefined";case"object":{if(Array.isArray(Y))return"pole";if(Y===null)return"null";if(Object.getPrototypeOf(Y)!==Object.prototype&&Y.constructor)return Y.constructor.name}}return $},G={regex:"regul\xE1rn\xED v\xFDraz",email:"e-mailov\xE1 adresa",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"datum a \u010Das ve form\xE1tu ISO",date:"datum ve form\xE1tu ISO",time:"\u010Das ve form\xE1tu ISO",duration:"doba trv\xE1n\xED ISO",ipv4:"IPv4 adresa",ipv6:"IPv6 adresa",cidrv4:"rozsah IPv4",cidrv6:"rozsah IPv6",base64:"\u0159et\u011Bzec zak\xF3dovan\xFD ve form\xE1tu base64",base64url:"\u0159et\u011Bzec zak\xF3dovan\xFD ve form\xE1tu base64url",json_string:"\u0159et\u011Bzec ve form\xE1tu JSON",e164:"\u010D\xEDslo E.164",jwt:"JWT",template_literal:"vstup"};return(Y)=>{switch(Y.code){case"invalid_type":return`Neplatn\xFD vstup: o\u010Dek\xE1v\xE1no ${Y.expected}, obdr\u017Eeno ${X(Y.input)}`;case"invalid_value":if(Y.values.length===1)return`Neplatn\xFD vstup: o\u010Dek\xE1v\xE1no ${d(Y.values[0])}`;return`Neplatn\xE1 mo\u017Enost: o\u010Dek\xE1v\xE1na jedna z hodnot ${h(Y.values,"|")}`;case"too_big":{let $=Y.inclusive?"<=":"<",K=W(Y.origin);if(K)return`Hodnota je p\u0159\xEDli\u0161 velk\xE1: ${Y.origin??"hodnota"} mus\xED m\xEDt ${$}${Y.maximum.toString()} ${K.unit??"prvk\u016F"}`;return`Hodnota je p\u0159\xEDli\u0161 velk\xE1: ${Y.origin??"hodnota"} mus\xED b\xFDt ${$}${Y.maximum.toString()}`}case"too_small":{let $=Y.inclusive?">=":">",K=W(Y.origin);if(K)return`Hodnota je p\u0159\xEDli\u0161 mal\xE1: ${Y.origin??"hodnota"} mus\xED m\xEDt ${$}${Y.minimum.toString()} ${K.unit??"prvk\u016F"}`;return`Hodnota je p\u0159\xEDli\u0161 mal\xE1: ${Y.origin??"hodnota"} mus\xED b\xFDt ${$}${Y.minimum.toString()}`}case"invalid_format":{let $=Y;if($.format==="starts_with")return`Neplatn\xFD \u0159et\u011Bzec: mus\xED za\u010D\xEDnat na "${$.prefix}"`;if($.format==="ends_with")return`Neplatn\xFD \u0159et\u011Bzec: mus\xED kon\u010Dit na "${$.suffix}"`;if($.format==="includes")return`Neplatn\xFD \u0159et\u011Bzec: mus\xED obsahovat "${$.includes}"`;if($.format==="regex")return`Neplatn\xFD \u0159et\u011Bzec: mus\xED odpov\xEDdat vzoru ${$.pattern}`;return`Neplatn\xFD form\xE1t ${G[$.format]??Y.format}`}case"not_multiple_of":return`Neplatn\xE9 \u010D\xEDslo: mus\xED b\xFDt n\xE1sobkem ${Y.divisor}`;case"unrecognized_keys":return`Nezn\xE1m\xE9 kl\xED\u010De: ${h(Y.keys,", ")}`;case"invalid_key":return`Neplatn\xFD kl\xED\u010D v ${Y.origin}`;case"invalid_union":return"Neplatn\xFD vstup";case"invalid_element":return`Neplatn\xE1 hodnota v ${Y.origin}`;default:return"Neplatn\xFD vstup"}}};var X2=M(()=>{K6()});function GL(){return{localeError:Lx()}}var Lx=()=>{let J={string:{unit:"tegn",verb:"havde"},file:{unit:"bytes",verb:"havde"},array:{unit:"elementer",verb:"indeholdt"},set:{unit:"elementer",verb:"indeholdt"}},W={string:"streng",number:"tal",boolean:"boolean",array:"liste",object:"objekt",set:"s\xE6t",file:"fil"};function X(K){return J[K]??null}function G(K){return W[K]??K}let Y=(K)=>{let w=typeof K;switch(w){case"number":return Number.isNaN(K)?"NaN":"tal";case"object":{if(Array.isArray(K))return"liste";if(K===null)return"null";if(Object.getPrototypeOf(K)!==Object.prototype&&K.constructor)return K.constructor.name;return"objekt"}}return w},$={regex:"input",email:"e-mailadresse",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO dato- og klokkesl\xE6t",date:"ISO-dato",time:"ISO-klokkesl\xE6t",duration:"ISO-varighed",ipv4:"IPv4-omr\xE5de",ipv6:"IPv6-omr\xE5de",cidrv4:"IPv4-spektrum",cidrv6:"IPv6-spektrum",base64:"base64-kodet streng",base64url:"base64url-kodet streng",json_string:"JSON-streng",e164:"E.164-nummer",jwt:"JWT",template_literal:"input"};return(K)=>{switch(K.code){case"invalid_type":return`Ugyldigt input: forventede ${G(K.expected)}, fik ${G(Y(K.input))}`;case"invalid_value":if(K.values.length===1)return`Ugyldig v\xE6rdi: forventede ${d(K.values[0])}`;return`Ugyldigt valg: forventede en af f\xF8lgende ${h(K.values,"|")}`;case"too_big":{let w=K.inclusive?"<=":"<",H=X(K.origin),z=G(K.origin);if(H)return`For stor: forventede ${z??"value"} ${H.verb} ${w} ${K.maximum.toString()} ${H.unit??"elementer"}`;return`For stor: forventede ${z??"value"} havde ${w} ${K.maximum.toString()}`}case"too_small":{let w=K.inclusive?">=":">",H=X(K.origin),z=G(K.origin);if(H)return`For lille: forventede ${z} ${H.verb} ${w} ${K.minimum.toString()} ${H.unit}`;return`For lille: forventede ${z} havde ${w} ${K.minimum.toString()}`}case"invalid_format":{let w=K;if(w.format==="starts_with")return`Ugyldig streng: skal starte med "${w.prefix}"`;if(w.format==="ends_with")return`Ugyldig streng: skal ende med "${w.suffix}"`;if(w.format==="includes")return`Ugyldig streng: skal indeholde "${w.includes}"`;if(w.format==="regex")return`Ugyldig streng: skal matche m\xF8nsteret ${w.pattern}`;return`Ugyldig ${$[w.format]??K.format}`}case"not_multiple_of":return`Ugyldigt tal: skal v\xE6re deleligt med ${K.divisor}`;case"unrecognized_keys":return`${K.keys.length>1?"Ukendte n\xF8gler":"Ukendt n\xF8gle"}: ${h(K.keys,", ")}`;case"invalid_key":return`Ugyldig n\xF8gle i ${K.origin}`;case"invalid_union":return"Ugyldigt input: matcher ingen af de tilladte typer";case"invalid_element":return`Ugyldig v\xE6rdi i ${K.origin}`;default:return"Ugyldigt input"}}};var Y2=M(()=>{K6()});function $L(){return{localeError:Vx()}}var Vx=()=>{let J={string:{unit:"Zeichen",verb:"zu haben"},file:{unit:"Bytes",verb:"zu haben"},array:{unit:"Elemente",verb:"zu haben"},set:{unit:"Elemente",verb:"zu haben"}};function W(Y){return J[Y]??null}let X=(Y)=>{let $=typeof Y;switch($){case"number":return Number.isNaN(Y)?"NaN":"Zahl";case"object":{if(Array.isArray(Y))return"Array";if(Y===null)return"null";if(Object.getPrototypeOf(Y)!==Object.prototype&&Y.constructor)return Y.constructor.name}}return $},G={regex:"Eingabe",email:"E-Mail-Adresse",url:"URL",emoji:"Emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO-Datum und -Uhrzeit",date:"ISO-Datum",time:"ISO-Uhrzeit",duration:"ISO-Dauer",ipv4:"IPv4-Adresse",ipv6:"IPv6-Adresse",cidrv4:"IPv4-Bereich",cidrv6:"IPv6-Bereich",base64:"Base64-codierter String",base64url:"Base64-URL-codierter String",json_string:"JSON-String",e164:"E.164-Nummer",jwt:"JWT",template_literal:"Eingabe"};return(Y)=>{switch(Y.code){case"invalid_type":return`Ung\xFCltige Eingabe: erwartet ${Y.expected}, erhalten ${X(Y.input)}`;case"invalid_value":if(Y.values.length===1)return`Ung\xFCltige Eingabe: erwartet ${d(Y.values[0])}`;return`Ung\xFCltige Option: erwartet eine von ${h(Y.values,"|")}`;case"too_big":{let $=Y.inclusive?"<=":"<",K=W(Y.origin);if(K)return`Zu gro\xDF: erwartet, dass ${Y.origin??"Wert"} ${$}${Y.maximum.toString()} ${K.unit??"Elemente"} hat`;return`Zu gro\xDF: erwartet, dass ${Y.origin??"Wert"} ${$}${Y.maximum.toString()} ist`}case"too_small":{let $=Y.inclusive?">=":">",K=W(Y.origin);if(K)return`Zu klein: erwartet, dass ${Y.origin} ${$}${Y.minimum.toString()} ${K.unit} hat`;return`Zu klein: erwartet, dass ${Y.origin} ${$}${Y.minimum.toString()} ist`}case"invalid_format":{let $=Y;if($.format==="starts_with")return`Ung\xFCltiger String: muss mit "${$.prefix}" beginnen`;if($.format==="ends_with")return`Ung\xFCltiger String: muss mit "${$.suffix}" enden`;if($.format==="includes")return`Ung\xFCltiger String: muss "${$.includes}" enthalten`;if($.format==="regex")return`Ung\xFCltiger String: muss dem Muster ${$.pattern} entsprechen`;return`Ung\xFCltig: ${G[$.format]??Y.format}`}case"not_multiple_of":return`Ung\xFCltige Zahl: muss ein Vielfaches von ${Y.divisor} sein`;case"unrecognized_keys":return`${Y.keys.length>1?"Unbekannte Schl\xFCssel":"Unbekannter Schl\xFCssel"}: ${h(Y.keys,", ")}`;case"invalid_key":return`Ung\xFCltiger Schl\xFCssel in ${Y.origin}`;case"invalid_union":return"Ung\xFCltige Eingabe";case"invalid_element":return`Ung\xFCltiger Wert in ${Y.origin}`;default:return"Ung\xFCltige Eingabe"}}};var G2=M(()=>{K6()});function N$(){return{localeError:Mx()}}var Dx=(J)=>{let W=typeof J;switch(W){case"number":return Number.isNaN(J)?"NaN":"number";case"object":{if(Array.isArray(J))return"array";if(J===null)return"null";if(Object.getPrototypeOf(J)!==Object.prototype&&J.constructor)return J.constructor.name}}return W},Mx=()=>{let J={string:{unit:"characters",verb:"to have"},file:{unit:"bytes",verb:"to have"},array:{unit:"items",verb:"to have"},set:{unit:"items",verb:"to have"}};function W(G){return J[G]??null}let X={regex:"input",email:"email address",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO datetime",date:"ISO date",time:"ISO time",duration:"ISO duration",ipv4:"IPv4 address",ipv6:"IPv6 address",cidrv4:"IPv4 range",cidrv6:"IPv6 range",base64:"base64-encoded string",base64url:"base64url-encoded string",json_string:"JSON string",e164:"E.164 number",jwt:"JWT",template_literal:"input"};return(G)=>{switch(G.code){case"invalid_type":return`Invalid input: expected ${G.expected}, received ${Dx(G.input)}`;case"invalid_value":if(G.values.length===1)return`Invalid input: expected ${d(G.values[0])}`;return`Invalid option: expected one of ${h(G.values,"|")}`;case"too_big":{let Y=G.inclusive?"<=":"<",$=W(G.origin);if($)return`Too big: expected ${G.origin??"value"} to have ${Y}${G.maximum.toString()} ${$.unit??"elements"}`;return`Too big: expected ${G.origin??"value"} to be ${Y}${G.maximum.toString()}`}case"too_small":{let Y=G.inclusive?">=":">",$=W(G.origin);if($)return`Too small: expected ${G.origin} to have ${Y}${G.minimum.toString()} ${$.unit}`;return`Too small: expected ${G.origin} to be ${Y}${G.minimum.toString()}`}case"invalid_format":{let Y=G;if(Y.format==="starts_with")return`Invalid string: must start with "${Y.prefix}"`;if(Y.format==="ends_with")return`Invalid string: must end with "${Y.suffix}"`;if(Y.format==="includes")return`Invalid string: must include "${Y.includes}"`;if(Y.format==="regex")return`Invalid string: must match pattern ${Y.pattern}`;return`Invalid ${X[Y.format]??G.format}`}case"not_multiple_of":return`Invalid number: must be a multiple of ${G.divisor}`;case"unrecognized_keys":return`Unrecognized key${G.keys.length>1?"s":""}: ${h(G.keys,", ")}`;case"invalid_key":return`Invalid key in ${G.origin}`;case"invalid_union":return"Invalid input";case"invalid_element":return`Invalid value in ${G.origin}`;default:return"Invalid input"}}};var KL=M(()=>{K6()});function wL(){return{localeError:Px()}}var Ox=(J)=>{let W=typeof J;switch(W){case"number":return Number.isNaN(J)?"NaN":"nombro";case"object":{if(Array.isArray(J))return"tabelo";if(J===null)return"senvalora";if(Object.getPrototypeOf(J)!==Object.prototype&&J.constructor)return J.constructor.name}}return W},Px=()=>{let J={string:{unit:"karaktrojn",verb:"havi"},file:{unit:"bajtojn",verb:"havi"},array:{unit:"elementojn",verb:"havi"},set:{unit:"elementojn",verb:"havi"}};function W(G){return J[G]??null}let X={regex:"enigo",email:"retadreso",url:"URL",emoji:"emo\u011Dio",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO-datotempo",date:"ISO-dato",time:"ISO-tempo",duration:"ISO-da\u016Dro",ipv4:"IPv4-adreso",ipv6:"IPv6-adreso",cidrv4:"IPv4-rango",cidrv6:"IPv6-rango",base64:"64-ume kodita karaktraro",base64url:"URL-64-ume kodita karaktraro",json_string:"JSON-karaktraro",e164:"E.164-nombro",jwt:"JWT",template_literal:"enigo"};return(G)=>{switch(G.code){case"invalid_type":return`Nevalida enigo: atendi\u011Dis ${G.expected}, ricevi\u011Dis ${Ox(G.input)}`;case"invalid_value":if(G.values.length===1)return`Nevalida enigo: atendi\u011Dis ${d(G.values[0])}`;return`Nevalida opcio: atendi\u011Dis unu el ${h(G.values,"|")}`;case"too_big":{let Y=G.inclusive?"<=":"<",$=W(G.origin);if($)return`Tro granda: atendi\u011Dis ke ${G.origin??"valoro"} havu ${Y}${G.maximum.toString()} ${$.unit??"elementojn"}`;return`Tro granda: atendi\u011Dis ke ${G.origin??"valoro"} havu ${Y}${G.maximum.toString()}`}case"too_small":{let Y=G.inclusive?">=":">",$=W(G.origin);if($)return`Tro malgranda: atendi\u011Dis ke ${G.origin} havu ${Y}${G.minimum.toString()} ${$.unit}`;return`Tro malgranda: atendi\u011Dis ke ${G.origin} estu ${Y}${G.minimum.toString()}`}case"invalid_format":{let Y=G;if(Y.format==="starts_with")return`Nevalida karaktraro: devas komenci\u011Di per "${Y.prefix}"`;if(Y.format==="ends_with")return`Nevalida karaktraro: devas fini\u011Di per "${Y.suffix}"`;if(Y.format==="includes")return`Nevalida karaktraro: devas inkluzivi "${Y.includes}"`;if(Y.format==="regex")return`Nevalida karaktraro: devas kongrui kun la modelo ${Y.pattern}`;return`Nevalida ${X[Y.format]??G.format}`}case"not_multiple_of":return`Nevalida nombro: devas esti oblo de ${G.divisor}`;case"unrecognized_keys":return`Nekonata${G.keys.length>1?"j":""} \u015Dlosilo${G.keys.length>1?"j":""}: ${h(G.keys,", ")}`;case"invalid_key":return`Nevalida \u015Dlosilo en ${G.origin}`;case"invalid_union":return"Nevalida enigo";case"invalid_element":return`Nevalida valoro en ${G.origin}`;default:return"Nevalida enigo"}}};var $2=M(()=>{K6()});function HL(){return{localeError:vx()}}var vx=()=>{let J={string:{unit:"caracteres",verb:"tener"},file:{unit:"bytes",verb:"tener"},array:{unit:"elementos",verb:"tener"},set:{unit:"elementos",verb:"tener"}},W={string:"texto",number:"n\xFAmero",boolean:"booleano",array:"arreglo",object:"objeto",set:"conjunto",file:"archivo",date:"fecha",bigint:"n\xFAmero grande",symbol:"s\xEDmbolo",undefined:"indefinido",null:"nulo",function:"funci\xF3n",map:"mapa",record:"registro",tuple:"tupla",enum:"enumeraci\xF3n",union:"uni\xF3n",literal:"literal",promise:"promesa",void:"vac\xEDo",never:"nunca",unknown:"desconocido",any:"cualquiera"};function X(K){return J[K]??null}function G(K){return W[K]??K}let Y=(K)=>{let w=typeof K;switch(w){case"number":return Number.isNaN(K)?"NaN":"number";case"object":{if(Array.isArray(K))return"array";if(K===null)return"null";if(Object.getPrototypeOf(K)!==Object.prototype)return K.constructor.name;return"object"}}return w},$={regex:"entrada",email:"direcci\xF3n de correo electr\xF3nico",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"fecha y hora ISO",date:"fecha ISO",time:"hora ISO",duration:"duraci\xF3n ISO",ipv4:"direcci\xF3n IPv4",ipv6:"direcci\xF3n IPv6",cidrv4:"rango IPv4",cidrv6:"rango IPv6",base64:"cadena codificada en base64",base64url:"URL codificada en base64",json_string:"cadena JSON",e164:"n\xFAmero E.164",jwt:"JWT",template_literal:"entrada"};return(K)=>{switch(K.code){case"invalid_type":return`Entrada inv\xE1lida: se esperaba ${G(K.expected)}, recibido ${G(Y(K.input))}`;case"invalid_value":if(K.values.length===1)return`Entrada inv\xE1lida: se esperaba ${d(K.values[0])}`;return`Opci\xF3n inv\xE1lida: se esperaba una de ${h(K.values,"|")}`;case"too_big":{let w=K.inclusive?"<=":"<",H=X(K.origin),z=G(K.origin);if(H)return`Demasiado grande: se esperaba que ${z??"valor"} tuviera ${w}${K.maximum.toString()} ${H.unit??"elementos"}`;return`Demasiado grande: se esperaba que ${z??"valor"} fuera ${w}${K.maximum.toString()}`}case"too_small":{let w=K.inclusive?">=":">",H=X(K.origin),z=G(K.origin);if(H)return`Demasiado peque\xF1o: se esperaba que ${z} tuviera ${w}${K.minimum.toString()} ${H.unit}`;return`Demasiado peque\xF1o: se esperaba que ${z} fuera ${w}${K.minimum.toString()}`}case"invalid_format":{let w=K;if(w.format==="starts_with")return`Cadena inv\xE1lida: debe comenzar con "${w.prefix}"`;if(w.format==="ends_with")return`Cadena inv\xE1lida: debe terminar en "${w.suffix}"`;if(w.format==="includes")return`Cadena inv\xE1lida: debe incluir "${w.includes}"`;if(w.format==="regex")return`Cadena inv\xE1lida: debe coincidir con el patr\xF3n ${w.pattern}`;return`Inv\xE1lido ${$[w.format]??K.format}`}case"not_multiple_of":return`N\xFAmero inv\xE1lido: debe ser m\xFAltiplo de ${K.divisor}`;case"unrecognized_keys":return`Llave${K.keys.length>1?"s":""} desconocida${K.keys.length>1?"s":""}: ${h(K.keys,", ")}`;case"invalid_key":return`Llave inv\xE1lida en ${G(K.origin)}`;case"invalid_union":return"Entrada inv\xE1lida";case"invalid_element":return`Valor inv\xE1lido en ${G(K.origin)}`;default:return"Entrada inv\xE1lida"}}};var K2=M(()=>{K6()});function zL(){return{localeError:jx()}}var jx=()=>{let J={string:{unit:"\u06A9\u0627\u0631\u0627\u06A9\u062A\u0631",verb:"\u062F\u0627\u0634\u062A\u0647 \u0628\u0627\u0634\u062F"},file:{unit:"\u0628\u0627\u06CC\u062A",verb:"\u062F\u0627\u0634\u062A\u0647 \u0628\u0627\u0634\u062F"},array:{unit:"\u0622\u06CC\u062A\u0645",verb:"\u062F\u0627\u0634\u062A\u0647 \u0628\u0627\u0634\u062F"},set:{unit:"\u0622\u06CC\u062A\u0645",verb:"\u062F\u0627\u0634\u062A\u0647 \u0628\u0627\u0634\u062F"}};function W(Y){return J[Y]??null}let X=(Y)=>{let $=typeof Y;switch($){case"number":return Number.isNaN(Y)?"NaN":"\u0639\u062F\u062F";case"object":{if(Array.isArray(Y))return"\u0622\u0631\u0627\u06CC\u0647";if(Y===null)return"null";if(Object.getPrototypeOf(Y)!==Object.prototype&&Y.constructor)return Y.constructor.name}}return $},G={regex:"\u0648\u0631\u0648\u062F\u06CC",email:"\u0622\u062F\u0631\u0633 \u0627\u06CC\u0645\u06CC\u0644",url:"URL",emoji:"\u0627\u06CC\u0645\u0648\u062C\u06CC",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"\u062A\u0627\u0631\u06CC\u062E \u0648 \u0632\u0645\u0627\u0646 \u0627\u06CC\u0632\u0648",date:"\u062A\u0627\u0631\u06CC\u062E \u0627\u06CC\u0632\u0648",time:"\u0632\u0645\u0627\u0646 \u0627\u06CC\u0632\u0648",duration:"\u0645\u062F\u062A \u0632\u0645\u0627\u0646 \u0627\u06CC\u0632\u0648",ipv4:"IPv4 \u0622\u062F\u0631\u0633",ipv6:"IPv6 \u0622\u062F\u0631\u0633",cidrv4:"IPv4 \u062F\u0627\u0645\u0646\u0647",cidrv6:"IPv6 \u062F\u0627\u0645\u0646\u0647",base64:"base64-encoded \u0631\u0634\u062A\u0647",base64url:"base64url-encoded \u0631\u0634\u062A\u0647",json_string:"JSON \u0631\u0634\u062A\u0647",e164:"E.164 \u0639\u062F\u062F",jwt:"JWT",template_literal:"\u0648\u0631\u0648\u062F\u06CC"};return(Y)=>{switch(Y.code){case"invalid_type":return`\u0648\u0631\u0648\u062F\u06CC \u0646\u0627\u0645\u0639\u062A\u0628\u0631: \u0645\u06CC\u200C\u0628\u0627\u06CC\u0633\u062A ${Y.expected} \u0645\u06CC\u200C\u0628\u0648\u062F\u060C ${X(Y.input)} \u062F\u0631\u06CC\u0627\u0641\u062A \u0634\u062F`;case"invalid_value":if(Y.values.length===1)return`\u0648\u0631\u0648\u062F\u06CC \u0646\u0627\u0645\u0639\u062A\u0628\u0631: \u0645\u06CC\u200C\u0628\u0627\u06CC\u0633\u062A ${d(Y.values[0])} \u0645\u06CC\u200C\u0628\u0648\u062F`;return`\u06AF\u0632\u06CC\u0646\u0647 \u0646\u0627\u0645\u0639\u062A\u0628\u0631: \u0645\u06CC\u200C\u0628\u0627\u06CC\u0633\u062A \u06CC\u06A9\u06CC \u0627\u0632 ${h(Y.values,"|")} \u0645\u06CC\u200C\u0628\u0648\u062F`;case"too_big":{let $=Y.inclusive?"<=":"<",K=W(Y.origin);if(K)return`\u062E\u06CC\u0644\u06CC \u0628\u0632\u0631\u06AF: ${Y.origin??"\u0645\u0642\u062F\u0627\u0631"} \u0628\u0627\u06CC\u062F ${$}${Y.maximum.toString()} ${K.unit??"\u0639\u0646\u0635\u0631"} \u0628\u0627\u0634\u062F`;return`\u062E\u06CC\u0644\u06CC \u0628\u0632\u0631\u06AF: ${Y.origin??"\u0645\u0642\u062F\u0627\u0631"} \u0628\u0627\u06CC\u062F ${$}${Y.maximum.toString()} \u0628\u0627\u0634\u062F`}case"too_small":{let $=Y.inclusive?">=":">",K=W(Y.origin);if(K)return`\u062E\u06CC\u0644\u06CC \u06A9\u0648\u0686\u06A9: ${Y.origin} \u0628\u0627\u06CC\u062F ${$}${Y.minimum.toString()} ${K.unit} \u0628\u0627\u0634\u062F`;return`\u062E\u06CC\u0644\u06CC \u06A9\u0648\u0686\u06A9: ${Y.origin} \u0628\u0627\u06CC\u062F ${$}${Y.minimum.toString()} \u0628\u0627\u0634\u062F`}case"invalid_format":{let $=Y;if($.format==="starts_with")return`\u0631\u0634\u062A\u0647 \u0646\u0627\u0645\u0639\u062A\u0628\u0631: \u0628\u0627\u06CC\u062F \u0628\u0627 "${$.prefix}" \u0634\u0631\u0648\u0639 \u0634\u0648\u062F`;if($.format==="ends_with")return`\u0631\u0634\u062A\u0647 \u0646\u0627\u0645\u0639\u062A\u0628\u0631: \u0628\u0627\u06CC\u062F \u0628\u0627 "${$.suffix}" \u062A\u0645\u0627\u0645 \u0634\u0648\u062F`;if($.format==="includes")return`\u0631\u0634\u062A\u0647 \u0646\u0627\u0645\u0639\u062A\u0628\u0631: \u0628\u0627\u06CC\u062F \u0634\u0627\u0645\u0644 "${$.includes}" \u0628\u0627\u0634\u062F`;if($.format==="regex")return`\u0631\u0634\u062A\u0647 \u0646\u0627\u0645\u0639\u062A\u0628\u0631: \u0628\u0627\u06CC\u062F \u0628\u0627 \u0627\u0644\u06AF\u0648\u06CC ${$.pattern} \u0645\u0637\u0627\u0628\u0642\u062A \u062F\u0627\u0634\u062A\u0647 \u0628\u0627\u0634\u062F`;return`${G[$.format]??Y.format} \u0646\u0627\u0645\u0639\u062A\u0628\u0631`}case"not_multiple_of":return`\u0639\u062F\u062F \u0646\u0627\u0645\u0639\u062A\u0628\u0631: \u0628\u0627\u06CC\u062F \u0645\u0636\u0631\u0628 ${Y.divisor} \u0628\u0627\u0634\u062F`;case"unrecognized_keys":return`\u06A9\u0644\u06CC\u062F${Y.keys.length>1?"\u0647\u0627\u06CC":""} \u0646\u0627\u0634\u0646\u0627\u0633: ${h(Y.keys,", ")}`;case"invalid_key":return`\u06A9\u0644\u06CC\u062F \u0646\u0627\u0634\u0646\u0627\u0633 \u062F\u0631 ${Y.origin}`;case"invalid_union":return"\u0648\u0631\u0648\u062F\u06CC \u0646\u0627\u0645\u0639\u062A\u0628\u0631";case"invalid_element":return`\u0645\u0642\u062F\u0627\u0631 \u0646\u0627\u0645\u0639\u062A\u0628\u0631 \u062F\u0631 ${Y.origin}`;default:return"\u0648\u0631\u0648\u062F\u06CC \u0646\u0627\u0645\u0639\u062A\u0628\u0631"}}};var w2=M(()=>{K6()});function NL(){return{localeError:Sx()}}var Sx=()=>{let J={string:{unit:"merkki\xE4",subject:"merkkijonon"},file:{unit:"tavua",subject:"tiedoston"},array:{unit:"alkiota",subject:"listan"},set:{unit:"alkiota",subject:"joukon"},number:{unit:"",subject:"luvun"},bigint:{unit:"",subject:"suuren kokonaisluvun"},int:{unit:"",subject:"kokonaisluvun"},date:{unit:"",subject:"p\xE4iv\xE4m\xE4\xE4r\xE4n"}};function W(Y){return J[Y]??null}let X=(Y)=>{let $=typeof Y;switch($){case"number":return Number.isNaN(Y)?"NaN":"number";case"object":{if(Array.isArray(Y))return"array";if(Y===null)return"null";if(Object.getPrototypeOf(Y)!==Object.prototype&&Y.constructor)return Y.constructor.name}}return $},G={regex:"s\xE4\xE4nn\xF6llinen lauseke",email:"s\xE4hk\xF6postiosoite",url:"URL-osoite",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO-aikaleima",date:"ISO-p\xE4iv\xE4m\xE4\xE4r\xE4",time:"ISO-aika",duration:"ISO-kesto",ipv4:"IPv4-osoite",ipv6:"IPv6-osoite",cidrv4:"IPv4-alue",cidrv6:"IPv6-alue",base64:"base64-koodattu merkkijono",base64url:"base64url-koodattu merkkijono",json_string:"JSON-merkkijono",e164:"E.164-luku",jwt:"JWT",template_literal:"templaattimerkkijono"};return(Y)=>{switch(Y.code){case"invalid_type":return`Virheellinen tyyppi: odotettiin ${Y.expected}, oli ${X(Y.input)}`;case"invalid_value":if(Y.values.length===1)return`Virheellinen sy\xF6te: t\xE4ytyy olla ${d(Y.values[0])}`;return`Virheellinen valinta: t\xE4ytyy olla yksi seuraavista: ${h(Y.values,"|")}`;case"too_big":{let $=Y.inclusive?"<=":"<",K=W(Y.origin);if(K)return`Liian suuri: ${K.subject} t\xE4ytyy olla ${$}${Y.maximum.toString()} ${K.unit}`.trim();return`Liian suuri: arvon t\xE4ytyy olla ${$}${Y.maximum.toString()}`}case"too_small":{let $=Y.inclusive?">=":">",K=W(Y.origin);if(K)return`Liian pieni: ${K.subject} t\xE4ytyy olla ${$}${Y.minimum.toString()} ${K.unit}`.trim();return`Liian pieni: arvon t\xE4ytyy olla ${$}${Y.minimum.toString()}`}case"invalid_format":{let $=Y;if($.format==="starts_with")return`Virheellinen sy\xF6te: t\xE4ytyy alkaa "${$.prefix}"`;if($.format==="ends_with")return`Virheellinen sy\xF6te: t\xE4ytyy loppua "${$.suffix}"`;if($.format==="includes")return`Virheellinen sy\xF6te: t\xE4ytyy sis\xE4lt\xE4\xE4 "${$.includes}"`;if($.format==="regex")return`Virheellinen sy\xF6te: t\xE4ytyy vastata s\xE4\xE4nn\xF6llist\xE4 lauseketta ${$.pattern}`;return`Virheellinen ${G[$.format]??Y.format}`}case"not_multiple_of":return`Virheellinen luku: t\xE4ytyy olla luvun ${Y.divisor} monikerta`;case"unrecognized_keys":return`${Y.keys.length>1?"Tuntemattomat avaimet":"Tuntematon avain"}: ${h(Y.keys,", ")}`;case"invalid_key":return"Virheellinen avain tietueessa";case"invalid_union":return"Virheellinen unioni";case"invalid_element":return"Virheellinen arvo joukossa";default:return"Virheellinen sy\xF6te"}}};var H2=M(()=>{K6()});function FL(){return{localeError:_x()}}var _x=()=>{let J={string:{unit:"caract\xE8res",verb:"avoir"},file:{unit:"octets",verb:"avoir"},array:{unit:"\xE9l\xE9ments",verb:"avoir"},set:{unit:"\xE9l\xE9ments",verb:"avoir"}};function W(Y){return J[Y]??null}let X=(Y)=>{let $=typeof Y;switch($){case"number":return Number.isNaN(Y)?"NaN":"nombre";case"object":{if(Array.isArray(Y))return"tableau";if(Y===null)return"null";if(Object.getPrototypeOf(Y)!==Object.prototype&&Y.constructor)return Y.constructor.name}}return $},G={regex:"entr\xE9e",email:"adresse e-mail",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"date et heure ISO",date:"date ISO",time:"heure ISO",duration:"dur\xE9e ISO",ipv4:"adresse IPv4",ipv6:"adresse IPv6",cidrv4:"plage IPv4",cidrv6:"plage IPv6",base64:"cha\xEEne encod\xE9e en base64",base64url:"cha\xEEne encod\xE9e en base64url",json_string:"cha\xEEne JSON",e164:"num\xE9ro E.164",jwt:"JWT",template_literal:"entr\xE9e"};return(Y)=>{switch(Y.code){case"invalid_type":return`Entr\xE9e invalide : ${Y.expected} attendu, ${X(Y.input)} re\xE7u`;case"invalid_value":if(Y.values.length===1)return`Entr\xE9e invalide : ${d(Y.values[0])} attendu`;return`Option invalide : une valeur parmi ${h(Y.values,"|")} attendue`;case"too_big":{let $=Y.inclusive?"<=":"<",K=W(Y.origin);if(K)return`Trop grand : ${Y.origin??"valeur"} doit ${K.verb} ${$}${Y.maximum.toString()} ${K.unit??"\xE9l\xE9ment(s)"}`;return`Trop grand : ${Y.origin??"valeur"} doit \xEAtre ${$}${Y.maximum.toString()}`}case"too_small":{let $=Y.inclusive?">=":">",K=W(Y.origin);if(K)return`Trop petit : ${Y.origin} doit ${K.verb} ${$}${Y.minimum.toString()} ${K.unit}`;return`Trop petit : ${Y.origin} doit \xEAtre ${$}${Y.minimum.toString()}`}case"invalid_format":{let $=Y;if($.format==="starts_with")return`Cha\xEEne invalide : doit commencer par "${$.prefix}"`;if($.format==="ends_with")return`Cha\xEEne invalide : doit se terminer par "${$.suffix}"`;if($.format==="includes")return`Cha\xEEne invalide : doit inclure "${$.includes}"`;if($.format==="regex")return`Cha\xEEne invalide : doit correspondre au mod\xE8le ${$.pattern}`;return`${G[$.format]??Y.format} invalide`}case"not_multiple_of":return`Nombre invalide : doit \xEAtre un multiple de ${Y.divisor}`;case"unrecognized_keys":return`Cl\xE9${Y.keys.length>1?"s":""} non reconnue${Y.keys.length>1?"s":""} : ${h(Y.keys,", ")}`;case"invalid_key":return`Cl\xE9 invalide dans ${Y.origin}`;case"invalid_union":return"Entr\xE9e invalide";case"invalid_element":return`Valeur invalide dans ${Y.origin}`;default:return"Entr\xE9e invalide"}}};var z2=M(()=>{K6()});function UL(){return{localeError:Tx()}}var Tx=()=>{let J={string:{unit:"caract\xE8res",verb:"avoir"},file:{unit:"octets",verb:"avoir"},array:{unit:"\xE9l\xE9ments",verb:"avoir"},set:{unit:"\xE9l\xE9ments",verb:"avoir"}};function W(Y){return J[Y]??null}let X=(Y)=>{let $=typeof Y;switch($){case"number":return Number.isNaN(Y)?"NaN":"number";case"object":{if(Array.isArray(Y))return"array";if(Y===null)return"null";if(Object.getPrototypeOf(Y)!==Object.prototype&&Y.constructor)return Y.constructor.name}}return $},G={regex:"entr\xE9e",email:"adresse courriel",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"date-heure ISO",date:"date ISO",time:"heure ISO",duration:"dur\xE9e ISO",ipv4:"adresse IPv4",ipv6:"adresse IPv6",cidrv4:"plage IPv4",cidrv6:"plage IPv6",base64:"cha\xEEne encod\xE9e en base64",base64url:"cha\xEEne encod\xE9e en base64url",json_string:"cha\xEEne JSON",e164:"num\xE9ro E.164",jwt:"JWT",template_literal:"entr\xE9e"};return(Y)=>{switch(Y.code){case"invalid_type":return`Entr\xE9e invalide : attendu ${Y.expected}, re\xE7u ${X(Y.input)}`;case"invalid_value":if(Y.values.length===1)return`Entr\xE9e invalide : attendu ${d(Y.values[0])}`;return`Option invalide : attendu l'une des valeurs suivantes ${h(Y.values,"|")}`;case"too_big":{let $=Y.inclusive?"\u2264":"<",K=W(Y.origin);if(K)return`Trop grand : attendu que ${Y.origin??"la valeur"} ait ${$}${Y.maximum.toString()} ${K.unit}`;return`Trop grand : attendu que ${Y.origin??"la valeur"} soit ${$}${Y.maximum.toString()}`}case"too_small":{let $=Y.inclusive?"\u2265":">",K=W(Y.origin);if(K)return`Trop petit : attendu que ${Y.origin} ait ${$}${Y.minimum.toString()} ${K.unit}`;return`Trop petit : attendu que ${Y.origin} soit ${$}${Y.minimum.toString()}`}case"invalid_format":{let $=Y;if($.format==="starts_with")return`Cha\xEEne invalide : doit commencer par "${$.prefix}"`;if($.format==="ends_with")return`Cha\xEEne invalide : doit se terminer par "${$.suffix}"`;if($.format==="includes")return`Cha\xEEne invalide : doit inclure "${$.includes}"`;if($.format==="regex")return`Cha\xEEne invalide : doit correspondre au motif ${$.pattern}`;return`${G[$.format]??Y.format} invalide`}case"not_multiple_of":return`Nombre invalide : doit \xEAtre un multiple de ${Y.divisor}`;case"unrecognized_keys":return`Cl\xE9${Y.keys.length>1?"s":""} non reconnue${Y.keys.length>1?"s":""} : ${h(Y.keys,", ")}`;case"invalid_key":return`Cl\xE9 invalide dans ${Y.origin}`;case"invalid_union":return"Entr\xE9e invalide";case"invalid_element":return`Valeur invalide dans ${Y.origin}`;default:return"Entr\xE9e invalide"}}};var N2=M(()=>{K6()});function QL(){return{localeError:qx()}}var qx=()=>{let J={string:{unit:"\u05D0\u05D5\u05EA\u05D9\u05D5\u05EA",verb:"\u05DC\u05DB\u05DC\u05D5\u05DC"},file:{unit:"\u05D1\u05D9\u05D9\u05D8\u05D9\u05DD",verb:"\u05DC\u05DB\u05DC\u05D5\u05DC"},array:{unit:"\u05E4\u05E8\u05D9\u05D8\u05D9\u05DD",verb:"\u05DC\u05DB\u05DC\u05D5\u05DC"},set:{unit:"\u05E4\u05E8\u05D9\u05D8\u05D9\u05DD",verb:"\u05DC\u05DB\u05DC\u05D5\u05DC"}};function W(Y){return J[Y]??null}let X=(Y)=>{let $=typeof Y;switch($){case"number":return Number.isNaN(Y)?"NaN":"number";case"object":{if(Array.isArray(Y))return"array";if(Y===null)return"null";if(Object.getPrototypeOf(Y)!==Object.prototype&&Y.constructor)return Y.constructor.name}}return $},G={regex:"\u05E7\u05DC\u05D8",email:"\u05DB\u05EA\u05D5\u05D1\u05EA \u05D0\u05D9\u05DE\u05D9\u05D9\u05DC",url:"\u05DB\u05EA\u05D5\u05D1\u05EA \u05E8\u05E9\u05EA",emoji:"\u05D0\u05D9\u05DE\u05D5\u05D2'\u05D9",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"\u05EA\u05D0\u05E8\u05D9\u05DA \u05D5\u05D6\u05DE\u05DF ISO",date:"\u05EA\u05D0\u05E8\u05D9\u05DA ISO",time:"\u05D6\u05DE\u05DF ISO",duration:"\u05DE\u05E9\u05DA \u05D6\u05DE\u05DF ISO",ipv4:"\u05DB\u05EA\u05D5\u05D1\u05EA IPv4",ipv6:"\u05DB\u05EA\u05D5\u05D1\u05EA IPv6",cidrv4:"\u05D8\u05D5\u05D5\u05D7 IPv4",cidrv6:"\u05D8\u05D5\u05D5\u05D7 IPv6",base64:"\u05DE\u05D7\u05E8\u05D5\u05D6\u05EA \u05D1\u05D1\u05E1\u05D9\u05E1 64",base64url:"\u05DE\u05D7\u05E8\u05D5\u05D6\u05EA \u05D1\u05D1\u05E1\u05D9\u05E1 64 \u05DC\u05DB\u05EA\u05D5\u05D1\u05D5\u05EA \u05E8\u05E9\u05EA",json_string:"\u05DE\u05D7\u05E8\u05D5\u05D6\u05EA JSON",e164:"\u05DE\u05E1\u05E4\u05E8 E.164",jwt:"JWT",template_literal:"\u05E7\u05DC\u05D8"};return(Y)=>{switch(Y.code){case"invalid_type":return`\u05E7\u05DC\u05D8 \u05DC\u05D0 \u05EA\u05E7\u05D9\u05DF: \u05E6\u05E8\u05D9\u05DA ${Y.expected}, \u05D4\u05EA\u05E7\u05D1\u05DC ${X(Y.input)}`;case"invalid_value":if(Y.values.length===1)return`\u05E7\u05DC\u05D8 \u05DC\u05D0 \u05EA\u05E7\u05D9\u05DF: \u05E6\u05E8\u05D9\u05DA ${d(Y.values[0])}`;return`\u05E7\u05DC\u05D8 \u05DC\u05D0 \u05EA\u05E7\u05D9\u05DF: \u05E6\u05E8\u05D9\u05DA \u05D0\u05D7\u05EA \u05DE\u05D4\u05D0\u05E4\u05E9\u05E8\u05D5\u05D9\u05D5\u05EA  ${h(Y.values,"|")}`;case"too_big":{let $=Y.inclusive?"<=":"<",K=W(Y.origin);if(K)return`\u05D2\u05D3\u05D5\u05DC \u05DE\u05D3\u05D9: ${Y.origin??"value"} \u05E6\u05E8\u05D9\u05DA \u05DC\u05D4\u05D9\u05D5\u05EA ${$}${Y.maximum.toString()} ${K.unit??"elements"}`;return`\u05D2\u05D3\u05D5\u05DC \u05DE\u05D3\u05D9: ${Y.origin??"value"} \u05E6\u05E8\u05D9\u05DA \u05DC\u05D4\u05D9\u05D5\u05EA ${$}${Y.maximum.toString()}`}case"too_small":{let $=Y.inclusive?">=":">",K=W(Y.origin);if(K)return`\u05E7\u05D8\u05DF \u05DE\u05D3\u05D9: ${Y.origin} \u05E6\u05E8\u05D9\u05DA \u05DC\u05D4\u05D9\u05D5\u05EA ${$}${Y.minimum.toString()} ${K.unit}`;return`\u05E7\u05D8\u05DF \u05DE\u05D3\u05D9: ${Y.origin} \u05E6\u05E8\u05D9\u05DA \u05DC\u05D4\u05D9\u05D5\u05EA ${$}${Y.minimum.toString()}`}case"invalid_format":{let $=Y;if($.format==="starts_with")return`\u05DE\u05D7\u05E8\u05D5\u05D6\u05EA \u05DC\u05D0 \u05EA\u05E7\u05D9\u05E0\u05D4: \u05D7\u05D9\u05D9\u05D1\u05EA \u05DC\u05D4\u05EA\u05D7\u05D9\u05DC \u05D1"${$.prefix}"`;if($.format==="ends_with")return`\u05DE\u05D7\u05E8\u05D5\u05D6\u05EA \u05DC\u05D0 \u05EA\u05E7\u05D9\u05E0\u05D4: \u05D7\u05D9\u05D9\u05D1\u05EA \u05DC\u05D4\u05E1\u05EA\u05D9\u05D9\u05DD \u05D1 "${$.suffix}"`;if($.format==="includes")return`\u05DE\u05D7\u05E8\u05D5\u05D6\u05EA \u05DC\u05D0 \u05EA\u05E7\u05D9\u05E0\u05D4: \u05D7\u05D9\u05D9\u05D1\u05EA \u05DC\u05DB\u05DC\u05D5\u05DC "${$.includes}"`;if($.format==="regex")return`\u05DE\u05D7\u05E8\u05D5\u05D6\u05EA \u05DC\u05D0 \u05EA\u05E7\u05D9\u05E0\u05D4: \u05D7\u05D9\u05D9\u05D1\u05EA \u05DC\u05D4\u05EA\u05D0\u05D9\u05DD \u05DC\u05EA\u05D1\u05E0\u05D9\u05EA ${$.pattern}`;return`${G[$.format]??Y.format} \u05DC\u05D0 \u05EA\u05E7\u05D9\u05DF`}case"not_multiple_of":return`\u05DE\u05E1\u05E4\u05E8 \u05DC\u05D0 \u05EA\u05E7\u05D9\u05DF: \u05D7\u05D9\u05D9\u05D1 \u05DC\u05D4\u05D9\u05D5\u05EA \u05DE\u05DB\u05E4\u05DC\u05D4 \u05E9\u05DC ${Y.divisor}`;case"unrecognized_keys":return`\u05DE\u05E4\u05EA\u05D7${Y.keys.length>1?"\u05D5\u05EA":""} \u05DC\u05D0 \u05DE\u05D6\u05D5\u05D4${Y.keys.length>1?"\u05D9\u05DD":"\u05D4"}: ${h(Y.keys,", ")}`;case"invalid_key":return`\u05DE\u05E4\u05EA\u05D7 \u05DC\u05D0 \u05EA\u05E7\u05D9\u05DF \u05D1${Y.origin}`;case"invalid_union":return"\u05E7\u05DC\u05D8 \u05DC\u05D0 \u05EA\u05E7\u05D9\u05DF";case"invalid_element":return`\u05E2\u05E8\u05DA \u05DC\u05D0 \u05EA\u05E7\u05D9\u05DF \u05D1${Y.origin}`;default:return"\u05E7\u05DC\u05D8 \u05DC\u05D0 \u05EA\u05E7\u05D9\u05DF"}}};var F2=M(()=>{K6()});function ZL(){return{localeError:Bx()}}var Bx=()=>{let J={string:{unit:"karakter",verb:"legyen"},file:{unit:"byte",verb:"legyen"},array:{unit:"elem",verb:"legyen"},set:{unit:"elem",verb:"legyen"}};function W(Y){return J[Y]??null}let X=(Y)=>{let $=typeof Y;switch($){case"number":return Number.isNaN(Y)?"NaN":"sz\xE1m";case"object":{if(Array.isArray(Y))return"t\xF6mb";if(Y===null)return"null";if(Object.getPrototypeOf(Y)!==Object.prototype&&Y.constructor)return Y.constructor.name}}return $},G={regex:"bemenet",email:"email c\xEDm",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO id\u0151b\xE9lyeg",date:"ISO d\xE1tum",time:"ISO id\u0151",duration:"ISO id\u0151intervallum",ipv4:"IPv4 c\xEDm",ipv6:"IPv6 c\xEDm",cidrv4:"IPv4 tartom\xE1ny",cidrv6:"IPv6 tartom\xE1ny",base64:"base64-k\xF3dolt string",base64url:"base64url-k\xF3dolt string",json_string:"JSON string",e164:"E.164 sz\xE1m",jwt:"JWT",template_literal:"bemenet"};return(Y)=>{switch(Y.code){case"invalid_type":return`\xC9rv\xE9nytelen bemenet: a v\xE1rt \xE9rt\xE9k ${Y.expected}, a kapott \xE9rt\xE9k ${X(Y.input)}`;case"invalid_value":if(Y.values.length===1)return`\xC9rv\xE9nytelen bemenet: a v\xE1rt \xE9rt\xE9k ${d(Y.values[0])}`;return`\xC9rv\xE9nytelen opci\xF3: valamelyik \xE9rt\xE9k v\xE1rt ${h(Y.values,"|")}`;case"too_big":{let $=Y.inclusive?"<=":"<",K=W(Y.origin);if(K)return`T\xFAl nagy: ${Y.origin??"\xE9rt\xE9k"} m\xE9rete t\xFAl nagy ${$}${Y.maximum.toString()} ${K.unit??"elem"}`;return`T\xFAl nagy: a bemeneti \xE9rt\xE9k ${Y.origin??"\xE9rt\xE9k"} t\xFAl nagy: ${$}${Y.maximum.toString()}`}case"too_small":{let $=Y.inclusive?">=":">",K=W(Y.origin);if(K)return`T\xFAl kicsi: a bemeneti \xE9rt\xE9k ${Y.origin} m\xE9rete t\xFAl kicsi ${$}${Y.minimum.toString()} ${K.unit}`;return`T\xFAl kicsi: a bemeneti \xE9rt\xE9k ${Y.origin} t\xFAl kicsi ${$}${Y.minimum.toString()}`}case"invalid_format":{let $=Y;if($.format==="starts_with")return`\xC9rv\xE9nytelen string: "${$.prefix}" \xE9rt\xE9kkel kell kezd\u0151dnie`;if($.format==="ends_with")return`\xC9rv\xE9nytelen string: "${$.suffix}" \xE9rt\xE9kkel kell v\xE9gz\u0151dnie`;if($.format==="includes")return`\xC9rv\xE9nytelen string: "${$.includes}" \xE9rt\xE9ket kell tartalmaznia`;if($.format==="regex")return`\xC9rv\xE9nytelen string: ${$.pattern} mint\xE1nak kell megfelelnie`;return`\xC9rv\xE9nytelen ${G[$.format]??Y.format}`}case"not_multiple_of":return`\xC9rv\xE9nytelen sz\xE1m: ${Y.divisor} t\xF6bbsz\xF6r\xF6s\xE9nek kell lennie`;case"unrecognized_keys":return`Ismeretlen kulcs${Y.keys.length>1?"s":""}: ${h(Y.keys,", ")}`;case"invalid_key":return`\xC9rv\xE9nytelen kulcs ${Y.origin}`;case"invalid_union":return"\xC9rv\xE9nytelen bemenet";case"invalid_element":return`\xC9rv\xE9nytelen \xE9rt\xE9k: ${Y.origin}`;default:return"\xC9rv\xE9nytelen bemenet"}}};var U2=M(()=>{K6()});function LL(){return{localeError:Ax()}}var Ax=()=>{let J={string:{unit:"karakter",verb:"memiliki"},file:{unit:"byte",verb:"memiliki"},array:{unit:"item",verb:"memiliki"},set:{unit:"item",verb:"memiliki"}};function W(Y){return J[Y]??null}let X=(Y)=>{let $=typeof Y;switch($){case"number":return Number.isNaN(Y)?"NaN":"number";case"object":{if(Array.isArray(Y))return"array";if(Y===null)return"null";if(Object.getPrototypeOf(Y)!==Object.prototype&&Y.constructor)return Y.constructor.name}}return $},G={regex:"input",email:"alamat email",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"tanggal dan waktu format ISO",date:"tanggal format ISO",time:"jam format ISO",duration:"durasi format ISO",ipv4:"alamat IPv4",ipv6:"alamat IPv6",cidrv4:"rentang alamat IPv4",cidrv6:"rentang alamat IPv6",base64:"string dengan enkode base64",base64url:"string dengan enkode base64url",json_string:"string JSON",e164:"angka E.164",jwt:"JWT",template_literal:"input"};return(Y)=>{switch(Y.code){case"invalid_type":return`Input tidak valid: diharapkan ${Y.expected}, diterima ${X(Y.input)}`;case"invalid_value":if(Y.values.length===1)return`Input tidak valid: diharapkan ${d(Y.values[0])}`;return`Pilihan tidak valid: diharapkan salah satu dari ${h(Y.values,"|")}`;case"too_big":{let $=Y.inclusive?"<=":"<",K=W(Y.origin);if(K)return`Terlalu besar: diharapkan ${Y.origin??"value"} memiliki ${$}${Y.maximum.toString()} ${K.unit??"elemen"}`;return`Terlalu besar: diharapkan ${Y.origin??"value"} menjadi ${$}${Y.maximum.toString()}`}case"too_small":{let $=Y.inclusive?">=":">",K=W(Y.origin);if(K)return`Terlalu kecil: diharapkan ${Y.origin} memiliki ${$}${Y.minimum.toString()} ${K.unit}`;return`Terlalu kecil: diharapkan ${Y.origin} menjadi ${$}${Y.minimum.toString()}`}case"invalid_format":{let $=Y;if($.format==="starts_with")return`String tidak valid: harus dimulai dengan "${$.prefix}"`;if($.format==="ends_with")return`String tidak valid: harus berakhir dengan "${$.suffix}"`;if($.format==="includes")return`String tidak valid: harus menyertakan "${$.includes}"`;if($.format==="regex")return`String tidak valid: harus sesuai pola ${$.pattern}`;return`${G[$.format]??Y.format} tidak valid`}case"not_multiple_of":return`Angka tidak valid: harus kelipatan dari ${Y.divisor}`;case"unrecognized_keys":return`Kunci tidak dikenali ${Y.keys.length>1?"s":""}: ${h(Y.keys,", ")}`;case"invalid_key":return`Kunci tidak valid di ${Y.origin}`;case"invalid_union":return"Input tidak valid";case"invalid_element":return`Nilai tidak valid di ${Y.origin}`;default:return"Input tidak valid"}}};var Q2=M(()=>{K6()});function VL(){return{localeError:Ix()}}var Ex=(J)=>{let W=typeof J;switch(W){case"number":return Number.isNaN(J)?"NaN":"n\xFAmer";case"object":{if(Array.isArray(J))return"fylki";if(J===null)return"null";if(Object.getPrototypeOf(J)!==Object.prototype&&J.constructor)return J.constructor.name}}return W},Ix=()=>{let J={string:{unit:"stafi",verb:"a\xF0 hafa"},file:{unit:"b\xE6ti",verb:"a\xF0 hafa"},array:{unit:"hluti",verb:"a\xF0 hafa"},set:{unit:"hluti",verb:"a\xF0 hafa"}};function W(G){return J[G]??null}let X={regex:"gildi",email:"netfang",url:"vefsl\xF3\xF0",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO dagsetning og t\xEDmi",date:"ISO dagsetning",time:"ISO t\xEDmi",duration:"ISO t\xEDmalengd",ipv4:"IPv4 address",ipv6:"IPv6 address",cidrv4:"IPv4 range",cidrv6:"IPv6 range",base64:"base64-encoded strengur",base64url:"base64url-encoded strengur",json_string:"JSON strengur",e164:"E.164 t\xF6lugildi",jwt:"JWT",template_literal:"gildi"};return(G)=>{switch(G.code){case"invalid_type":return`Rangt gildi: \xDE\xFA sl\xF3st inn ${Ex(G.input)} \xFEar sem \xE1 a\xF0 vera ${G.expected}`;case"invalid_value":if(G.values.length===1)return`Rangt gildi: gert r\xE1\xF0 fyrir ${d(G.values[0])}`;return`\xD3gilt val: m\xE1 vera eitt af eftirfarandi ${h(G.values,"|")}`;case"too_big":{let Y=G.inclusive?"<=":"<",$=W(G.origin);if($)return`Of st\xF3rt: gert er r\xE1\xF0 fyrir a\xF0 ${G.origin??"gildi"} hafi ${Y}${G.maximum.toString()} ${$.unit??"hluti"}`;return`Of st\xF3rt: gert er r\xE1\xF0 fyrir a\xF0 ${G.origin??"gildi"} s\xE9 ${Y}${G.maximum.toString()}`}case"too_small":{let Y=G.inclusive?">=":">",$=W(G.origin);if($)return`Of l\xEDti\xF0: gert er r\xE1\xF0 fyrir a\xF0 ${G.origin} hafi ${Y}${G.minimum.toString()} ${$.unit}`;return`Of l\xEDti\xF0: gert er r\xE1\xF0 fyrir a\xF0 ${G.origin} s\xE9 ${Y}${G.minimum.toString()}`}case"invalid_format":{let Y=G;if(Y.format==="starts_with")return`\xD3gildur strengur: ver\xF0ur a\xF0 byrja \xE1 "${Y.prefix}"`;if(Y.format==="ends_with")return`\xD3gildur strengur: ver\xF0ur a\xF0 enda \xE1 "${Y.suffix}"`;if(Y.format==="includes")return`\xD3gildur strengur: ver\xF0ur a\xF0 innihalda "${Y.includes}"`;if(Y.format==="regex")return`\xD3gildur strengur: ver\xF0ur a\xF0 fylgja mynstri ${Y.pattern}`;return`Rangt ${X[Y.format]??G.format}`}case"not_multiple_of":return`R\xF6ng tala: ver\xF0ur a\xF0 vera margfeldi af ${G.divisor}`;case"unrecognized_keys":return`\xD3\xFEekkt ${G.keys.length>1?"ir lyklar":"ur lykill"}: ${h(G.keys,", ")}`;case"invalid_key":return`Rangur lykill \xED ${G.origin}`;case"invalid_union":return"Rangt gildi";case"invalid_element":return`Rangt gildi \xED ${G.origin}`;default:return"Rangt gildi"}}};var Z2=M(()=>{K6()});function DL(){return{localeError:Rx()}}var Rx=()=>{let J={string:{unit:"caratteri",verb:"avere"},file:{unit:"byte",verb:"avere"},array:{unit:"elementi",verb:"avere"},set:{unit:"elementi",verb:"avere"}};function W(Y){return J[Y]??null}let X=(Y)=>{let $=typeof Y;switch($){case"number":return Number.isNaN(Y)?"NaN":"numero";case"object":{if(Array.isArray(Y))return"vettore";if(Y===null)return"null";if(Object.getPrototypeOf(Y)!==Object.prototype&&Y.constructor)return Y.constructor.name}}return $},G={regex:"input",email:"indirizzo email",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"data e ora ISO",date:"data ISO",time:"ora ISO",duration:"durata ISO",ipv4:"indirizzo IPv4",ipv6:"indirizzo IPv6",cidrv4:"intervallo IPv4",cidrv6:"intervallo IPv6",base64:"stringa codificata in base64",base64url:"URL codificata in base64",json_string:"stringa JSON",e164:"numero E.164",jwt:"JWT",template_literal:"input"};return(Y)=>{switch(Y.code){case"invalid_type":return`Input non valido: atteso ${Y.expected}, ricevuto ${X(Y.input)}`;case"invalid_value":if(Y.values.length===1)return`Input non valido: atteso ${d(Y.values[0])}`;return`Opzione non valida: atteso uno tra ${h(Y.values,"|")}`;case"too_big":{let $=Y.inclusive?"<=":"<",K=W(Y.origin);if(K)return`Troppo grande: ${Y.origin??"valore"} deve avere ${$}${Y.maximum.toString()} ${K.unit??"elementi"}`;return`Troppo grande: ${Y.origin??"valore"} deve essere ${$}${Y.maximum.toString()}`}case"too_small":{let $=Y.inclusive?">=":">",K=W(Y.origin);if(K)return`Troppo piccolo: ${Y.origin} deve avere ${$}${Y.minimum.toString()} ${K.unit}`;return`Troppo piccolo: ${Y.origin} deve essere ${$}${Y.minimum.toString()}`}case"invalid_format":{let $=Y;if($.format==="starts_with")return`Stringa non valida: deve iniziare con "${$.prefix}"`;if($.format==="ends_with")return`Stringa non valida: deve terminare con "${$.suffix}"`;if($.format==="includes")return`Stringa non valida: deve includere "${$.includes}"`;if($.format==="regex")return`Stringa non valida: deve corrispondere al pattern ${$.pattern}`;return`Invalid ${G[$.format]??Y.format}`}case"not_multiple_of":return`Numero non valido: deve essere un multiplo di ${Y.divisor}`;case"unrecognized_keys":return`Chiav${Y.keys.length>1?"i":"e"} non riconosciut${Y.keys.length>1?"e":"a"}: ${h(Y.keys,", ")}`;case"invalid_key":return`Chiave non valida in ${Y.origin}`;case"invalid_union":return"Input non valido";case"invalid_element":return`Valore non valido in ${Y.origin}`;default:return"Input non valido"}}};var L2=M(()=>{K6()});function ML(){return{localeError:Cx()}}var Cx=()=>{let J={string:{unit:"\u6587\u5B57",verb:"\u3067\u3042\u308B"},file:{unit:"\u30D0\u30A4\u30C8",verb:"\u3067\u3042\u308B"},array:{unit:"\u8981\u7D20",verb:"\u3067\u3042\u308B"},set:{unit:"\u8981\u7D20",verb:"\u3067\u3042\u308B"}};function W(Y){return J[Y]??null}let X=(Y)=>{let $=typeof Y;switch($){case"number":return Number.isNaN(Y)?"NaN":"\u6570\u5024";case"object":{if(Array.isArray(Y))return"\u914D\u5217";if(Y===null)return"null";if(Object.getPrototypeOf(Y)!==Object.prototype&&Y.constructor)return Y.constructor.name}}return $},G={regex:"\u5165\u529B\u5024",email:"\u30E1\u30FC\u30EB\u30A2\u30C9\u30EC\u30B9",url:"URL",emoji:"\u7D75\u6587\u5B57",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO\u65E5\u6642",date:"ISO\u65E5\u4ED8",time:"ISO\u6642\u523B",duration:"ISO\u671F\u9593",ipv4:"IPv4\u30A2\u30C9\u30EC\u30B9",ipv6:"IPv6\u30A2\u30C9\u30EC\u30B9",cidrv4:"IPv4\u7BC4\u56F2",cidrv6:"IPv6\u7BC4\u56F2",base64:"base64\u30A8\u30F3\u30B3\u30FC\u30C9\u6587\u5B57\u5217",base64url:"base64url\u30A8\u30F3\u30B3\u30FC\u30C9\u6587\u5B57\u5217",json_string:"JSON\u6587\u5B57\u5217",e164:"E.164\u756A\u53F7",jwt:"JWT",template_literal:"\u5165\u529B\u5024"};return(Y)=>{switch(Y.code){case"invalid_type":return`\u7121\u52B9\u306A\u5165\u529B: ${Y.expected}\u304C\u671F\u5F85\u3055\u308C\u307E\u3057\u305F\u304C\u3001${X(Y.input)}\u304C\u5165\u529B\u3055\u308C\u307E\u3057\u305F`;case"invalid_value":if(Y.values.length===1)return`\u7121\u52B9\u306A\u5165\u529B: ${d(Y.values[0])}\u304C\u671F\u5F85\u3055\u308C\u307E\u3057\u305F`;return`\u7121\u52B9\u306A\u9078\u629E: ${h(Y.values,"\u3001")}\u306E\u3044\u305A\u308C\u304B\u3067\u3042\u308B\u5FC5\u8981\u304C\u3042\u308A\u307E\u3059`;case"too_big":{let $=Y.inclusive?"\u4EE5\u4E0B\u3067\u3042\u308B":"\u3088\u308A\u5C0F\u3055\u3044",K=W(Y.origin);if(K)return`\u5927\u304D\u3059\u304E\u308B\u5024: ${Y.origin??"\u5024"}\u306F${Y.maximum.toString()}${K.unit??"\u8981\u7D20"}${$}\u5FC5\u8981\u304C\u3042\u308A\u307E\u3059`;return`\u5927\u304D\u3059\u304E\u308B\u5024: ${Y.origin??"\u5024"}\u306F${Y.maximum.toString()}${$}\u5FC5\u8981\u304C\u3042\u308A\u307E\u3059`}case"too_small":{let $=Y.inclusive?"\u4EE5\u4E0A\u3067\u3042\u308B":"\u3088\u308A\u5927\u304D\u3044",K=W(Y.origin);if(K)return`\u5C0F\u3055\u3059\u304E\u308B\u5024: ${Y.origin}\u306F${Y.minimum.toString()}${K.unit}${$}\u5FC5\u8981\u304C\u3042\u308A\u307E\u3059`;return`\u5C0F\u3055\u3059\u304E\u308B\u5024: ${Y.origin}\u306F${Y.minimum.toString()}${$}\u5FC5\u8981\u304C\u3042\u308A\u307E\u3059`}case"invalid_format":{let $=Y;if($.format==="starts_with")return`\u7121\u52B9\u306A\u6587\u5B57\u5217: "${$.prefix}"\u3067\u59CB\u307E\u308B\u5FC5\u8981\u304C\u3042\u308A\u307E\u3059`;if($.format==="ends_with")return`\u7121\u52B9\u306A\u6587\u5B57\u5217: "${$.suffix}"\u3067\u7D42\u308F\u308B\u5FC5\u8981\u304C\u3042\u308A\u307E\u3059`;if($.format==="includes")return`\u7121\u52B9\u306A\u6587\u5B57\u5217: "${$.includes}"\u3092\u542B\u3080\u5FC5\u8981\u304C\u3042\u308A\u307E\u3059`;if($.format==="regex")return`\u7121\u52B9\u306A\u6587\u5B57\u5217: \u30D1\u30BF\u30FC\u30F3${$.pattern}\u306B\u4E00\u81F4\u3059\u308B\u5FC5\u8981\u304C\u3042\u308A\u307E\u3059`;return`\u7121\u52B9\u306A${G[$.format]??Y.format}`}case"not_multiple_of":return`\u7121\u52B9\u306A\u6570\u5024: ${Y.divisor}\u306E\u500D\u6570\u3067\u3042\u308B\u5FC5\u8981\u304C\u3042\u308A\u307E\u3059`;case"unrecognized_keys":return`\u8A8D\u8B58\u3055\u308C\u3066\u3044\u306A\u3044\u30AD\u30FC${Y.keys.length>1?"\u7FA4":""}: ${h(Y.keys,"\u3001")}`;case"invalid_key":return`${Y.origin}\u5185\u306E\u7121\u52B9\u306A\u30AD\u30FC`;case"invalid_union":return"\u7121\u52B9\u306A\u5165\u529B";case"invalid_element":return`${Y.origin}\u5185\u306E\u7121\u52B9\u306A\u5024`;default:return"\u7121\u52B9\u306A\u5165\u529B"}}};var V2=M(()=>{K6()});function OL(){return{localeError:kx()}}var bx=(J)=>{let W=typeof J;switch(W){case"number":return Number.isNaN(J)?"NaN":"\u10E0\u10D8\u10EA\u10EE\u10D5\u10D8";case"object":{if(Array.isArray(J))return"\u10DB\u10D0\u10E1\u10D8\u10D5\u10D8";if(J===null)return"null";if(Object.getPrototypeOf(J)!==Object.prototype&&J.constructor)return J.constructor.name}}return{string:"\u10E1\u10E2\u10E0\u10D8\u10DC\u10D2\u10D8",boolean:"\u10D1\u10E3\u10DA\u10D4\u10D0\u10DC\u10D8",undefined:"undefined",bigint:"bigint",symbol:"symbol",function:"\u10E4\u10E3\u10DC\u10E5\u10EA\u10D8\u10D0"}[W]??W},kx=()=>{let J={string:{unit:"\u10E1\u10D8\u10DB\u10D1\u10DD\u10DA\u10DD",verb:"\u10E3\u10DC\u10D3\u10D0 \u10E8\u10D4\u10D8\u10EA\u10D0\u10D5\u10D3\u10D4\u10E1"},file:{unit:"\u10D1\u10D0\u10D8\u10E2\u10D8",verb:"\u10E3\u10DC\u10D3\u10D0 \u10E8\u10D4\u10D8\u10EA\u10D0\u10D5\u10D3\u10D4\u10E1"},array:{unit:"\u10D4\u10DA\u10D4\u10DB\u10D4\u10DC\u10E2\u10D8",verb:"\u10E3\u10DC\u10D3\u10D0 \u10E8\u10D4\u10D8\u10EA\u10D0\u10D5\u10D3\u10D4\u10E1"},set:{unit:"\u10D4\u10DA\u10D4\u10DB\u10D4\u10DC\u10E2\u10D8",verb:"\u10E3\u10DC\u10D3\u10D0 \u10E8\u10D4\u10D8\u10EA\u10D0\u10D5\u10D3\u10D4\u10E1"}};function W(G){return J[G]??null}let X={regex:"\u10E8\u10D4\u10E7\u10D5\u10D0\u10DC\u10D0",email:"\u10D4\u10DA-\u10E4\u10DD\u10E1\u10E2\u10D8\u10E1 \u10DB\u10D8\u10E1\u10D0\u10DB\u10D0\u10E0\u10D7\u10D8",url:"URL",emoji:"\u10D4\u10DB\u10DD\u10EF\u10D8",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"\u10D7\u10D0\u10E0\u10D8\u10E6\u10D8-\u10D3\u10E0\u10DD",date:"\u10D7\u10D0\u10E0\u10D8\u10E6\u10D8",time:"\u10D3\u10E0\u10DD",duration:"\u10EE\u10D0\u10DC\u10D2\u10E0\u10EB\u10DA\u10D8\u10D5\u10DD\u10D1\u10D0",ipv4:"IPv4 \u10DB\u10D8\u10E1\u10D0\u10DB\u10D0\u10E0\u10D7\u10D8",ipv6:"IPv6 \u10DB\u10D8\u10E1\u10D0\u10DB\u10D0\u10E0\u10D7\u10D8",cidrv4:"IPv4 \u10D3\u10D8\u10D0\u10DE\u10D0\u10D6\u10DD\u10DC\u10D8",cidrv6:"IPv6 \u10D3\u10D8\u10D0\u10DE\u10D0\u10D6\u10DD\u10DC\u10D8",base64:"base64-\u10D9\u10DD\u10D3\u10D8\u10E0\u10D4\u10D1\u10E3\u10DA\u10D8 \u10E1\u10E2\u10E0\u10D8\u10DC\u10D2\u10D8",base64url:"base64url-\u10D9\u10DD\u10D3\u10D8\u10E0\u10D4\u10D1\u10E3\u10DA\u10D8 \u10E1\u10E2\u10E0\u10D8\u10DC\u10D2\u10D8",json_string:"JSON \u10E1\u10E2\u10E0\u10D8\u10DC\u10D2\u10D8",e164:"E.164 \u10DC\u10DD\u10DB\u10D4\u10E0\u10D8",jwt:"JWT",template_literal:"\u10E8\u10D4\u10E7\u10D5\u10D0\u10DC\u10D0"};return(G)=>{switch(G.code){case"invalid_type":return`\u10D0\u10E0\u10D0\u10E1\u10EC\u10DD\u10E0\u10D8 \u10E8\u10D4\u10E7\u10D5\u10D0\u10DC\u10D0: \u10DB\u10DD\u10E1\u10D0\u10DA\u10DD\u10D3\u10DC\u10D4\u10DA\u10D8 ${G.expected}, \u10DB\u10D8\u10E6\u10D4\u10D1\u10E3\u10DA\u10D8 ${bx(G.input)}`;case"invalid_value":if(G.values.length===1)return`\u10D0\u10E0\u10D0\u10E1\u10EC\u10DD\u10E0\u10D8 \u10E8\u10D4\u10E7\u10D5\u10D0\u10DC\u10D0: \u10DB\u10DD\u10E1\u10D0\u10DA\u10DD\u10D3\u10DC\u10D4\u10DA\u10D8 ${d(G.values[0])}`;return`\u10D0\u10E0\u10D0\u10E1\u10EC\u10DD\u10E0\u10D8 \u10D5\u10D0\u10E0\u10D8\u10D0\u10DC\u10E2\u10D8: \u10DB\u10DD\u10E1\u10D0\u10DA\u10DD\u10D3\u10DC\u10D4\u10DA\u10D8\u10D0 \u10D4\u10E0\u10D7-\u10D4\u10E0\u10D7\u10D8 ${h(G.values,"|")}-\u10D3\u10D0\u10DC`;case"too_big":{let Y=G.inclusive?"<=":"<",$=W(G.origin);if($)return`\u10D6\u10D4\u10D3\u10DB\u10D4\u10E2\u10D0\u10D3 \u10D3\u10D8\u10D3\u10D8: \u10DB\u10DD\u10E1\u10D0\u10DA\u10DD\u10D3\u10DC\u10D4\u10DA\u10D8 ${G.origin??"\u10DB\u10DC\u10D8\u10E8\u10D5\u10DC\u10D4\u10DA\u10DD\u10D1\u10D0"} ${$.verb} ${Y}${G.maximum.toString()} ${$.unit}`;return`\u10D6\u10D4\u10D3\u10DB\u10D4\u10E2\u10D0\u10D3 \u10D3\u10D8\u10D3\u10D8: \u10DB\u10DD\u10E1\u10D0\u10DA\u10DD\u10D3\u10DC\u10D4\u10DA\u10D8 ${G.origin??"\u10DB\u10DC\u10D8\u10E8\u10D5\u10DC\u10D4\u10DA\u10DD\u10D1\u10D0"} \u10D8\u10E7\u10DD\u10E1 ${Y}${G.maximum.toString()}`}case"too_small":{let Y=G.inclusive?">=":">",$=W(G.origin);if($)return`\u10D6\u10D4\u10D3\u10DB\u10D4\u10E2\u10D0\u10D3 \u10DE\u10D0\u10E2\u10D0\u10E0\u10D0: \u10DB\u10DD\u10E1\u10D0\u10DA\u10DD\u10D3\u10DC\u10D4\u10DA\u10D8 ${G.origin} ${$.verb} ${Y}${G.minimum.toString()} ${$.unit}`;return`\u10D6\u10D4\u10D3\u10DB\u10D4\u10E2\u10D0\u10D3 \u10DE\u10D0\u10E2\u10D0\u10E0\u10D0: \u10DB\u10DD\u10E1\u10D0\u10DA\u10DD\u10D3\u10DC\u10D4\u10DA\u10D8 ${G.origin} \u10D8\u10E7\u10DD\u10E1 ${Y}${G.minimum.toString()}`}case"invalid_format":{let Y=G;if(Y.format==="starts_with")return`\u10D0\u10E0\u10D0\u10E1\u10EC\u10DD\u10E0\u10D8 \u10E1\u10E2\u10E0\u10D8\u10DC\u10D2\u10D8: \u10E3\u10DC\u10D3\u10D0 \u10D8\u10EC\u10E7\u10D4\u10D1\u10DD\u10D3\u10D4\u10E1 "${Y.prefix}"-\u10D8\u10D7`;if(Y.format==="ends_with")return`\u10D0\u10E0\u10D0\u10E1\u10EC\u10DD\u10E0\u10D8 \u10E1\u10E2\u10E0\u10D8\u10DC\u10D2\u10D8: \u10E3\u10DC\u10D3\u10D0 \u10DB\u10D7\u10D0\u10D5\u10E0\u10D3\u10D4\u10D1\u10DD\u10D3\u10D4\u10E1 "${Y.suffix}"-\u10D8\u10D7`;if(Y.format==="includes")return`\u10D0\u10E0\u10D0\u10E1\u10EC\u10DD\u10E0\u10D8 \u10E1\u10E2\u10E0\u10D8\u10DC\u10D2\u10D8: \u10E3\u10DC\u10D3\u10D0 \u10E8\u10D4\u10D8\u10EA\u10D0\u10D5\u10D3\u10D4\u10E1 "${Y.includes}"-\u10E1`;if(Y.format==="regex")return`\u10D0\u10E0\u10D0\u10E1\u10EC\u10DD\u10E0\u10D8 \u10E1\u10E2\u10E0\u10D8\u10DC\u10D2\u10D8: \u10E3\u10DC\u10D3\u10D0 \u10E8\u10D4\u10D4\u10E1\u10D0\u10D1\u10D0\u10DB\u10D4\u10D1\u10DD\u10D3\u10D4\u10E1 \u10E8\u10D0\u10D1\u10DA\u10DD\u10DC\u10E1 ${Y.pattern}`;return`\u10D0\u10E0\u10D0\u10E1\u10EC\u10DD\u10E0\u10D8 ${X[Y.format]??G.format}`}case"not_multiple_of":return`\u10D0\u10E0\u10D0\u10E1\u10EC\u10DD\u10E0\u10D8 \u10E0\u10D8\u10EA\u10EE\u10D5\u10D8: \u10E3\u10DC\u10D3\u10D0 \u10D8\u10E7\u10DD\u10E1 ${G.divisor}-\u10D8\u10E1 \u10EF\u10D4\u10E0\u10D0\u10D3\u10D8`;case"unrecognized_keys":return`\u10E3\u10EA\u10DC\u10DD\u10D1\u10D8 \u10D2\u10D0\u10E1\u10D0\u10E6\u10D4\u10D1${G.keys.length>1?"\u10D4\u10D1\u10D8":"\u10D8"}: ${h(G.keys,", ")}`;case"invalid_key":return`\u10D0\u10E0\u10D0\u10E1\u10EC\u10DD\u10E0\u10D8 \u10D2\u10D0\u10E1\u10D0\u10E6\u10D4\u10D1\u10D8 ${G.origin}-\u10E8\u10D8`;case"invalid_union":return"\u10D0\u10E0\u10D0\u10E1\u10EC\u10DD\u10E0\u10D8 \u10E8\u10D4\u10E7\u10D5\u10D0\u10DC\u10D0";case"invalid_element":return`\u10D0\u10E0\u10D0\u10E1\u10EC\u10DD\u10E0\u10D8 \u10DB\u10DC\u10D8\u10E8\u10D5\u10DC\u10D4\u10DA\u10DD\u10D1\u10D0 ${G.origin}-\u10E8\u10D8`;default:return"\u10D0\u10E0\u10D0\u10E1\u10EC\u10DD\u10E0\u10D8 \u10E8\u10D4\u10E7\u10D5\u10D0\u10DC\u10D0"}}};var D2=M(()=>{K6()});function F$(){return{localeError:hx()}}var hx=()=>{let J={string:{unit:"\u178F\u17BD\u17A2\u1780\u17D2\u179F\u179A",verb:"\u1782\u17BD\u179A\u1798\u17B6\u1793"},file:{unit:"\u1794\u17C3",verb:"\u1782\u17BD\u179A\u1798\u17B6\u1793"},array:{unit:"\u1792\u17B6\u178F\u17BB",verb:"\u1782\u17BD\u179A\u1798\u17B6\u1793"},set:{unit:"\u1792\u17B6\u178F\u17BB",verb:"\u1782\u17BD\u179A\u1798\u17B6\u1793"}};function W(Y){return J[Y]??null}let X=(Y)=>{let $=typeof Y;switch($){case"number":return Number.isNaN(Y)?"\u1798\u17B7\u1793\u1798\u17C2\u1793\u1787\u17B6\u179B\u17C1\u1781 (NaN)":"\u179B\u17C1\u1781";case"object":{if(Array.isArray(Y))return"\u17A2\u17B6\u179A\u17C1 (Array)";if(Y===null)return"\u1782\u17D2\u1798\u17B6\u1793\u178F\u1798\u17D2\u179B\u17C3 (null)";if(Object.getPrototypeOf(Y)!==Object.prototype&&Y.constructor)return Y.constructor.name}}return $},G={regex:"\u1791\u17B7\u1793\u17D2\u1793\u1793\u17D0\u1799\u1794\u1789\u17D2\u1785\u17BC\u179B",email:"\u17A2\u17B6\u179F\u1799\u178A\u17D2\u178B\u17B6\u1793\u17A2\u17CA\u17B8\u1798\u17C2\u179B",url:"URL",emoji:"\u179F\u1789\u17D2\u1789\u17B6\u17A2\u17B6\u179A\u1798\u17D2\u1798\u178E\u17CD",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"\u1780\u17B6\u179B\u1794\u179A\u17B7\u1785\u17D2\u1786\u17C1\u1791 \u1793\u17B7\u1784\u1798\u17C9\u17C4\u1784 ISO",date:"\u1780\u17B6\u179B\u1794\u179A\u17B7\u1785\u17D2\u1786\u17C1\u1791 ISO",time:"\u1798\u17C9\u17C4\u1784 ISO",duration:"\u179A\u1799\u17C8\u1796\u17C1\u179B ISO",ipv4:"\u17A2\u17B6\u179F\u1799\u178A\u17D2\u178B\u17B6\u1793 IPv4",ipv6:"\u17A2\u17B6\u179F\u1799\u178A\u17D2\u178B\u17B6\u1793 IPv6",cidrv4:"\u178A\u17C2\u1793\u17A2\u17B6\u179F\u1799\u178A\u17D2\u178B\u17B6\u1793 IPv4",cidrv6:"\u178A\u17C2\u1793\u17A2\u17B6\u179F\u1799\u178A\u17D2\u178B\u17B6\u1793 IPv6",base64:"\u1781\u17D2\u179F\u17C2\u17A2\u1780\u17D2\u179F\u179A\u17A2\u17CA\u17B7\u1780\u17BC\u178A base64",base64url:"\u1781\u17D2\u179F\u17C2\u17A2\u1780\u17D2\u179F\u179A\u17A2\u17CA\u17B7\u1780\u17BC\u178A base64url",json_string:"\u1781\u17D2\u179F\u17C2\u17A2\u1780\u17D2\u179F\u179A JSON",e164:"\u179B\u17C1\u1781 E.164",jwt:"JWT",template_literal:"\u1791\u17B7\u1793\u17D2\u1793\u1793\u17D0\u1799\u1794\u1789\u17D2\u1785\u17BC\u179B"};return(Y)=>{switch(Y.code){case"invalid_type":return`\u1791\u17B7\u1793\u17D2\u1793\u1793\u17D0\u1799\u1794\u1789\u17D2\u1785\u17BC\u179B\u1798\u17B7\u1793\u178F\u17D2\u179A\u17B9\u1798\u178F\u17D2\u179A\u17BC\u179C\u17D6 \u178F\u17D2\u179A\u17BC\u179C\u1780\u17B6\u179A ${Y.expected} \u1794\u17C9\u17BB\u1793\u17D2\u178F\u17C2\u1791\u1791\u17BD\u179B\u1794\u17B6\u1793 ${X(Y.input)}`;case"invalid_value":if(Y.values.length===1)return`\u1791\u17B7\u1793\u17D2\u1793\u1793\u17D0\u1799\u1794\u1789\u17D2\u1785\u17BC\u179B\u1798\u17B7\u1793\u178F\u17D2\u179A\u17B9\u1798\u178F\u17D2\u179A\u17BC\u179C\u17D6 \u178F\u17D2\u179A\u17BC\u179C\u1780\u17B6\u179A ${d(Y.values[0])}`;return`\u1787\u1798\u17D2\u179A\u17BE\u179F\u1798\u17B7\u1793\u178F\u17D2\u179A\u17B9\u1798\u178F\u17D2\u179A\u17BC\u179C\u17D6 \u178F\u17D2\u179A\u17BC\u179C\u1787\u17B6\u1798\u17BD\u1799\u1780\u17D2\u1793\u17BB\u1784\u1785\u17C6\u178E\u17C4\u1798 ${h(Y.values,"|")}`;case"too_big":{let $=Y.inclusive?"<=":"<",K=W(Y.origin);if(K)return`\u1792\u17C6\u1796\u17C1\u1780\u17D6 \u178F\u17D2\u179A\u17BC\u179C\u1780\u17B6\u179A ${Y.origin??"\u178F\u1798\u17D2\u179B\u17C3"} ${$} ${Y.maximum.toString()} ${K.unit??"\u1792\u17B6\u178F\u17BB"}`;return`\u1792\u17C6\u1796\u17C1\u1780\u17D6 \u178F\u17D2\u179A\u17BC\u179C\u1780\u17B6\u179A ${Y.origin??"\u178F\u1798\u17D2\u179B\u17C3"} ${$} ${Y.maximum.toString()}`}case"too_small":{let $=Y.inclusive?">=":">",K=W(Y.origin);if(K)return`\u178F\u17BC\u1785\u1796\u17C1\u1780\u17D6 \u178F\u17D2\u179A\u17BC\u179C\u1780\u17B6\u179A ${Y.origin} ${$} ${Y.minimum.toString()} ${K.unit}`;return`\u178F\u17BC\u1785\u1796\u17C1\u1780\u17D6 \u178F\u17D2\u179A\u17BC\u179C\u1780\u17B6\u179A ${Y.origin} ${$} ${Y.minimum.toString()}`}case"invalid_format":{let $=Y;if($.format==="starts_with")return`\u1781\u17D2\u179F\u17C2\u17A2\u1780\u17D2\u179F\u179A\u1798\u17B7\u1793\u178F\u17D2\u179A\u17B9\u1798\u178F\u17D2\u179A\u17BC\u179C\u17D6 \u178F\u17D2\u179A\u17BC\u179C\u1785\u17B6\u1794\u17CB\u1795\u17D2\u178F\u17BE\u1798\u178A\u17C4\u1799 "${$.prefix}"`;if($.format==="ends_with")return`\u1781\u17D2\u179F\u17C2\u17A2\u1780\u17D2\u179F\u179A\u1798\u17B7\u1793\u178F\u17D2\u179A\u17B9\u1798\u178F\u17D2\u179A\u17BC\u179C\u17D6 \u178F\u17D2\u179A\u17BC\u179C\u1794\u1789\u17D2\u1785\u1794\u17CB\u178A\u17C4\u1799 "${$.suffix}"`;if($.format==="includes")return`\u1781\u17D2\u179F\u17C2\u17A2\u1780\u17D2\u179F\u179A\u1798\u17B7\u1793\u178F\u17D2\u179A\u17B9\u1798\u178F\u17D2\u179A\u17BC\u179C\u17D6 \u178F\u17D2\u179A\u17BC\u179C\u1798\u17B6\u1793 "${$.includes}"`;if($.format==="regex")return`\u1781\u17D2\u179F\u17C2\u17A2\u1780\u17D2\u179F\u179A\u1798\u17B7\u1793\u178F\u17D2\u179A\u17B9\u1798\u178F\u17D2\u179A\u17BC\u179C\u17D6 \u178F\u17D2\u179A\u17BC\u179C\u178F\u17C2\u1795\u17D2\u1782\u17BC\u1795\u17D2\u1782\u1784\u1793\u17B9\u1784\u1791\u1798\u17D2\u179A\u1784\u17CB\u178A\u17C2\u179B\u1794\u17B6\u1793\u1780\u17C6\u178E\u178F\u17CB ${$.pattern}`;return`\u1798\u17B7\u1793\u178F\u17D2\u179A\u17B9\u1798\u178F\u17D2\u179A\u17BC\u179C\u17D6 ${G[$.format]??Y.format}`}case"not_multiple_of":return`\u179B\u17C1\u1781\u1798\u17B7\u1793\u178F\u17D2\u179A\u17B9\u1798\u178F\u17D2\u179A\u17BC\u179C\u17D6 \u178F\u17D2\u179A\u17BC\u179C\u178F\u17C2\u1787\u17B6\u1796\u17A0\u17BB\u1782\u17BB\u178E\u1793\u17C3 ${Y.divisor}`;case"unrecognized_keys":return`\u179A\u1780\u1783\u17BE\u1789\u179F\u17C4\u1798\u17B7\u1793\u179F\u17D2\u1782\u17B6\u179B\u17CB\u17D6 ${h(Y.keys,", ")}`;case"invalid_key":return`\u179F\u17C4\u1798\u17B7\u1793\u178F\u17D2\u179A\u17B9\u1798\u178F\u17D2\u179A\u17BC\u179C\u1793\u17C5\u1780\u17D2\u1793\u17BB\u1784 ${Y.origin}`;case"invalid_union":return"\u1791\u17B7\u1793\u17D2\u1793\u1793\u17D0\u1799\u1798\u17B7\u1793\u178F\u17D2\u179A\u17B9\u1798\u178F\u17D2\u179A\u17BC\u179C";case"invalid_element":return`\u1791\u17B7\u1793\u17D2\u1793\u1793\u17D0\u1799\u1798\u17B7\u1793\u178F\u17D2\u179A\u17B9\u1798\u178F\u17D2\u179A\u17BC\u179C\u1793\u17C5\u1780\u17D2\u1793\u17BB\u1784 ${Y.origin}`;default:return"\u1791\u17B7\u1793\u17D2\u1793\u1793\u17D0\u1799\u1798\u17B7\u1793\u178F\u17D2\u179A\u17B9\u1798\u178F\u17D2\u179A\u17BC\u179C"}}};var PL=M(()=>{K6()});function vL(){return F$()}var M2=M(()=>{PL()});function jL(){return{localeError:gx()}}var gx=()=>{let J={string:{unit:"\uBB38\uC790",verb:"to have"},file:{unit:"\uBC14\uC774\uD2B8",verb:"to have"},array:{unit:"\uAC1C",verb:"to have"},set:{unit:"\uAC1C",verb:"to have"}};function W(Y){return J[Y]??null}let X=(Y)=>{let $=typeof Y;switch($){case"number":return Number.isNaN(Y)?"NaN":"number";case"object":{if(Array.isArray(Y))return"array";if(Y===null)return"null";if(Object.getPrototypeOf(Y)!==Object.prototype&&Y.constructor)return Y.constructor.name}}return $},G={regex:"\uC785\uB825",email:"\uC774\uBA54\uC77C \uC8FC\uC18C",url:"URL",emoji:"\uC774\uBAA8\uC9C0",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO \uB0A0\uC9DC\uC2DC\uAC04",date:"ISO \uB0A0\uC9DC",time:"ISO \uC2DC\uAC04",duration:"ISO \uAE30\uAC04",ipv4:"IPv4 \uC8FC\uC18C",ipv6:"IPv6 \uC8FC\uC18C",cidrv4:"IPv4 \uBC94\uC704",cidrv6:"IPv6 \uBC94\uC704",base64:"base64 \uC778\uCF54\uB529 \uBB38\uC790\uC5F4",base64url:"base64url \uC778\uCF54\uB529 \uBB38\uC790\uC5F4",json_string:"JSON \uBB38\uC790\uC5F4",e164:"E.164 \uBC88\uD638",jwt:"JWT",template_literal:"\uC785\uB825"};return(Y)=>{switch(Y.code){case"invalid_type":return`\uC798\uBABB\uB41C \uC785\uB825: \uC608\uC0C1 \uD0C0\uC785\uC740 ${Y.expected}, \uBC1B\uC740 \uD0C0\uC785\uC740 ${X(Y.input)}\uC785\uB2C8\uB2E4`;case"invalid_value":if(Y.values.length===1)return`\uC798\uBABB\uB41C \uC785\uB825: \uAC12\uC740 ${d(Y.values[0])} \uC774\uC5B4\uC57C \uD569\uB2C8\uB2E4`;return`\uC798\uBABB\uB41C \uC635\uC158: ${h(Y.values,"\uB610\uB294 ")} \uC911 \uD558\uB098\uC5EC\uC57C \uD569\uB2C8\uB2E4`;case"too_big":{let $=Y.inclusive?"\uC774\uD558":"\uBBF8\uB9CC",K=$==="\uBBF8\uB9CC"?"\uC774\uC5B4\uC57C \uD569\uB2C8\uB2E4":"\uC5EC\uC57C \uD569\uB2C8\uB2E4",w=W(Y.origin),H=w?.unit??"\uC694\uC18C";if(w)return`${Y.origin??"\uAC12"}\uC774 \uB108\uBB34 \uD07D\uB2C8\uB2E4: ${Y.maximum.toString()}${H} ${$}${K}`;return`${Y.origin??"\uAC12"}\uC774 \uB108\uBB34 \uD07D\uB2C8\uB2E4: ${Y.maximum.toString()} ${$}${K}`}case"too_small":{let $=Y.inclusive?"\uC774\uC0C1":"\uCD08\uACFC",K=$==="\uC774\uC0C1"?"\uC774\uC5B4\uC57C \uD569\uB2C8\uB2E4":"\uC5EC\uC57C \uD569\uB2C8\uB2E4",w=W(Y.origin),H=w?.unit??"\uC694\uC18C";if(w)return`${Y.origin??"\uAC12"}\uC774 \uB108\uBB34 \uC791\uC2B5\uB2C8\uB2E4: ${Y.minimum.toString()}${H} ${$}${K}`;return`${Y.origin??"\uAC12"}\uC774 \uB108\uBB34 \uC791\uC2B5\uB2C8\uB2E4: ${Y.minimum.toString()} ${$}${K}`}case"invalid_format":{let $=Y;if($.format==="starts_with")return`\uC798\uBABB\uB41C \uBB38\uC790\uC5F4: "${$.prefix}"(\uC73C)\uB85C \uC2DC\uC791\uD574\uC57C \uD569\uB2C8\uB2E4`;if($.format==="ends_with")return`\uC798\uBABB\uB41C \uBB38\uC790\uC5F4: "${$.suffix}"(\uC73C)\uB85C \uB05D\uB098\uC57C \uD569\uB2C8\uB2E4`;if($.format==="includes")return`\uC798\uBABB\uB41C \uBB38\uC790\uC5F4: "${$.includes}"\uC744(\uB97C) \uD3EC\uD568\uD574\uC57C \uD569\uB2C8\uB2E4`;if($.format==="regex")return`\uC798\uBABB\uB41C \uBB38\uC790\uC5F4: \uC815\uADDC\uC2DD ${$.pattern} \uD328\uD134\uACFC \uC77C\uCE58\uD574\uC57C \uD569\uB2C8\uB2E4`;return`\uC798\uBABB\uB41C ${G[$.format]??Y.format}`}case"not_multiple_of":return`\uC798\uBABB\uB41C \uC22B\uC790: ${Y.divisor}\uC758 \uBC30\uC218\uC5EC\uC57C \uD569\uB2C8\uB2E4`;case"unrecognized_keys":return`\uC778\uC2DD\uD560 \uC218 \uC5C6\uB294 \uD0A4: ${h(Y.keys,", ")}`;case"invalid_key":return`\uC798\uBABB\uB41C \uD0A4: ${Y.origin}`;case"invalid_union":return"\uC798\uBABB\uB41C \uC785\uB825";case"invalid_element":return`\uC798\uBABB\uB41C \uAC12: ${Y.origin}`;default:return"\uC798\uBABB\uB41C \uC785\uB825"}}};var O2=M(()=>{K6()});function P2(J){let W=Math.abs(J),X=W%10,G=W%100;if(G>=11&&G<=19||X===0)return"many";if(X===1)return"one";return"few"}function SL(){return{localeError:fx()}}var mx=(J)=>{return Q$(typeof J,J)},Q$=(J,W=void 0)=>{switch(J){case"number":return Number.isNaN(W)?"NaN":"skai\u010Dius";case"bigint":return"sveikasis skai\u010Dius";case"string":return"eilut\u0117";case"boolean":return"login\u0117 reik\u0161m\u0117";case"undefined":case"void":return"neapibr\u0117\u017Eta reik\u0161m\u0117";case"function":return"funkcija";case"symbol":return"simbolis";case"object":{if(W===void 0)return"ne\u017Einomas objektas";if(W===null)return"nulin\u0117 reik\u0161m\u0117";if(Array.isArray(W))return"masyvas";if(Object.getPrototypeOf(W)!==Object.prototype&&W.constructor)return W.constructor.name;return"objektas"}case"null":return"nulin\u0117 reik\u0161m\u0117"}return J},U$=(J)=>{return J.charAt(0).toUpperCase()+J.slice(1)},fx=()=>{let J={string:{unit:{one:"simbolis",few:"simboliai",many:"simboli\u0173"},verb:{smaller:{inclusive:"turi b\u016Bti ne ilgesn\u0117 kaip",notInclusive:"turi b\u016Bti trumpesn\u0117 kaip"},bigger:{inclusive:"turi b\u016Bti ne trumpesn\u0117 kaip",notInclusive:"turi b\u016Bti ilgesn\u0117 kaip"}}},file:{unit:{one:"baitas",few:"baitai",many:"bait\u0173"},verb:{smaller:{inclusive:"turi b\u016Bti ne didesnis kaip",notInclusive:"turi b\u016Bti ma\u017Eesnis kaip"},bigger:{inclusive:"turi b\u016Bti ne ma\u017Eesnis kaip",notInclusive:"turi b\u016Bti didesnis kaip"}}},array:{unit:{one:"element\u0105",few:"elementus",many:"element\u0173"},verb:{smaller:{inclusive:"turi tur\u0117ti ne daugiau kaip",notInclusive:"turi tur\u0117ti ma\u017Eiau kaip"},bigger:{inclusive:"turi tur\u0117ti ne ma\u017Eiau kaip",notInclusive:"turi tur\u0117ti daugiau kaip"}}},set:{unit:{one:"element\u0105",few:"elementus",many:"element\u0173"},verb:{smaller:{inclusive:"turi tur\u0117ti ne daugiau kaip",notInclusive:"turi tur\u0117ti ma\u017Eiau kaip"},bigger:{inclusive:"turi tur\u0117ti ne ma\u017Eiau kaip",notInclusive:"turi tur\u0117ti daugiau kaip"}}}};function W(G,Y,$,K){let w=J[G]??null;if(w===null)return w;return{unit:w.unit[Y],verb:w.verb[K][$?"inclusive":"notInclusive"]}}let X={regex:"\u012Fvestis",email:"el. pa\u0161to adresas",url:"URL",emoji:"jaustukas",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO data ir laikas",date:"ISO data",time:"ISO laikas",duration:"ISO trukm\u0117",ipv4:"IPv4 adresas",ipv6:"IPv6 adresas",cidrv4:"IPv4 tinklo prefiksas (CIDR)",cidrv6:"IPv6 tinklo prefiksas (CIDR)",base64:"base64 u\u017Ekoduota eilut\u0117",base64url:"base64url u\u017Ekoduota eilut\u0117",json_string:"JSON eilut\u0117",e164:"E.164 numeris",jwt:"JWT",template_literal:"\u012Fvestis"};return(G)=>{switch(G.code){case"invalid_type":return`Gautas tipas ${mx(G.input)}, o tik\u0117tasi - ${Q$(G.expected)}`;case"invalid_value":if(G.values.length===1)return`Privalo b\u016Bti ${d(G.values[0])}`;return`Privalo b\u016Bti vienas i\u0161 ${h(G.values,"|")} pasirinkim\u0173`;case"too_big":{let Y=Q$(G.origin),$=W(G.origin,P2(Number(G.maximum)),G.inclusive??!1,"smaller");if($?.verb)return`${U$(Y??G.origin??"reik\u0161m\u0117")} ${$.verb} ${G.maximum.toString()} ${$.unit??"element\u0173"}`;let K=G.inclusive?"ne didesnis kaip":"ma\u017Eesnis kaip";return`${U$(Y??G.origin??"reik\u0161m\u0117")} turi b\u016Bti ${K} ${G.maximum.toString()} ${$?.unit}`}case"too_small":{let Y=Q$(G.origin),$=W(G.origin,P2(Number(G.minimum)),G.inclusive??!1,"bigger");if($?.verb)return`${U$(Y??G.origin??"reik\u0161m\u0117")} ${$.verb} ${G.minimum.toString()} ${$.unit??"element\u0173"}`;let K=G.inclusive?"ne ma\u017Eesnis kaip":"didesnis kaip";return`${U$(Y??G.origin??"reik\u0161m\u0117")} turi b\u016Bti ${K} ${G.minimum.toString()} ${$?.unit}`}case"invalid_format":{let Y=G;if(Y.format==="starts_with")return`Eilut\u0117 privalo prasid\u0117ti "${Y.prefix}"`;if(Y.format==="ends_with")return`Eilut\u0117 privalo pasibaigti "${Y.suffix}"`;if(Y.format==="includes")return`Eilut\u0117 privalo \u012Ftraukti "${Y.includes}"`;if(Y.format==="regex")return`Eilut\u0117 privalo atitikti ${Y.pattern}`;return`Neteisingas ${X[Y.format]??G.format}`}case"not_multiple_of":return`Skai\u010Dius privalo b\u016Bti ${G.divisor} kartotinis.`;case"unrecognized_keys":return`Neatpa\u017Eint${G.keys.length>1?"i":"as"} rakt${G.keys.length>1?"ai":"as"}: ${h(G.keys,", ")}`;case"invalid_key":return"Rastas klaidingas raktas";case"invalid_union":return"Klaidinga \u012Fvestis";case"invalid_element":{let Y=Q$(G.origin);return`${U$(Y??G.origin??"reik\u0161m\u0117")} turi klaiding\u0105 \u012Fvest\u012F`}default:return"Klaidinga \u012Fvestis"}}};var v2=M(()=>{K6()});function _L(){return{localeError:yx()}}var yx=()=>{let J={string:{unit:"\u0437\u043D\u0430\u0446\u0438",verb:"\u0434\u0430 \u0438\u043C\u0430\u0430\u0442"},file:{unit:"\u0431\u0430\u0458\u0442\u0438",verb:"\u0434\u0430 \u0438\u043C\u0430\u0430\u0442"},array:{unit:"\u0441\u0442\u0430\u0432\u043A\u0438",verb:"\u0434\u0430 \u0438\u043C\u0430\u0430\u0442"},set:{unit:"\u0441\u0442\u0430\u0432\u043A\u0438",verb:"\u0434\u0430 \u0438\u043C\u0430\u0430\u0442"}};function W(Y){return J[Y]??null}let X=(Y)=>{let $=typeof Y;switch($){case"number":return Number.isNaN(Y)?"NaN":"\u0431\u0440\u043E\u0458";case"object":{if(Array.isArray(Y))return"\u043D\u0438\u0437\u0430";if(Y===null)return"null";if(Object.getPrototypeOf(Y)!==Object.prototype&&Y.constructor)return Y.constructor.name}}return $},G={regex:"\u0432\u043D\u0435\u0441",email:"\u0430\u0434\u0440\u0435\u0441\u0430 \u043D\u0430 \u0435-\u043F\u043E\u0448\u0442\u0430",url:"URL",emoji:"\u0435\u043C\u043E\u045F\u0438",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO \u0434\u0430\u0442\u0443\u043C \u0438 \u0432\u0440\u0435\u043C\u0435",date:"ISO \u0434\u0430\u0442\u0443\u043C",time:"ISO \u0432\u0440\u0435\u043C\u0435",duration:"ISO \u0432\u0440\u0435\u043C\u0435\u0442\u0440\u0430\u0435\u045A\u0435",ipv4:"IPv4 \u0430\u0434\u0440\u0435\u0441\u0430",ipv6:"IPv6 \u0430\u0434\u0440\u0435\u0441\u0430",cidrv4:"IPv4 \u043E\u043F\u0441\u0435\u0433",cidrv6:"IPv6 \u043E\u043F\u0441\u0435\u0433",base64:"base64-\u0435\u043D\u043A\u043E\u0434\u0438\u0440\u0430\u043D\u0430 \u043D\u0438\u0437\u0430",base64url:"base64url-\u0435\u043D\u043A\u043E\u0434\u0438\u0440\u0430\u043D\u0430 \u043D\u0438\u0437\u0430",json_string:"JSON \u043D\u0438\u0437\u0430",e164:"E.164 \u0431\u0440\u043E\u0458",jwt:"JWT",template_literal:"\u0432\u043D\u0435\u0441"};return(Y)=>{switch(Y.code){case"invalid_type":return`\u0413\u0440\u0435\u0448\u0435\u043D \u0432\u043D\u0435\u0441: \u0441\u0435 \u043E\u0447\u0435\u043A\u0443\u0432\u0430 ${Y.expected}, \u043F\u0440\u0438\u043C\u0435\u043D\u043E ${X(Y.input)}`;case"invalid_value":if(Y.values.length===1)return`Invalid input: expected ${d(Y.values[0])}`;return`\u0413\u0440\u0435\u0448\u0430\u043D\u0430 \u043E\u043F\u0446\u0438\u0458\u0430: \u0441\u0435 \u043E\u0447\u0435\u043A\u0443\u0432\u0430 \u0435\u0434\u043D\u0430 ${h(Y.values,"|")}`;case"too_big":{let $=Y.inclusive?"<=":"<",K=W(Y.origin);if(K)return`\u041F\u0440\u0435\u043C\u043D\u043E\u0433\u0443 \u0433\u043E\u043B\u0435\u043C: \u0441\u0435 \u043E\u0447\u0435\u043A\u0443\u0432\u0430 ${Y.origin??"\u0432\u0440\u0435\u0434\u043D\u043E\u0441\u0442\u0430"} \u0434\u0430 \u0438\u043C\u0430 ${$}${Y.maximum.toString()} ${K.unit??"\u0435\u043B\u0435\u043C\u0435\u043D\u0442\u0438"}`;return`\u041F\u0440\u0435\u043C\u043D\u043E\u0433\u0443 \u0433\u043E\u043B\u0435\u043C: \u0441\u0435 \u043E\u0447\u0435\u043A\u0443\u0432\u0430 ${Y.origin??"\u0432\u0440\u0435\u0434\u043D\u043E\u0441\u0442\u0430"} \u0434\u0430 \u0431\u0438\u0434\u0435 ${$}${Y.maximum.toString()}`}case"too_small":{let $=Y.inclusive?">=":">",K=W(Y.origin);if(K)return`\u041F\u0440\u0435\u043C\u043D\u043E\u0433\u0443 \u043C\u0430\u043B: \u0441\u0435 \u043E\u0447\u0435\u043A\u0443\u0432\u0430 ${Y.origin} \u0434\u0430 \u0438\u043C\u0430 ${$}${Y.minimum.toString()} ${K.unit}`;return`\u041F\u0440\u0435\u043C\u043D\u043E\u0433\u0443 \u043C\u0430\u043B: \u0441\u0435 \u043E\u0447\u0435\u043A\u0443\u0432\u0430 ${Y.origin} \u0434\u0430 \u0431\u0438\u0434\u0435 ${$}${Y.minimum.toString()}`}case"invalid_format":{let $=Y;if($.format==="starts_with")return`\u041D\u0435\u0432\u0430\u0436\u0435\u0447\u043A\u0430 \u043D\u0438\u0437\u0430: \u043C\u043E\u0440\u0430 \u0434\u0430 \u0437\u0430\u043F\u043E\u0447\u043D\u0443\u0432\u0430 \u0441\u043E "${$.prefix}"`;if($.format==="ends_with")return`\u041D\u0435\u0432\u0430\u0436\u0435\u0447\u043A\u0430 \u043D\u0438\u0437\u0430: \u043C\u043E\u0440\u0430 \u0434\u0430 \u0437\u0430\u0432\u0440\u0448\u0443\u0432\u0430 \u0441\u043E "${$.suffix}"`;if($.format==="includes")return`\u041D\u0435\u0432\u0430\u0436\u0435\u0447\u043A\u0430 \u043D\u0438\u0437\u0430: \u043C\u043E\u0440\u0430 \u0434\u0430 \u0432\u043A\u043B\u0443\u0447\u0443\u0432\u0430 "${$.includes}"`;if($.format==="regex")return`\u041D\u0435\u0432\u0430\u0436\u0435\u0447\u043A\u0430 \u043D\u0438\u0437\u0430: \u043C\u043E\u0440\u0430 \u0434\u0430 \u043E\u0434\u0433\u043E\u0430\u0440\u0430 \u043D\u0430 \u043F\u0430\u0442\u0435\u0440\u043D\u043E\u0442 ${$.pattern}`;return`Invalid ${G[$.format]??Y.format}`}case"not_multiple_of":return`\u0413\u0440\u0435\u0448\u0435\u043D \u0431\u0440\u043E\u0458: \u043C\u043E\u0440\u0430 \u0434\u0430 \u0431\u0438\u0434\u0435 \u0434\u0435\u043B\u0438\u0432 \u0441\u043E ${Y.divisor}`;case"unrecognized_keys":return`${Y.keys.length>1?"\u041D\u0435\u043F\u0440\u0435\u043F\u043E\u0437\u043D\u0430\u0435\u043D\u0438 \u043A\u043B\u0443\u0447\u0435\u0432\u0438":"\u041D\u0435\u043F\u0440\u0435\u043F\u043E\u0437\u043D\u0430\u0435\u043D \u043A\u043B\u0443\u0447"}: ${h(Y.keys,", ")}`;case"invalid_key":return`\u0413\u0440\u0435\u0448\u0435\u043D \u043A\u043B\u0443\u0447 \u0432\u043E ${Y.origin}`;case"invalid_union":return"\u0413\u0440\u0435\u0448\u0435\u043D \u0432\u043D\u0435\u0441";case"invalid_element":return`\u0413\u0440\u0435\u0448\u043D\u0430 \u0432\u0440\u0435\u0434\u043D\u043E\u0441\u0442 \u0432\u043E ${Y.origin}`;default:return"\u0413\u0440\u0435\u0448\u0435\u043D \u0432\u043D\u0435\u0441"}}};var j2=M(()=>{K6()});function TL(){return{localeError:xx()}}var xx=()=>{let J={string:{unit:"aksara",verb:"mempunyai"},file:{unit:"bait",verb:"mempunyai"},array:{unit:"elemen",verb:"mempunyai"},set:{unit:"elemen",verb:"mempunyai"}};function W(Y){return J[Y]??null}let X=(Y)=>{let $=typeof Y;switch($){case"number":return Number.isNaN(Y)?"NaN":"nombor";case"object":{if(Array.isArray(Y))return"array";if(Y===null)return"null";if(Object.getPrototypeOf(Y)!==Object.prototype&&Y.constructor)return Y.constructor.name}}return $},G={regex:"input",email:"alamat e-mel",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"tarikh masa ISO",date:"tarikh ISO",time:"masa ISO",duration:"tempoh ISO",ipv4:"alamat IPv4",ipv6:"alamat IPv6",cidrv4:"julat IPv4",cidrv6:"julat IPv6",base64:"string dikodkan base64",base64url:"string dikodkan base64url",json_string:"string JSON",e164:"nombor E.164",jwt:"JWT",template_literal:"input"};return(Y)=>{switch(Y.code){case"invalid_type":return`Input tidak sah: dijangka ${Y.expected}, diterima ${X(Y.input)}`;case"invalid_value":if(Y.values.length===1)return`Input tidak sah: dijangka ${d(Y.values[0])}`;return`Pilihan tidak sah: dijangka salah satu daripada ${h(Y.values,"|")}`;case"too_big":{let $=Y.inclusive?"<=":"<",K=W(Y.origin);if(K)return`Terlalu besar: dijangka ${Y.origin??"nilai"} ${K.verb} ${$}${Y.maximum.toString()} ${K.unit??"elemen"}`;return`Terlalu besar: dijangka ${Y.origin??"nilai"} adalah ${$}${Y.maximum.toString()}`}case"too_small":{let $=Y.inclusive?">=":">",K=W(Y.origin);if(K)return`Terlalu kecil: dijangka ${Y.origin} ${K.verb} ${$}${Y.minimum.toString()} ${K.unit}`;return`Terlalu kecil: dijangka ${Y.origin} adalah ${$}${Y.minimum.toString()}`}case"invalid_format":{let $=Y;if($.format==="starts_with")return`String tidak sah: mesti bermula dengan "${$.prefix}"`;if($.format==="ends_with")return`String tidak sah: mesti berakhir dengan "${$.suffix}"`;if($.format==="includes")return`String tidak sah: mesti mengandungi "${$.includes}"`;if($.format==="regex")return`String tidak sah: mesti sepadan dengan corak ${$.pattern}`;return`${G[$.format]??Y.format} tidak sah`}case"not_multiple_of":return`Nombor tidak sah: perlu gandaan ${Y.divisor}`;case"unrecognized_keys":return`Kunci tidak dikenali: ${h(Y.keys,", ")}`;case"invalid_key":return`Kunci tidak sah dalam ${Y.origin}`;case"invalid_union":return"Input tidak sah";case"invalid_element":return`Nilai tidak sah dalam ${Y.origin}`;default:return"Input tidak sah"}}};var S2=M(()=>{K6()});function qL(){return{localeError:ux()}}var ux=()=>{let J={string:{unit:"tekens"},file:{unit:"bytes"},array:{unit:"elementen"},set:{unit:"elementen"}};function W(Y){return J[Y]??null}let X=(Y)=>{let $=typeof Y;switch($){case"number":return Number.isNaN(Y)?"NaN":"getal";case"object":{if(Array.isArray(Y))return"array";if(Y===null)return"null";if(Object.getPrototypeOf(Y)!==Object.prototype&&Y.constructor)return Y.constructor.name}}return $},G={regex:"invoer",email:"emailadres",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO datum en tijd",date:"ISO datum",time:"ISO tijd",duration:"ISO duur",ipv4:"IPv4-adres",ipv6:"IPv6-adres",cidrv4:"IPv4-bereik",cidrv6:"IPv6-bereik",base64:"base64-gecodeerde tekst",base64url:"base64 URL-gecodeerde tekst",json_string:"JSON string",e164:"E.164-nummer",jwt:"JWT",template_literal:"invoer"};return(Y)=>{switch(Y.code){case"invalid_type":return`Ongeldige invoer: verwacht ${Y.expected}, ontving ${X(Y.input)}`;case"invalid_value":if(Y.values.length===1)return`Ongeldige invoer: verwacht ${d(Y.values[0])}`;return`Ongeldige optie: verwacht \xE9\xE9n van ${h(Y.values,"|")}`;case"too_big":{let $=Y.inclusive?"<=":"<",K=W(Y.origin);if(K)return`Te lang: verwacht dat ${Y.origin??"waarde"} ${$}${Y.maximum.toString()} ${K.unit??"elementen"} bevat`;return`Te lang: verwacht dat ${Y.origin??"waarde"} ${$}${Y.maximum.toString()} is`}case"too_small":{let $=Y.inclusive?">=":">",K=W(Y.origin);if(K)return`Te kort: verwacht dat ${Y.origin} ${$}${Y.minimum.toString()} ${K.unit} bevat`;return`Te kort: verwacht dat ${Y.origin} ${$}${Y.minimum.toString()} is`}case"invalid_format":{let $=Y;if($.format==="starts_with")return`Ongeldige tekst: moet met "${$.prefix}" beginnen`;if($.format==="ends_with")return`Ongeldige tekst: moet op "${$.suffix}" eindigen`;if($.format==="includes")return`Ongeldige tekst: moet "${$.includes}" bevatten`;if($.format==="regex")return`Ongeldige tekst: moet overeenkomen met patroon ${$.pattern}`;return`Ongeldig: ${G[$.format]??Y.format}`}case"not_multiple_of":return`Ongeldig getal: moet een veelvoud van ${Y.divisor} zijn`;case"unrecognized_keys":return`Onbekende key${Y.keys.length>1?"s":""}: ${h(Y.keys,", ")}`;case"invalid_key":return`Ongeldige key in ${Y.origin}`;case"invalid_union":return"Ongeldige invoer";case"invalid_element":return`Ongeldige waarde in ${Y.origin}`;default:return"Ongeldige invoer"}}};var _2=M(()=>{K6()});function BL(){return{localeError:cx()}}var cx=()=>{let J={string:{unit:"tegn",verb:"\xE5 ha"},file:{unit:"bytes",verb:"\xE5 ha"},array:{unit:"elementer",verb:"\xE5 inneholde"},set:{unit:"elementer",verb:"\xE5 inneholde"}};function W(Y){return J[Y]??null}let X=(Y)=>{let $=typeof Y;switch($){case"number":return Number.isNaN(Y)?"NaN":"tall";case"object":{if(Array.isArray(Y))return"liste";if(Y===null)return"null";if(Object.getPrototypeOf(Y)!==Object.prototype&&Y.constructor)return Y.constructor.name}}return $},G={regex:"input",email:"e-postadresse",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO dato- og klokkeslett",date:"ISO-dato",time:"ISO-klokkeslett",duration:"ISO-varighet",ipv4:"IPv4-omr\xE5de",ipv6:"IPv6-omr\xE5de",cidrv4:"IPv4-spekter",cidrv6:"IPv6-spekter",base64:"base64-enkodet streng",base64url:"base64url-enkodet streng",json_string:"JSON-streng",e164:"E.164-nummer",jwt:"JWT",template_literal:"input"};return(Y)=>{switch(Y.code){case"invalid_type":return`Ugyldig input: forventet ${Y.expected}, fikk ${X(Y.input)}`;case"invalid_value":if(Y.values.length===1)return`Ugyldig verdi: forventet ${d(Y.values[0])}`;return`Ugyldig valg: forventet en av ${h(Y.values,"|")}`;case"too_big":{let $=Y.inclusive?"<=":"<",K=W(Y.origin);if(K)return`For stor(t): forventet ${Y.origin??"value"} til \xE5 ha ${$}${Y.maximum.toString()} ${K.unit??"elementer"}`;return`For stor(t): forventet ${Y.origin??"value"} til \xE5 ha ${$}${Y.maximum.toString()}`}case"too_small":{let $=Y.inclusive?">=":">",K=W(Y.origin);if(K)return`For lite(n): forventet ${Y.origin} til \xE5 ha ${$}${Y.minimum.toString()} ${K.unit}`;return`For lite(n): forventet ${Y.origin} til \xE5 ha ${$}${Y.minimum.toString()}`}case"invalid_format":{let $=Y;if($.format==="starts_with")return`Ugyldig streng: m\xE5 starte med "${$.prefix}"`;if($.format==="ends_with")return`Ugyldig streng: m\xE5 ende med "${$.suffix}"`;if($.format==="includes")return`Ugyldig streng: m\xE5 inneholde "${$.includes}"`;if($.format==="regex")return`Ugyldig streng: m\xE5 matche m\xF8nsteret ${$.pattern}`;return`Ugyldig ${G[$.format]??Y.format}`}case"not_multiple_of":return`Ugyldig tall: m\xE5 v\xE6re et multiplum av ${Y.divisor}`;case"unrecognized_keys":return`${Y.keys.length>1?"Ukjente n\xF8kler":"Ukjent n\xF8kkel"}: ${h(Y.keys,", ")}`;case"invalid_key":return`Ugyldig n\xF8kkel i ${Y.origin}`;case"invalid_union":return"Ugyldig input";case"invalid_element":return`Ugyldig verdi i ${Y.origin}`;default:return"Ugyldig input"}}};var T2=M(()=>{K6()});function AL(){return{localeError:lx()}}var lx=()=>{let J={string:{unit:"harf",verb:"olmal\u0131d\u0131r"},file:{unit:"bayt",verb:"olmal\u0131d\u0131r"},array:{unit:"unsur",verb:"olmal\u0131d\u0131r"},set:{unit:"unsur",verb:"olmal\u0131d\u0131r"}};function W(Y){return J[Y]??null}let X=(Y)=>{let $=typeof Y;switch($){case"number":return Number.isNaN(Y)?"NaN":"numara";case"object":{if(Array.isArray(Y))return"saf";if(Y===null)return"gayb";if(Object.getPrototypeOf(Y)!==Object.prototype&&Y.constructor)return Y.constructor.name}}return $},G={regex:"giren",email:"epostag\xE2h",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO heng\xE2m\u0131",date:"ISO tarihi",time:"ISO zaman\u0131",duration:"ISO m\xFCddeti",ipv4:"IPv4 ni\u015F\xE2n\u0131",ipv6:"IPv6 ni\u015F\xE2n\u0131",cidrv4:"IPv4 menzili",cidrv6:"IPv6 menzili",base64:"base64-\u015Fifreli metin",base64url:"base64url-\u015Fifreli metin",json_string:"JSON metin",e164:"E.164 say\u0131s\u0131",jwt:"JWT",template_literal:"giren"};return(Y)=>{switch(Y.code){case"invalid_type":return`F\xE2sit giren: umulan ${Y.expected}, al\u0131nan ${X(Y.input)}`;case"invalid_value":if(Y.values.length===1)return`F\xE2sit giren: umulan ${d(Y.values[0])}`;return`F\xE2sit tercih: m\xFBteberler ${h(Y.values,"|")}`;case"too_big":{let $=Y.inclusive?"<=":"<",K=W(Y.origin);if(K)return`Fazla b\xFCy\xFCk: ${Y.origin??"value"}, ${$}${Y.maximum.toString()} ${K.unit??"elements"} sahip olmal\u0131yd\u0131.`;return`Fazla b\xFCy\xFCk: ${Y.origin??"value"}, ${$}${Y.maximum.toString()} olmal\u0131yd\u0131.`}case"too_small":{let $=Y.inclusive?">=":">",K=W(Y.origin);if(K)return`Fazla k\xFC\xE7\xFCk: ${Y.origin}, ${$}${Y.minimum.toString()} ${K.unit} sahip olmal\u0131yd\u0131.`;return`Fazla k\xFC\xE7\xFCk: ${Y.origin}, ${$}${Y.minimum.toString()} olmal\u0131yd\u0131.`}case"invalid_format":{let $=Y;if($.format==="starts_with")return`F\xE2sit metin: "${$.prefix}" ile ba\u015Flamal\u0131.`;if($.format==="ends_with")return`F\xE2sit metin: "${$.suffix}" ile bitmeli.`;if($.format==="includes")return`F\xE2sit metin: "${$.includes}" ihtiv\xE2 etmeli.`;if($.format==="regex")return`F\xE2sit metin: ${$.pattern} nak\u015F\u0131na uymal\u0131.`;return`F\xE2sit ${G[$.format]??Y.format}`}case"not_multiple_of":return`F\xE2sit say\u0131: ${Y.divisor} kat\u0131 olmal\u0131yd\u0131.`;case"unrecognized_keys":return`Tan\u0131nmayan anahtar ${Y.keys.length>1?"s":""}: ${h(Y.keys,", ")}`;case"invalid_key":return`${Y.origin} i\xE7in tan\u0131nmayan anahtar var.`;case"invalid_union":return"Giren tan\u0131namad\u0131.";case"invalid_element":return`${Y.origin} i\xE7in tan\u0131nmayan k\u0131ymet var.`;default:return"K\u0131ymet tan\u0131namad\u0131."}}};var q2=M(()=>{K6()});function EL(){return{localeError:px()}}var px=()=>{let J={string:{unit:"\u062A\u0648\u06A9\u064A",verb:"\u0648\u0644\u0631\u064A"},file:{unit:"\u0628\u0627\u06CC\u067C\u0633",verb:"\u0648\u0644\u0631\u064A"},array:{unit:"\u062A\u0648\u06A9\u064A",verb:"\u0648\u0644\u0631\u064A"},set:{unit:"\u062A\u0648\u06A9\u064A",verb:"\u0648\u0644\u0631\u064A"}};function W(Y){return J[Y]??null}let X=(Y)=>{let $=typeof Y;switch($){case"number":return Number.isNaN(Y)?"NaN":"\u0639\u062F\u062F";case"object":{if(Array.isArray(Y))return"\u0627\u0631\u06D0";if(Y===null)return"null";if(Object.getPrototypeOf(Y)!==Object.prototype&&Y.constructor)return Y.constructor.name}}return $},G={regex:"\u0648\u0631\u0648\u062F\u064A",email:"\u0628\u0631\u06CC\u069A\u0646\u0627\u0644\u06CC\u06A9",url:"\u06CC\u0648 \u0622\u0631 \u0627\u0644",emoji:"\u0627\u06CC\u0645\u0648\u062C\u064A",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"\u0646\u06CC\u067C\u0647 \u0627\u0648 \u0648\u062E\u062A",date:"\u0646\u06D0\u067C\u0647",time:"\u0648\u062E\u062A",duration:"\u0645\u0648\u062F\u0647",ipv4:"\u062F IPv4 \u067E\u062A\u0647",ipv6:"\u062F IPv6 \u067E\u062A\u0647",cidrv4:"\u062F IPv4 \u0633\u0627\u062D\u0647",cidrv6:"\u062F IPv6 \u0633\u0627\u062D\u0647",base64:"base64-encoded \u0645\u062A\u0646",base64url:"base64url-encoded \u0645\u062A\u0646",json_string:"JSON \u0645\u062A\u0646",e164:"\u062F E.164 \u0634\u0645\u06D0\u0631\u0647",jwt:"JWT",template_literal:"\u0648\u0631\u0648\u062F\u064A"};return(Y)=>{switch(Y.code){case"invalid_type":return`\u0646\u0627\u0633\u0645 \u0648\u0631\u0648\u062F\u064A: \u0628\u0627\u06CC\u062F ${Y.expected} \u0648\u0627\u06CC, \u0645\u06AB\u0631 ${X(Y.input)} \u062A\u0631\u0644\u0627\u0633\u0647 \u0634\u0648`;case"invalid_value":if(Y.values.length===1)return`\u0646\u0627\u0633\u0645 \u0648\u0631\u0648\u062F\u064A: \u0628\u0627\u06CC\u062F ${d(Y.values[0])} \u0648\u0627\u06CC`;return`\u0646\u0627\u0633\u0645 \u0627\u0646\u062A\u062E\u0627\u0628: \u0628\u0627\u06CC\u062F \u06CC\u0648 \u0644\u0647 ${h(Y.values,"|")} \u0685\u062E\u0647 \u0648\u0627\u06CC`;case"too_big":{let $=Y.inclusive?"<=":"<",K=W(Y.origin);if(K)return`\u0689\u06CC\u0631 \u0644\u0648\u06CC: ${Y.origin??"\u0627\u0631\u0632\u069A\u062A"} \u0628\u0627\u06CC\u062F ${$}${Y.maximum.toString()} ${K.unit??"\u0639\u0646\u0635\u0631\u0648\u0646\u0647"} \u0648\u0644\u0631\u064A`;return`\u0689\u06CC\u0631 \u0644\u0648\u06CC: ${Y.origin??"\u0627\u0631\u0632\u069A\u062A"} \u0628\u0627\u06CC\u062F ${$}${Y.maximum.toString()} \u0648\u064A`}case"too_small":{let $=Y.inclusive?">=":">",K=W(Y.origin);if(K)return`\u0689\u06CC\u0631 \u06A9\u0648\u0686\u0646\u06CC: ${Y.origin} \u0628\u0627\u06CC\u062F ${$}${Y.minimum.toString()} ${K.unit} \u0648\u0644\u0631\u064A`;return`\u0689\u06CC\u0631 \u06A9\u0648\u0686\u0646\u06CC: ${Y.origin} \u0628\u0627\u06CC\u062F ${$}${Y.minimum.toString()} \u0648\u064A`}case"invalid_format":{let $=Y;if($.format==="starts_with")return`\u0646\u0627\u0633\u0645 \u0645\u062A\u0646: \u0628\u0627\u06CC\u062F \u062F "${$.prefix}" \u0633\u0631\u0647 \u067E\u06CC\u0644 \u0634\u064A`;if($.format==="ends_with")return`\u0646\u0627\u0633\u0645 \u0645\u062A\u0646: \u0628\u0627\u06CC\u062F \u062F "${$.suffix}" \u0633\u0631\u0647 \u067E\u0627\u06CC \u062A\u0647 \u0648\u0631\u0633\u064A\u0696\u064A`;if($.format==="includes")return`\u0646\u0627\u0633\u0645 \u0645\u062A\u0646: \u0628\u0627\u06CC\u062F "${$.includes}" \u0648\u0644\u0631\u064A`;if($.format==="regex")return`\u0646\u0627\u0633\u0645 \u0645\u062A\u0646: \u0628\u0627\u06CC\u062F \u062F ${$.pattern} \u0633\u0631\u0647 \u0645\u0637\u0627\u0628\u0642\u062A \u0648\u0644\u0631\u064A`;return`${G[$.format]??Y.format} \u0646\u0627\u0633\u0645 \u062F\u06CC`}case"not_multiple_of":return`\u0646\u0627\u0633\u0645 \u0639\u062F\u062F: \u0628\u0627\u06CC\u062F \u062F ${Y.divisor} \u0645\u0636\u0631\u0628 \u0648\u064A`;case"unrecognized_keys":return`\u0646\u0627\u0633\u0645 ${Y.keys.length>1?"\u06A9\u0644\u06CC\u0689\u0648\u0646\u0647":"\u06A9\u0644\u06CC\u0689"}: ${h(Y.keys,", ")}`;case"invalid_key":return`\u0646\u0627\u0633\u0645 \u06A9\u0644\u06CC\u0689 \u067E\u0647 ${Y.origin} \u06A9\u06D0`;case"invalid_union":return"\u0646\u0627\u0633\u0645\u0647 \u0648\u0631\u0648\u062F\u064A";case"invalid_element":return`\u0646\u0627\u0633\u0645 \u0639\u0646\u0635\u0631 \u067E\u0647 ${Y.origin} \u06A9\u06D0`;default:return"\u0646\u0627\u0633\u0645\u0647 \u0648\u0631\u0648\u062F\u064A"}}};var B2=M(()=>{K6()});function IL(){return{localeError:dx()}}var dx=()=>{let J={string:{unit:"znak\xF3w",verb:"mie\u0107"},file:{unit:"bajt\xF3w",verb:"mie\u0107"},array:{unit:"element\xF3w",verb:"mie\u0107"},set:{unit:"element\xF3w",verb:"mie\u0107"}};function W(Y){return J[Y]??null}let X=(Y)=>{let $=typeof Y;switch($){case"number":return Number.isNaN(Y)?"NaN":"liczba";case"object":{if(Array.isArray(Y))return"tablica";if(Y===null)return"null";if(Object.getPrototypeOf(Y)!==Object.prototype&&Y.constructor)return Y.constructor.name}}return $},G={regex:"wyra\u017Cenie",email:"adres email",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"data i godzina w formacie ISO",date:"data w formacie ISO",time:"godzina w formacie ISO",duration:"czas trwania ISO",ipv4:"adres IPv4",ipv6:"adres IPv6",cidrv4:"zakres IPv4",cidrv6:"zakres IPv6",base64:"ci\u0105g znak\xF3w zakodowany w formacie base64",base64url:"ci\u0105g znak\xF3w zakodowany w formacie base64url",json_string:"ci\u0105g znak\xF3w w formacie JSON",e164:"liczba E.164",jwt:"JWT",template_literal:"wej\u015Bcie"};return(Y)=>{switch(Y.code){case"invalid_type":return`Nieprawid\u0142owe dane wej\u015Bciowe: oczekiwano ${Y.expected}, otrzymano ${X(Y.input)}`;case"invalid_value":if(Y.values.length===1)return`Nieprawid\u0142owe dane wej\u015Bciowe: oczekiwano ${d(Y.values[0])}`;return`Nieprawid\u0142owa opcja: oczekiwano jednej z warto\u015Bci ${h(Y.values,"|")}`;case"too_big":{let $=Y.inclusive?"<=":"<",K=W(Y.origin);if(K)return`Za du\u017Ca warto\u015B\u0107: oczekiwano, \u017Ce ${Y.origin??"warto\u015B\u0107"} b\u0119dzie mie\u0107 ${$}${Y.maximum.toString()} ${K.unit??"element\xF3w"}`;return`Zbyt du\u017C(y/a/e): oczekiwano, \u017Ce ${Y.origin??"warto\u015B\u0107"} b\u0119dzie wynosi\u0107 ${$}${Y.maximum.toString()}`}case"too_small":{let $=Y.inclusive?">=":">",K=W(Y.origin);if(K)return`Za ma\u0142a warto\u015B\u0107: oczekiwano, \u017Ce ${Y.origin??"warto\u015B\u0107"} b\u0119dzie mie\u0107 ${$}${Y.minimum.toString()} ${K.unit??"element\xF3w"}`;return`Zbyt ma\u0142(y/a/e): oczekiwano, \u017Ce ${Y.origin??"warto\u015B\u0107"} b\u0119dzie wynosi\u0107 ${$}${Y.minimum.toString()}`}case"invalid_format":{let $=Y;if($.format==="starts_with")return`Nieprawid\u0142owy ci\u0105g znak\xF3w: musi zaczyna\u0107 si\u0119 od "${$.prefix}"`;if($.format==="ends_with")return`Nieprawid\u0142owy ci\u0105g znak\xF3w: musi ko\u0144czy\u0107 si\u0119 na "${$.suffix}"`;if($.format==="includes")return`Nieprawid\u0142owy ci\u0105g znak\xF3w: musi zawiera\u0107 "${$.includes}"`;if($.format==="regex")return`Nieprawid\u0142owy ci\u0105g znak\xF3w: musi odpowiada\u0107 wzorcowi ${$.pattern}`;return`Nieprawid\u0142ow(y/a/e) ${G[$.format]??Y.format}`}case"not_multiple_of":return`Nieprawid\u0142owa liczba: musi by\u0107 wielokrotno\u015Bci\u0105 ${Y.divisor}`;case"unrecognized_keys":return`Nierozpoznane klucze${Y.keys.length>1?"s":""}: ${h(Y.keys,", ")}`;case"invalid_key":return`Nieprawid\u0142owy klucz w ${Y.origin}`;case"invalid_union":return"Nieprawid\u0142owe dane wej\u015Bciowe";case"invalid_element":return`Nieprawid\u0142owa warto\u015B\u0107 w ${Y.origin}`;default:return"Nieprawid\u0142owe dane wej\u015Bciowe"}}};var A2=M(()=>{K6()});function RL(){return{localeError:rx()}}var rx=()=>{let J={string:{unit:"caracteres",verb:"ter"},file:{unit:"bytes",verb:"ter"},array:{unit:"itens",verb:"ter"},set:{unit:"itens",verb:"ter"}};function W(Y){return J[Y]??null}let X=(Y)=>{let $=typeof Y;switch($){case"number":return Number.isNaN(Y)?"NaN":"n\xFAmero";case"object":{if(Array.isArray(Y))return"array";if(Y===null)return"nulo";if(Object.getPrototypeOf(Y)!==Object.prototype&&Y.constructor)return Y.constructor.name}}return $},G={regex:"padr\xE3o",email:"endere\xE7o de e-mail",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"data e hora ISO",date:"data ISO",time:"hora ISO",duration:"dura\xE7\xE3o ISO",ipv4:"endere\xE7o IPv4",ipv6:"endere\xE7o IPv6",cidrv4:"faixa de IPv4",cidrv6:"faixa de IPv6",base64:"texto codificado em base64",base64url:"URL codificada em base64",json_string:"texto JSON",e164:"n\xFAmero E.164",jwt:"JWT",template_literal:"entrada"};return(Y)=>{switch(Y.code){case"invalid_type":return`Tipo inv\xE1lido: esperado ${Y.expected}, recebido ${X(Y.input)}`;case"invalid_value":if(Y.values.length===1)return`Entrada inv\xE1lida: esperado ${d(Y.values[0])}`;return`Op\xE7\xE3o inv\xE1lida: esperada uma das ${h(Y.values,"|")}`;case"too_big":{let $=Y.inclusive?"<=":"<",K=W(Y.origin);if(K)return`Muito grande: esperado que ${Y.origin??"valor"} tivesse ${$}${Y.maximum.toString()} ${K.unit??"elementos"}`;return`Muito grande: esperado que ${Y.origin??"valor"} fosse ${$}${Y.maximum.toString()}`}case"too_small":{let $=Y.inclusive?">=":">",K=W(Y.origin);if(K)return`Muito pequeno: esperado que ${Y.origin} tivesse ${$}${Y.minimum.toString()} ${K.unit}`;return`Muito pequeno: esperado que ${Y.origin} fosse ${$}${Y.minimum.toString()}`}case"invalid_format":{let $=Y;if($.format==="starts_with")return`Texto inv\xE1lido: deve come\xE7ar com "${$.prefix}"`;if($.format==="ends_with")return`Texto inv\xE1lido: deve terminar com "${$.suffix}"`;if($.format==="includes")return`Texto inv\xE1lido: deve incluir "${$.includes}"`;if($.format==="regex")return`Texto inv\xE1lido: deve corresponder ao padr\xE3o ${$.pattern}`;return`${G[$.format]??Y.format} inv\xE1lido`}case"not_multiple_of":return`N\xFAmero inv\xE1lido: deve ser m\xFAltiplo de ${Y.divisor}`;case"unrecognized_keys":return`Chave${Y.keys.length>1?"s":""} desconhecida${Y.keys.length>1?"s":""}: ${h(Y.keys,", ")}`;case"invalid_key":return`Chave inv\xE1lida em ${Y.origin}`;case"invalid_union":return"Entrada inv\xE1lida";case"invalid_element":return`Valor inv\xE1lido em ${Y.origin}`;default:return"Campo inv\xE1lido"}}};var E2=M(()=>{K6()});function I2(J,W,X,G){let Y=Math.abs(J),$=Y%10,K=Y%100;if(K>=11&&K<=19)return G;if($===1)return W;if($>=2&&$<=4)return X;return G}function CL(){return{localeError:nx()}}var nx=()=>{let J={string:{unit:{one:"\u0441\u0438\u043C\u0432\u043E\u043B",few:"\u0441\u0438\u043C\u0432\u043E\u043B\u0430",many:"\u0441\u0438\u043C\u0432\u043E\u043B\u043E\u0432"},verb:"\u0438\u043C\u0435\u0442\u044C"},file:{unit:{one:"\u0431\u0430\u0439\u0442",few:"\u0431\u0430\u0439\u0442\u0430",many:"\u0431\u0430\u0439\u0442"},verb:"\u0438\u043C\u0435\u0442\u044C"},array:{unit:{one:"\u044D\u043B\u0435\u043C\u0435\u043D\u0442",few:"\u044D\u043B\u0435\u043C\u0435\u043D\u0442\u0430",many:"\u044D\u043B\u0435\u043C\u0435\u043D\u0442\u043E\u0432"},verb:"\u0438\u043C\u0435\u0442\u044C"},set:{unit:{one:"\u044D\u043B\u0435\u043C\u0435\u043D\u0442",few:"\u044D\u043B\u0435\u043C\u0435\u043D\u0442\u0430",many:"\u044D\u043B\u0435\u043C\u0435\u043D\u0442\u043E\u0432"},verb:"\u0438\u043C\u0435\u0442\u044C"}};function W(Y){return J[Y]??null}let X=(Y)=>{let $=typeof Y;switch($){case"number":return Number.isNaN(Y)?"NaN":"\u0447\u0438\u0441\u043B\u043E";case"object":{if(Array.isArray(Y))return"\u043C\u0430\u0441\u0441\u0438\u0432";if(Y===null)return"null";if(Object.getPrototypeOf(Y)!==Object.prototype&&Y.constructor)return Y.constructor.name}}return $},G={regex:"\u0432\u0432\u043E\u0434",email:"email \u0430\u0434\u0440\u0435\u0441",url:"URL",emoji:"\u044D\u043C\u043E\u0434\u0437\u0438",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO \u0434\u0430\u0442\u0430 \u0438 \u0432\u0440\u0435\u043C\u044F",date:"ISO \u0434\u0430\u0442\u0430",time:"ISO \u0432\u0440\u0435\u043C\u044F",duration:"ISO \u0434\u043B\u0438\u0442\u0435\u043B\u044C\u043D\u043E\u0441\u0442\u044C",ipv4:"IPv4 \u0430\u0434\u0440\u0435\u0441",ipv6:"IPv6 \u0430\u0434\u0440\u0435\u0441",cidrv4:"IPv4 \u0434\u0438\u0430\u043F\u0430\u0437\u043E\u043D",cidrv6:"IPv6 \u0434\u0438\u0430\u043F\u0430\u0437\u043E\u043D",base64:"\u0441\u0442\u0440\u043E\u043A\u0430 \u0432 \u0444\u043E\u0440\u043C\u0430\u0442\u0435 base64",base64url:"\u0441\u0442\u0440\u043E\u043A\u0430 \u0432 \u0444\u043E\u0440\u043C\u0430\u0442\u0435 base64url",json_string:"JSON \u0441\u0442\u0440\u043E\u043A\u0430",e164:"\u043D\u043E\u043C\u0435\u0440 E.164",jwt:"JWT",template_literal:"\u0432\u0432\u043E\u0434"};return(Y)=>{switch(Y.code){case"invalid_type":return`\u041D\u0435\u0432\u0435\u0440\u043D\u044B\u0439 \u0432\u0432\u043E\u0434: \u043E\u0436\u0438\u0434\u0430\u043B\u043E\u0441\u044C ${Y.expected}, \u043F\u043E\u043B\u0443\u0447\u0435\u043D\u043E ${X(Y.input)}`;case"invalid_value":if(Y.values.length===1)return`\u041D\u0435\u0432\u0435\u0440\u043D\u044B\u0439 \u0432\u0432\u043E\u0434: \u043E\u0436\u0438\u0434\u0430\u043B\u043E\u0441\u044C ${d(Y.values[0])}`;return`\u041D\u0435\u0432\u0435\u0440\u043D\u044B\u0439 \u0432\u0430\u0440\u0438\u0430\u043D\u0442: \u043E\u0436\u0438\u0434\u0430\u043B\u043E\u0441\u044C \u043E\u0434\u043D\u043E \u0438\u0437 ${h(Y.values,"|")}`;case"too_big":{let $=Y.inclusive?"<=":"<",K=W(Y.origin);if(K){let w=Number(Y.maximum),H=I2(w,K.unit.one,K.unit.few,K.unit.many);return`\u0421\u043B\u0438\u0448\u043A\u043E\u043C \u0431\u043E\u043B\u044C\u0448\u043E\u0435 \u0437\u043D\u0430\u0447\u0435\u043D\u0438\u0435: \u043E\u0436\u0438\u0434\u0430\u043B\u043E\u0441\u044C, \u0447\u0442\u043E ${Y.origin??"\u0437\u043D\u0430\u0447\u0435\u043D\u0438\u0435"} \u0431\u0443\u0434\u0435\u0442 \u0438\u043C\u0435\u0442\u044C ${$}${Y.maximum.toString()} ${H}`}return`\u0421\u043B\u0438\u0448\u043A\u043E\u043C \u0431\u043E\u043B\u044C\u0448\u043E\u0435 \u0437\u043D\u0430\u0447\u0435\u043D\u0438\u0435: \u043E\u0436\u0438\u0434\u0430\u043B\u043E\u0441\u044C, \u0447\u0442\u043E ${Y.origin??"\u0437\u043D\u0430\u0447\u0435\u043D\u0438\u0435"} \u0431\u0443\u0434\u0435\u0442 ${$}${Y.maximum.toString()}`}case"too_small":{let $=Y.inclusive?">=":">",K=W(Y.origin);if(K){let w=Number(Y.minimum),H=I2(w,K.unit.one,K.unit.few,K.unit.many);return`\u0421\u043B\u0438\u0448\u043A\u043E\u043C \u043C\u0430\u043B\u0435\u043D\u044C\u043A\u043E\u0435 \u0437\u043D\u0430\u0447\u0435\u043D\u0438\u0435: \u043E\u0436\u0438\u0434\u0430\u043B\u043E\u0441\u044C, \u0447\u0442\u043E ${Y.origin} \u0431\u0443\u0434\u0435\u0442 \u0438\u043C\u0435\u0442\u044C ${$}${Y.minimum.toString()} ${H}`}return`\u0421\u043B\u0438\u0448\u043A\u043E\u043C \u043C\u0430\u043B\u0435\u043D\u044C\u043A\u043E\u0435 \u0437\u043D\u0430\u0447\u0435\u043D\u0438\u0435: \u043E\u0436\u0438\u0434\u0430\u043B\u043E\u0441\u044C, \u0447\u0442\u043E ${Y.origin} \u0431\u0443\u0434\u0435\u0442 ${$}${Y.minimum.toString()}`}case"invalid_format":{let $=Y;if($.format==="starts_with")return`\u041D\u0435\u0432\u0435\u0440\u043D\u0430\u044F \u0441\u0442\u0440\u043E\u043A\u0430: \u0434\u043E\u043B\u0436\u043D\u0430 \u043D\u0430\u0447\u0438\u043D\u0430\u0442\u044C\u0441\u044F \u0441 "${$.prefix}"`;if($.format==="ends_with")return`\u041D\u0435\u0432\u0435\u0440\u043D\u0430\u044F \u0441\u0442\u0440\u043E\u043A\u0430: \u0434\u043E\u043B\u0436\u043D\u0430 \u0437\u0430\u043A\u0430\u043D\u0447\u0438\u0432\u0430\u0442\u044C\u0441\u044F \u043D\u0430 "${$.suffix}"`;if($.format==="includes")return`\u041D\u0435\u0432\u0435\u0440\u043D\u0430\u044F \u0441\u0442\u0440\u043E\u043A\u0430: \u0434\u043E\u043B\u0436\u043D\u0430 \u0441\u043E\u0434\u0435\u0440\u0436\u0430\u0442\u044C "${$.includes}"`;if($.format==="regex")return`\u041D\u0435\u0432\u0435\u0440\u043D\u0430\u044F \u0441\u0442\u0440\u043E\u043A\u0430: \u0434\u043E\u043B\u0436\u043D\u0430 \u0441\u043E\u043E\u0442\u0432\u0435\u0442\u0441\u0442\u0432\u043E\u0432\u0430\u0442\u044C \u0448\u0430\u0431\u043B\u043E\u043D\u0443 ${$.pattern}`;return`\u041D\u0435\u0432\u0435\u0440\u043D\u044B\u0439 ${G[$.format]??Y.format}`}case"not_multiple_of":return`\u041D\u0435\u0432\u0435\u0440\u043D\u043E\u0435 \u0447\u0438\u0441\u043B\u043E: \u0434\u043E\u043B\u0436\u043D\u043E \u0431\u044B\u0442\u044C \u043A\u0440\u0430\u0442\u043D\u044B\u043C ${Y.divisor}`;case"unrecognized_keys":return`\u041D\u0435\u0440\u0430\u0441\u043F\u043E\u0437\u043D\u0430\u043D\u043D${Y.keys.length>1?"\u044B\u0435":"\u044B\u0439"} \u043A\u043B\u044E\u0447${Y.keys.length>1?"\u0438":""}: ${h(Y.keys,", ")}`;case"invalid_key":return`\u041D\u0435\u0432\u0435\u0440\u043D\u044B\u0439 \u043A\u043B\u044E\u0447 \u0432 ${Y.origin}`;case"invalid_union":return"\u041D\u0435\u0432\u0435\u0440\u043D\u044B\u0435 \u0432\u0445\u043E\u0434\u043D\u044B\u0435 \u0434\u0430\u043D\u043D\u044B\u0435";case"invalid_element":return`\u041D\u0435\u0432\u0435\u0440\u043D\u043E\u0435 \u0437\u043D\u0430\u0447\u0435\u043D\u0438\u0435 \u0432 ${Y.origin}`;default:return"\u041D\u0435\u0432\u0435\u0440\u043D\u044B\u0435 \u0432\u0445\u043E\u0434\u043D\u044B\u0435 \u0434\u0430\u043D\u043D\u044B\u0435"}}};var R2=M(()=>{K6()});function bL(){return{localeError:ix()}}var ix=()=>{let J={string:{unit:"znakov",verb:"imeti"},file:{unit:"bajtov",verb:"imeti"},array:{unit:"elementov",verb:"imeti"},set:{unit:"elementov",verb:"imeti"}};function W(Y){return J[Y]??null}let X=(Y)=>{let $=typeof Y;switch($){case"number":return Number.isNaN(Y)?"NaN":"\u0161tevilo";case"object":{if(Array.isArray(Y))return"tabela";if(Y===null)return"null";if(Object.getPrototypeOf(Y)!==Object.prototype&&Y.constructor)return Y.constructor.name}}return $},G={regex:"vnos",email:"e-po\u0161tni naslov",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO datum in \u010Das",date:"ISO datum",time:"ISO \u010Das",duration:"ISO trajanje",ipv4:"IPv4 naslov",ipv6:"IPv6 naslov",cidrv4:"obseg IPv4",cidrv6:"obseg IPv6",base64:"base64 kodiran niz",base64url:"base64url kodiran niz",json_string:"JSON niz",e164:"E.164 \u0161tevilka",jwt:"JWT",template_literal:"vnos"};return(Y)=>{switch(Y.code){case"invalid_type":return`Neveljaven vnos: pri\u010Dakovano ${Y.expected}, prejeto ${X(Y.input)}`;case"invalid_value":if(Y.values.length===1)return`Neveljaven vnos: pri\u010Dakovano ${d(Y.values[0])}`;return`Neveljavna mo\u017Enost: pri\u010Dakovano eno izmed ${h(Y.values,"|")}`;case"too_big":{let $=Y.inclusive?"<=":"<",K=W(Y.origin);if(K)return`Preveliko: pri\u010Dakovano, da bo ${Y.origin??"vrednost"} imelo ${$}${Y.maximum.toString()} ${K.unit??"elementov"}`;return`Preveliko: pri\u010Dakovano, da bo ${Y.origin??"vrednost"} ${$}${Y.maximum.toString()}`}case"too_small":{let $=Y.inclusive?">=":">",K=W(Y.origin);if(K)return`Premajhno: pri\u010Dakovano, da bo ${Y.origin} imelo ${$}${Y.minimum.toString()} ${K.unit}`;return`Premajhno: pri\u010Dakovano, da bo ${Y.origin} ${$}${Y.minimum.toString()}`}case"invalid_format":{let $=Y;if($.format==="starts_with")return`Neveljaven niz: mora se za\u010Deti z "${$.prefix}"`;if($.format==="ends_with")return`Neveljaven niz: mora se kon\u010Dati z "${$.suffix}"`;if($.format==="includes")return`Neveljaven niz: mora vsebovati "${$.includes}"`;if($.format==="regex")return`Neveljaven niz: mora ustrezati vzorcu ${$.pattern}`;return`Neveljaven ${G[$.format]??Y.format}`}case"not_multiple_of":return`Neveljavno \u0161tevilo: mora biti ve\u010Dkratnik ${Y.divisor}`;case"unrecognized_keys":return`Neprepoznan${Y.keys.length>1?"i klju\u010Di":" klju\u010D"}: ${h(Y.keys,", ")}`;case"invalid_key":return`Neveljaven klju\u010D v ${Y.origin}`;case"invalid_union":return"Neveljaven vnos";case"invalid_element":return`Neveljavna vrednost v ${Y.origin}`;default:return"Neveljaven vnos"}}};var C2=M(()=>{K6()});function kL(){return{localeError:ax()}}var ax=()=>{let J={string:{unit:"tecken",verb:"att ha"},file:{unit:"bytes",verb:"att ha"},array:{unit:"objekt",verb:"att inneh\xE5lla"},set:{unit:"objekt",verb:"att inneh\xE5lla"}};function W(Y){return J[Y]??null}let X=(Y)=>{let $=typeof Y;switch($){case"number":return Number.isNaN(Y)?"NaN":"antal";case"object":{if(Array.isArray(Y))return"lista";if(Y===null)return"null";if(Object.getPrototypeOf(Y)!==Object.prototype&&Y.constructor)return Y.constructor.name}}return $},G={regex:"regulj\xE4rt uttryck",email:"e-postadress",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO-datum och tid",date:"ISO-datum",time:"ISO-tid",duration:"ISO-varaktighet",ipv4:"IPv4-intervall",ipv6:"IPv6-intervall",cidrv4:"IPv4-spektrum",cidrv6:"IPv6-spektrum",base64:"base64-kodad str\xE4ng",base64url:"base64url-kodad str\xE4ng",json_string:"JSON-str\xE4ng",e164:"E.164-nummer",jwt:"JWT",template_literal:"mall-literal"};return(Y)=>{switch(Y.code){case"invalid_type":return`Ogiltig inmatning: f\xF6rv\xE4ntat ${Y.expected}, fick ${X(Y.input)}`;case"invalid_value":if(Y.values.length===1)return`Ogiltig inmatning: f\xF6rv\xE4ntat ${d(Y.values[0])}`;return`Ogiltigt val: f\xF6rv\xE4ntade en av ${h(Y.values,"|")}`;case"too_big":{let $=Y.inclusive?"<=":"<",K=W(Y.origin);if(K)return`F\xF6r stor(t): f\xF6rv\xE4ntade ${Y.origin??"v\xE4rdet"} att ha ${$}${Y.maximum.toString()} ${K.unit??"element"}`;return`F\xF6r stor(t): f\xF6rv\xE4ntat ${Y.origin??"v\xE4rdet"} att ha ${$}${Y.maximum.toString()}`}case"too_small":{let $=Y.inclusive?">=":">",K=W(Y.origin);if(K)return`F\xF6r lite(t): f\xF6rv\xE4ntade ${Y.origin??"v\xE4rdet"} att ha ${$}${Y.minimum.toString()} ${K.unit}`;return`F\xF6r lite(t): f\xF6rv\xE4ntade ${Y.origin??"v\xE4rdet"} att ha ${$}${Y.minimum.toString()}`}case"invalid_format":{let $=Y;if($.format==="starts_with")return`Ogiltig str\xE4ng: m\xE5ste b\xF6rja med "${$.prefix}"`;if($.format==="ends_with")return`Ogiltig str\xE4ng: m\xE5ste sluta med "${$.suffix}"`;if($.format==="includes")return`Ogiltig str\xE4ng: m\xE5ste inneh\xE5lla "${$.includes}"`;if($.format==="regex")return`Ogiltig str\xE4ng: m\xE5ste matcha m\xF6nstret "${$.pattern}"`;return`Ogiltig(t) ${G[$.format]??Y.format}`}case"not_multiple_of":return`Ogiltigt tal: m\xE5ste vara en multipel av ${Y.divisor}`;case"unrecognized_keys":return`${Y.keys.length>1?"Ok\xE4nda nycklar":"Ok\xE4nd nyckel"}: ${h(Y.keys,", ")}`;case"invalid_key":return`Ogiltig nyckel i ${Y.origin??"v\xE4rdet"}`;case"invalid_union":return"Ogiltig input";case"invalid_element":return`Ogiltigt v\xE4rde i ${Y.origin??"v\xE4rdet"}`;default:return"Ogiltig input"}}};var b2=M(()=>{K6()});function hL(){return{localeError:tx()}}var tx=()=>{let J={string:{unit:"\u0B8E\u0BB4\u0BC1\u0BA4\u0BCD\u0BA4\u0BC1\u0B95\u0BCD\u0B95\u0BB3\u0BCD",verb:"\u0B95\u0BCA\u0BA3\u0BCD\u0B9F\u0BBF\u0BB0\u0BC1\u0B95\u0BCD\u0B95 \u0BB5\u0BC7\u0BA3\u0BCD\u0B9F\u0BC1\u0BAE\u0BCD"},file:{unit:"\u0BAA\u0BC8\u0B9F\u0BCD\u0B9F\u0BC1\u0B95\u0BB3\u0BCD",verb:"\u0B95\u0BCA\u0BA3\u0BCD\u0B9F\u0BBF\u0BB0\u0BC1\u0B95\u0BCD\u0B95 \u0BB5\u0BC7\u0BA3\u0BCD\u0B9F\u0BC1\u0BAE\u0BCD"},array:{unit:"\u0B89\u0BB1\u0BC1\u0BAA\u0BCD\u0BAA\u0BC1\u0B95\u0BB3\u0BCD",verb:"\u0B95\u0BCA\u0BA3\u0BCD\u0B9F\u0BBF\u0BB0\u0BC1\u0B95\u0BCD\u0B95 \u0BB5\u0BC7\u0BA3\u0BCD\u0B9F\u0BC1\u0BAE\u0BCD"},set:{unit:"\u0B89\u0BB1\u0BC1\u0BAA\u0BCD\u0BAA\u0BC1\u0B95\u0BB3\u0BCD",verb:"\u0B95\u0BCA\u0BA3\u0BCD\u0B9F\u0BBF\u0BB0\u0BC1\u0B95\u0BCD\u0B95 \u0BB5\u0BC7\u0BA3\u0BCD\u0B9F\u0BC1\u0BAE\u0BCD"}};function W(Y){return J[Y]??null}let X=(Y)=>{let $=typeof Y;switch($){case"number":return Number.isNaN(Y)?"\u0B8E\u0BA3\u0BCD \u0B85\u0BB2\u0BCD\u0BB2\u0BBE\u0BA4\u0BA4\u0BC1":"\u0B8E\u0BA3\u0BCD";case"object":{if(Array.isArray(Y))return"\u0B85\u0BA3\u0BBF";if(Y===null)return"\u0BB5\u0BC6\u0BB1\u0BC1\u0BAE\u0BC8";if(Object.getPrototypeOf(Y)!==Object.prototype&&Y.constructor)return Y.constructor.name}}return $},G={regex:"\u0B89\u0BB3\u0BCD\u0BB3\u0BC0\u0B9F\u0BC1",email:"\u0BAE\u0BBF\u0BA9\u0BCD\u0BA9\u0B9E\u0BCD\u0B9A\u0BB2\u0BCD \u0BAE\u0BC1\u0B95\u0BB5\u0BB0\u0BBF",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO \u0BA4\u0BC7\u0BA4\u0BBF \u0BA8\u0BC7\u0BB0\u0BAE\u0BCD",date:"ISO \u0BA4\u0BC7\u0BA4\u0BBF",time:"ISO \u0BA8\u0BC7\u0BB0\u0BAE\u0BCD",duration:"ISO \u0B95\u0BBE\u0BB2 \u0B85\u0BB3\u0BB5\u0BC1",ipv4:"IPv4 \u0BAE\u0BC1\u0B95\u0BB5\u0BB0\u0BBF",ipv6:"IPv6 \u0BAE\u0BC1\u0B95\u0BB5\u0BB0\u0BBF",cidrv4:"IPv4 \u0BB5\u0BB0\u0BAE\u0BCD\u0BAA\u0BC1",cidrv6:"IPv6 \u0BB5\u0BB0\u0BAE\u0BCD\u0BAA\u0BC1",base64:"base64-encoded \u0B9A\u0BB0\u0BAE\u0BCD",base64url:"base64url-encoded \u0B9A\u0BB0\u0BAE\u0BCD",json_string:"JSON \u0B9A\u0BB0\u0BAE\u0BCD",e164:"E.164 \u0B8E\u0BA3\u0BCD",jwt:"JWT",template_literal:"input"};return(Y)=>{switch(Y.code){case"invalid_type":return`\u0BA4\u0BB5\u0BB1\u0BBE\u0BA9 \u0B89\u0BB3\u0BCD\u0BB3\u0BC0\u0B9F\u0BC1: \u0B8E\u0BA4\u0BBF\u0BB0\u0BCD\u0BAA\u0BBE\u0BB0\u0BCD\u0B95\u0BCD\u0B95\u0BAA\u0BCD\u0BAA\u0B9F\u0BCD\u0B9F\u0BA4\u0BC1 ${Y.expected}, \u0BAA\u0BC6\u0BB1\u0BAA\u0BCD\u0BAA\u0B9F\u0BCD\u0B9F\u0BA4\u0BC1 ${X(Y.input)}`;case"invalid_value":if(Y.values.length===1)return`\u0BA4\u0BB5\u0BB1\u0BBE\u0BA9 \u0B89\u0BB3\u0BCD\u0BB3\u0BC0\u0B9F\u0BC1: \u0B8E\u0BA4\u0BBF\u0BB0\u0BCD\u0BAA\u0BBE\u0BB0\u0BCD\u0B95\u0BCD\u0B95\u0BAA\u0BCD\u0BAA\u0B9F\u0BCD\u0B9F\u0BA4\u0BC1 ${d(Y.values[0])}`;return`\u0BA4\u0BB5\u0BB1\u0BBE\u0BA9 \u0BB5\u0BBF\u0BB0\u0BC1\u0BAA\u0BCD\u0BAA\u0BAE\u0BCD: \u0B8E\u0BA4\u0BBF\u0BB0\u0BCD\u0BAA\u0BBE\u0BB0\u0BCD\u0B95\u0BCD\u0B95\u0BAA\u0BCD\u0BAA\u0B9F\u0BCD\u0B9F\u0BA4\u0BC1 ${h(Y.values,"|")} \u0B87\u0BB2\u0BCD \u0B92\u0BA9\u0BCD\u0BB1\u0BC1`;case"too_big":{let $=Y.inclusive?"<=":"<",K=W(Y.origin);if(K)return`\u0BAE\u0BBF\u0B95 \u0BAA\u0BC6\u0BB0\u0BBF\u0BAF\u0BA4\u0BC1: \u0B8E\u0BA4\u0BBF\u0BB0\u0BCD\u0BAA\u0BBE\u0BB0\u0BCD\u0B95\u0BCD\u0B95\u0BAA\u0BCD\u0BAA\u0B9F\u0BCD\u0B9F\u0BA4\u0BC1 ${Y.origin??"\u0BAE\u0BA4\u0BBF\u0BAA\u0BCD\u0BAA\u0BC1"} ${$}${Y.maximum.toString()} ${K.unit??"\u0B89\u0BB1\u0BC1\u0BAA\u0BCD\u0BAA\u0BC1\u0B95\u0BB3\u0BCD"} \u0B86\u0B95 \u0B87\u0BB0\u0BC1\u0B95\u0BCD\u0B95 \u0BB5\u0BC7\u0BA3\u0BCD\u0B9F\u0BC1\u0BAE\u0BCD`;return`\u0BAE\u0BBF\u0B95 \u0BAA\u0BC6\u0BB0\u0BBF\u0BAF\u0BA4\u0BC1: \u0B8E\u0BA4\u0BBF\u0BB0\u0BCD\u0BAA\u0BBE\u0BB0\u0BCD\u0B95\u0BCD\u0B95\u0BAA\u0BCD\u0BAA\u0B9F\u0BCD\u0B9F\u0BA4\u0BC1 ${Y.origin??"\u0BAE\u0BA4\u0BBF\u0BAA\u0BCD\u0BAA\u0BC1"} ${$}${Y.maximum.toString()} \u0B86\u0B95 \u0B87\u0BB0\u0BC1\u0B95\u0BCD\u0B95 \u0BB5\u0BC7\u0BA3\u0BCD\u0B9F\u0BC1\u0BAE\u0BCD`}case"too_small":{let $=Y.inclusive?">=":">",K=W(Y.origin);if(K)return`\u0BAE\u0BBF\u0B95\u0B9A\u0BCD \u0B9A\u0BBF\u0BB1\u0BBF\u0BAF\u0BA4\u0BC1: \u0B8E\u0BA4\u0BBF\u0BB0\u0BCD\u0BAA\u0BBE\u0BB0\u0BCD\u0B95\u0BCD\u0B95\u0BAA\u0BCD\u0BAA\u0B9F\u0BCD\u0B9F\u0BA4\u0BC1 ${Y.origin} ${$}${Y.minimum.toString()} ${K.unit} \u0B86\u0B95 \u0B87\u0BB0\u0BC1\u0B95\u0BCD\u0B95 \u0BB5\u0BC7\u0BA3\u0BCD\u0B9F\u0BC1\u0BAE\u0BCD`;return`\u0BAE\u0BBF\u0B95\u0B9A\u0BCD \u0B9A\u0BBF\u0BB1\u0BBF\u0BAF\u0BA4\u0BC1: \u0B8E\u0BA4\u0BBF\u0BB0\u0BCD\u0BAA\u0BBE\u0BB0\u0BCD\u0B95\u0BCD\u0B95\u0BAA\u0BCD\u0BAA\u0B9F\u0BCD\u0B9F\u0BA4\u0BC1 ${Y.origin} ${$}${Y.minimum.toString()} \u0B86\u0B95 \u0B87\u0BB0\u0BC1\u0B95\u0BCD\u0B95 \u0BB5\u0BC7\u0BA3\u0BCD\u0B9F\u0BC1\u0BAE\u0BCD`}case"invalid_format":{let $=Y;if($.format==="starts_with")return`\u0BA4\u0BB5\u0BB1\u0BBE\u0BA9 \u0B9A\u0BB0\u0BAE\u0BCD: "${$.prefix}" \u0B87\u0BB2\u0BCD \u0BA4\u0BCA\u0B9F\u0B99\u0BCD\u0B95 \u0BB5\u0BC7\u0BA3\u0BCD\u0B9F\u0BC1\u0BAE\u0BCD`;if($.format==="ends_with")return`\u0BA4\u0BB5\u0BB1\u0BBE\u0BA9 \u0B9A\u0BB0\u0BAE\u0BCD: "${$.suffix}" \u0B87\u0BB2\u0BCD \u0BAE\u0BC1\u0B9F\u0BBF\u0BB5\u0B9F\u0BC8\u0BAF \u0BB5\u0BC7\u0BA3\u0BCD\u0B9F\u0BC1\u0BAE\u0BCD`;if($.format==="includes")return`\u0BA4\u0BB5\u0BB1\u0BBE\u0BA9 \u0B9A\u0BB0\u0BAE\u0BCD: "${$.includes}" \u0B90 \u0B89\u0BB3\u0BCD\u0BB3\u0B9F\u0B95\u0BCD\u0B95 \u0BB5\u0BC7\u0BA3\u0BCD\u0B9F\u0BC1\u0BAE\u0BCD`;if($.format==="regex")return`\u0BA4\u0BB5\u0BB1\u0BBE\u0BA9 \u0B9A\u0BB0\u0BAE\u0BCD: ${$.pattern} \u0BAE\u0BC1\u0BB1\u0BC8\u0BAA\u0BBE\u0B9F\u0BCD\u0B9F\u0BC1\u0B9F\u0BA9\u0BCD \u0BAA\u0BCA\u0BB0\u0BC1\u0BA8\u0BCD\u0BA4 \u0BB5\u0BC7\u0BA3\u0BCD\u0B9F\u0BC1\u0BAE\u0BCD`;return`\u0BA4\u0BB5\u0BB1\u0BBE\u0BA9 ${G[$.format]??Y.format}`}case"not_multiple_of":return`\u0BA4\u0BB5\u0BB1\u0BBE\u0BA9 \u0B8E\u0BA3\u0BCD: ${Y.divisor} \u0B87\u0BA9\u0BCD \u0BAA\u0BB2\u0BAE\u0BBE\u0B95 \u0B87\u0BB0\u0BC1\u0B95\u0BCD\u0B95 \u0BB5\u0BC7\u0BA3\u0BCD\u0B9F\u0BC1\u0BAE\u0BCD`;case"unrecognized_keys":return`\u0B85\u0B9F\u0BC8\u0BAF\u0BBE\u0BB3\u0BAE\u0BCD \u0BA4\u0BC6\u0BB0\u0BBF\u0BAF\u0BBE\u0BA4 \u0BB5\u0BBF\u0B9A\u0BC8${Y.keys.length>1?"\u0B95\u0BB3\u0BCD":""}: ${h(Y.keys,", ")}`;case"invalid_key":return`${Y.origin} \u0B87\u0BB2\u0BCD \u0BA4\u0BB5\u0BB1\u0BBE\u0BA9 \u0BB5\u0BBF\u0B9A\u0BC8`;case"invalid_union":return"\u0BA4\u0BB5\u0BB1\u0BBE\u0BA9 \u0B89\u0BB3\u0BCD\u0BB3\u0BC0\u0B9F\u0BC1";case"invalid_element":return`${Y.origin} \u0B87\u0BB2\u0BCD \u0BA4\u0BB5\u0BB1\u0BBE\u0BA9 \u0BAE\u0BA4\u0BBF\u0BAA\u0BCD\u0BAA\u0BC1`;default:return"\u0BA4\u0BB5\u0BB1\u0BBE\u0BA9 \u0B89\u0BB3\u0BCD\u0BB3\u0BC0\u0B9F\u0BC1"}}};var k2=M(()=>{K6()});function gL(){return{localeError:ox()}}var ox=()=>{let J={string:{unit:"\u0E15\u0E31\u0E27\u0E2D\u0E31\u0E01\u0E29\u0E23",verb:"\u0E04\u0E27\u0E23\u0E21\u0E35"},file:{unit:"\u0E44\u0E1A\u0E15\u0E4C",verb:"\u0E04\u0E27\u0E23\u0E21\u0E35"},array:{unit:"\u0E23\u0E32\u0E22\u0E01\u0E32\u0E23",verb:"\u0E04\u0E27\u0E23\u0E21\u0E35"},set:{unit:"\u0E23\u0E32\u0E22\u0E01\u0E32\u0E23",verb:"\u0E04\u0E27\u0E23\u0E21\u0E35"}};function W(Y){return J[Y]??null}let X=(Y)=>{let $=typeof Y;switch($){case"number":return Number.isNaN(Y)?"\u0E44\u0E21\u0E48\u0E43\u0E0A\u0E48\u0E15\u0E31\u0E27\u0E40\u0E25\u0E02 (NaN)":"\u0E15\u0E31\u0E27\u0E40\u0E25\u0E02";case"object":{if(Array.isArray(Y))return"\u0E2D\u0E32\u0E23\u0E4C\u0E40\u0E23\u0E22\u0E4C (Array)";if(Y===null)return"\u0E44\u0E21\u0E48\u0E21\u0E35\u0E04\u0E48\u0E32 (null)";if(Object.getPrototypeOf(Y)!==Object.prototype&&Y.constructor)return Y.constructor.name}}return $},G={regex:"\u0E02\u0E49\u0E2D\u0E21\u0E39\u0E25\u0E17\u0E35\u0E48\u0E1B\u0E49\u0E2D\u0E19",email:"\u0E17\u0E35\u0E48\u0E2D\u0E22\u0E39\u0E48\u0E2D\u0E35\u0E40\u0E21\u0E25",url:"URL",emoji:"\u0E2D\u0E34\u0E42\u0E21\u0E08\u0E34",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"\u0E27\u0E31\u0E19\u0E17\u0E35\u0E48\u0E40\u0E27\u0E25\u0E32\u0E41\u0E1A\u0E1A ISO",date:"\u0E27\u0E31\u0E19\u0E17\u0E35\u0E48\u0E41\u0E1A\u0E1A ISO",time:"\u0E40\u0E27\u0E25\u0E32\u0E41\u0E1A\u0E1A ISO",duration:"\u0E0A\u0E48\u0E27\u0E07\u0E40\u0E27\u0E25\u0E32\u0E41\u0E1A\u0E1A ISO",ipv4:"\u0E17\u0E35\u0E48\u0E2D\u0E22\u0E39\u0E48 IPv4",ipv6:"\u0E17\u0E35\u0E48\u0E2D\u0E22\u0E39\u0E48 IPv6",cidrv4:"\u0E0A\u0E48\u0E27\u0E07 IP \u0E41\u0E1A\u0E1A IPv4",cidrv6:"\u0E0A\u0E48\u0E27\u0E07 IP \u0E41\u0E1A\u0E1A IPv6",base64:"\u0E02\u0E49\u0E2D\u0E04\u0E27\u0E32\u0E21\u0E41\u0E1A\u0E1A Base64",base64url:"\u0E02\u0E49\u0E2D\u0E04\u0E27\u0E32\u0E21\u0E41\u0E1A\u0E1A Base64 \u0E2A\u0E33\u0E2B\u0E23\u0E31\u0E1A URL",json_string:"\u0E02\u0E49\u0E2D\u0E04\u0E27\u0E32\u0E21\u0E41\u0E1A\u0E1A JSON",e164:"\u0E40\u0E1A\u0E2D\u0E23\u0E4C\u0E42\u0E17\u0E23\u0E28\u0E31\u0E1E\u0E17\u0E4C\u0E23\u0E30\u0E2B\u0E27\u0E48\u0E32\u0E07\u0E1B\u0E23\u0E30\u0E40\u0E17\u0E28 (E.164)",jwt:"\u0E42\u0E17\u0E40\u0E04\u0E19 JWT",template_literal:"\u0E02\u0E49\u0E2D\u0E21\u0E39\u0E25\u0E17\u0E35\u0E48\u0E1B\u0E49\u0E2D\u0E19"};return(Y)=>{switch(Y.code){case"invalid_type":return`\u0E1B\u0E23\u0E30\u0E40\u0E20\u0E17\u0E02\u0E49\u0E2D\u0E21\u0E39\u0E25\u0E44\u0E21\u0E48\u0E16\u0E39\u0E01\u0E15\u0E49\u0E2D\u0E07: \u0E04\u0E27\u0E23\u0E40\u0E1B\u0E47\u0E19 ${Y.expected} \u0E41\u0E15\u0E48\u0E44\u0E14\u0E49\u0E23\u0E31\u0E1A ${X(Y.input)}`;case"invalid_value":if(Y.values.length===1)return`\u0E04\u0E48\u0E32\u0E44\u0E21\u0E48\u0E16\u0E39\u0E01\u0E15\u0E49\u0E2D\u0E07: \u0E04\u0E27\u0E23\u0E40\u0E1B\u0E47\u0E19 ${d(Y.values[0])}`;return`\u0E15\u0E31\u0E27\u0E40\u0E25\u0E37\u0E2D\u0E01\u0E44\u0E21\u0E48\u0E16\u0E39\u0E01\u0E15\u0E49\u0E2D\u0E07: \u0E04\u0E27\u0E23\u0E40\u0E1B\u0E47\u0E19\u0E2B\u0E19\u0E36\u0E48\u0E07\u0E43\u0E19 ${h(Y.values,"|")}`;case"too_big":{let $=Y.inclusive?"\u0E44\u0E21\u0E48\u0E40\u0E01\u0E34\u0E19":"\u0E19\u0E49\u0E2D\u0E22\u0E01\u0E27\u0E48\u0E32",K=W(Y.origin);if(K)return`\u0E40\u0E01\u0E34\u0E19\u0E01\u0E33\u0E2B\u0E19\u0E14: ${Y.origin??"\u0E04\u0E48\u0E32"} \u0E04\u0E27\u0E23\u0E21\u0E35${$} ${Y.maximum.toString()} ${K.unit??"\u0E23\u0E32\u0E22\u0E01\u0E32\u0E23"}`;return`\u0E40\u0E01\u0E34\u0E19\u0E01\u0E33\u0E2B\u0E19\u0E14: ${Y.origin??"\u0E04\u0E48\u0E32"} \u0E04\u0E27\u0E23\u0E21\u0E35${$} ${Y.maximum.toString()}`}case"too_small":{let $=Y.inclusive?"\u0E2D\u0E22\u0E48\u0E32\u0E07\u0E19\u0E49\u0E2D\u0E22":"\u0E21\u0E32\u0E01\u0E01\u0E27\u0E48\u0E32",K=W(Y.origin);if(K)return`\u0E19\u0E49\u0E2D\u0E22\u0E01\u0E27\u0E48\u0E32\u0E01\u0E33\u0E2B\u0E19\u0E14: ${Y.origin} \u0E04\u0E27\u0E23\u0E21\u0E35${$} ${Y.minimum.toString()} ${K.unit}`;return`\u0E19\u0E49\u0E2D\u0E22\u0E01\u0E27\u0E48\u0E32\u0E01\u0E33\u0E2B\u0E19\u0E14: ${Y.origin} \u0E04\u0E27\u0E23\u0E21\u0E35${$} ${Y.minimum.toString()}`}case"invalid_format":{let $=Y;if($.format==="starts_with")return`\u0E23\u0E39\u0E1B\u0E41\u0E1A\u0E1A\u0E44\u0E21\u0E48\u0E16\u0E39\u0E01\u0E15\u0E49\u0E2D\u0E07: \u0E02\u0E49\u0E2D\u0E04\u0E27\u0E32\u0E21\u0E15\u0E49\u0E2D\u0E07\u0E02\u0E36\u0E49\u0E19\u0E15\u0E49\u0E19\u0E14\u0E49\u0E27\u0E22 "${$.prefix}"`;if($.format==="ends_with")return`\u0E23\u0E39\u0E1B\u0E41\u0E1A\u0E1A\u0E44\u0E21\u0E48\u0E16\u0E39\u0E01\u0E15\u0E49\u0E2D\u0E07: \u0E02\u0E49\u0E2D\u0E04\u0E27\u0E32\u0E21\u0E15\u0E49\u0E2D\u0E07\u0E25\u0E07\u0E17\u0E49\u0E32\u0E22\u0E14\u0E49\u0E27\u0E22 "${$.suffix}"`;if($.format==="includes")return`\u0E23\u0E39\u0E1B\u0E41\u0E1A\u0E1A\u0E44\u0E21\u0E48\u0E16\u0E39\u0E01\u0E15\u0E49\u0E2D\u0E07: \u0E02\u0E49\u0E2D\u0E04\u0E27\u0E32\u0E21\u0E15\u0E49\u0E2D\u0E07\u0E21\u0E35 "${$.includes}" \u0E2D\u0E22\u0E39\u0E48\u0E43\u0E19\u0E02\u0E49\u0E2D\u0E04\u0E27\u0E32\u0E21`;if($.format==="regex")return`\u0E23\u0E39\u0E1B\u0E41\u0E1A\u0E1A\u0E44\u0E21\u0E48\u0E16\u0E39\u0E01\u0E15\u0E49\u0E2D\u0E07: \u0E15\u0E49\u0E2D\u0E07\u0E15\u0E23\u0E07\u0E01\u0E31\u0E1A\u0E23\u0E39\u0E1B\u0E41\u0E1A\u0E1A\u0E17\u0E35\u0E48\u0E01\u0E33\u0E2B\u0E19\u0E14 ${$.pattern}`;return`\u0E23\u0E39\u0E1B\u0E41\u0E1A\u0E1A\u0E44\u0E21\u0E48\u0E16\u0E39\u0E01\u0E15\u0E49\u0E2D\u0E07: ${G[$.format]??Y.format}`}case"not_multiple_of":return`\u0E15\u0E31\u0E27\u0E40\u0E25\u0E02\u0E44\u0E21\u0E48\u0E16\u0E39\u0E01\u0E15\u0E49\u0E2D\u0E07: \u0E15\u0E49\u0E2D\u0E07\u0E40\u0E1B\u0E47\u0E19\u0E08\u0E33\u0E19\u0E27\u0E19\u0E17\u0E35\u0E48\u0E2B\u0E32\u0E23\u0E14\u0E49\u0E27\u0E22 ${Y.divisor} \u0E44\u0E14\u0E49\u0E25\u0E07\u0E15\u0E31\u0E27`;case"unrecognized_keys":return`\u0E1E\u0E1A\u0E04\u0E35\u0E22\u0E4C\u0E17\u0E35\u0E48\u0E44\u0E21\u0E48\u0E23\u0E39\u0E49\u0E08\u0E31\u0E01: ${h(Y.keys,", ")}`;case"invalid_key":return`\u0E04\u0E35\u0E22\u0E4C\u0E44\u0E21\u0E48\u0E16\u0E39\u0E01\u0E15\u0E49\u0E2D\u0E07\u0E43\u0E19 ${Y.origin}`;case"invalid_union":return"\u0E02\u0E49\u0E2D\u0E21\u0E39\u0E25\u0E44\u0E21\u0E48\u0E16\u0E39\u0E01\u0E15\u0E49\u0E2D\u0E07: \u0E44\u0E21\u0E48\u0E15\u0E23\u0E07\u0E01\u0E31\u0E1A\u0E23\u0E39\u0E1B\u0E41\u0E1A\u0E1A\u0E22\u0E39\u0E40\u0E19\u0E35\u0E22\u0E19\u0E17\u0E35\u0E48\u0E01\u0E33\u0E2B\u0E19\u0E14\u0E44\u0E27\u0E49";case"invalid_element":return`\u0E02\u0E49\u0E2D\u0E21\u0E39\u0E25\u0E44\u0E21\u0E48\u0E16\u0E39\u0E01\u0E15\u0E49\u0E2D\u0E07\u0E43\u0E19 ${Y.origin}`;default:return"\u0E02\u0E49\u0E2D\u0E21\u0E39\u0E25\u0E44\u0E21\u0E48\u0E16\u0E39\u0E01\u0E15\u0E49\u0E2D\u0E07"}}};var h2=M(()=>{K6()});function mL(){return{localeError:ex()}}var sx=(J)=>{let W=typeof J;switch(W){case"number":return Number.isNaN(J)?"NaN":"number";case"object":{if(Array.isArray(J))return"array";if(J===null)return"null";if(Object.getPrototypeOf(J)!==Object.prototype&&J.constructor)return J.constructor.name}}return W},ex=()=>{let J={string:{unit:"karakter",verb:"olmal\u0131"},file:{unit:"bayt",verb:"olmal\u0131"},array:{unit:"\xF6\u011Fe",verb:"olmal\u0131"},set:{unit:"\xF6\u011Fe",verb:"olmal\u0131"}};function W(G){return J[G]??null}let X={regex:"girdi",email:"e-posta adresi",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO tarih ve saat",date:"ISO tarih",time:"ISO saat",duration:"ISO s\xFCre",ipv4:"IPv4 adresi",ipv6:"IPv6 adresi",cidrv4:"IPv4 aral\u0131\u011F\u0131",cidrv6:"IPv6 aral\u0131\u011F\u0131",base64:"base64 ile \u015Fifrelenmi\u015F metin",base64url:"base64url ile \u015Fifrelenmi\u015F metin",json_string:"JSON dizesi",e164:"E.164 say\u0131s\u0131",jwt:"JWT",template_literal:"\u015Eablon dizesi"};return(G)=>{switch(G.code){case"invalid_type":return`Ge\xE7ersiz de\u011Fer: beklenen ${G.expected}, al\u0131nan ${sx(G.input)}`;case"invalid_value":if(G.values.length===1)return`Ge\xE7ersiz de\u011Fer: beklenen ${d(G.values[0])}`;return`Ge\xE7ersiz se\xE7enek: a\u015Fa\u011F\u0131dakilerden biri olmal\u0131: ${h(G.values,"|")}`;case"too_big":{let Y=G.inclusive?"<=":"<",$=W(G.origin);if($)return`\xC7ok b\xFCy\xFCk: beklenen ${G.origin??"de\u011Fer"} ${Y}${G.maximum.toString()} ${$.unit??"\xF6\u011Fe"}`;return`\xC7ok b\xFCy\xFCk: beklenen ${G.origin??"de\u011Fer"} ${Y}${G.maximum.toString()}`}case"too_small":{let Y=G.inclusive?">=":">",$=W(G.origin);if($)return`\xC7ok k\xFC\xE7\xFCk: beklenen ${G.origin} ${Y}${G.minimum.toString()} ${$.unit}`;return`\xC7ok k\xFC\xE7\xFCk: beklenen ${G.origin} ${Y}${G.minimum.toString()}`}case"invalid_format":{let Y=G;if(Y.format==="starts_with")return`Ge\xE7ersiz metin: "${Y.prefix}" ile ba\u015Flamal\u0131`;if(Y.format==="ends_with")return`Ge\xE7ersiz metin: "${Y.suffix}" ile bitmeli`;if(Y.format==="includes")return`Ge\xE7ersiz metin: "${Y.includes}" i\xE7ermeli`;if(Y.format==="regex")return`Ge\xE7ersiz metin: ${Y.pattern} desenine uymal\u0131`;return`Ge\xE7ersiz ${X[Y.format]??G.format}`}case"not_multiple_of":return`Ge\xE7ersiz say\u0131: ${G.divisor} ile tam b\xF6l\xFCnebilmeli`;case"unrecognized_keys":return`Tan\u0131nmayan anahtar${G.keys.length>1?"lar":""}: ${h(G.keys,", ")}`;case"invalid_key":return`${G.origin} i\xE7inde ge\xE7ersiz anahtar`;case"invalid_union":return"Ge\xE7ersiz de\u011Fer";case"invalid_element":return`${G.origin} i\xE7inde ge\xE7ersiz de\u011Fer`;default:return"Ge\xE7ersiz de\u011Fer"}}};var g2=M(()=>{K6()});function Z$(){return{localeError:Ju()}}var Ju=()=>{let J={string:{unit:"\u0441\u0438\u043C\u0432\u043E\u043B\u0456\u0432",verb:"\u043C\u0430\u0442\u0438\u043C\u0435"},file:{unit:"\u0431\u0430\u0439\u0442\u0456\u0432",verb:"\u043C\u0430\u0442\u0438\u043C\u0435"},array:{unit:"\u0435\u043B\u0435\u043C\u0435\u043D\u0442\u0456\u0432",verb:"\u043C\u0430\u0442\u0438\u043C\u0435"},set:{unit:"\u0435\u043B\u0435\u043C\u0435\u043D\u0442\u0456\u0432",verb:"\u043C\u0430\u0442\u0438\u043C\u0435"}};function W(Y){return J[Y]??null}let X=(Y)=>{let $=typeof Y;switch($){case"number":return Number.isNaN(Y)?"NaN":"\u0447\u0438\u0441\u043B\u043E";case"object":{if(Array.isArray(Y))return"\u043C\u0430\u0441\u0438\u0432";if(Y===null)return"null";if(Object.getPrototypeOf(Y)!==Object.prototype&&Y.constructor)return Y.constructor.name}}return $},G={regex:"\u0432\u0445\u0456\u0434\u043D\u0456 \u0434\u0430\u043D\u0456",email:"\u0430\u0434\u0440\u0435\u0441\u0430 \u0435\u043B\u0435\u043A\u0442\u0440\u043E\u043D\u043D\u043E\u0457 \u043F\u043E\u0448\u0442\u0438",url:"URL",emoji:"\u0435\u043C\u043E\u0434\u0437\u0456",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"\u0434\u0430\u0442\u0430 \u0442\u0430 \u0447\u0430\u0441 ISO",date:"\u0434\u0430\u0442\u0430 ISO",time:"\u0447\u0430\u0441 ISO",duration:"\u0442\u0440\u0438\u0432\u0430\u043B\u0456\u0441\u0442\u044C ISO",ipv4:"\u0430\u0434\u0440\u0435\u0441\u0430 IPv4",ipv6:"\u0430\u0434\u0440\u0435\u0441\u0430 IPv6",cidrv4:"\u0434\u0456\u0430\u043F\u0430\u0437\u043E\u043D IPv4",cidrv6:"\u0434\u0456\u0430\u043F\u0430\u0437\u043E\u043D IPv6",base64:"\u0440\u044F\u0434\u043E\u043A \u0443 \u043A\u043E\u0434\u0443\u0432\u0430\u043D\u043D\u0456 base64",base64url:"\u0440\u044F\u0434\u043E\u043A \u0443 \u043A\u043E\u0434\u0443\u0432\u0430\u043D\u043D\u0456 base64url",json_string:"\u0440\u044F\u0434\u043E\u043A JSON",e164:"\u043D\u043E\u043C\u0435\u0440 E.164",jwt:"JWT",template_literal:"\u0432\u0445\u0456\u0434\u043D\u0456 \u0434\u0430\u043D\u0456"};return(Y)=>{switch(Y.code){case"invalid_type":return`\u041D\u0435\u043F\u0440\u0430\u0432\u0438\u043B\u044C\u043D\u0456 \u0432\u0445\u0456\u0434\u043D\u0456 \u0434\u0430\u043D\u0456: \u043E\u0447\u0456\u043A\u0443\u0454\u0442\u044C\u0441\u044F ${Y.expected}, \u043E\u0442\u0440\u0438\u043C\u0430\u043D\u043E ${X(Y.input)}`;case"invalid_value":if(Y.values.length===1)return`\u041D\u0435\u043F\u0440\u0430\u0432\u0438\u043B\u044C\u043D\u0456 \u0432\u0445\u0456\u0434\u043D\u0456 \u0434\u0430\u043D\u0456: \u043E\u0447\u0456\u043A\u0443\u0454\u0442\u044C\u0441\u044F ${d(Y.values[0])}`;return`\u041D\u0435\u043F\u0440\u0430\u0432\u0438\u043B\u044C\u043D\u0430 \u043E\u043F\u0446\u0456\u044F: \u043E\u0447\u0456\u043A\u0443\u0454\u0442\u044C\u0441\u044F \u043E\u0434\u043D\u0435 \u0437 ${h(Y.values,"|")}`;case"too_big":{let $=Y.inclusive?"<=":"<",K=W(Y.origin);if(K)return`\u0417\u0430\u043D\u0430\u0434\u0442\u043E \u0432\u0435\u043B\u0438\u043A\u0435: \u043E\u0447\u0456\u043A\u0443\u0454\u0442\u044C\u0441\u044F, \u0449\u043E ${Y.origin??"\u0437\u043D\u0430\u0447\u0435\u043D\u043D\u044F"} ${K.verb} ${$}${Y.maximum.toString()} ${K.unit??"\u0435\u043B\u0435\u043C\u0435\u043D\u0442\u0456\u0432"}`;return`\u0417\u0430\u043D\u0430\u0434\u0442\u043E \u0432\u0435\u043B\u0438\u043A\u0435: \u043E\u0447\u0456\u043A\u0443\u0454\u0442\u044C\u0441\u044F, \u0449\u043E ${Y.origin??"\u0437\u043D\u0430\u0447\u0435\u043D\u043D\u044F"} \u0431\u0443\u0434\u0435 ${$}${Y.maximum.toString()}`}case"too_small":{let $=Y.inclusive?">=":">",K=W(Y.origin);if(K)return`\u0417\u0430\u043D\u0430\u0434\u0442\u043E \u043C\u0430\u043B\u0435: \u043E\u0447\u0456\u043A\u0443\u0454\u0442\u044C\u0441\u044F, \u0449\u043E ${Y.origin} ${K.verb} ${$}${Y.minimum.toString()} ${K.unit}`;return`\u0417\u0430\u043D\u0430\u0434\u0442\u043E \u043C\u0430\u043B\u0435: \u043E\u0447\u0456\u043A\u0443\u0454\u0442\u044C\u0441\u044F, \u0449\u043E ${Y.origin} \u0431\u0443\u0434\u0435 ${$}${Y.minimum.toString()}`}case"invalid_format":{let $=Y;if($.format==="starts_with")return`\u041D\u0435\u043F\u0440\u0430\u0432\u0438\u043B\u044C\u043D\u0438\u0439 \u0440\u044F\u0434\u043E\u043A: \u043F\u043E\u0432\u0438\u043D\u0435\u043D \u043F\u043E\u0447\u0438\u043D\u0430\u0442\u0438\u0441\u044F \u0437 "${$.prefix}"`;if($.format==="ends_with")return`\u041D\u0435\u043F\u0440\u0430\u0432\u0438\u043B\u044C\u043D\u0438\u0439 \u0440\u044F\u0434\u043E\u043A: \u043F\u043E\u0432\u0438\u043D\u0435\u043D \u0437\u0430\u043A\u0456\u043D\u0447\u0443\u0432\u0430\u0442\u0438\u0441\u044F \u043D\u0430 "${$.suffix}"`;if($.format==="includes")return`\u041D\u0435\u043F\u0440\u0430\u0432\u0438\u043B\u044C\u043D\u0438\u0439 \u0440\u044F\u0434\u043E\u043A: \u043F\u043E\u0432\u0438\u043D\u0435\u043D \u043C\u0456\u0441\u0442\u0438\u0442\u0438 "${$.includes}"`;if($.format==="regex")return`\u041D\u0435\u043F\u0440\u0430\u0432\u0438\u043B\u044C\u043D\u0438\u0439 \u0440\u044F\u0434\u043E\u043A: \u043F\u043E\u0432\u0438\u043D\u0435\u043D \u0432\u0456\u0434\u043F\u043E\u0432\u0456\u0434\u0430\u0442\u0438 \u0448\u0430\u0431\u043B\u043E\u043D\u0443 ${$.pattern}`;return`\u041D\u0435\u043F\u0440\u0430\u0432\u0438\u043B\u044C\u043D\u0438\u0439 ${G[$.format]??Y.format}`}case"not_multiple_of":return`\u041D\u0435\u043F\u0440\u0430\u0432\u0438\u043B\u044C\u043D\u0435 \u0447\u0438\u0441\u043B\u043E: \u043F\u043E\u0432\u0438\u043D\u043D\u043E \u0431\u0443\u0442\u0438 \u043A\u0440\u0430\u0442\u043D\u0438\u043C ${Y.divisor}`;case"unrecognized_keys":return`\u041D\u0435\u0440\u043E\u0437\u043F\u0456\u0437\u043D\u0430\u043D\u0438\u0439 \u043A\u043B\u044E\u0447${Y.keys.length>1?"\u0456":""}: ${h(Y.keys,", ")}`;case"invalid_key":return`\u041D\u0435\u043F\u0440\u0430\u0432\u0438\u043B\u044C\u043D\u0438\u0439 \u043A\u043B\u044E\u0447 \u0443 ${Y.origin}`;case"invalid_union":return"\u041D\u0435\u043F\u0440\u0430\u0432\u0438\u043B\u044C\u043D\u0456 \u0432\u0445\u0456\u0434\u043D\u0456 \u0434\u0430\u043D\u0456";case"invalid_element":return`\u041D\u0435\u043F\u0440\u0430\u0432\u0438\u043B\u044C\u043D\u0435 \u0437\u043D\u0430\u0447\u0435\u043D\u043D\u044F \u0443 ${Y.origin}`;default:return"\u041D\u0435\u043F\u0440\u0430\u0432\u0438\u043B\u044C\u043D\u0456 \u0432\u0445\u0456\u0434\u043D\u0456 \u0434\u0430\u043D\u0456"}}};var fL=M(()=>{K6()});function yL(){return Z$()}var m2=M(()=>{fL()});function xL(){return{localeError:Wu()}}var Wu=()=>{let J={string:{unit:"\u062D\u0631\u0648\u0641",verb:"\u06C1\u0648\u0646\u0627"},file:{unit:"\u0628\u0627\u0626\u0679\u0633",verb:"\u06C1\u0648\u0646\u0627"},array:{unit:"\u0622\u0626\u0679\u0645\u0632",verb:"\u06C1\u0648\u0646\u0627"},set:{unit:"\u0622\u0626\u0679\u0645\u0632",verb:"\u06C1\u0648\u0646\u0627"}};function W(Y){return J[Y]??null}let X=(Y)=>{let $=typeof Y;switch($){case"number":return Number.isNaN(Y)?"NaN":"\u0646\u0645\u0628\u0631";case"object":{if(Array.isArray(Y))return"\u0622\u0631\u06D2";if(Y===null)return"\u0646\u0644";if(Object.getPrototypeOf(Y)!==Object.prototype&&Y.constructor)return Y.constructor.name}}return $},G={regex:"\u0627\u0646 \u067E\u0679",email:"\u0627\u06CC \u0645\u06CC\u0644 \u0627\u06CC\u0688\u0631\u06CC\u0633",url:"\u06CC\u0648 \u0622\u0631 \u0627\u06CC\u0644",emoji:"\u0627\u06CC\u0645\u0648\u062C\u06CC",uuid:"\u06CC\u0648 \u06CC\u0648 \u0622\u0626\u06CC \u0688\u06CC",uuidv4:"\u06CC\u0648 \u06CC\u0648 \u0622\u0626\u06CC \u0688\u06CC \u0648\u06CC 4",uuidv6:"\u06CC\u0648 \u06CC\u0648 \u0622\u0626\u06CC \u0688\u06CC \u0648\u06CC 6",nanoid:"\u0646\u06CC\u0646\u0648 \u0622\u0626\u06CC \u0688\u06CC",guid:"\u062C\u06CC \u06CC\u0648 \u0622\u0626\u06CC \u0688\u06CC",cuid:"\u0633\u06CC \u06CC\u0648 \u0622\u0626\u06CC \u0688\u06CC",cuid2:"\u0633\u06CC \u06CC\u0648 \u0622\u0626\u06CC \u0688\u06CC 2",ulid:"\u06CC\u0648 \u0627\u06CC\u0644 \u0622\u0626\u06CC \u0688\u06CC",xid:"\u0627\u06CC\u06A9\u0633 \u0622\u0626\u06CC \u0688\u06CC",ksuid:"\u06A9\u06D2 \u0627\u06CC\u0633 \u06CC\u0648 \u0622\u0626\u06CC \u0688\u06CC",datetime:"\u0622\u0626\u06CC \u0627\u06CC\u0633 \u0627\u0648 \u0688\u06CC\u0679 \u0679\u0627\u0626\u0645",date:"\u0622\u0626\u06CC \u0627\u06CC\u0633 \u0627\u0648 \u062A\u0627\u0631\u06CC\u062E",time:"\u0622\u0626\u06CC \u0627\u06CC\u0633 \u0627\u0648 \u0648\u0642\u062A",duration:"\u0622\u0626\u06CC \u0627\u06CC\u0633 \u0627\u0648 \u0645\u062F\u062A",ipv4:"\u0622\u0626\u06CC \u067E\u06CC \u0648\u06CC 4 \u0627\u06CC\u0688\u0631\u06CC\u0633",ipv6:"\u0622\u0626\u06CC \u067E\u06CC \u0648\u06CC 6 \u0627\u06CC\u0688\u0631\u06CC\u0633",cidrv4:"\u0622\u0626\u06CC \u067E\u06CC \u0648\u06CC 4 \u0631\u06CC\u0646\u062C",cidrv6:"\u0622\u0626\u06CC \u067E\u06CC \u0648\u06CC 6 \u0631\u06CC\u0646\u062C",base64:"\u0628\u06CC\u0633 64 \u0627\u0646 \u06A9\u0648\u0688\u0688 \u0633\u0679\u0631\u0646\u06AF",base64url:"\u0628\u06CC\u0633 64 \u06CC\u0648 \u0622\u0631 \u0627\u06CC\u0644 \u0627\u0646 \u06A9\u0648\u0688\u0688 \u0633\u0679\u0631\u0646\u06AF",json_string:"\u062C\u06D2 \u0627\u06CC\u0633 \u0627\u0648 \u0627\u06CC\u0646 \u0633\u0679\u0631\u0646\u06AF",e164:"\u0627\u06CC 164 \u0646\u0645\u0628\u0631",jwt:"\u062C\u06D2 \u0688\u0628\u0644\u06CC\u0648 \u0679\u06CC",template_literal:"\u0627\u0646 \u067E\u0679"};return(Y)=>{switch(Y.code){case"invalid_type":return`\u063A\u0644\u0637 \u0627\u0646 \u067E\u0679: ${Y.expected} \u0645\u062A\u0648\u0642\u0639 \u062A\u06BE\u0627\u060C ${X(Y.input)} \u0645\u0648\u0635\u0648\u0644 \u06C1\u0648\u0627`;case"invalid_value":if(Y.values.length===1)return`\u063A\u0644\u0637 \u0627\u0646 \u067E\u0679: ${d(Y.values[0])} \u0645\u062A\u0648\u0642\u0639 \u062A\u06BE\u0627`;return`\u063A\u0644\u0637 \u0622\u067E\u0634\u0646: ${h(Y.values,"|")} \u0645\u06CC\u06BA \u0633\u06D2 \u0627\u06CC\u06A9 \u0645\u062A\u0648\u0642\u0639 \u062A\u06BE\u0627`;case"too_big":{let $=Y.inclusive?"<=":"<",K=W(Y.origin);if(K)return`\u0628\u06C1\u062A \u0628\u0691\u0627: ${Y.origin??"\u0648\u06CC\u0644\u06CC\u0648"} \u06A9\u06D2 ${$}${Y.maximum.toString()} ${K.unit??"\u0639\u0646\u0627\u0635\u0631"} \u06C1\u0648\u0646\u06D2 \u0645\u062A\u0648\u0642\u0639 \u062A\u06BE\u06D2`;return`\u0628\u06C1\u062A \u0628\u0691\u0627: ${Y.origin??"\u0648\u06CC\u0644\u06CC\u0648"} \u06A9\u0627 ${$}${Y.maximum.toString()} \u06C1\u0648\u0646\u0627 \u0645\u062A\u0648\u0642\u0639 \u062A\u06BE\u0627`}case"too_small":{let $=Y.inclusive?">=":">",K=W(Y.origin);if(K)return`\u0628\u06C1\u062A \u0686\u06BE\u0648\u0679\u0627: ${Y.origin} \u06A9\u06D2 ${$}${Y.minimum.toString()} ${K.unit} \u06C1\u0648\u0646\u06D2 \u0645\u062A\u0648\u0642\u0639 \u062A\u06BE\u06D2`;return`\u0628\u06C1\u062A \u0686\u06BE\u0648\u0679\u0627: ${Y.origin} \u06A9\u0627 ${$}${Y.minimum.toString()} \u06C1\u0648\u0646\u0627 \u0645\u062A\u0648\u0642\u0639 \u062A\u06BE\u0627`}case"invalid_format":{let $=Y;if($.format==="starts_with")return`\u063A\u0644\u0637 \u0633\u0679\u0631\u0646\u06AF: "${$.prefix}" \u0633\u06D2 \u0634\u0631\u0648\u0639 \u06C1\u0648\u0646\u0627 \u0686\u0627\u06C1\u06CC\u06D2`;if($.format==="ends_with")return`\u063A\u0644\u0637 \u0633\u0679\u0631\u0646\u06AF: "${$.suffix}" \u067E\u0631 \u062E\u062A\u0645 \u06C1\u0648\u0646\u0627 \u0686\u0627\u06C1\u06CC\u06D2`;if($.format==="includes")return`\u063A\u0644\u0637 \u0633\u0679\u0631\u0646\u06AF: "${$.includes}" \u0634\u0627\u0645\u0644 \u06C1\u0648\u0646\u0627 \u0686\u0627\u06C1\u06CC\u06D2`;if($.format==="regex")return`\u063A\u0644\u0637 \u0633\u0679\u0631\u0646\u06AF: \u067E\u06CC\u0679\u0631\u0646 ${$.pattern} \u0633\u06D2 \u0645\u06CC\u0686 \u06C1\u0648\u0646\u0627 \u0686\u0627\u06C1\u06CC\u06D2`;return`\u063A\u0644\u0637 ${G[$.format]??Y.format}`}case"not_multiple_of":return`\u063A\u0644\u0637 \u0646\u0645\u0628\u0631: ${Y.divisor} \u06A9\u0627 \u0645\u0636\u0627\u0639\u0641 \u06C1\u0648\u0646\u0627 \u0686\u0627\u06C1\u06CC\u06D2`;case"unrecognized_keys":return`\u063A\u06CC\u0631 \u062A\u0633\u0644\u06CC\u0645 \u0634\u062F\u06C1 \u06A9\u06CC${Y.keys.length>1?"\u0632":""}: ${h(Y.keys,"\u060C ")}`;case"invalid_key":return`${Y.origin} \u0645\u06CC\u06BA \u063A\u0644\u0637 \u06A9\u06CC`;case"invalid_union":return"\u063A\u0644\u0637 \u0627\u0646 \u067E\u0679";case"invalid_element":return`${Y.origin} \u0645\u06CC\u06BA \u063A\u0644\u0637 \u0648\u06CC\u0644\u06CC\u0648`;default:return"\u063A\u0644\u0637 \u0627\u0646 \u067E\u0679"}}};var f2=M(()=>{K6()});function uL(){return{localeError:Xu()}}var Xu=()=>{let J={string:{unit:"k\xFD t\u1EF1",verb:"c\xF3"},file:{unit:"byte",verb:"c\xF3"},array:{unit:"ph\u1EA7n t\u1EED",verb:"c\xF3"},set:{unit:"ph\u1EA7n t\u1EED",verb:"c\xF3"}};function W(Y){return J[Y]??null}let X=(Y)=>{let $=typeof Y;switch($){case"number":return Number.isNaN(Y)?"NaN":"s\u1ED1";case"object":{if(Array.isArray(Y))return"m\u1EA3ng";if(Y===null)return"null";if(Object.getPrototypeOf(Y)!==Object.prototype&&Y.constructor)return Y.constructor.name}}return $},G={regex:"\u0111\u1EA7u v\xE0o",email:"\u0111\u1ECBa ch\u1EC9 email",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ng\xE0y gi\u1EDD ISO",date:"ng\xE0y ISO",time:"gi\u1EDD ISO",duration:"kho\u1EA3ng th\u1EDDi gian ISO",ipv4:"\u0111\u1ECBa ch\u1EC9 IPv4",ipv6:"\u0111\u1ECBa ch\u1EC9 IPv6",cidrv4:"d\u1EA3i IPv4",cidrv6:"d\u1EA3i IPv6",base64:"chu\u1ED7i m\xE3 h\xF3a base64",base64url:"chu\u1ED7i m\xE3 h\xF3a base64url",json_string:"chu\u1ED7i JSON",e164:"s\u1ED1 E.164",jwt:"JWT",template_literal:"\u0111\u1EA7u v\xE0o"};return(Y)=>{switch(Y.code){case"invalid_type":return`\u0110\u1EA7u v\xE0o kh\xF4ng h\u1EE3p l\u1EC7: mong \u0111\u1EE3i ${Y.expected}, nh\u1EADn \u0111\u01B0\u1EE3c ${X(Y.input)}`;case"invalid_value":if(Y.values.length===1)return`\u0110\u1EA7u v\xE0o kh\xF4ng h\u1EE3p l\u1EC7: mong \u0111\u1EE3i ${d(Y.values[0])}`;return`T\xF9y ch\u1ECDn kh\xF4ng h\u1EE3p l\u1EC7: mong \u0111\u1EE3i m\u1ED9t trong c\xE1c gi\xE1 tr\u1ECB ${h(Y.values,"|")}`;case"too_big":{let $=Y.inclusive?"<=":"<",K=W(Y.origin);if(K)return`Qu\xE1 l\u1EDBn: mong \u0111\u1EE3i ${Y.origin??"gi\xE1 tr\u1ECB"} ${K.verb} ${$}${Y.maximum.toString()} ${K.unit??"ph\u1EA7n t\u1EED"}`;return`Qu\xE1 l\u1EDBn: mong \u0111\u1EE3i ${Y.origin??"gi\xE1 tr\u1ECB"} ${$}${Y.maximum.toString()}`}case"too_small":{let $=Y.inclusive?">=":">",K=W(Y.origin);if(K)return`Qu\xE1 nh\u1ECF: mong \u0111\u1EE3i ${Y.origin} ${K.verb} ${$}${Y.minimum.toString()} ${K.unit}`;return`Qu\xE1 nh\u1ECF: mong \u0111\u1EE3i ${Y.origin} ${$}${Y.minimum.toString()}`}case"invalid_format":{let $=Y;if($.format==="starts_with")return`Chu\u1ED7i kh\xF4ng h\u1EE3p l\u1EC7: ph\u1EA3i b\u1EAFt \u0111\u1EA7u b\u1EB1ng "${$.prefix}"`;if($.format==="ends_with")return`Chu\u1ED7i kh\xF4ng h\u1EE3p l\u1EC7: ph\u1EA3i k\u1EBFt th\xFAc b\u1EB1ng "${$.suffix}"`;if($.format==="includes")return`Chu\u1ED7i kh\xF4ng h\u1EE3p l\u1EC7: ph\u1EA3i bao g\u1ED3m "${$.includes}"`;if($.format==="regex")return`Chu\u1ED7i kh\xF4ng h\u1EE3p l\u1EC7: ph\u1EA3i kh\u1EDBp v\u1EDBi m\u1EABu ${$.pattern}`;return`${G[$.format]??Y.format} kh\xF4ng h\u1EE3p l\u1EC7`}case"not_multiple_of":return`S\u1ED1 kh\xF4ng h\u1EE3p l\u1EC7: ph\u1EA3i l\xE0 b\u1ED9i s\u1ED1 c\u1EE7a ${Y.divisor}`;case"unrecognized_keys":return`Kh\xF3a kh\xF4ng \u0111\u01B0\u1EE3c nh\u1EADn d\u1EA1ng: ${h(Y.keys,", ")}`;case"invalid_key":return`Kh\xF3a kh\xF4ng h\u1EE3p l\u1EC7 trong ${Y.origin}`;case"invalid_union":return"\u0110\u1EA7u v\xE0o kh\xF4ng h\u1EE3p l\u1EC7";case"invalid_element":return`Gi\xE1 tr\u1ECB kh\xF4ng h\u1EE3p l\u1EC7 trong ${Y.origin}`;default:return"\u0110\u1EA7u v\xE0o kh\xF4ng h\u1EE3p l\u1EC7"}}};var y2=M(()=>{K6()});function cL(){return{localeError:Yu()}}var Yu=()=>{let J={string:{unit:"\u5B57\u7B26",verb:"\u5305\u542B"},file:{unit:"\u5B57\u8282",verb:"\u5305\u542B"},array:{unit:"\u9879",verb:"\u5305\u542B"},set:{unit:"\u9879",verb:"\u5305\u542B"}};function W(Y){return J[Y]??null}let X=(Y)=>{let $=typeof Y;switch($){case"number":return Number.isNaN(Y)?"\u975E\u6570\u5B57(NaN)":"\u6570\u5B57";case"object":{if(Array.isArray(Y))return"\u6570\u7EC4";if(Y===null)return"\u7A7A\u503C(null)";if(Object.getPrototypeOf(Y)!==Object.prototype&&Y.constructor)return Y.constructor.name}}return $},G={regex:"\u8F93\u5165",email:"\u7535\u5B50\u90AE\u4EF6",url:"URL",emoji:"\u8868\u60C5\u7B26\u53F7",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO\u65E5\u671F\u65F6\u95F4",date:"ISO\u65E5\u671F",time:"ISO\u65F6\u95F4",duration:"ISO\u65F6\u957F",ipv4:"IPv4\u5730\u5740",ipv6:"IPv6\u5730\u5740",cidrv4:"IPv4\u7F51\u6BB5",cidrv6:"IPv6\u7F51\u6BB5",base64:"base64\u7F16\u7801\u5B57\u7B26\u4E32",base64url:"base64url\u7F16\u7801\u5B57\u7B26\u4E32",json_string:"JSON\u5B57\u7B26\u4E32",e164:"E.164\u53F7\u7801",jwt:"JWT",template_literal:"\u8F93\u5165"};return(Y)=>{switch(Y.code){case"invalid_type":return`\u65E0\u6548\u8F93\u5165\uFF1A\u671F\u671B ${Y.expected}\uFF0C\u5B9E\u9645\u63A5\u6536 ${X(Y.input)}`;case"invalid_value":if(Y.values.length===1)return`\u65E0\u6548\u8F93\u5165\uFF1A\u671F\u671B ${d(Y.values[0])}`;return`\u65E0\u6548\u9009\u9879\uFF1A\u671F\u671B\u4EE5\u4E0B\u4E4B\u4E00 ${h(Y.values,"|")}`;case"too_big":{let $=Y.inclusive?"<=":"<",K=W(Y.origin);if(K)return`\u6570\u503C\u8FC7\u5927\uFF1A\u671F\u671B ${Y.origin??"\u503C"} ${$}${Y.maximum.toString()} ${K.unit??"\u4E2A\u5143\u7D20"}`;return`\u6570\u503C\u8FC7\u5927\uFF1A\u671F\u671B ${Y.origin??"\u503C"} ${$}${Y.maximum.toString()}`}case"too_small":{let $=Y.inclusive?">=":">",K=W(Y.origin);if(K)return`\u6570\u503C\u8FC7\u5C0F\uFF1A\u671F\u671B ${Y.origin} ${$}${Y.minimum.toString()} ${K.unit}`;return`\u6570\u503C\u8FC7\u5C0F\uFF1A\u671F\u671B ${Y.origin} ${$}${Y.minimum.toString()}`}case"invalid_format":{let $=Y;if($.format==="starts_with")return`\u65E0\u6548\u5B57\u7B26\u4E32\uFF1A\u5FC5\u987B\u4EE5 "${$.prefix}" \u5F00\u5934`;if($.format==="ends_with")return`\u65E0\u6548\u5B57\u7B26\u4E32\uFF1A\u5FC5\u987B\u4EE5 "${$.suffix}" \u7ED3\u5C3E`;if($.format==="includes")return`\u65E0\u6548\u5B57\u7B26\u4E32\uFF1A\u5FC5\u987B\u5305\u542B "${$.includes}"`;if($.format==="regex")return`\u65E0\u6548\u5B57\u7B26\u4E32\uFF1A\u5FC5\u987B\u6EE1\u8DB3\u6B63\u5219\u8868\u8FBE\u5F0F ${$.pattern}`;return`\u65E0\u6548${G[$.format]??Y.format}`}case"not_multiple_of":return`\u65E0\u6548\u6570\u5B57\uFF1A\u5FC5\u987B\u662F ${Y.divisor} \u7684\u500D\u6570`;case"unrecognized_keys":return`\u51FA\u73B0\u672A\u77E5\u7684\u952E(key): ${h(Y.keys,", ")}`;case"invalid_key":return`${Y.origin} \u4E2D\u7684\u952E(key)\u65E0\u6548`;case"invalid_union":return"\u65E0\u6548\u8F93\u5165";case"invalid_element":return`${Y.origin} \u4E2D\u5305\u542B\u65E0\u6548\u503C(value)`;default:return"\u65E0\u6548\u8F93\u5165"}}};var x2=M(()=>{K6()});function lL(){return{localeError:Gu()}}var Gu=()=>{let J={string:{unit:"\u5B57\u5143",verb:"\u64C1\u6709"},file:{unit:"\u4F4D\u5143\u7D44",verb:"\u64C1\u6709"},array:{unit:"\u9805\u76EE",verb:"\u64C1\u6709"},set:{unit:"\u9805\u76EE",verb:"\u64C1\u6709"}};function W(Y){return J[Y]??null}let X=(Y)=>{let $=typeof Y;switch($){case"number":return Number.isNaN(Y)?"NaN":"number";case"object":{if(Array.isArray(Y))return"array";if(Y===null)return"null";if(Object.getPrototypeOf(Y)!==Object.prototype&&Y.constructor)return Y.constructor.name}}return $},G={regex:"\u8F38\u5165",email:"\u90F5\u4EF6\u5730\u5740",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO \u65E5\u671F\u6642\u9593",date:"ISO \u65E5\u671F",time:"ISO \u6642\u9593",duration:"ISO \u671F\u9593",ipv4:"IPv4 \u4F4D\u5740",ipv6:"IPv6 \u4F4D\u5740",cidrv4:"IPv4 \u7BC4\u570D",cidrv6:"IPv6 \u7BC4\u570D",base64:"base64 \u7DE8\u78BC\u5B57\u4E32",base64url:"base64url \u7DE8\u78BC\u5B57\u4E32",json_string:"JSON \u5B57\u4E32",e164:"E.164 \u6578\u503C",jwt:"JWT",template_literal:"\u8F38\u5165"};return(Y)=>{switch(Y.code){case"invalid_type":return`\u7121\u6548\u7684\u8F38\u5165\u503C\uFF1A\u9810\u671F\u70BA ${Y.expected}\uFF0C\u4F46\u6536\u5230 ${X(Y.input)}`;case"invalid_value":if(Y.values.length===1)return`\u7121\u6548\u7684\u8F38\u5165\u503C\uFF1A\u9810\u671F\u70BA ${d(Y.values[0])}`;return`\u7121\u6548\u7684\u9078\u9805\uFF1A\u9810\u671F\u70BA\u4EE5\u4E0B\u5176\u4E2D\u4E4B\u4E00 ${h(Y.values,"|")}`;case"too_big":{let $=Y.inclusive?"<=":"<",K=W(Y.origin);if(K)return`\u6578\u503C\u904E\u5927\uFF1A\u9810\u671F ${Y.origin??"\u503C"} \u61C9\u70BA ${$}${Y.maximum.toString()} ${K.unit??"\u500B\u5143\u7D20"}`;return`\u6578\u503C\u904E\u5927\uFF1A\u9810\u671F ${Y.origin??"\u503C"} \u61C9\u70BA ${$}${Y.maximum.toString()}`}case"too_small":{let $=Y.inclusive?">=":">",K=W(Y.origin);if(K)return`\u6578\u503C\u904E\u5C0F\uFF1A\u9810\u671F ${Y.origin} \u61C9\u70BA ${$}${Y.minimum.toString()} ${K.unit}`;return`\u6578\u503C\u904E\u5C0F\uFF1A\u9810\u671F ${Y.origin} \u61C9\u70BA ${$}${Y.minimum.toString()}`}case"invalid_format":{let $=Y;if($.format==="starts_with")return`\u7121\u6548\u7684\u5B57\u4E32\uFF1A\u5FC5\u9808\u4EE5 "${$.prefix}" \u958B\u982D`;if($.format==="ends_with")return`\u7121\u6548\u7684\u5B57\u4E32\uFF1A\u5FC5\u9808\u4EE5 "${$.suffix}" \u7D50\u5C3E`;if($.format==="includes")return`\u7121\u6548\u7684\u5B57\u4E32\uFF1A\u5FC5\u9808\u5305\u542B "${$.includes}"`;if($.format==="regex")return`\u7121\u6548\u7684\u5B57\u4E32\uFF1A\u5FC5\u9808\u7B26\u5408\u683C\u5F0F ${$.pattern}`;return`\u7121\u6548\u7684 ${G[$.format]??Y.format}`}case"not_multiple_of":return`\u7121\u6548\u7684\u6578\u5B57\uFF1A\u5FC5\u9808\u70BA ${Y.divisor} \u7684\u500D\u6578`;case"unrecognized_keys":return`\u7121\u6CD5\u8B58\u5225\u7684\u9375\u503C${Y.keys.length>1?"\u5011":""}\uFF1A${h(Y.keys,"\u3001")}`;case"invalid_key":return`${Y.origin} \u4E2D\u6709\u7121\u6548\u7684\u9375\u503C`;case"invalid_union":return"\u7121\u6548\u7684\u8F38\u5165\u503C";case"invalid_element":return`${Y.origin} \u4E2D\u6709\u7121\u6548\u7684\u503C`;default:return"\u7121\u6548\u7684\u8F38\u5165\u503C"}}};var u2=M(()=>{K6()});function pL(){return{localeError:$u()}}var $u=()=>{let J={string:{unit:"\xE0mi",verb:"n\xED"},file:{unit:"bytes",verb:"n\xED"},array:{unit:"nkan",verb:"n\xED"},set:{unit:"nkan",verb:"n\xED"}};function W(Y){return J[Y]??null}let X=(Y)=>{let $=typeof Y;switch($){case"number":return Number.isNaN(Y)?"NaN":"n\u1ECD\u0301mb\xE0";case"object":{if(Array.isArray(Y))return"akop\u1ECD";if(Y===null)return"null";if(Object.getPrototypeOf(Y)!==Object.prototype&&Y.constructor)return Y.constructor.name}}return $},G={regex:"\u1EB9\u0300r\u1ECD \xECb\xE1w\u1ECDl\xE9",email:"\xE0d\xEDr\u1EB9\u0301s\xEC \xECm\u1EB9\u0301l\xEC",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"\xE0k\xF3k\xF2 ISO",date:"\u1ECDj\u1ECD\u0301 ISO",time:"\xE0k\xF3k\xF2 ISO",duration:"\xE0k\xF3k\xF2 t\xF3 p\xE9 ISO",ipv4:"\xE0d\xEDr\u1EB9\u0301s\xEC IPv4",ipv6:"\xE0d\xEDr\u1EB9\u0301s\xEC IPv6",cidrv4:"\xE0gb\xE8gb\xE8 IPv4",cidrv6:"\xE0gb\xE8gb\xE8 IPv6",base64:"\u1ECD\u0300r\u1ECD\u0300 t\xED a k\u1ECD\u0301 n\xED base64",base64url:"\u1ECD\u0300r\u1ECD\u0300 base64url",json_string:"\u1ECD\u0300r\u1ECD\u0300 JSON",e164:"n\u1ECD\u0301mb\xE0 E.164",jwt:"JWT",template_literal:"\u1EB9\u0300r\u1ECD \xECb\xE1w\u1ECDl\xE9"};return(Y)=>{switch(Y.code){case"invalid_type":return`\xCCb\xE1w\u1ECDl\xE9 a\u1E63\xEC\u1E63e: a n\xED l\xE1ti fi ${Y.expected}, \xE0m\u1ECD\u0300 a r\xED ${X(Y.input)}`;case"invalid_value":if(Y.values.length===1)return`\xCCb\xE1w\u1ECDl\xE9 a\u1E63\xEC\u1E63e: a n\xED l\xE1ti fi ${d(Y.values[0])}`;return`\xC0\u1E63\xE0y\xE0n a\u1E63\xEC\u1E63e: yan \u1ECD\u0300kan l\xE1ra ${h(Y.values,"|")}`;case"too_big":{let $=Y.inclusive?"<=":"<",K=W(Y.origin);if(K)return`T\xF3 p\u1ECD\u0300 j\xF9: a n\xED l\xE1ti j\u1EB9\u0301 p\xE9 ${Y.origin??"iye"} ${K.verb} ${$}${Y.maximum} ${K.unit}`;return`T\xF3 p\u1ECD\u0300 j\xF9: a n\xED l\xE1ti j\u1EB9\u0301 ${$}${Y.maximum}`}case"too_small":{let $=Y.inclusive?">=":">",K=W(Y.origin);if(K)return`K\xE9r\xE9 ju: a n\xED l\xE1ti j\u1EB9\u0301 p\xE9 ${Y.origin} ${K.verb} ${$}${Y.minimum} ${K.unit}`;return`K\xE9r\xE9 ju: a n\xED l\xE1ti j\u1EB9\u0301 ${$}${Y.minimum}`}case"invalid_format":{let $=Y;if($.format==="starts_with")return`\u1ECC\u0300r\u1ECD\u0300 a\u1E63\xEC\u1E63e: gb\u1ECD\u0301d\u1ECD\u0300 b\u1EB9\u0300r\u1EB9\u0300 p\u1EB9\u0300l\xFA "${$.prefix}"`;if($.format==="ends_with")return`\u1ECC\u0300r\u1ECD\u0300 a\u1E63\xEC\u1E63e: gb\u1ECD\u0301d\u1ECD\u0300 par\xED p\u1EB9\u0300l\xFA "${$.suffix}"`;if($.format==="includes")return`\u1ECC\u0300r\u1ECD\u0300 a\u1E63\xEC\u1E63e: gb\u1ECD\u0301d\u1ECD\u0300 n\xED "${$.includes}"`;if($.format==="regex")return`\u1ECC\u0300r\u1ECD\u0300 a\u1E63\xEC\u1E63e: gb\u1ECD\u0301d\u1ECD\u0300 b\xE1 \xE0p\u1EB9\u1EB9r\u1EB9 mu ${$.pattern}`;return`A\u1E63\xEC\u1E63e: ${G[$.format]??Y.format}`}case"not_multiple_of":return`N\u1ECD\u0301mb\xE0 a\u1E63\xEC\u1E63e: gb\u1ECD\u0301d\u1ECD\u0300 j\u1EB9\u0301 \xE8y\xE0 p\xEDp\xEDn ti ${Y.divisor}`;case"unrecognized_keys":return`B\u1ECDt\xECn\xEC \xE0\xECm\u1ECD\u0300: ${h(Y.keys,", ")}`;case"invalid_key":return`B\u1ECDt\xECn\xEC a\u1E63\xEC\u1E63e n\xEDn\xFA ${Y.origin}`;case"invalid_union":return"\xCCb\xE1w\u1ECDl\xE9 a\u1E63\xEC\u1E63e";case"invalid_element":return`Iye a\u1E63\xEC\u1E63e n\xEDn\xFA ${Y.origin}`;default:return"\xCCb\xE1w\u1ECDl\xE9 a\u1E63\xEC\u1E63e"}}};var c2=M(()=>{K6()});var pY={};N0(pY,{zhTW:()=>lL,zhCN:()=>cL,yo:()=>pL,vi:()=>uL,ur:()=>xL,uk:()=>Z$,ua:()=>yL,tr:()=>mL,th:()=>gL,ta:()=>hL,sv:()=>kL,sl:()=>bL,ru:()=>CL,pt:()=>RL,ps:()=>EL,pl:()=>IL,ota:()=>AL,no:()=>BL,nl:()=>qL,ms:()=>TL,mk:()=>_L,lt:()=>SL,ko:()=>jL,km:()=>F$,kh:()=>vL,ka:()=>OL,ja:()=>ML,it:()=>DL,is:()=>VL,id:()=>LL,hu:()=>ZL,he:()=>QL,frCA:()=>UL,fr:()=>FL,fi:()=>NL,fa:()=>zL,es:()=>HL,eo:()=>wL,en:()=>N$,de:()=>$L,da:()=>GL,cs:()=>YL,ca:()=>XL,bg:()=>WL,be:()=>JL,az:()=>eZ,ar:()=>sZ});var dL=M(()=>{t_();o_();e_();J2();W2();X2();Y2();G2();KL();$2();K2();w2();H2();z2();N2();F2();U2();Q2();Z2();L2();V2();D2();M2();PL();O2();v2();j2();S2();_2();T2();q2();B2();A2();E2();R2();C2();b2();k2();h2();g2();m2();fL();f2();y2();x2();u2();c2()});class L${constructor(){this._map=new WeakMap,this._idmap=new Map}add(J,...W){let X=W[0];if(this._map.set(J,X),X&&typeof X==="object"&&"id"in X){if(this._idmap.has(X.id))throw Error(`ID ${X.id} already exists in the registry`);this._idmap.set(X.id,J)}return this}clear(){return this._map=new WeakMap,this._idmap=new Map,this}remove(J){let W=this._map.get(J);if(W&&typeof W==="object"&&"id"in W)this._idmap.delete(W.id);return this._map.delete(J),this}get(J){let W=J._zod.parent;if(W){let X={...this.get(W)??{}};delete X.id;let G={...X,...this._map.get(J)};return Object.keys(G).length?G:void 0}return this._map.get(J)}has(J){return this._map.has(J)}}function V$(){return new L$}var ow,sw,LJ;var rL=M(()=>{ow=Symbol("ZodOutput"),sw=Symbol("ZodInput");LJ=V$()});function nL(J,W){return new J({type:"string",...i(W)})}function iL(J,W){return new J({type:"string",coerce:!0,...i(W)})}function ew(J,W){return new J({type:"string",format:"email",check:"string_format",abort:!1,...i(W)})}function D$(J,W){return new J({type:"string",format:"guid",check:"string_format",abort:!1,...i(W)})}function J7(J,W){return new J({type:"string",format:"uuid",check:"string_format",abort:!1,...i(W)})}function W7(J,W){return new J({type:"string",format:"uuid",check:"string_format",abort:!1,version:"v4",...i(W)})}function X7(J,W){return new J({type:"string",format:"uuid",check:"string_format",abort:!1,version:"v6",...i(W)})}function Y7(J,W){return new J({type:"string",format:"uuid",check:"string_format",abort:!1,version:"v7",...i(W)})}function M$(J,W){return new J({type:"string",format:"url",check:"string_format",abort:!1,...i(W)})}function G7(J,W){return new J({type:"string",format:"emoji",check:"string_format",abort:!1,...i(W)})}function $7(J,W){return new J({type:"string",format:"nanoid",check:"string_format",abort:!1,...i(W)})}function K7(J,W){return new J({type:"string",format:"cuid",check:"string_format",abort:!1,...i(W)})}function w7(J,W){return new J({type:"string",format:"cuid2",check:"string_format",abort:!1,...i(W)})}function H7(J,W){return new J({type:"string",format:"ulid",check:"string_format",abort:!1,...i(W)})}function z7(J,W){return new J({type:"string",format:"xid",check:"string_format",abort:!1,...i(W)})}function N7(J,W){return new J({type:"string",format:"ksuid",check:"string_format",abort:!1,...i(W)})}function F7(J,W){return new J({type:"string",format:"ipv4",check:"string_format",abort:!1,...i(W)})}function U7(J,W){return new J({type:"string",format:"ipv6",check:"string_format",abort:!1,...i(W)})}function Q7(J,W){return new J({type:"string",format:"cidrv4",check:"string_format",abort:!1,...i(W)})}function Z7(J,W){return new J({type:"string",format:"cidrv6",check:"string_format",abort:!1,...i(W)})}function L7(J,W){return new J({type:"string",format:"base64",check:"string_format",abort:!1,...i(W)})}function V7(J,W){return new J({type:"string",format:"base64url",check:"string_format",abort:!1,...i(W)})}function D7(J,W){return new J({type:"string",format:"e164",check:"string_format",abort:!1,...i(W)})}function M7(J,W){return new J({type:"string",format:"jwt",check:"string_format",abort:!1,...i(W)})}function aL(J,W){return new J({type:"string",format:"datetime",check:"string_format",offset:!1,local:!1,precision:null,...i(W)})}function tL(J,W){return new J({type:"string",format:"date",check:"string_format",...i(W)})}function oL(J,W){return new J({type:"string",format:"time",check:"string_format",precision:null,...i(W)})}function sL(J,W){return new J({type:"string",format:"duration",check:"string_format",...i(W)})}function eL(J,W){return new J({type:"number",checks:[],...i(W)})}function JV(J,W){return new J({type:"number",coerce:!0,checks:[],...i(W)})}function WV(J,W){return new J({type:"number",check:"number_format",abort:!1,format:"safeint",...i(W)})}function XV(J,W){return new J({type:"number",check:"number_format",abort:!1,format:"float32",...i(W)})}function YV(J,W){return new J({type:"number",check:"number_format",abort:!1,format:"float64",...i(W)})}function GV(J,W){return new J({type:"number",check:"number_format",abort:!1,format:"int32",...i(W)})}function $V(J,W){return new J({type:"number",check:"number_format",abort:!1,format:"uint32",...i(W)})}function KV(J,W){return new J({type:"boolean",...i(W)})}function wV(J,W){return new J({type:"boolean",coerce:!0,...i(W)})}function HV(J,W){return new J({type:"bigint",...i(W)})}function zV(J,W){return new J({type:"bigint",coerce:!0,...i(W)})}function NV(J,W){return new J({type:"bigint",check:"bigint_format",abort:!1,format:"int64",...i(W)})}function FV(J,W){return new J({type:"bigint",check:"bigint_format",abort:!1,format:"uint64",...i(W)})}function UV(J,W){return new J({type:"symbol",...i(W)})}function QV(J,W){return new J({type:"undefined",...i(W)})}function ZV(J,W){return new J({type:"null",...i(W)})}function LV(J){return new J({type:"any"})}function VV(J){return new J({type:"unknown"})}function DV(J,W){return new J({type:"never",...i(W)})}function MV(J,W){return new J({type:"void",...i(W)})}function OV(J,W){return new J({type:"date",...i(W)})}function PV(J,W){return new J({type:"date",coerce:!0,...i(W)})}function vV(J,W){return new J({type:"nan",...i(W)})}function mJ(J,W){return new fw({check:"less_than",...i(W),value:J,inclusive:!1})}function T8(J,W){return new fw({check:"less_than",...i(W),value:J,inclusive:!0})}function fJ(J,W){return new yw({check:"greater_than",...i(W),value:J,inclusive:!1})}function c0(J,W){return new yw({check:"greater_than",...i(W),value:J,inclusive:!0})}function P7(J){return fJ(0,J)}function v7(J){return mJ(0,J)}function j7(J){return T8(0,J)}function S7(J){return c0(0,J)}function zX(J,W){return new SQ({check:"multiple_of",...i(W),value:J})}function H1(J,W){return new qQ({check:"max_size",...i(W),maximum:J})}function NX(J,W){return new BQ({check:"min_size",...i(W),minimum:J})}function dY(J,W){return new AQ({check:"size_equals",...i(W),size:J})}function z1(J,W){return new EQ({check:"max_length",...i(W),maximum:J})}function vW(J,W){return new IQ({check:"min_length",...i(W),minimum:J})}function N1(J,W){return new RQ({check:"length_equals",...i(W),length:J})}function rY(J,W){return new CQ({check:"string_format",format:"regex",...i(W),pattern:J})}function nY(J){return new bQ({check:"string_format",format:"lowercase",...i(J)})}function iY(J){return new kQ({check:"string_format",format:"uppercase",...i(J)})}function aY(J,W){return new hQ({check:"string_format",format:"includes",...i(W),includes:J})}function tY(J,W){return new gQ({check:"string_format",format:"starts_with",...i(W),prefix:J})}function oY(J,W){return new mQ({check:"string_format",format:"ends_with",...i(W),suffix:J})}function _7(J,W,X){return new fQ({check:"property",property:J,schema:W,...i(X)})}function sY(J,W){return new yQ({check:"mime_type",mime:J,...i(W)})}function yJ(J){return new xQ({check:"overwrite",tx:J})}function eY(J){return yJ((W)=>W.normalize(J))}function JG(){return yJ((J)=>J.trim())}function WG(){return yJ((J)=>J.toLowerCase())}function XG(){return yJ((J)=>J.toUpperCase())}function jV(J,W,X){return new J({type:"array",element:W,...i(X)})}function Ku(J,W,X){return new J({type:"union",options:W,...i(X)})}function wu(J,W,X,G){return new J({type:"union",options:X,discriminator:W,...i(G)})}function Hu(J,W,X){return new J({type:"intersection",left:W,right:X})}function zu(J,W,X,G){let Y=X instanceof Z6;return new J({type:"tuple",items:W,rest:Y?X:null,...i(Y?G:X)})}function Nu(J,W,X,G){return new J({type:"record",keyType:W,valueType:X,...i(G)})}function Fu(J,W,X,G){return new J({type:"map",keyType:W,valueType:X,...i(G)})}function Uu(J,W,X){return new J({type:"set",valueType:W,...i(X)})}function Qu(J,W,X){let G=Array.isArray(W)?Object.fromEntries(W.map((Y)=>[Y,Y])):W;return new J({type:"enum",entries:G,...i(X)})}function Zu(J,W,X){return new J({type:"enum",entries:W,...i(X)})}function Lu(J,W,X){return new J({type:"literal",values:Array.isArray(W)?W:[W],...i(X)})}function SV(J,W){return new J({type:"file",...i(W)})}function Vu(J,W){return new J({type:"transform",transform:W})}function Du(J,W){return new J({type:"optional",innerType:W})}function Mu(J,W){return new J({type:"nullable",innerType:W})}function Ou(J,W,X){return new J({type:"default",innerType:W,get defaultValue(){return typeof X==="function"?X():yU(X)}})}function Pu(J,W,X){return new J({type:"nonoptional",innerType:W,...i(X)})}function vu(J,W){return new J({type:"success",innerType:W})}function ju(J,W,X){return new J({type:"catch",innerType:W,catchValue:typeof X==="function"?X:()=>X})}function Su(J,W,X){return new J({type:"pipe",in:W,out:X})}function _u(J,W){return new J({type:"readonly",innerType:W})}function Tu(J,W,X){return new J({type:"template_literal",parts:W,...i(X)})}function qu(J,W){return new J({type:"lazy",getter:W})}function Bu(J,W){return new J({type:"promise",innerType:W})}function _V(J,W,X){let G=i(X);return G.abort??(G.abort=!0),new J({type:"custom",check:"custom",fn:W,...G})}function TV(J,W,X){return new J({type:"custom",check:"custom",fn:W,...i(X)})}function qV(J){let W=l2((X)=>{return X.addIssue=(G)=>{if(typeof G==="string")X.issues.push(gY(G,X.value,W._zod.def));else{let Y=G;if(Y.fatal)Y.continue=!1;Y.code??(Y.code="custom"),Y.input??(Y.input=X.value),Y.inst??(Y.inst=W),Y.continue??(Y.continue=!W._zod.def.abort),X.issues.push(gY(Y))}},J(X.value,X)});return W}function l2(J,W){let X=new M4({check:"custom",...i(W)});return X._zod.check=J,X}function BV(J,W){let X=i(W),G=X.truthy??["true","1","yes","on","y","enabled"],Y=X.falsy??["false","0","no","off","n","disabled"];if(X.case!=="sensitive")G=G.map((Z)=>typeof Z==="string"?Z.toLowerCase():Z),Y=Y.map((Z)=>typeof Z==="string"?Z.toLowerCase():Z);let $=new Set(G),K=new Set(Y),w=J.Codec??z$,H=J.Boolean??H$,N=new(J.String??w1)({type:"string",error:X.error}),U=new H({type:"boolean",error:X.error}),F=new w({type:"pipe",in:N,out:U,transform:(Z,L)=>{let D=Z;if(X.case!=="sensitive")D=D.toLowerCase();if($.has(D))return!0;else if(K.has(D))return!1;else return L.issues.push({code:"invalid_value",expected:"stringbool",values:[...$,...K],input:L.value,inst:F,continue:!1}),{}},reverseTransform:(Z,L)=>{if(Z===!0)return G[0]||"true";else return Y[0]||"false"},error:X.error});return F}function YG(J,W,X,G={}){let Y=i(G),$={...i(G),check:"string_format",type:"string",format:W,fn:typeof X==="function"?X:(w)=>X.test(w),...Y};if(X instanceof RegExp)$.pattern=X;return new J($)}var O7;var p2=M(()=>{xw();oZ();K6();O7={Any:null,Minute:-1,Second:0,Millisecond:3,Microsecond:6}});class T7{constructor(J){this.counter=0,this.metadataRegistry=J?.metadata??LJ,this.target=J?.target??"draft-2020-12",this.unrepresentable=J?.unrepresentable??"throw",this.override=J?.override??(()=>{}),this.io=J?.io??"output",this.seen=new Map}process(J,W={path:[],schemaPath:[]}){var X;let G=J._zod.def,Y={guid:"uuid",url:"uri",datetime:"date-time",json_string:"json-string",regex:""},$=this.seen.get(J);if($){if($.count++,W.schemaPath.includes(J))$.cycle=W.path;return $.schema}let K={schema:{},count:1,cycle:void 0,path:W.path};this.seen.set(J,K);let w=J._zod.toJSONSchema?.();if(w)K.schema=w;else{let N={...W,schemaPath:[...W.schemaPath,J],path:W.path},U=J._zod.parent;if(U)K.ref=U,this.process(U,N),this.seen.get(U).isParent=!0;else{let F=K.schema;switch(G.type){case"string":{let Z=F;Z.type="string";let{minimum:L,maximum:D,format:O,patterns:P,contentEncoding:_}=J._zod.bag;if(typeof L==="number")Z.minLength=L;if(typeof D==="number")Z.maxLength=D;if(O){if(Z.format=Y[O]??O,Z.format==="")delete Z.format}if(_)Z.contentEncoding=_;if(P&&P.size>0){let T=[...P];if(T.length===1)Z.pattern=T[0].source;else if(T.length>1)K.schema.allOf=[...T.map((v)=>({...this.target==="draft-7"||this.target==="draft-4"||this.target==="openapi-3.0"?{type:"string"}:{},pattern:v.source}))]}break}case"number":{let Z=F,{minimum:L,maximum:D,format:O,multipleOf:P,exclusiveMaximum:_,exclusiveMinimum:T}=J._zod.bag;if(typeof O==="string"&&O.includes("int"))Z.type="integer";else Z.type="number";if(typeof T==="number")if(this.target==="draft-4"||this.target==="openapi-3.0")Z.minimum=T,Z.exclusiveMinimum=!0;else Z.exclusiveMinimum=T;if(typeof L==="number"){if(Z.minimum=L,typeof T==="number"&&this.target!=="draft-4")if(T>=L)delete Z.minimum;else delete Z.exclusiveMinimum}if(typeof _==="number")if(this.target==="draft-4"||this.target==="openapi-3.0")Z.maximum=_,Z.exclusiveMaximum=!0;else Z.exclusiveMaximum=_;if(typeof D==="number"){if(Z.maximum=D,typeof _==="number"&&this.target!=="draft-4")if(_<=D)delete Z.maximum;else delete Z.exclusiveMaximum}if(typeof P==="number")Z.multipleOf=P;break}case"boolean":{let Z=F;Z.type="boolean";break}case"bigint":{if(this.unrepresentable==="throw")throw Error("BigInt cannot be represented in JSON Schema");break}case"symbol":{if(this.unrepresentable==="throw")throw Error("Symbols cannot be represented in JSON Schema");break}case"null":{if(this.target==="openapi-3.0")F.type="string",F.nullable=!0,F.enum=[null];else F.type="null";break}case"any":break;case"unknown":break;case"undefined":{if(this.unrepresentable==="throw")throw Error("Undefined cannot be represented in JSON Schema");break}case"void":{if(this.unrepresentable==="throw")throw Error("Void cannot be represented in JSON Schema");break}case"never":{F.not={};break}case"date":{if(this.unrepresentable==="throw")throw Error("Date cannot be represented in JSON Schema");break}case"array":{let Z=F,{minimum:L,maximum:D}=J._zod.bag;if(typeof L==="number")Z.minItems=L;if(typeof D==="number")Z.maxItems=D;Z.type="array",Z.items=this.process(G.element,{...N,path:[...N.path,"items"]});break}case"object":{let Z=F;Z.type="object",Z.properties={};let L=G.shape;for(let P in L)Z.properties[P]=this.process(L[P],{...N,path:[...N.path,"properties",P]});let D=new Set(Object.keys(L)),O=new Set([...D].filter((P)=>{let _=G.shape[P]._zod;if(this.io==="input")return _.optin===void 0;else return _.optout===void 0}));if(O.size>0)Z.required=Array.from(O);if(G.catchall?._zod.def.type==="never")Z.additionalProperties=!1;else if(!G.catchall){if(this.io==="output")Z.additionalProperties=!1}else if(G.catchall)Z.additionalProperties=this.process(G.catchall,{...N,path:[...N.path,"additionalProperties"]});break}case"union":{let Z=F,L=G.options.map((D,O)=>this.process(D,{...N,path:[...N.path,"anyOf",O]}));Z.anyOf=L;break}case"intersection":{let Z=F,L=this.process(G.left,{...N,path:[...N.path,"allOf",0]}),D=this.process(G.right,{...N,path:[...N.path,"allOf",1]}),O=(_)=>("allOf"in _)&&Object.keys(_).length===1,P=[...O(L)?L.allOf:[L],...O(D)?D.allOf:[D]];Z.allOf=P;break}case"tuple":{let Z=F;Z.type="array";let L=this.target==="draft-2020-12"?"prefixItems":"items",D=this.target==="draft-2020-12"?"items":this.target==="openapi-3.0"?"items":"additionalItems",O=G.items.map((v,q)=>this.process(v,{...N,path:[...N.path,L,q]})),P=G.rest?this.process(G.rest,{...N,path:[...N.path,D,...this.target==="openapi-3.0"?[G.items.length]:[]]}):null;if(this.target==="draft-2020-12"){if(Z.prefixItems=O,P)Z.items=P}else if(this.target==="openapi-3.0"){if(Z.items={anyOf:O},P)Z.items.anyOf.push(P);if(Z.minItems=O.length,!P)Z.maxItems=O.length}else if(Z.items=O,P)Z.additionalItems=P;let{minimum:_,maximum:T}=J._zod.bag;if(typeof _==="number")Z.minItems=_;if(typeof T==="number")Z.maxItems=T;break}case"record":{let Z=F;if(Z.type="object",this.target==="draft-7"||this.target==="draft-2020-12")Z.propertyNames=this.process(G.keyType,{...N,path:[...N.path,"propertyNames"]});Z.additionalProperties=this.process(G.valueType,{...N,path:[...N.path,"additionalProperties"]});break}case"map":{if(this.unrepresentable==="throw")throw Error("Map cannot be represented in JSON Schema");break}case"set":{if(this.unrepresentable==="throw")throw Error("Set cannot be represented in JSON Schema");break}case"enum":{let Z=F,L=J$(G.entries);if(L.every((D)=>typeof D==="number"))Z.type="number";if(L.every((D)=>typeof D==="string"))Z.type="string";Z.enum=L;break}case"literal":{let Z=F,L=[];for(let D of G.values)if(D===void 0){if(this.unrepresentable==="throw")throw Error("Literal `undefined` cannot be represented in JSON Schema")}else if(typeof D==="bigint")if(this.unrepresentable==="throw")throw Error("BigInt literals cannot be represented in JSON Schema");else L.push(Number(D));else L.push(D);if(L.length===0);else if(L.length===1){let D=L[0];if(Z.type=D===null?"null":typeof D,this.target==="draft-4"||this.target==="openapi-3.0")Z.enum=[D];else Z.const=D}else{if(L.every((D)=>typeof D==="number"))Z.type="number";if(L.every((D)=>typeof D==="string"))Z.type="string";if(L.every((D)=>typeof D==="boolean"))Z.type="string";if(L.every((D)=>D===null))Z.type="null";Z.enum=L}break}case"file":{let Z=F,L={type:"string",format:"binary",contentEncoding:"binary"},{minimum:D,maximum:O,mime:P}=J._zod.bag;if(D!==void 0)L.minLength=D;if(O!==void 0)L.maxLength=O;if(P)if(P.length===1)L.contentMediaType=P[0],Object.assign(Z,L);else Z.anyOf=P.map((_)=>{return{...L,contentMediaType:_}});else Object.assign(Z,L);break}case"transform":{if(this.unrepresentable==="throw")throw Error("Transforms cannot be represented in JSON Schema");break}case"nullable":{let Z=this.process(G.innerType,N);if(this.target==="openapi-3.0")K.ref=G.innerType,F.nullable=!0;else F.anyOf=[Z,{type:"null"}];break}case"nonoptional":{this.process(G.innerType,N),K.ref=G.innerType;break}case"success":{let Z=F;Z.type="boolean";break}case"default":{this.process(G.innerType,N),K.ref=G.innerType,F.default=JSON.parse(JSON.stringify(G.defaultValue));break}case"prefault":{if(this.process(G.innerType,N),K.ref=G.innerType,this.io==="input")F._prefault=JSON.parse(JSON.stringify(G.defaultValue));break}case"catch":{this.process(G.innerType,N),K.ref=G.innerType;let Z;try{Z=G.catchValue(void 0)}catch{throw Error("Dynamic catch values are not supported in JSON Schema")}F.default=Z;break}case"nan":{if(this.unrepresentable==="throw")throw Error("NaN cannot be represented in JSON Schema");break}case"template_literal":{let Z=F,L=J._zod.pattern;if(!L)throw Error("Pattern not found in template literal");Z.type="string",Z.pattern=L.source;break}case"pipe":{let Z=this.io==="input"?G.in._zod.def.type==="transform"?G.out:G.in:G.out;this.process(Z,N),K.ref=Z;break}case"readonly":{this.process(G.innerType,N),K.ref=G.innerType,F.readOnly=!0;break}case"promise":{this.process(G.innerType,N),K.ref=G.innerType;break}case"optional":{this.process(G.innerType,N),K.ref=G.innerType;break}case"lazy":{let Z=J._zod.innerType;this.process(Z,N),K.ref=Z;break}case"custom":{if(this.unrepresentable==="throw")throw Error("Custom types cannot be represented in JSON Schema");break}case"function":{if(this.unrepresentable==="throw")throw Error("Function types cannot be represented in JSON Schema");break}default:}}}let H=this.metadataRegistry.get(J);if(H)Object.assign(K.schema,H);if(this.io==="input"&&n4(J))delete K.schema.examples,delete K.schema.default;if(this.io==="input"&&K.schema._prefault)(X=K.schema).default??(X.default=K.schema._prefault);return delete K.schema._prefault,this.seen.get(J).schema}emit(J,W){let X={cycles:W?.cycles??"ref",reused:W?.reused??"inline",external:W?.external??void 0},G=this.seen.get(J);if(!G)throw Error("Unprocessed schema. This is a bug in Zod.");let Y=(z)=>{let N=this.target==="draft-2020-12"?"$defs":"definitions";if(X.external){let L=X.external.registry.get(z[0])?.id,D=X.external.uri??((P)=>P);if(L)return{ref:D(L)};let O=z[1].defId??z[1].schema.id??`schema${this.counter++}`;return z[1].defId=O,{defId:O,ref:`${D("__shared")}#/${N}/${O}`}}if(z[1]===G)return{ref:"#"};let F=`${"#"}/${N}/`,Z=z[1].schema.id??`__schema${this.counter++}`;return{defId:Z,ref:F+Z}},$=(z)=>{if(z[1].schema.$ref)return;let N=z[1],{ref:U,defId:F}=Y(z);if(N.def={...N.schema},F)N.defId=F;let Z=N.schema;for(let L in Z)delete Z[L];Z.$ref=U};if(X.cycles==="throw")for(let z of this.seen.entries()){let N=z[1];if(N.cycle)throw Error(`Cycle detected: #/${N.cycle?.join("/")}/<root>

Set the \`cycles\` parameter to \`"ref"\` to resolve cyclical schemas with defs.`)}for(let z of this.seen.entries()){let N=z[1];if(J===z[0]){$(z);continue}if(X.external){let F=X.external.registry.get(z[0])?.id;if(J!==z[0]&&F){$(z);continue}}if(this.metadataRegistry.get(z[0])?.id){$(z);continue}if(N.cycle){$(z);continue}if(N.count>1){if(X.reused==="ref"){$(z);continue}}}let K=(z,N)=>{let U=this.seen.get(z),F=U.def??U.schema,Z={...F};if(U.ref===null)return;let L=U.ref;if(U.ref=null,L){K(L,N);let D=this.seen.get(L).schema;if(D.$ref&&(N.target==="draft-7"||N.target==="draft-4"||N.target==="openapi-3.0"))F.allOf=F.allOf??[],F.allOf.push(D);else Object.assign(F,D),Object.assign(F,Z)}if(!U.isParent)this.override({zodSchema:z,jsonSchema:F,path:U.path??[]})};for(let z of[...this.seen.entries()].reverse())K(z[0],{target:this.target});let w={};if(this.target==="draft-2020-12")w.$schema="https://json-schema.org/draft/2020-12/schema";else if(this.target==="draft-7")w.$schema="http://json-schema.org/draft-07/schema#";else if(this.target==="draft-4")w.$schema="http://json-schema.org/draft-04/schema#";else if(this.target==="openapi-3.0");else console.warn(`Invalid target: ${this.target}`);if(X.external?.uri){let z=X.external.registry.get(J)?.id;if(!z)throw Error("Schema is missing an `id` property");w.$id=X.external.uri(z)}Object.assign(w,G.def);let H=X.external?.defs??{};for(let z of this.seen.entries()){let N=z[1];if(N.def&&N.defId)H[N.defId]=N.def}if(X.external);else if(Object.keys(H).length>0)if(this.target==="draft-2020-12")w.$defs=H;else w.definitions=H;try{return JSON.parse(JSON.stringify(w))}catch(z){throw Error("Error converting schema to JSON.")}}}function q7(J,W){if(J instanceof L$){let G=new T7(W),Y={};for(let w of J._idmap.entries()){let[H,z]=w;G.process(z)}let $={},K={registry:J,uri:W?.uri,defs:Y};for(let w of J._idmap.entries()){let[H,z]=w;$[H]=G.emit(z,{...W,external:K})}if(Object.keys(Y).length>0){let w=G.target==="draft-2020-12"?"$defs":"definitions";$.__shared={[w]:Y}}return{schemas:$}}let X=new T7(W);return X.process(J),X.emit(J,W)}function n4(J,W){let X=W??{seen:new Set};if(X.seen.has(J))return!1;X.seen.add(J);let Y=J._zod.def;switch(Y.type){case"string":case"number":case"bigint":case"boolean":case"date":case"symbol":case"undefined":case"null":case"any":case"unknown":case"never":case"void":case"literal":case"enum":case"nan":case"file":case"template_literal":return!1;case"array":return n4(Y.element,X);case"object":{for(let $ in Y.shape)if(n4(Y.shape[$],X))return!0;return!1}case"union":{for(let $ of Y.options)if(n4($,X))return!0;return!1}case"intersection":return n4(Y.left,X)||n4(Y.right,X);case"tuple":{for(let $ of Y.items)if(n4($,X))return!0;if(Y.rest&&n4(Y.rest,X))return!0;return!1}case"record":return n4(Y.keyType,X)||n4(Y.valueType,X);case"map":return n4(Y.keyType,X)||n4(Y.valueType,X);case"set":return n4(Y.valueType,X);case"promise":case"optional":case"nonoptional":case"nullable":case"readonly":return n4(Y.innerType,X);case"lazy":return n4(Y.getter(),X);case"default":return n4(Y.innerType,X);case"prefault":return n4(Y.innerType,X);case"custom":return!1;case"transform":return!0;case"pipe":return n4(Y.in,X)||n4(Y.out,X);case"success":return!1;case"catch":return!1;case"function":return!1;default:}throw Error(`Unknown schema type: ${Y.type}`)}var d2=M(()=>{rL();K6()});var r2={};var n2=()=>{};var xJ={};N0(xJ,{version:()=>uQ,util:()=>r,treeifyError:()=>_w,toJSONSchema:()=>q7,toDotPath:()=>A_,safeParseAsync:()=>rU,safeParse:()=>dU,safeEncodeAsync:()=>ky,safeEncode:()=>Cy,safeDecodeAsync:()=>hy,safeDecode:()=>by,registry:()=>V$,regexes:()=>_8,prettifyError:()=>Tw,parseAsync:()=>Bw,parse:()=>qw,locales:()=>pY,isValidJWT:()=>r_,isValidBase64URL:()=>d_,isValidBase64:()=>zZ,globalRegistry:()=>LJ,globalConfig:()=>s9,formatError:()=>fY,flattenError:()=>mY,encodeAsync:()=>Iy,encode:()=>Ay,decodeAsync:()=>Ry,decode:()=>Ey,config:()=>y4,clone:()=>A0,_xid:()=>z7,_void:()=>MV,_uuidv7:()=>Y7,_uuidv6:()=>X7,_uuidv4:()=>W7,_uuid:()=>J7,_url:()=>M$,_uppercase:()=>iY,_unknown:()=>VV,_union:()=>Ku,_undefined:()=>QV,_ulid:()=>H7,_uint64:()=>FV,_uint32:()=>$V,_tuple:()=>zu,_trim:()=>JG,_transform:()=>Vu,_toUpperCase:()=>XG,_toLowerCase:()=>WG,_templateLiteral:()=>Tu,_symbol:()=>UV,_superRefine:()=>qV,_success:()=>vu,_stringbool:()=>BV,_stringFormat:()=>YG,_string:()=>nL,_startsWith:()=>tY,_size:()=>dY,_set:()=>Uu,_safeParseAsync:()=>cY,_safeParse:()=>uY,_safeEncodeAsync:()=>kw,_safeEncode:()=>Cw,_safeDecodeAsync:()=>hw,_safeDecode:()=>bw,_regex:()=>rY,_refine:()=>TV,_record:()=>Nu,_readonly:()=>_u,_property:()=>_7,_promise:()=>Bu,_positive:()=>P7,_pipe:()=>Su,_parseAsync:()=>xY,_parse:()=>yY,_overwrite:()=>yJ,_optional:()=>Du,_number:()=>eL,_nullable:()=>Mu,_null:()=>ZV,_normalize:()=>eY,_nonpositive:()=>j7,_nonoptional:()=>Pu,_nonnegative:()=>S7,_never:()=>DV,_negative:()=>v7,_nativeEnum:()=>Zu,_nanoid:()=>$7,_nan:()=>vV,_multipleOf:()=>zX,_minSize:()=>NX,_minLength:()=>vW,_min:()=>c0,_mime:()=>sY,_maxSize:()=>H1,_maxLength:()=>z1,_max:()=>T8,_map:()=>Fu,_lte:()=>T8,_lt:()=>mJ,_lowercase:()=>nY,_literal:()=>Lu,_length:()=>N1,_lazy:()=>qu,_ksuid:()=>N7,_jwt:()=>M7,_isoTime:()=>oL,_isoDuration:()=>sL,_isoDateTime:()=>aL,_isoDate:()=>tL,_ipv6:()=>U7,_ipv4:()=>F7,_intersection:()=>Hu,_int64:()=>NV,_int32:()=>GV,_int:()=>WV,_includes:()=>aY,_guid:()=>D$,_gte:()=>c0,_gt:()=>fJ,_float64:()=>YV,_float32:()=>XV,_file:()=>SV,_enum:()=>Qu,_endsWith:()=>oY,_encodeAsync:()=>Iw,_encode:()=>Aw,_emoji:()=>G7,_email:()=>ew,_e164:()=>D7,_discriminatedUnion:()=>wu,_default:()=>Ou,_decodeAsync:()=>Rw,_decode:()=>Ew,_date:()=>OV,_custom:()=>_V,_cuid2:()=>w7,_cuid:()=>K7,_coercedString:()=>iL,_coercedNumber:()=>JV,_coercedDate:()=>PV,_coercedBoolean:()=>wV,_coercedBigint:()=>zV,_cidrv6:()=>Z7,_cidrv4:()=>Q7,_check:()=>l2,_catch:()=>ju,_boolean:()=>KV,_bigint:()=>HV,_base64url:()=>V7,_base64:()=>L7,_array:()=>jV,_any:()=>LV,TimePrecision:()=>O7,NEVER:()=>Pw,JSONSchemaGenerator:()=>T7,JSONSchema:()=>r2,Doc:()=>uw,$output:()=>ow,$input:()=>sw,$constructor:()=>C,$brand:()=>vw,$ZodXID:()=>eQ,$ZodVoid:()=>SZ,$ZodUnknown:()=>vZ,$ZodUnion:()=>aw,$ZodUndefined:()=>MZ,$ZodUUID:()=>dQ,$ZodURL:()=>nQ,$ZodULID:()=>sQ,$ZodType:()=>Z6,$ZodTuple:()=>tw,$ZodTransform:()=>hZ,$ZodTemplateLiteral:()=>rZ,$ZodSymbol:()=>DZ,$ZodSuccess:()=>uZ,$ZodStringFormat:()=>z4,$ZodString:()=>w1,$ZodSet:()=>RZ,$ZodRegistry:()=>L$,$ZodRecord:()=>EZ,$ZodRealError:()=>W8,$ZodReadonly:()=>dZ,$ZodPromise:()=>iZ,$ZodPrefault:()=>yZ,$ZodPipe:()=>pZ,$ZodOptional:()=>gZ,$ZodObjectJIT:()=>qZ,$ZodObject:()=>a_,$ZodNumberFormat:()=>LZ,$ZodNumber:()=>nw,$ZodNullable:()=>mZ,$ZodNull:()=>OZ,$ZodNonOptional:()=>xZ,$ZodNever:()=>jZ,$ZodNanoID:()=>aQ,$ZodNaN:()=>lZ,$ZodMap:()=>IZ,$ZodLiteral:()=>bZ,$ZodLazy:()=>aZ,$ZodKSUID:()=>JZ,$ZodJWT:()=>QZ,$ZodIntersection:()=>AZ,$ZodISOTime:()=>YZ,$ZodISODuration:()=>GZ,$ZodISODateTime:()=>WZ,$ZodISODate:()=>XZ,$ZodIPv6:()=>KZ,$ZodIPv4:()=>$Z,$ZodGUID:()=>pQ,$ZodFunction:()=>nZ,$ZodFile:()=>kZ,$ZodError:()=>$$,$ZodEnum:()=>CZ,$ZodEncodeError:()=>G1,$ZodEmoji:()=>iQ,$ZodEmail:()=>rQ,$ZodE164:()=>UZ,$ZodDiscriminatedUnion:()=>BZ,$ZodDefault:()=>fZ,$ZodDate:()=>_Z,$ZodCustomStringFormat:()=>ZZ,$ZodCustom:()=>tZ,$ZodCodec:()=>z$,$ZodCheckUpperCase:()=>kQ,$ZodCheckStringFormat:()=>lY,$ZodCheckStartsWith:()=>gQ,$ZodCheckSizeEquals:()=>AQ,$ZodCheckRegex:()=>CQ,$ZodCheckProperty:()=>fQ,$ZodCheckOverwrite:()=>xQ,$ZodCheckNumberFormat:()=>_Q,$ZodCheckMultipleOf:()=>SQ,$ZodCheckMinSize:()=>BQ,$ZodCheckMinLength:()=>IQ,$ZodCheckMimeType:()=>yQ,$ZodCheckMaxSize:()=>qQ,$ZodCheckMaxLength:()=>EQ,$ZodCheckLowerCase:()=>bQ,$ZodCheckLessThan:()=>fw,$ZodCheckLengthEquals:()=>RQ,$ZodCheckIncludes:()=>hQ,$ZodCheckGreaterThan:()=>yw,$ZodCheckEndsWith:()=>mQ,$ZodCheckBigIntFormat:()=>TQ,$ZodCheck:()=>M4,$ZodCatch:()=>cZ,$ZodCUID2:()=>oQ,$ZodCUID:()=>tQ,$ZodCIDRv6:()=>HZ,$ZodCIDRv4:()=>wZ,$ZodBoolean:()=>H$,$ZodBigIntFormat:()=>VZ,$ZodBigInt:()=>iw,$ZodBase64URL:()=>FZ,$ZodBase64:()=>NZ,$ZodAsyncError:()=>hJ,$ZodArray:()=>TZ,$ZodAny:()=>PZ});var q8=M(()=>{K6();mw();dL();n2();bY();nU();pU();oZ();xw();cQ();rL();p2();d2()});var AV=M(()=>{q8()});var S$={};N0(S$,{time:()=>RV,duration:()=>CV,datetime:()=>EV,date:()=>IV,ZodISOTime:()=>v$,ZodISODuration:()=>j$,ZodISODateTime:()=>O$,ZodISODate:()=>P$});function EV(J){return aL(O$,J)}function IV(J){return tL(P$,J)}function RV(J){return oL(v$,J)}function CV(J){return sL(j$,J)}var O$,P$,v$,j$;var B7=M(()=>{q8();A7();O$=C("ZodISODateTime",(J,W)=>{WZ.init(J,W),N4.init(J,W)});P$=C("ZodISODate",(J,W)=>{XZ.init(J,W),N4.init(J,W)});v$=C("ZodISOTime",(J,W)=>{YZ.init(J,W),N4.init(J,W)});j$=C("ZodISODuration",(J,W)=>{GZ.init(J,W),N4.init(J,W)})});var a2=(J,W)=>{$$.init(J,W),J.name="ZodError",Object.defineProperties(J,{format:{value:(X)=>fY(J,X)},flatten:{value:(X)=>mY(J,X)},addIssue:{value:(X)=>{J.issues.push(X),J.message=JSON.stringify(J.issues,kY,2)}},addIssues:{value:(X)=>{J.issues.push(...X),J.message=JSON.stringify(J.issues,kY,2)}},isEmpty:{get(){return J.issues.length===0}}})},t2,l0;var bV=M(()=>{q8();q8();K6();t2=C("ZodError",a2),l0=C("ZodError",a2,{Parent:Error})});var E7,I7,R7,C7,b7,k7,h7,g7,m7,f7,y7,x7;var kV=M(()=>{q8();bV();E7=yY(l0),I7=xY(l0),R7=uY(l0),C7=cY(l0),b7=Aw(l0),k7=Ew(l0),h7=Iw(l0),g7=Rw(l0),m7=Cw(l0),f7=bw(l0),y7=kw(l0),x7=hw(l0)});function j(J){return nL($G,J)}function B8(J){return ew(l7,J)}function o2(J){return D$(_$,J)}function s2(J){return J7(uJ,J)}function e2(J){return W7(uJ,J)}function JT(J){return X7(uJ,J)}function WT(J){return Y7(uJ,J)}function XT(J){return M$(B$,J)}function YT(J){return M$(B$,{protocol:/^https?$/,hostname:_8.domain,...r.normalizeParams(J)})}function GT(J){return G7(p7,J)}function $T(J){return $7(d7,J)}function KT(J){return K7(r7,J)}function wT(J){return w7(n7,J)}function HT(J){return H7(i7,J)}function zT(J){return z7(a7,J)}function NT(J){return N7(t7,J)}function s7(J){return F7(o7,J)}function JH(J){return U7(e7,J)}function FT(J){return Q7(WH,J)}function UT(J){return Z7(XH,J)}function QT(J){return L7(YH,J)}function ZT(J){return V7(GH,J)}function LT(J){return D7($H,J)}function VT(J){return M7(KH,J)}function DT(J,W,X={}){return YG(KG,J,W,X)}function MT(J){return YG(KG,"hostname",_8.hostname,J)}function OT(J){return YG(KG,"hex",_8.hex,J)}function PT(J,W){let X=W?.enc??"hex",G=`${J}_${X}`,Y=_8[G];if(!Y)throw Error(`Unrecognized hash format: ${G}`);return YG(KG,G,Y,W)}function _6(J){return eL(wG,J)}function u7(J){return WV(F1,J)}function vT(J){return XV(F1,J)}function jT(J){return YV(F1,J)}function ST(J){return GV(F1,J)}function _T(J){return $V(F1,J)}function G4(J){return KV(HG,J)}function TT(J){return HV(zG,J)}function qT(J){return NV(wH,J)}function BT(J){return FV(wH,J)}function AT(J){return UV(hV,J)}function FX(J){return QV(gV,J)}function fV(J){return ZV(mV,J)}function R6(){return LV(yV)}function jW(){return VV(xV)}function HH(J){return DV(uV,J)}function ET(J){return MV(cV,J)}function X0(J){return OV(A$,J)}function P6(J,W){return jV(lV,J,W)}function IT(J){let W=J._zod.def.shape;return O4(Object.keys(W))}function c(J,W){let X={type:"object",shape:J??{},...r.normalizeParams(W)};return new SW(X)}function RT(J,W){return new SW({type:"object",shape:J,catchall:HH(),...r.normalizeParams(W)})}function zH(J,W){return new SW({type:"object",shape:J,catchall:jW(),...r.normalizeParams(W)})}function Y0(J,W){return new NH({type:"union",options:J,...r.normalizeParams(W)})}function CT(J,W,X){return new pV({type:"union",options:W,discriminator:J,...r.normalizeParams(X)})}function rV(J,W){return new dV({type:"intersection",left:J,right:W})}function iV(J,W,X){let G=W instanceof Z6,Y=G?X:W;return new nV({type:"tuple",items:J,rest:G?W:null,...r.normalizeParams(Y)})}function T6(J,W,X){return new FH({type:"record",keyType:J,valueType:W,...r.normalizeParams(X)})}function bT(J,W,X){let G=A0(J);return G._zod.values=void 0,new FH({type:"record",keyType:G,valueType:W,...r.normalizeParams(X)})}function kT(J,W,X){return new aV({type:"map",keyType:J,valueType:W,...r.normalizeParams(X)})}function hT(J,W){return new tV({type:"set",valueType:J,...r.normalizeParams(W)})}function O4(J,W){let X=Array.isArray(J)?Object.fromEntries(J.map((G)=>[G,G])):J;return new GG({type:"enum",entries:X,...r.normalizeParams(W)})}function gT(J,W){return new GG({type:"enum",entries:J,...r.normalizeParams(W)})}function sV(J,W){return new oV({type:"literal",values:Array.isArray(J)?J:[J],...r.normalizeParams(W)})}function mT(J){return SV(eV,J)}function UH(J){return new JD({type:"transform",transform:J})}function E0(J){return new cJ({type:"optional",innerType:J})}function T$(J){return new WD({type:"nullable",innerType:J})}function fT(J){return E0(T$(J))}function YD(J,W){return new XD({type:"default",innerType:J,get defaultValue(){return typeof W==="function"?W():r.shallowClone(W)}})}function $D(J,W){return new GD({type:"prefault",innerType:J,get defaultValue(){return typeof W==="function"?W():r.shallowClone(W)}})}function KD(J,W){return new QH({type:"nonoptional",innerType:J,...r.normalizeParams(W)})}function yT(J){return new wD({type:"success",innerType:J})}function zD(J,W){return new HD({type:"catch",innerType:J,catchValue:typeof W==="function"?W:()=>W})}function xT(J){return vV(ND,J)}function q$(J,W){return new ZH({type:"pipe",in:J,out:W})}function uT(J,W,X){return new LH({type:"pipe",in:J,out:W,transform:X.decode,reverseTransform:X.encode})}function UD(J){return new FD({type:"readonly",innerType:J})}function cT(J,W){return new QD({type:"template_literal",parts:J,...r.normalizeParams(W)})}function LD(J){return new ZD({type:"lazy",getter:J})}function lT(J){return new VD({type:"promise",innerType:J})}function pT(J){return new DD({type:"function",input:Array.isArray(J?.input)?iV(J?.input):J?.input??P6(jW()),output:J?.output??jW()})}function dT(J){let W=new M4({check:"custom"});return W._zod.check=J,W}function _W(J,W){return _V(E$,J??(()=>!0),W)}function MD(J,W={}){return TV(E$,J,W)}function OD(J){return qV(J)}function rT(J,W={error:`Input not instance of ${J.name}`}){let X=new E$({type:"custom",check:"custom",fn:(G)=>G instanceof J,abort:!0,...r.normalizeParams(W)});return X._zod.bag.Class=J,X}function I$(J){let W=LD(()=>{return Y0([j(J),_6(),G4(),fV(),P6(W),T6(j(),W)])});return W}function iT(J,W){return q$(UH(J),W)}var V6,c7,$G,N4,l7,_$,uJ,B$,p7,d7,r7,n7,i7,a7,t7,o7,e7,WH,XH,YH,GH,$H,KH,KG,wG,F1,HG,zG,wH,hV,gV,mV,yV,xV,uV,cV,A$,lV,SW,NH,pV,dV,nV,FH,aV,tV,GG,oV,eV,JD,cJ,WD,XD,GD,QH,wD,HD,ND,ZH,LH,FD,QD,ZD,VD,DD,E$,nT=(...J)=>BV({Codec:LH,Boolean:HG,String:$G},...J);var A7=M(()=>{q8();q8();AV();B7();kV();V6=C("ZodType",(J,W)=>{return Z6.init(J,W),J.def=W,J.type=W.type,Object.defineProperty(J,"_def",{value:W}),J.check=(...X)=>{return J.clone(r.mergeDefs(W,{checks:[...W.checks??[],...X.map((G)=>typeof G==="function"?{_zod:{check:G,def:{check:"custom"},onattach:[]}}:G)]}))},J.clone=(X,G)=>A0(J,X,G),J.brand=()=>J,J.register=(X,G)=>{return X.add(J,G),J},J.parse=(X,G)=>E7(J,X,G,{callee:J.parse}),J.safeParse=(X,G)=>R7(J,X,G),J.parseAsync=async(X,G)=>I7(J,X,G,{callee:J.parseAsync}),J.safeParseAsync=async(X,G)=>C7(J,X,G),J.spa=J.safeParseAsync,J.encode=(X,G)=>b7(J,X,G),J.decode=(X,G)=>k7(J,X,G),J.encodeAsync=async(X,G)=>h7(J,X,G),J.decodeAsync=async(X,G)=>g7(J,X,G),J.safeEncode=(X,G)=>m7(J,X,G),J.safeDecode=(X,G)=>f7(J,X,G),J.safeEncodeAsync=async(X,G)=>y7(J,X,G),J.safeDecodeAsync=async(X,G)=>x7(J,X,G),J.refine=(X,G)=>J.check(MD(X,G)),J.superRefine=(X)=>J.check(OD(X)),J.overwrite=(X)=>J.check(yJ(X)),J.optional=()=>E0(J),J.nullable=()=>T$(J),J.nullish=()=>E0(T$(J)),J.nonoptional=(X)=>KD(J,X),J.array=()=>P6(J),J.or=(X)=>Y0([J,X]),J.and=(X)=>rV(J,X),J.transform=(X)=>q$(J,UH(X)),J.default=(X)=>YD(J,X),J.prefault=(X)=>$D(J,X),J.catch=(X)=>zD(J,X),J.pipe=(X)=>q$(J,X),J.readonly=()=>UD(J),J.describe=(X)=>{let G=J.clone();return LJ.add(G,{description:X}),G},Object.defineProperty(J,"description",{get(){return LJ.get(J)?.description},configurable:!0}),J.meta=(...X)=>{if(X.length===0)return LJ.get(J);let G=J.clone();return LJ.add(G,X[0]),G},J.isOptional=()=>J.safeParse(void 0).success,J.isNullable=()=>J.safeParse(null).success,J}),c7=C("_ZodString",(J,W)=>{w1.init(J,W),V6.init(J,W);let X=J._zod.bag;J.format=X.format??null,J.minLength=X.minimum??null,J.maxLength=X.maximum??null,J.regex=(...G)=>J.check(rY(...G)),J.includes=(...G)=>J.check(aY(...G)),J.startsWith=(...G)=>J.check(tY(...G)),J.endsWith=(...G)=>J.check(oY(...G)),J.min=(...G)=>J.check(vW(...G)),J.max=(...G)=>J.check(z1(...G)),J.length=(...G)=>J.check(N1(...G)),J.nonempty=(...G)=>J.check(vW(1,...G)),J.lowercase=(G)=>J.check(nY(G)),J.uppercase=(G)=>J.check(iY(G)),J.trim=()=>J.check(JG()),J.normalize=(...G)=>J.check(eY(...G)),J.toLowerCase=()=>J.check(WG()),J.toUpperCase=()=>J.check(XG())}),$G=C("ZodString",(J,W)=>{w1.init(J,W),c7.init(J,W),J.email=(X)=>J.check(ew(l7,X)),J.url=(X)=>J.check(M$(B$,X)),J.jwt=(X)=>J.check(M7(KH,X)),J.emoji=(X)=>J.check(G7(p7,X)),J.guid=(X)=>J.check(D$(_$,X)),J.uuid=(X)=>J.check(J7(uJ,X)),J.uuidv4=(X)=>J.check(W7(uJ,X)),J.uuidv6=(X)=>J.check(X7(uJ,X)),J.uuidv7=(X)=>J.check(Y7(uJ,X)),J.nanoid=(X)=>J.check($7(d7,X)),J.guid=(X)=>J.check(D$(_$,X)),J.cuid=(X)=>J.check(K7(r7,X)),J.cuid2=(X)=>J.check(w7(n7,X)),J.ulid=(X)=>J.check(H7(i7,X)),J.base64=(X)=>J.check(L7(YH,X)),J.base64url=(X)=>J.check(V7(GH,X)),J.xid=(X)=>J.check(z7(a7,X)),J.ksuid=(X)=>J.check(N7(t7,X)),J.ipv4=(X)=>J.check(F7(o7,X)),J.ipv6=(X)=>J.check(U7(e7,X)),J.cidrv4=(X)=>J.check(Q7(WH,X)),J.cidrv6=(X)=>J.check(Z7(XH,X)),J.e164=(X)=>J.check(D7($H,X)),J.datetime=(X)=>J.check(EV(X)),J.date=(X)=>J.check(IV(X)),J.time=(X)=>J.check(RV(X)),J.duration=(X)=>J.check(CV(X))});N4=C("ZodStringFormat",(J,W)=>{z4.init(J,W),c7.init(J,W)}),l7=C("ZodEmail",(J,W)=>{rQ.init(J,W),N4.init(J,W)});_$=C("ZodGUID",(J,W)=>{pQ.init(J,W),N4.init(J,W)});uJ=C("ZodUUID",(J,W)=>{dQ.init(J,W),N4.init(J,W)});B$=C("ZodURL",(J,W)=>{nQ.init(J,W),N4.init(J,W)});p7=C("ZodEmoji",(J,W)=>{iQ.init(J,W),N4.init(J,W)});d7=C("ZodNanoID",(J,W)=>{aQ.init(J,W),N4.init(J,W)});r7=C("ZodCUID",(J,W)=>{tQ.init(J,W),N4.init(J,W)});n7=C("ZodCUID2",(J,W)=>{oQ.init(J,W),N4.init(J,W)});i7=C("ZodULID",(J,W)=>{sQ.init(J,W),N4.init(J,W)});a7=C("ZodXID",(J,W)=>{eQ.init(J,W),N4.init(J,W)});t7=C("ZodKSUID",(J,W)=>{JZ.init(J,W),N4.init(J,W)});o7=C("ZodIPv4",(J,W)=>{$Z.init(J,W),N4.init(J,W)});e7=C("ZodIPv6",(J,W)=>{KZ.init(J,W),N4.init(J,W)});WH=C("ZodCIDRv4",(J,W)=>{wZ.init(J,W),N4.init(J,W)});XH=C("ZodCIDRv6",(J,W)=>{HZ.init(J,W),N4.init(J,W)});YH=C("ZodBase64",(J,W)=>{NZ.init(J,W),N4.init(J,W)});GH=C("ZodBase64URL",(J,W)=>{FZ.init(J,W),N4.init(J,W)});$H=C("ZodE164",(J,W)=>{UZ.init(J,W),N4.init(J,W)});KH=C("ZodJWT",(J,W)=>{QZ.init(J,W),N4.init(J,W)});KG=C("ZodCustomStringFormat",(J,W)=>{ZZ.init(J,W),N4.init(J,W)});wG=C("ZodNumber",(J,W)=>{nw.init(J,W),V6.init(J,W),J.gt=(G,Y)=>J.check(fJ(G,Y)),J.gte=(G,Y)=>J.check(c0(G,Y)),J.min=(G,Y)=>J.check(c0(G,Y)),J.lt=(G,Y)=>J.check(mJ(G,Y)),J.lte=(G,Y)=>J.check(T8(G,Y)),J.max=(G,Y)=>J.check(T8(G,Y)),J.int=(G)=>J.check(u7(G)),J.safe=(G)=>J.check(u7(G)),J.positive=(G)=>J.check(fJ(0,G)),J.nonnegative=(G)=>J.check(c0(0,G)),J.negative=(G)=>J.check(mJ(0,G)),J.nonpositive=(G)=>J.check(T8(0,G)),J.multipleOf=(G,Y)=>J.check(zX(G,Y)),J.step=(G,Y)=>J.check(zX(G,Y)),J.finite=()=>J;let X=J._zod.bag;J.minValue=Math.max(X.minimum??Number.NEGATIVE_INFINITY,X.exclusiveMinimum??Number.NEGATIVE_INFINITY)??null,J.maxValue=Math.min(X.maximum??Number.POSITIVE_INFINITY,X.exclusiveMaximum??Number.POSITIVE_INFINITY)??null,J.isInt=(X.format??"").includes("int")||Number.isSafeInteger(X.multipleOf??0.5),J.isFinite=!0,J.format=X.format??null});F1=C("ZodNumberFormat",(J,W)=>{LZ.init(J,W),wG.init(J,W)});HG=C("ZodBoolean",(J,W)=>{H$.init(J,W),V6.init(J,W)});zG=C("ZodBigInt",(J,W)=>{iw.init(J,W),V6.init(J,W),J.gte=(G,Y)=>J.check(c0(G,Y)),J.min=(G,Y)=>J.check(c0(G,Y)),J.gt=(G,Y)=>J.check(fJ(G,Y)),J.gte=(G,Y)=>J.check(c0(G,Y)),J.min=(G,Y)=>J.check(c0(G,Y)),J.lt=(G,Y)=>J.check(mJ(G,Y)),J.lte=(G,Y)=>J.check(T8(G,Y)),J.max=(G,Y)=>J.check(T8(G,Y)),J.positive=(G)=>J.check(fJ(BigInt(0),G)),J.negative=(G)=>J.check(mJ(BigInt(0),G)),J.nonpositive=(G)=>J.check(T8(BigInt(0),G)),J.nonnegative=(G)=>J.check(c0(BigInt(0),G)),J.multipleOf=(G,Y)=>J.check(zX(G,Y));let X=J._zod.bag;J.minValue=X.minimum??null,J.maxValue=X.maximum??null,J.format=X.format??null});wH=C("ZodBigIntFormat",(J,W)=>{VZ.init(J,W),zG.init(J,W)});hV=C("ZodSymbol",(J,W)=>{DZ.init(J,W),V6.init(J,W)});gV=C("ZodUndefined",(J,W)=>{MZ.init(J,W),V6.init(J,W)});mV=C("ZodNull",(J,W)=>{OZ.init(J,W),V6.init(J,W)});yV=C("ZodAny",(J,W)=>{PZ.init(J,W),V6.init(J,W)});xV=C("ZodUnknown",(J,W)=>{vZ.init(J,W),V6.init(J,W)});uV=C("ZodNever",(J,W)=>{jZ.init(J,W),V6.init(J,W)});cV=C("ZodVoid",(J,W)=>{SZ.init(J,W),V6.init(J,W)});A$=C("ZodDate",(J,W)=>{_Z.init(J,W),V6.init(J,W),J.min=(G,Y)=>J.check(c0(G,Y)),J.max=(G,Y)=>J.check(T8(G,Y));let X=J._zod.bag;J.minDate=X.minimum?new Date(X.minimum):null,J.maxDate=X.maximum?new Date(X.maximum):null});lV=C("ZodArray",(J,W)=>{TZ.init(J,W),V6.init(J,W),J.element=W.element,J.min=(X,G)=>J.check(vW(X,G)),J.nonempty=(X)=>J.check(vW(1,X)),J.max=(X,G)=>J.check(z1(X,G)),J.length=(X,G)=>J.check(N1(X,G)),J.unwrap=()=>J.element});SW=C("ZodObject",(J,W)=>{qZ.init(J,W),V6.init(J,W),r.defineLazy(J,"shape",()=>{return W.shape}),J.keyof=()=>O4(Object.keys(J._zod.def.shape)),J.catchall=(X)=>J.clone({...J._zod.def,catchall:X}),J.passthrough=()=>J.clone({...J._zod.def,catchall:jW()}),J.loose=()=>J.clone({...J._zod.def,catchall:jW()}),J.strict=()=>J.clone({...J._zod.def,catchall:HH()}),J.strip=()=>J.clone({...J._zod.def,catchall:void 0}),J.extend=(X)=>{return r.extend(J,X)},J.safeExtend=(X)=>{return r.safeExtend(J,X)},J.merge=(X)=>r.merge(J,X),J.pick=(X)=>r.pick(J,X),J.omit=(X)=>r.omit(J,X),J.partial=(...X)=>r.partial(cJ,J,X[0]),J.required=(...X)=>r.required(QH,J,X[0])});NH=C("ZodUnion",(J,W)=>{aw.init(J,W),V6.init(J,W),J.options=W.options});pV=C("ZodDiscriminatedUnion",(J,W)=>{NH.init(J,W),BZ.init(J,W)});dV=C("ZodIntersection",(J,W)=>{AZ.init(J,W),V6.init(J,W)});nV=C("ZodTuple",(J,W)=>{tw.init(J,W),V6.init(J,W),J.rest=(X)=>J.clone({...J._zod.def,rest:X})});FH=C("ZodRecord",(J,W)=>{EZ.init(J,W),V6.init(J,W),J.keyType=W.keyType,J.valueType=W.valueType});aV=C("ZodMap",(J,W)=>{IZ.init(J,W),V6.init(J,W),J.keyType=W.keyType,J.valueType=W.valueType});tV=C("ZodSet",(J,W)=>{RZ.init(J,W),V6.init(J,W),J.min=(...X)=>J.check(NX(...X)),J.nonempty=(X)=>J.check(NX(1,X)),J.max=(...X)=>J.check(H1(...X)),J.size=(...X)=>J.check(dY(...X))});GG=C("ZodEnum",(J,W)=>{CZ.init(J,W),V6.init(J,W),J.enum=W.entries,J.options=Object.values(W.entries);let X=new Set(Object.keys(W.entries));J.extract=(G,Y)=>{let $={};for(let K of G)if(X.has(K))$[K]=W.entries[K];else throw Error(`Key ${K} not found in enum`);return new GG({...W,checks:[],...r.normalizeParams(Y),entries:$})},J.exclude=(G,Y)=>{let $={...W.entries};for(let K of G)if(X.has(K))delete $[K];else throw Error(`Key ${K} not found in enum`);return new GG({...W,checks:[],...r.normalizeParams(Y),entries:$})}});oV=C("ZodLiteral",(J,W)=>{bZ.init(J,W),V6.init(J,W),J.values=new Set(W.values),Object.defineProperty(J,"value",{get(){if(W.values.length>1)throw Error("This schema contains multiple valid literal values. Use `.values` instead.");return W.values[0]}})});eV=C("ZodFile",(J,W)=>{kZ.init(J,W),V6.init(J,W),J.min=(X,G)=>J.check(NX(X,G)),J.max=(X,G)=>J.check(H1(X,G)),J.mime=(X,G)=>J.check(sY(Array.isArray(X)?X:[X],G))});JD=C("ZodTransform",(J,W)=>{hZ.init(J,W),V6.init(J,W),J._zod.parse=(X,G)=>{if(G.direction==="backward")throw new G1(J.constructor.name);X.addIssue=($)=>{if(typeof $==="string")X.issues.push(r.issue($,X.value,W));else{let K=$;if(K.fatal)K.continue=!1;K.code??(K.code="custom"),K.input??(K.input=X.value),K.inst??(K.inst=J),X.issues.push(r.issue(K))}};let Y=W.transform(X.value,X);if(Y instanceof Promise)return Y.then(($)=>{return X.value=$,X});return X.value=Y,X}});cJ=C("ZodOptional",(J,W)=>{gZ.init(J,W),V6.init(J,W),J.unwrap=()=>J._zod.def.innerType});WD=C("ZodNullable",(J,W)=>{mZ.init(J,W),V6.init(J,W),J.unwrap=()=>J._zod.def.innerType});XD=C("ZodDefault",(J,W)=>{fZ.init(J,W),V6.init(J,W),J.unwrap=()=>J._zod.def.innerType,J.removeDefault=J.unwrap});GD=C("ZodPrefault",(J,W)=>{yZ.init(J,W),V6.init(J,W),J.unwrap=()=>J._zod.def.innerType});QH=C("ZodNonOptional",(J,W)=>{xZ.init(J,W),V6.init(J,W),J.unwrap=()=>J._zod.def.innerType});wD=C("ZodSuccess",(J,W)=>{uZ.init(J,W),V6.init(J,W),J.unwrap=()=>J._zod.def.innerType});HD=C("ZodCatch",(J,W)=>{cZ.init(J,W),V6.init(J,W),J.unwrap=()=>J._zod.def.innerType,J.removeCatch=J.unwrap});ND=C("ZodNaN",(J,W)=>{lZ.init(J,W),V6.init(J,W)});ZH=C("ZodPipe",(J,W)=>{pZ.init(J,W),V6.init(J,W),J.in=W.in,J.out=W.out});LH=C("ZodCodec",(J,W)=>{ZH.init(J,W),z$.init(J,W)});FD=C("ZodReadonly",(J,W)=>{dZ.init(J,W),V6.init(J,W),J.unwrap=()=>J._zod.def.innerType});QD=C("ZodTemplateLiteral",(J,W)=>{rZ.init(J,W),V6.init(J,W)});ZD=C("ZodLazy",(J,W)=>{aZ.init(J,W),V6.init(J,W),J.unwrap=()=>J._zod.def.getter()});VD=C("ZodPromise",(J,W)=>{iZ.init(J,W),V6.init(J,W),J.unwrap=()=>J._zod.def.innerType});DD=C("ZodFunction",(J,W)=>{nZ.init(J,W),V6.init(J,W)});E$=C("ZodCustom",(J,W)=>{tZ.init(J,W),V6.init(J,W)})});function tT(J){y4({customError:J})}function oT(){return y4().customError}var aT,VH;var sT=M(()=>{q8();aT={invalid_type:"invalid_type",too_big:"too_big",too_small:"too_small",invalid_format:"invalid_format",not_multiple_of:"not_multiple_of",unrecognized_keys:"unrecognized_keys",invalid_union:"invalid_union",invalid_key:"invalid_key",invalid_element:"invalid_element",invalid_value:"invalid_value",custom:"custom"};(function(J){})(VH||(VH={}))});var o6={};N0(o6,{string:()=>Iu,number:()=>Ru,date:()=>ku,boolean:()=>Cu,bigint:()=>bu});function Iu(J){return iL($G,J)}function Ru(J){return JV(wG,J)}function Cu(J){return wV(HG,J)}function bu(J){return zV(zG,J)}function ku(J){return PV(A$,J)}var eT=M(()=>{q8();A7()});var DH={};N0(DH,{xid:()=>zT,void:()=>ET,uuidv7:()=>WT,uuidv6:()=>JT,uuidv4:()=>e2,uuid:()=>s2,util:()=>r,url:()=>XT,uppercase:()=>iY,unknown:()=>jW,union:()=>Y0,undefined:()=>FX,ulid:()=>HT,uint64:()=>BT,uint32:()=>_T,tuple:()=>iV,trim:()=>JG,treeifyError:()=>_w,transform:()=>UH,toUpperCase:()=>XG,toLowerCase:()=>WG,toJSONSchema:()=>q7,templateLiteral:()=>cT,symbol:()=>AT,superRefine:()=>OD,success:()=>yT,stringbool:()=>nT,stringFormat:()=>DT,string:()=>j,strictObject:()=>RT,startsWith:()=>tY,size:()=>dY,setErrorMap:()=>tT,set:()=>hT,safeParseAsync:()=>C7,safeParse:()=>R7,safeEncodeAsync:()=>y7,safeEncode:()=>m7,safeDecodeAsync:()=>x7,safeDecode:()=>f7,registry:()=>V$,regexes:()=>_8,regex:()=>rY,refine:()=>MD,record:()=>T6,readonly:()=>UD,property:()=>_7,promise:()=>lT,prettifyError:()=>Tw,preprocess:()=>iT,prefault:()=>$D,positive:()=>P7,pipe:()=>q$,partialRecord:()=>bT,parseAsync:()=>I7,parse:()=>E7,overwrite:()=>yJ,optional:()=>E0,object:()=>c,number:()=>_6,nullish:()=>fT,nullable:()=>T$,null:()=>fV,normalize:()=>eY,nonpositive:()=>j7,nonoptional:()=>KD,nonnegative:()=>S7,never:()=>HH,negative:()=>v7,nativeEnum:()=>gT,nanoid:()=>$T,nan:()=>xT,multipleOf:()=>zX,minSize:()=>NX,minLength:()=>vW,mime:()=>sY,maxSize:()=>H1,maxLength:()=>z1,map:()=>kT,lte:()=>T8,lt:()=>mJ,lowercase:()=>nY,looseObject:()=>zH,locales:()=>pY,literal:()=>sV,length:()=>N1,lazy:()=>LD,ksuid:()=>NT,keyof:()=>IT,jwt:()=>VT,json:()=>I$,iso:()=>S$,ipv6:()=>JH,ipv4:()=>s7,intersection:()=>rV,int64:()=>qT,int32:()=>ST,int:()=>u7,instanceof:()=>rT,includes:()=>aY,httpUrl:()=>YT,hostname:()=>MT,hex:()=>OT,hash:()=>PT,guid:()=>o2,gte:()=>c0,gt:()=>fJ,globalRegistry:()=>LJ,getErrorMap:()=>oT,function:()=>pT,formatError:()=>fY,float64:()=>jT,float32:()=>vT,flattenError:()=>mY,file:()=>mT,enum:()=>O4,endsWith:()=>oY,encodeAsync:()=>h7,encode:()=>b7,emoji:()=>GT,email:()=>B8,e164:()=>LT,discriminatedUnion:()=>CT,decodeAsync:()=>g7,decode:()=>k7,date:()=>X0,custom:()=>_W,cuid2:()=>wT,cuid:()=>KT,core:()=>xJ,config:()=>y4,coerce:()=>o6,codec:()=>uT,clone:()=>A0,cidrv6:()=>UT,cidrv4:()=>FT,check:()=>dT,catch:()=>zD,boolean:()=>G4,bigint:()=>TT,base64url:()=>ZT,base64:()=>QT,array:()=>P6,any:()=>R6,_function:()=>pT,_default:()=>YD,_ZodString:()=>c7,ZodXID:()=>a7,ZodVoid:()=>cV,ZodUnknown:()=>xV,ZodUnion:()=>NH,ZodUndefined:()=>gV,ZodUUID:()=>uJ,ZodURL:()=>B$,ZodULID:()=>i7,ZodType:()=>V6,ZodTuple:()=>nV,ZodTransform:()=>JD,ZodTemplateLiteral:()=>QD,ZodSymbol:()=>hV,ZodSuccess:()=>wD,ZodStringFormat:()=>N4,ZodString:()=>$G,ZodSet:()=>tV,ZodRecord:()=>FH,ZodRealError:()=>l0,ZodReadonly:()=>FD,ZodPromise:()=>VD,ZodPrefault:()=>GD,ZodPipe:()=>ZH,ZodOptional:()=>cJ,ZodObject:()=>SW,ZodNumberFormat:()=>F1,ZodNumber:()=>wG,ZodNullable:()=>WD,ZodNull:()=>mV,ZodNonOptional:()=>QH,ZodNever:()=>uV,ZodNanoID:()=>d7,ZodNaN:()=>ND,ZodMap:()=>aV,ZodLiteral:()=>oV,ZodLazy:()=>ZD,ZodKSUID:()=>t7,ZodJWT:()=>KH,ZodIssueCode:()=>aT,ZodIntersection:()=>dV,ZodISOTime:()=>v$,ZodISODuration:()=>j$,ZodISODateTime:()=>O$,ZodISODate:()=>P$,ZodIPv6:()=>e7,ZodIPv4:()=>o7,ZodGUID:()=>_$,ZodFunction:()=>DD,ZodFirstPartyTypeKind:()=>VH,ZodFile:()=>eV,ZodError:()=>t2,ZodEnum:()=>GG,ZodEmoji:()=>p7,ZodEmail:()=>l7,ZodE164:()=>$H,ZodDiscriminatedUnion:()=>pV,ZodDefault:()=>XD,ZodDate:()=>A$,ZodCustomStringFormat:()=>KG,ZodCustom:()=>E$,ZodCodec:()=>LH,ZodCatch:()=>HD,ZodCUID2:()=>n7,ZodCUID:()=>r7,ZodCIDRv6:()=>XH,ZodCIDRv4:()=>WH,ZodBoolean:()=>HG,ZodBigIntFormat:()=>wH,ZodBigInt:()=>zG,ZodBase64URL:()=>GH,ZodBase64:()=>YH,ZodArray:()=>lV,ZodAny:()=>yV,TimePrecision:()=>O7,NEVER:()=>Pw,$output:()=>ow,$input:()=>sw,$brand:()=>vw});var PD=M(()=>{q8();q8();KL();q8();dL();B7();B7();eT();A7();AV();bV();kV();sT();y4(N$())});var p0={};N0(p0,{z:()=>DH,xid:()=>zT,void:()=>ET,uuidv7:()=>WT,uuidv6:()=>JT,uuidv4:()=>e2,uuid:()=>s2,util:()=>r,url:()=>XT,uppercase:()=>iY,unknown:()=>jW,union:()=>Y0,undefined:()=>FX,ulid:()=>HT,uint64:()=>BT,uint32:()=>_T,tuple:()=>iV,trim:()=>JG,treeifyError:()=>_w,transform:()=>UH,toUpperCase:()=>XG,toLowerCase:()=>WG,toJSONSchema:()=>q7,templateLiteral:()=>cT,symbol:()=>AT,superRefine:()=>OD,success:()=>yT,stringbool:()=>nT,stringFormat:()=>DT,string:()=>j,strictObject:()=>RT,startsWith:()=>tY,size:()=>dY,setErrorMap:()=>tT,set:()=>hT,safeParseAsync:()=>C7,safeParse:()=>R7,safeEncodeAsync:()=>y7,safeEncode:()=>m7,safeDecodeAsync:()=>x7,safeDecode:()=>f7,registry:()=>V$,regexes:()=>_8,regex:()=>rY,refine:()=>MD,record:()=>T6,readonly:()=>UD,property:()=>_7,promise:()=>lT,prettifyError:()=>Tw,preprocess:()=>iT,prefault:()=>$D,positive:()=>P7,pipe:()=>q$,partialRecord:()=>bT,parseAsync:()=>I7,parse:()=>E7,overwrite:()=>yJ,optional:()=>E0,object:()=>c,number:()=>_6,nullish:()=>fT,nullable:()=>T$,null:()=>fV,normalize:()=>eY,nonpositive:()=>j7,nonoptional:()=>KD,nonnegative:()=>S7,never:()=>HH,negative:()=>v7,nativeEnum:()=>gT,nanoid:()=>$T,nan:()=>xT,multipleOf:()=>zX,minSize:()=>NX,minLength:()=>vW,mime:()=>sY,maxSize:()=>H1,maxLength:()=>z1,map:()=>kT,lte:()=>T8,lt:()=>mJ,lowercase:()=>nY,looseObject:()=>zH,locales:()=>pY,literal:()=>sV,length:()=>N1,lazy:()=>LD,ksuid:()=>NT,keyof:()=>IT,jwt:()=>VT,json:()=>I$,iso:()=>S$,ipv6:()=>JH,ipv4:()=>s7,intersection:()=>rV,int64:()=>qT,int32:()=>ST,int:()=>u7,instanceof:()=>rT,includes:()=>aY,httpUrl:()=>YT,hostname:()=>MT,hex:()=>OT,hash:()=>PT,guid:()=>o2,gte:()=>c0,gt:()=>fJ,globalRegistry:()=>LJ,getErrorMap:()=>oT,function:()=>pT,formatError:()=>fY,float64:()=>jT,float32:()=>vT,flattenError:()=>mY,file:()=>mT,enum:()=>O4,endsWith:()=>oY,encodeAsync:()=>h7,encode:()=>b7,emoji:()=>GT,email:()=>B8,e164:()=>LT,discriminatedUnion:()=>CT,default:()=>hu,decodeAsync:()=>g7,decode:()=>k7,date:()=>X0,custom:()=>_W,cuid2:()=>wT,cuid:()=>KT,core:()=>xJ,config:()=>y4,coerce:()=>o6,codec:()=>uT,clone:()=>A0,cidrv6:()=>UT,cidrv4:()=>FT,check:()=>dT,catch:()=>zD,boolean:()=>G4,bigint:()=>TT,base64url:()=>ZT,base64:()=>QT,array:()=>P6,any:()=>R6,_function:()=>pT,_default:()=>YD,_ZodString:()=>c7,ZodXID:()=>a7,ZodVoid:()=>cV,ZodUnknown:()=>xV,ZodUnion:()=>NH,ZodUndefined:()=>gV,ZodUUID:()=>uJ,ZodURL:()=>B$,ZodULID:()=>i7,ZodType:()=>V6,ZodTuple:()=>nV,ZodTransform:()=>JD,ZodTemplateLiteral:()=>QD,ZodSymbol:()=>hV,ZodSuccess:()=>wD,ZodStringFormat:()=>N4,ZodString:()=>$G,ZodSet:()=>tV,ZodRecord:()=>FH,ZodRealError:()=>l0,ZodReadonly:()=>FD,ZodPromise:()=>VD,ZodPrefault:()=>GD,ZodPipe:()=>ZH,ZodOptional:()=>cJ,ZodObject:()=>SW,ZodNumberFormat:()=>F1,ZodNumber:()=>wG,ZodNullable:()=>WD,ZodNull:()=>mV,ZodNonOptional:()=>QH,ZodNever:()=>uV,ZodNanoID:()=>d7,ZodNaN:()=>ND,ZodMap:()=>aV,ZodLiteral:()=>oV,ZodLazy:()=>ZD,ZodKSUID:()=>t7,ZodJWT:()=>KH,ZodIssueCode:()=>aT,ZodIntersection:()=>dV,ZodISOTime:()=>v$,ZodISODuration:()=>j$,ZodISODateTime:()=>O$,ZodISODate:()=>P$,ZodIPv6:()=>e7,ZodIPv4:()=>o7,ZodGUID:()=>_$,ZodFunction:()=>DD,ZodFirstPartyTypeKind:()=>VH,ZodFile:()=>eV,ZodError:()=>t2,ZodEnum:()=>GG,ZodEmoji:()=>p7,ZodEmail:()=>l7,ZodE164:()=>$H,ZodDiscriminatedUnion:()=>pV,ZodDefault:()=>XD,ZodDate:()=>A$,ZodCustomStringFormat:()=>KG,ZodCustom:()=>E$,ZodCodec:()=>LH,ZodCatch:()=>HD,ZodCUID2:()=>n7,ZodCUID:()=>r7,ZodCIDRv6:()=>XH,ZodCIDRv4:()=>WH,ZodBoolean:()=>HG,ZodBigIntFormat:()=>wH,ZodBigInt:()=>zG,ZodBase64URL:()=>GH,ZodBase64:()=>YH,ZodArray:()=>lV,ZodAny:()=>yV,TimePrecision:()=>O7,NEVER:()=>Pw,$output:()=>ow,$input:()=>sw,$brand:()=>vw});var hu;var X8=M(()=>{PD();PD();hu=DH});async function R$(J,W,X){let G=J.body?.callbackURL||J.context.options.baseURL;if(!G)throw new V("BAD_REQUEST",{message:"callbackURL is required"});let Y=t6(128),$=t6(32),K=J.context.oauthConfig?.storeStateStrategy||"cookie",w={...X?X:{},callbackURL:G,codeVerifier:Y,errorURL:J.body?.errorCallbackURL,newUserURL:J.body?.newUserCallbackURL,link:W,expiresAt:Date.now()+600000,requestSignUp:J.body?.requestSignUp};if(await Jq(w),K==="cookie"){let U=await UJ({key:J.context.secret,data:JSON.stringify(w)}),F=J.context.createAuthCookie("oauth_state",{maxAge:600000});return J.setCookie(F.name,U,F.attributes),{state:$,codeVerifier:Y}}let H=J.context.createAuthCookie("state",{maxAge:300000});await J.setSignedCookie(H.name,$,J.context.secret,H.attributes);let z=new Date;z.setMinutes(z.getMinutes()+10);let N=await J.context.internalAdapter.createVerificationValue({value:JSON.stringify(w),identifier:$,expiresAt:z});if(!N)throw J.context.logger.error("Unable to create verification. Make sure the database adapter is properly working and there is a verification table in the database"),new V("INTERNAL_SERVER_ERROR",{message:"Unable to create verification"});return{state:N.identifier,codeVerifier:Y}}async function MH(J){let W=J.query.state||J.body.state,X=J.context.oauthConfig.storeStateStrategy||"cookie",G=zH({callbackURL:j(),codeVerifier:j(),errorURL:j().optional(),newUserURL:j().optional(),expiresAt:_6(),link:c({email:j(),userId:o6.string()}).optional(),requestSignUp:G4().optional()}),Y;if(X==="cookie"){let $=J.context.createAuthCookie("oauth_state"),K=J.getCookie($.name);if(!K){J.context.logger.error("State Mismatch. OAuth state cookie not found",{state:W});let w=J.context.options.onAPIError?.errorURL||`${J.context.baseURL}/error`;throw J.redirect(`${w}?error=please_restart_the_process`)}try{let w=await QJ({key:J.context.secret,data:K});Y=G.parse(JSON.parse(w))}catch(w){J.context.logger.error("Failed to decrypt or parse OAuth state cookie",{error:w});let H=J.context.options.onAPIError?.errorURL||`${J.context.baseURL}/error`;throw J.redirect(`${H}?error=please_restart_the_process`)}J.setCookie($.name,"",{maxAge:0})}else{let $=await J.context.internalAdapter.findVerificationValue(W);if(!$){J.context.logger.error("State Mismatch. Verification not found",{state:W});let H=J.context.options.onAPIError?.errorURL||`${J.context.baseURL}/error`;throw J.redirect(`${H}?error=please_restart_the_process`)}Y=G.parse(JSON.parse($.value));let K=J.context.createAuthCookie("state"),w=await J.getSignedCookie(K.name,J.context.secret);if(!J.context.oauthConfig?.skipStateCookieCheck&&(!w||w!==W)){let H=J.context.options.onAPIError?.errorURL||`${J.context.baseURL}/error`;throw J.redirect(`${H}?error=state_mismatch`)}J.setCookie(K.name,"",{maxAge:0}),await J.context.internalAdapter.deleteVerificationValue($.id)}if(!Y.errorURL)Y.errorURL=J.context.options.onAPIError?.errorURL||`${J.context.baseURL}/error`;if(Y.expiresAt<Date.now()){let $=J.context.options.onAPIError?.errorURL||`${J.context.baseURL}/error`;throw J.redirect(`${$}?error=please_restart_the_process`)}if(Y)await Jq(Y);return Y}var JV6,Jq,NG,l4=(J)=>{return EY("a-z","A-Z","0-9")(J||32)};var Y8=M(()=>{J0();kJ();W0();X8();Nw();({get:JV6,set:Jq}=VU(()=>null));NG={isAction:!1}});function gu(J){return J?J!=="false":!1}function c6(J,W){if(typeof process<"u"&&process.env)return process.env[J]??W;if(typeof Deno<"u")return Deno.env.get(J)??W;if(typeof Bun<"u")return Bun.env[J]??W;return W}function SH(J,W=!0){let X=c6(J);if(!X)return W;return X!=="0"&&X.toLowerCase()!=="false"&&X!==""}function _H(){if(c6("FORCE_COLOR")!==void 0)switch(c6("FORCE_COLOR")){case"":case"1":case"true":return G0;case"2":return pJ;case"3":return E8;default:return b$}if(c6("NODE_DISABLE_COLORS")!==void 0&&c6("NODE_DISABLE_COLORS")!==""||c6("NO_COLOR")!==void 0&&c6("NO_COLOR")!==""||c6("TERM")==="dumb")return b$;if(c6("TMUX"))return E8;if("TF_BUILD"in C6&&"AGENT_NAME"in C6)return G0;if("CI"in C6){for(let{0:J,1:W}of mu)if(J in C6)return W;if(c6("CI_NAME")==="codeship")return pJ;return b$}if("TEAMCITY_VERSION"in C6)return/^(9\.(0*[1-9]\d*)\.|\d{2,}\.)/.exec(c6("TEAMCITY_VERSION"))!==null?G0:b$;switch(c6("TERM_PROGRAM")){case"iTerm.app":if(!c6("TERM_PROGRAM_VERSION")||/^[0-2]\./.exec(c6("TERM_PROGRAM_VERSION"))!==null)return pJ;return E8;case"HyperTerm":case"MacTerm":return E8;case"Apple_Terminal":return pJ}if(c6("COLORTERM")==="truecolor"||c6("COLORTERM")==="24bit")return E8;if(c6("TERM")){if(/truecolor/.exec(c6("TERM"))!==null)return E8;if(/^xterm-256/.exec(c6("TERM"))!==null)return pJ;let J=c6("TERM").toLowerCase();if(Yq[J])return Yq[J];if(fu.some((W)=>W.exec(J)!==null))return G0}if(c6("COLORTERM"))return G0;return b$}function UG(J,W){return jH.indexOf(W)<=jH.indexOf(J)}var vH,C$=(J)=>globalThis.process?.env||globalThis.Deno?.env.toObject()||globalThis.__env__||(J?vH:globalThis),C6,k$,TW,FG=()=>k$==="dev"||k$==="development",UX=()=>k$==="test"||gu(C6.TEST),jD,b$=1,G0=4,pJ=8,E8=24,Yq,mu,fu,x4,jH,yu,xu=(J,W,X)=>{let G=new Date().toISOString();if(X)return`${x4.dim}${G}${x4.reset} ${yu[J]}${J.toUpperCase()}${x4.reset} ${x4.bright}[Better Auth]:${x4.reset} ${W}`;return`${G} ${J.toUpperCase()} [Better Auth]: ${W}`},QG=(J)=>{let W=J?.disabled!==!0,X=J?.level??"error",G=J?.disableColors!==void 0?!J.disableColors:_H()!==1,Y=($,K,w=[])=>{if(!W||!UG(X,$))return;let H=xu($,K,G);if(!J||typeof J.log!=="function"){if($==="error")console.error(H,...w);else if($==="warn")console.warn(H,...w);else console.log(H,...w);return}J.log($==="success"?"info":$,K,...w)};return{...Object.fromEntries(jH.map(($)=>[$,(...[K,...w])=>Y($,K,w)])),get level(){return X}}},w6;var SD=M(()=>{vH=Object.create(null),C6=new Proxy(vH,{get(J,W){return C$()[W]??vH[W]},has(J,W){return W in C$()||W in vH},set(J,W,X){let G=C$(!0);return G[W]=X,!0},deleteProperty(J,W){if(!W)return!1;let X=C$(!0);return delete X[W],!0},ownKeys(){let J=C$(!0);return Object.keys(J)}});k$=typeof process<"u"&&process.env&&"production"||"",TW=k$==="production";jD=Object.freeze({get BETTER_AUTH_SECRET(){return c6("BETTER_AUTH_SECRET")},get AUTH_SECRET(){return c6("AUTH_SECRET")},get BETTER_AUTH_TELEMETRY(){return c6("BETTER_AUTH_TELEMETRY")},get BETTER_AUTH_TELEMETRY_ID(){return c6("BETTER_AUTH_TELEMETRY_ID")},get NODE_ENV(){return c6("NODE_ENV","development")},get PACKAGE_VERSION(){return c6("PACKAGE_VERSION","0.0.0")},get BETTER_AUTH_TELEMETRY_ENDPOINT(){return c6("BETTER_AUTH_TELEMETRY_ENDPOINT","https://telemetry.better-auth.com/v1/track")}}),Yq={eterm:G0,cons25:G0,console:G0,cygwin:G0,dtterm:G0,gnome:G0,hurd:G0,jfbterm:G0,konsole:G0,kterm:G0,mlterm:G0,mosh:E8,putty:G0,st:G0,"rxvt-unicode-24bit":E8,terminator:E8,"xterm-kitty":E8},mu=new Map(Object.entries({APPVEYOR:pJ,BUILDKITE:pJ,CIRCLECI:E8,DRONE:pJ,GITEA_ACTIONS:E8,GITHUB_ACTIONS:E8,GITLAB_CI:pJ,TRAVIS:pJ})),fu=[/ansi/,/color/,/linux/,/direct/,/^con[0-9]*x[0-9]/,/^rxvt/,/^screen/,/^xterm/,/^vt100/,/^vt220/];x4={reset:"\x1B[0m",bright:"\x1B[1m",dim:"\x1B[2m",undim:"\x1B[22m",underscore:"\x1B[4m",blink:"\x1B[5m",reverse:"\x1B[7m",hidden:"\x1B[8m",fg:{black:"\x1B[30m",red:"\x1B[31m",green:"\x1B[32m",yellow:"\x1B[33m",blue:"\x1B[34m",magenta:"\x1B[35m",cyan:"\x1B[36m",white:"\x1B[37m"},bg:{black:"\x1B[40m",red:"\x1B[41m",green:"\x1B[42m",yellow:"\x1B[43m",blue:"\x1B[44m",magenta:"\x1B[45m",cyan:"\x1B[46m",white:"\x1B[47m"}},jH=["info","success","warn","error","debug"];yu={info:x4.fg.blue,success:x4.fg.green,warn:x4.fg.yellow,error:x4.fg.red,debug:x4.fg.magenta},w6=QG()});var $8=M(()=>{SD()});function l6(J){function W(X,G){if(typeof G==="string"){if(/^\d{4}-\d{2}-\d{2}T\d{2}:\d{2}:\d{2}(?:\.\d+)?Z$/.test(G)){let Y=new Date(G);if(!isNaN(Y.getTime()))return Y}}return G}try{if(typeof J!=="string")return J;return JSON.parse(J,W)}catch(X){return w6.error("Error parsing JSON",{error:X}),null}}var I8=M(()=>{$8()});function lu(J,W,X){if(oX(J),X===void 0)X=new Uint8Array(J.outputLen);return BY(J,X,W)}function pu(J,W,X,G=32){oX(J),x0(G,"length");let Y=J.outputLen;if(G>255*Y)throw Error("Length must be <= 255*HashLen");let $=Math.ceil(G/Y);if(X===void 0)X=Gq;else MW(X,void 0,"info");let K=new Uint8Array($*Y),w=BY.create(J,W),H=w._cloneInto(),z=new Uint8Array(w.outputLen);for(let N=0;N<$;N++)_D[0]=N+1,H.update(N===0?Gq:z).update(X).update(_D).digestInto(z),K.set(z,Y*N),w._cloneInto(H);return w.destroy(),H.destroy(),u0(z,_D),K.slice(0,G)}var _D,Gq,TD=(J,W,X,G,Y)=>pu(J,lu(J,W,X),G,Y);var $q=M(()=>{WU();eW();_D=Uint8Array.of(0),Gq=Uint8Array.of()});function $0(...J){let W=J.reduce((Y,{length:$})=>Y+$,0),X=new Uint8Array(W),G=0;for(let Y of J)X.set(Y,G),G+=Y.length;return X}function qD(J,W,X){if(W<0||W>=4294967296)throw RangeError(`value must be >= 0 and <= 4294967295. Received ${W}`);J.set([W>>>24,W>>>16,W>>>8,W&255],X)}function TH(J){let W=Math.floor(J/4294967296),X=J%4294967296,G=new Uint8Array(8);return qD(G,W,0),qD(G,X,4),G}function qH(J){let W=new Uint8Array(4);return qD(W,J),W}var s6,k4;var P0=M(()=>{s6=new TextEncoder,k4=new TextDecoder});function Kq(J){if(Uint8Array.prototype.toBase64)return J.toBase64();let W=32768,X=[];for(let G=0;G<J.length;G+=W)X.push(String.fromCharCode.apply(null,J.subarray(G,G+W)));return btoa(X.join(""))}function wq(J){if(Uint8Array.fromBase64)return Uint8Array.fromBase64(J);let W=atob(J),X=new Uint8Array(W.length);for(let G=0;G<W.length;G++)X[G]=W.charCodeAt(G);return X}var h$={};N0(h$,{encode:()=>S4,decode:()=>L4});function L4(J){if(Uint8Array.fromBase64)return Uint8Array.fromBase64(typeof J==="string"?J:k4.decode(J),{alphabet:"base64url"});let W=J;if(W instanceof Uint8Array)W=k4.decode(W);W=W.replace(/-/g,"+").replace(/_/g,"/").replace(/\s/g,"");try{return wq(W)}catch{throw TypeError("The input to be decoded is not correctly encoded.")}}function S4(J){let W=J;if(typeof W==="string")W=s6.encode(W);if(Uint8Array.prototype.toBase64)return W.toBase64({alphabet:"base64url",omitPadding:!0});return Kq(W).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}var I0=M(()=>{P0()});var K0,R0,ZG,LG,M6,g$,W6,F4,d0,BD,BH,m$,AD,ED,ID;var x6=M(()=>{K0=class K0 extends Error{static code="ERR_JOSE_GENERIC";code="ERR_JOSE_GENERIC";constructor(J,W){super(J,W);this.name=this.constructor.name,Error.captureStackTrace?.(this,this.constructor)}};R0=class R0 extends K0{static code="ERR_JWT_CLAIM_VALIDATION_FAILED";code="ERR_JWT_CLAIM_VALIDATION_FAILED";claim;reason;payload;constructor(J,W,X="unspecified",G="unspecified"){super(J,{cause:{claim:X,reason:G,payload:W}});this.claim=X,this.reason=G,this.payload=W}};ZG=class ZG extends K0{static code="ERR_JWT_EXPIRED";code="ERR_JWT_EXPIRED";claim;reason;payload;constructor(J,W,X="unspecified",G="unspecified"){super(J,{cause:{claim:X,reason:G,payload:W}});this.claim=X,this.reason=G,this.payload=W}};LG=class LG extends K0{static code="ERR_JOSE_ALG_NOT_ALLOWED";code="ERR_JOSE_ALG_NOT_ALLOWED"};M6=class M6 extends K0{static code="ERR_JOSE_NOT_SUPPORTED";code="ERR_JOSE_NOT_SUPPORTED"};g$=class g$ extends K0{static code="ERR_JWE_DECRYPTION_FAILED";code="ERR_JWE_DECRYPTION_FAILED";constructor(J="decryption operation failed",W){super(J,W)}};W6=class W6 extends K0{static code="ERR_JWE_INVALID";code="ERR_JWE_INVALID"};F4=class F4 extends K0{static code="ERR_JWS_INVALID";code="ERR_JWS_INVALID"};d0=class d0 extends K0{static code="ERR_JWT_INVALID";code="ERR_JWT_INVALID"};BD=class BD extends K0{static code="ERR_JWK_INVALID";code="ERR_JWK_INVALID"};BH=class BH extends K0{static code="ERR_JWKS_INVALID";code="ERR_JWKS_INVALID"};m$=class m$ extends K0{static code="ERR_JWKS_NO_MATCHING_KEY";code="ERR_JWKS_NO_MATCHING_KEY";constructor(J="no applicable key found in the JSON Web Key Set",W){super(J,W)}};AD=class AD extends K0{[Symbol.asyncIterator];static code="ERR_JWKS_MULTIPLE_MATCHING_KEYS";code="ERR_JWKS_MULTIPLE_MATCHING_KEYS";constructor(J="multiple matching keys found in the JSON Web Key Set",W){super(J,W)}};ED=class ED extends K0{static code="ERR_JWKS_TIMEOUT";code="ERR_JWKS_TIMEOUT";constructor(J="request timed out",W){super(J,W)}};ID=class ID extends K0{static code="ERR_JWS_SIGNATURE_VERIFICATION_FAILED";code="ERR_JWS_SIGNATURE_VERIFICATION_FAILED";constructor(J="signature verification failed",W){super(J,W)}}});function RD(J){switch(J){case"A128GCM":case"A128GCMKW":case"A192GCM":case"A192GCMKW":case"A256GCM":case"A256GCMKW":return 96;case"A128CBC-HS256":case"A192CBC-HS384":case"A256CBC-HS512":return 128;default:throw new M6(`Unsupported JWE Algorithm: ${J}`)}}var Hq=(J)=>crypto.getRandomValues(new Uint8Array(RD(J)>>3));var CD=M(()=>{x6()});var AH=(J,W)=>{if(W.length<<3!==RD(J))throw new W6("Invalid Initialization Vector length")};var bD=M(()=>{x6();CD()});var VG=(J,W)=>{let X=J.byteLength<<3;if(X!==W)throw new W6(`Invalid Content Encryption Key length. Expected ${W} bits, got ${X} bits`)};var kD=M(()=>{x6()});function w0(J,W="algorithm.name"){return TypeError(`CryptoKey does not support this operation, its ${W} must be ${J}`)}function dJ(J,W){return J.name===W}function EH(J){return parseInt(J.name.slice(4),10)}function ru(J){switch(J){case"ES256":return"P-256";case"ES384":return"P-384";case"ES512":return"P-521";default:throw Error("unreachable")}}function zq(J,W){if(W&&!J.usages.includes(W))throw TypeError(`CryptoKey does not support this operation, its usages must include ${W}.`)}function Nq(J,W,X){switch(W){case"HS256":case"HS384":case"HS512":{if(!dJ(J.algorithm,"HMAC"))throw w0("HMAC");let G=parseInt(W.slice(2),10);if(EH(J.algorithm.hash)!==G)throw w0(`SHA-${G}`,"algorithm.hash");break}case"RS256":case"RS384":case"RS512":{if(!dJ(J.algorithm,"RSASSA-PKCS1-v1_5"))throw w0("RSASSA-PKCS1-v1_5");let G=parseInt(W.slice(2),10);if(EH(J.algorithm.hash)!==G)throw w0(`SHA-${G}`,"algorithm.hash");break}case"PS256":case"PS384":case"PS512":{if(!dJ(J.algorithm,"RSA-PSS"))throw w0("RSA-PSS");let G=parseInt(W.slice(2),10);if(EH(J.algorithm.hash)!==G)throw w0(`SHA-${G}`,"algorithm.hash");break}case"Ed25519":case"EdDSA":{if(!dJ(J.algorithm,"Ed25519"))throw w0("Ed25519");break}case"ML-DSA-44":case"ML-DSA-65":case"ML-DSA-87":{if(!dJ(J.algorithm,W))throw w0(W);break}case"ES256":case"ES384":case"ES512":{if(!dJ(J.algorithm,"ECDSA"))throw w0("ECDSA");let G=ru(W);if(J.algorithm.namedCurve!==G)throw w0(G,"algorithm.namedCurve");break}default:throw TypeError("CryptoKey does not support this operation")}zq(J,X)}function K8(J,W,X){switch(W){case"A128GCM":case"A192GCM":case"A256GCM":{if(!dJ(J.algorithm,"AES-GCM"))throw w0("AES-GCM");let G=parseInt(W.slice(1,4),10);if(J.algorithm.length!==G)throw w0(G,"algorithm.length");break}case"A128KW":case"A192KW":case"A256KW":{if(!dJ(J.algorithm,"AES-KW"))throw w0("AES-KW");let G=parseInt(W.slice(1,4),10);if(J.algorithm.length!==G)throw w0(G,"algorithm.length");break}case"ECDH":{switch(J.algorithm.name){case"ECDH":case"X25519":break;default:throw w0("ECDH or X25519")}break}case"PBES2-HS256+A128KW":case"PBES2-HS384+A192KW":case"PBES2-HS512+A256KW":if(!dJ(J.algorithm,"PBKDF2"))throw w0("PBKDF2");break;case"RSA-OAEP":case"RSA-OAEP-256":case"RSA-OAEP-384":case"RSA-OAEP-512":{if(!dJ(J.algorithm,"RSA-OAEP"))throw w0("RSA-OAEP");let G=parseInt(W.slice(9),10)||1;if(EH(J.algorithm.hash)!==G)throw w0(`SHA-${G}`,"algorithm.hash");break}default:throw TypeError("CryptoKey does not support this operation")}zq(J,X)}function Fq(J,W,...X){if(X=X.filter(Boolean),X.length>2){let G=X.pop();J+=`one of type ${X.join(", ")}, or ${G}.`}else if(X.length===2)J+=`one of type ${X[0]} or ${X[1]}.`;else J+=`of type ${X[0]}.`;if(W==null)J+=` Received ${W}`;else if(typeof W==="function"&&W.name)J+=` Received function ${W.name}`;else if(typeof W==="object"&&W!=null){if(W.constructor?.name)J+=` Received an instance of ${W.constructor.name}`}return J}function hD(J,W,...X){return Fq(`Key for the ${J} algorithm must be `,W,...X)}var u8=(J,...W)=>{return Fq("Key must be ",J,...W)};function Q1(J){if(!rJ(J))throw Error("CryptoKey instance expected")}function rJ(J){return J?.[Symbol.toStringTag]==="CryptoKey"}function f$(J){return J?.[Symbol.toStringTag]==="KeyObject"}var y$=(J)=>{return rJ(J)||f$(J)};async function nu(J,W){if(!(J instanceof Uint8Array))throw TypeError("First argument must be a buffer");if(!(W instanceof Uint8Array))throw TypeError("Second argument must be a buffer");let X={name:"HMAC",hash:"SHA-256"},G=await crypto.subtle.generateKey(X,!1,["sign"]),Y=new Uint8Array(await crypto.subtle.sign(X,G,J)),$=new Uint8Array(await crypto.subtle.sign(X,G,W)),K=0,w=-1;while(++w<32)K|=Y[w]^$[w];return K===0}async function iu(J,W,X,G,Y,$){if(!(W instanceof Uint8Array))throw TypeError(u8(W,"Uint8Array"));let K=parseInt(J.slice(1,4),10),w=await crypto.subtle.importKey("raw",W.subarray(K>>3),"AES-CBC",!1,["decrypt"]),H=await crypto.subtle.importKey("raw",W.subarray(0,K>>3),{hash:`SHA-${K<<1}`,name:"HMAC"},!1,["sign"]),z=$0($,G,X,TH($.length<<3)),N=new Uint8Array((await crypto.subtle.sign("HMAC",H,z)).slice(0,K>>3)),U;try{U=await nu(Y,N)}catch{}if(!U)throw new g$;let F;try{F=new Uint8Array(await crypto.subtle.decrypt({iv:G,name:"AES-CBC"},w,X))}catch{}if(!F)throw new g$;return F}async function au(J,W,X,G,Y,$){let K;if(W instanceof Uint8Array)K=await crypto.subtle.importKey("raw",W,"AES-GCM",!1,["decrypt"]);else K8(W,J,"decrypt"),K=W;try{return new Uint8Array(await crypto.subtle.decrypt({additionalData:$,iv:G,name:"AES-GCM",tagLength:128},K,$0(X,Y)))}catch{throw new g$}}var IH=async(J,W,X,G,Y,$)=>{if(!rJ(W)&&!(W instanceof Uint8Array))throw TypeError(u8(W,"CryptoKey","KeyObject","Uint8Array","JSON Web Key"));if(!G)throw new W6("JWE Initialization Vector missing");if(!Y)throw new W6("JWE Authentication Tag missing");switch(AH(J,G),J){case"A128CBC-HS256":case"A192CBC-HS384":case"A256CBC-HS512":if(W instanceof Uint8Array)VG(W,parseInt(J.slice(-3),10));return iu(J,W,X,G,Y,$);case"A128GCM":case"A192GCM":case"A256GCM":if(W instanceof Uint8Array)VG(W,parseInt(J.slice(1,4),10));return au(J,W,X,G,Y,$);default:throw new M6("Unsupported JWE Content Encryption Algorithm")}};var gD=M(()=>{P0();bD();kD();x6()});var QX=(...J)=>{let W=J.filter(Boolean);if(W.length===0||W.length===1)return!0;let X;for(let G of W){let Y=Object.keys(G);if(!X||X.size===0){X=new Set(Y);continue}for(let $ of Y){if(X.has($))return!1;X.add($)}}return!0};function tu(J){return typeof J==="object"&&J!==null}var P4=(J)=>{if(!tu(J)||Object.prototype.toString.call(J)!=="[object Object]")return!1;if(Object.getPrototypeOf(J)===null)return!0;let W=J;while(Object.getPrototypeOf(W)!==null)W=Object.getPrototypeOf(W);return Object.getPrototypeOf(J)===W};function Uq(J,W){if(J.algorithm.length!==parseInt(W.slice(1,4),10))throw TypeError(`Invalid key size for alg: ${W}`)}function Qq(J,W,X){if(J instanceof Uint8Array)return crypto.subtle.importKey("raw",J,"AES-KW",!0,[X]);return K8(J,W,X),J}async function x$(J,W,X){let G=await Qq(W,J,"wrapKey");Uq(G,J);let Y=await crypto.subtle.importKey("raw",X,{hash:"SHA-256",name:"HMAC"},!0,["sign"]);return new Uint8Array(await crypto.subtle.wrapKey("raw",Y,G,"AES-KW"))}async function u$(J,W,X){let G=await Qq(W,J,"unwrapKey");Uq(G,J);let Y=await crypto.subtle.unwrapKey("raw",X,G,"AES-KW",{hash:"SHA-256",name:"HMAC"},!0,["sign"]);return new Uint8Array(await crypto.subtle.exportKey("raw",Y))}var RH=()=>{};var CH=async(J,W)=>{let X=`SHA-${J.slice(-3)}`;return new Uint8Array(await crypto.subtle.digest(X,W))};function fD(J){return $0(qH(J.length),J)}async function ou(J,W,X){let G=W>>3,Y=32,$=Math.ceil(G/32),K=new Uint8Array($*32);for(let w=1;w<=$;w++){let H=new Uint8Array(4+J.length+X.length);H.set(qH(w),0),H.set(J,4),H.set(X,4+J.length);let z=await CH("sha256",H);K.set(z,(w-1)*32)}return K.slice(0,G)}async function bH(J,W,X,G,Y=new Uint8Array(0),$=new Uint8Array(0)){K8(J,"ECDH"),K8(W,"ECDH","deriveBits");let K=fD(s6.encode(X)),w=fD(Y),H=fD($),z=qH(G),N=new Uint8Array(0),U=$0(K,w,H,z,N),F=new Uint8Array(await crypto.subtle.deriveBits({name:J.algorithm.name,public:J},W,su(J)));return ou(F,G,U)}function su(J){if(J.algorithm.name==="X25519")return 256;return Math.ceil(parseInt(J.algorithm.namedCurve.slice(-3),10)/8)<<3}function kH(J){switch(J.algorithm.namedCurve){case"P-256":case"P-384":case"P-521":return!0;default:return J.algorithm.name==="X25519"}}var yD=M(()=>{P0()});function eu(J,W){if(J instanceof Uint8Array)return crypto.subtle.importKey("raw",J,"PBKDF2",!1,["deriveBits"]);return K8(J,W,"deriveBits"),J}async function Lq(J,W,X,G){if(!(J instanceof Uint8Array)||J.length<8)throw new W6("PBES2 Salt Input must be 8 or more octets");let Y=Jc(W,J),$=parseInt(W.slice(13,16),10),K={hash:`SHA-${W.slice(8,11)}`,iterations:X,name:"PBKDF2",salt:Y},w=await eu(G,W);return new Uint8Array(await crypto.subtle.deriveBits(K,w,$))}async function Vq(J,W,X,G=2048,Y=crypto.getRandomValues(new Uint8Array(16))){let $=await Lq(Y,J,G,W);return{encryptedKey:await x$(J.slice(-6),$,X),p2c:G,p2s:S4(Y)}}async function Dq(J,W,X,G,Y){let $=await Lq(Y,J,G,W);return u$(J.slice(-6),$,X)}var Jc=(J,W)=>$0(s6.encode(J),new Uint8Array([0]),W);var xD=M(()=>{I0();RH();P0();x6()});var Z1=(J,W)=>{if(J.startsWith("RS")||J.startsWith("PS")){let{modulusLength:X}=W.algorithm;if(typeof X!=="number"||X<2048)throw TypeError(`${J} requires key modulusLength to be 2048 bits or larger`)}};async function Pq(J,W,X){return K8(W,J,"encrypt"),Z1(J,W),new Uint8Array(await crypto.subtle.encrypt(Oq(J),W,X))}async function vq(J,W,X){return K8(W,J,"decrypt"),Z1(J,W),new Uint8Array(await crypto.subtle.decrypt(Oq(J),W,X))}var Oq=(J)=>{switch(J){case"RSA-OAEP":case"RSA-OAEP-256":case"RSA-OAEP-384":case"RSA-OAEP-512":return"RSA-OAEP";default:throw new M6(`alg ${J} is not supported either by JOSE or your javascript runtime`)}};var uD=M(()=>{x6()});function c$(J){switch(J){case"A128GCM":return 128;case"A192GCM":return 192;case"A256GCM":case"A128CBC-HS256":return 256;case"A192CBC-HS384":return 384;case"A256CBC-HS512":return 512;default:throw new M6(`Unsupported JWE Algorithm: ${J}`)}}var ZX=(J)=>crypto.getRandomValues(new Uint8Array(c$(J)>>3));var hH=M(()=>{x6()});function Wc(J){let W,X;switch(J.kty){case"AKP":{switch(J.alg){case"ML-DSA-44":case"ML-DSA-65":case"ML-DSA-87":W={name:J.alg},X=J.priv?["sign"]:["verify"];break;default:throw new M6('Invalid or unsupported JWK "alg" (Algorithm) Parameter value')}break}case"RSA":{switch(J.alg){case"PS256":case"PS384":case"PS512":W={name:"RSA-PSS",hash:`SHA-${J.alg.slice(-3)}`},X=J.d?["sign"]:["verify"];break;case"RS256":case"RS384":case"RS512":W={name:"RSASSA-PKCS1-v1_5",hash:`SHA-${J.alg.slice(-3)}`},X=J.d?["sign"]:["verify"];break;case"RSA-OAEP":case"RSA-OAEP-256":case"RSA-OAEP-384":case"RSA-OAEP-512":W={name:"RSA-OAEP",hash:`SHA-${parseInt(J.alg.slice(-3),10)||1}`},X=J.d?["decrypt","unwrapKey"]:["encrypt","wrapKey"];break;default:throw new M6('Invalid or unsupported JWK "alg" (Algorithm) Parameter value')}break}case"EC":{switch(J.alg){case"ES256":W={name:"ECDSA",namedCurve:"P-256"},X=J.d?["sign"]:["verify"];break;case"ES384":W={name:"ECDSA",namedCurve:"P-384"},X=J.d?["sign"]:["verify"];break;case"ES512":W={name:"ECDSA",namedCurve:"P-521"},X=J.d?["sign"]:["verify"];break;case"ECDH-ES":case"ECDH-ES+A128KW":case"ECDH-ES+A192KW":case"ECDH-ES+A256KW":W={name:"ECDH",namedCurve:J.crv},X=J.d?["deriveBits"]:[];break;default:throw new M6('Invalid or unsupported JWK "alg" (Algorithm) Parameter value')}break}case"OKP":{switch(J.alg){case"Ed25519":case"EdDSA":W={name:"Ed25519"},X=J.d?["sign"]:["verify"];break;case"ECDH-ES":case"ECDH-ES+A128KW":case"ECDH-ES+A192KW":case"ECDH-ES+A256KW":W={name:J.crv},X=J.d?["deriveBits"]:[];break;default:throw new M6('Invalid or unsupported JWK "alg" (Algorithm) Parameter value')}break}default:throw new M6('Invalid or unsupported JWK "kty" (Key Type) Parameter value')}return{algorithm:W,keyUsages:X}}var DG=async(J)=>{if(!J.alg)throw TypeError('"alg" argument is required when "jwk.alg" is not present');let{algorithm:W,keyUsages:X}=Wc(J),G={...J};if(G.kty!=="AKP")delete G.alg;return delete G.use,crypto.subtle.importKey("jwk",G,W,J.ext??(J.d||J.priv?!1:!0),J.key_ops??X)};var cD=M(()=>{x6()});async function VJ(J,W,X){if(!P4(J))throw TypeError("JWK must be an object");let G;switch(W??=J.alg,G??=X?.extractable??J.ext,J.kty){case"oct":if(typeof J.k!=="string"||!J.k)throw TypeError('missing "k" (Key Value) Parameter value');return L4(J.k);case"RSA":if("oth"in J&&J.oth!==void 0)throw new M6('RSA JWK "oth" (Other Primes Info) Parameter value is not supported');return DG({...J,alg:W,ext:G});case"AKP":{if(typeof J.alg!=="string"||!J.alg)throw TypeError('missing "alg" (Algorithm) Parameter value');if(W!==void 0&&W!==J.alg)throw TypeError("JWK alg and alg option value mismatch");return DG({...J,ext:G})}case"EC":case"OKP":return DG({...J,alg:W,ext:G});default:throw new M6('Unsupported "kty" (Key Type) Parameter value')}}var gH=M(()=>{I0();cD();x6()});async function Xc(J,W,X,G,Y){if(!(X instanceof Uint8Array))throw TypeError(u8(X,"Uint8Array"));let $=parseInt(J.slice(1,4),10),K=await crypto.subtle.importKey("raw",X.subarray($>>3),"AES-CBC",!1,["encrypt"]),w=await crypto.subtle.importKey("raw",X.subarray(0,$>>3),{hash:`SHA-${$<<1}`,name:"HMAC"},!1,["sign"]),H=new Uint8Array(await crypto.subtle.encrypt({iv:G,name:"AES-CBC"},K,W)),z=$0(Y,G,H,TH(Y.length<<3)),N=new Uint8Array((await crypto.subtle.sign("HMAC",w,z)).slice(0,$>>3));return{ciphertext:H,tag:N,iv:G}}async function Yc(J,W,X,G,Y){let $;if(X instanceof Uint8Array)$=await crypto.subtle.importKey("raw",X,"AES-GCM",!1,["encrypt"]);else K8(X,J,"encrypt"),$=X;let K=new Uint8Array(await crypto.subtle.encrypt({additionalData:Y,iv:G,name:"AES-GCM",tagLength:128},$,W)),w=K.slice(-16);return{ciphertext:K.slice(0,-16),tag:w,iv:G}}var mH=async(J,W,X,G,Y)=>{if(!rJ(X)&&!(X instanceof Uint8Array))throw TypeError(u8(X,"CryptoKey","KeyObject","Uint8Array","JSON Web Key"));if(G)AH(J,G);else G=Hq(J);switch(J){case"A128CBC-HS256":case"A192CBC-HS384":case"A256CBC-HS512":if(X instanceof Uint8Array)VG(X,parseInt(J.slice(-3),10));return Xc(J,W,X,G,Y);case"A128GCM":case"A192GCM":case"A256GCM":if(X instanceof Uint8Array)VG(X,parseInt(J.slice(1,4),10));return Yc(J,W,X,G,Y);default:throw new M6("Unsupported JWE Content Encryption Algorithm")}};var lD=M(()=>{P0();bD();kD();CD();x6()});async function Sq(J,W,X,G){let Y=J.slice(0,7),$=await mH(Y,X,W,G,new Uint8Array(0));return{encryptedKey:$.ciphertext,iv:S4($.iv),tag:S4($.tag)}}async function _q(J,W,X,G,Y){let $=J.slice(0,7);return IH($,W,X,G,Y,new Uint8Array(0))}var pD=M(()=>{lD();gD();I0()});var Tq=async(J,W,X,G,Y)=>{switch(J){case"dir":{if(X!==void 0)throw new W6("Encountered unexpected JWE Encrypted Key");return W}case"ECDH-ES":if(X!==void 0)throw new W6("Encountered unexpected JWE Encrypted Key");case"ECDH-ES+A128KW":case"ECDH-ES+A192KW":case"ECDH-ES+A256KW":{if(!P4(G.epk))throw new W6('JOSE Header "epk" (Ephemeral Public Key) missing or invalid');if(Q1(W),!kH(W))throw new M6("ECDH with the provided key is not allowed or not supported by your javascript runtime");let $=await VJ(G.epk,J);Q1($);let K,w;if(G.apu!==void 0){if(typeof G.apu!=="string")throw new W6('JOSE Header "apu" (Agreement PartyUInfo) invalid');try{K=L4(G.apu)}catch{throw new W6("Failed to base64url decode the apu")}}if(G.apv!==void 0){if(typeof G.apv!=="string")throw new W6('JOSE Header "apv" (Agreement PartyVInfo) invalid');try{w=L4(G.apv)}catch{throw new W6("Failed to base64url decode the apv")}}let H=await bH($,W,J==="ECDH-ES"?G.enc:J,J==="ECDH-ES"?c$(G.enc):parseInt(J.slice(-5,-2),10),K,w);if(J==="ECDH-ES")return H;if(X===void 0)throw new W6("JWE Encrypted Key missing");return u$(J.slice(-6),H,X)}case"RSA-OAEP":case"RSA-OAEP-256":case"RSA-OAEP-384":case"RSA-OAEP-512":{if(X===void 0)throw new W6("JWE Encrypted Key missing");return Q1(W),vq(J,W,X)}case"PBES2-HS256+A128KW":case"PBES2-HS384+A192KW":case"PBES2-HS512+A256KW":{if(X===void 0)throw new W6("JWE Encrypted Key missing");if(typeof G.p2c!=="number")throw new W6('JOSE Header "p2c" (PBES2 Count) missing or invalid');let $=Y?.maxPBES2Count||1e4;if(G.p2c>$)throw new W6('JOSE Header "p2c" (PBES2 Count) out is of acceptable bounds');if(typeof G.p2s!=="string")throw new W6('JOSE Header "p2s" (PBES2 Salt) missing or invalid');let K;try{K=L4(G.p2s)}catch{throw new W6("Failed to base64url decode the p2s")}return Dq(J,W,X,G.p2c,K)}case"A128KW":case"A192KW":case"A256KW":{if(X===void 0)throw new W6("JWE Encrypted Key missing");return u$(J,W,X)}case"A128GCMKW":case"A192GCMKW":case"A256GCMKW":{if(X===void 0)throw new W6("JWE Encrypted Key missing");if(typeof G.iv!=="string")throw new W6('JOSE Header "iv" (Initialization Vector) missing or invalid');if(typeof G.tag!=="string")throw new W6('JOSE Header "tag" (Authentication Tag) missing or invalid');let $;try{$=L4(G.iv)}catch{throw new W6("Failed to base64url decode the iv")}let K;try{K=L4(G.tag)}catch{throw new W6("Failed to base64url decode the tag")}return _q(J,W,X,$,K)}default:throw new M6('Invalid or unsupported "alg" (JWE Algorithm) header value')}};var qq=M(()=>{RH();yD();xD();uD();I0();x6();hH();gH();pD()});var LX=(J,W,X,G,Y)=>{if(Y.crit!==void 0&&G?.crit===void 0)throw new J('"crit" (Critical) Header Parameter MUST be integrity protected');if(!G||G.crit===void 0)return new Set;if(!Array.isArray(G.crit)||G.crit.length===0||G.crit.some((K)=>typeof K!=="string"||K.length===0))throw new J('"crit" (Critical) Header Parameter MUST be an array of non-empty strings when present');let $;if(X!==void 0)$=new Map([...Object.entries(X),...W.entries()]);else $=W;for(let K of G.crit){if(!$.has(K))throw new M6(`Extension Header Parameter "${K}" is not recognized`);if(Y[K]===void 0)throw new J(`Extension Header Parameter "${K}" is missing`);if($.get(K)&&G[K]===void 0)throw new J(`Extension Header Parameter "${K}" MUST be integrity protected`)}return new Set(G.crit)};var l$=M(()=>{x6()});var p$=(J,W)=>{if(W!==void 0&&(!Array.isArray(W)||W.some((X)=>typeof X!=="string")))throw TypeError(`"${J}" option must be an array of strings`);if(!W)return;return new Set(W)};function L1(J){return P4(J)&&typeof J.kty==="string"}function Bq(J){return J.kty!=="oct"&&(J.kty==="AKP"&&typeof J.priv==="string"||typeof J.d==="string")}function Aq(J){return J.kty!=="oct"&&typeof J.d>"u"&&typeof J.priv>"u"}function Eq(J){return J.kty==="oct"&&typeof J.k==="string"}var fH=()=>{};var MG,Iq=async(J,W,X,G=!1)=>{MG||=new WeakMap;let Y=MG.get(J);if(Y?.[X])return Y[X];let $=await DG({...W,alg:X});if(G)Object.freeze(J);if(!Y)MG.set(J,{[X]:$});else Y[X]=$;return $},$c=(J,W)=>{MG||=new WeakMap;let X=MG.get(J);if(X?.[W])return X[W];let G=J.type==="public",Y=G?!0:!1,$;if(J.asymmetricKeyType==="x25519"){switch(W){case"ECDH-ES":case"ECDH-ES+A128KW":case"ECDH-ES+A192KW":case"ECDH-ES+A256KW":break;default:throw TypeError("given KeyObject instance cannot be used for this algorithm")}$=J.toCryptoKey(J.asymmetricKeyType,Y,G?[]:["deriveBits"])}if(J.asymmetricKeyType==="ed25519"){if(W!=="EdDSA"&&W!=="Ed25519")throw TypeError("given KeyObject instance cannot be used for this algorithm");$=J.toCryptoKey(J.asymmetricKeyType,Y,[G?"verify":"sign"])}switch(J.asymmetricKeyType){case"ml-dsa-44":case"ml-dsa-65":case"ml-dsa-87":{if(W!==J.asymmetricKeyType.toUpperCase())throw TypeError("given KeyObject instance cannot be used for this algorithm");$=J.toCryptoKey(J.asymmetricKeyType,Y,[G?"verify":"sign"])}}if(J.asymmetricKeyType==="rsa"){let K;switch(W){case"RSA-OAEP":K="SHA-1";break;case"RS256":case"PS256":case"RSA-OAEP-256":K="SHA-256";break;case"RS384":case"PS384":case"RSA-OAEP-384":K="SHA-384";break;case"RS512":case"PS512":case"RSA-OAEP-512":K="SHA-512";break;default:throw TypeError("given KeyObject instance cannot be used for this algorithm")}if(W.startsWith("RSA-OAEP"))return J.toCryptoKey({name:"RSA-OAEP",hash:K},Y,G?["encrypt"]:["decrypt"]);$=J.toCryptoKey({name:W.startsWith("PS")?"RSA-PSS":"RSASSA-PKCS1-v1_5",hash:K},Y,[G?"verify":"sign"])}if(J.asymmetricKeyType==="ec"){let w=new Map([["prime256v1","P-256"],["secp384r1","P-384"],["secp521r1","P-521"]]).get(J.asymmetricKeyDetails?.namedCurve);if(!w)throw TypeError("given KeyObject instance cannot be used for this algorithm");if(W==="ES256"&&w==="P-256")$=J.toCryptoKey({name:"ECDSA",namedCurve:w},Y,[G?"verify":"sign"]);if(W==="ES384"&&w==="P-384")$=J.toCryptoKey({name:"ECDSA",namedCurve:w},Y,[G?"verify":"sign"]);if(W==="ES512"&&w==="P-521")$=J.toCryptoKey({name:"ECDSA",namedCurve:w},Y,[G?"verify":"sign"]);if(W.startsWith("ECDH-ES"))$=J.toCryptoKey({name:"ECDH",namedCurve:w},Y,G?[]:["deriveBits"])}if(!$)throw TypeError("given KeyObject instance cannot be used for this algorithm");if(!X)MG.set(J,{[W]:$});else X[W]=$;return $},nJ=async(J,W)=>{if(J instanceof Uint8Array)return J;if(rJ(J))return J;if(f$(J)){if(J.type==="secret")return J.export();if("toCryptoKey"in J&&typeof J.toCryptoKey==="function")try{return $c(J,W)}catch(G){if(G instanceof TypeError)throw G}let X=J.export({format:"jwk"});return Iq(J,X,W)}if(L1(J)){if(J.k)return L4(J.k);return Iq(J,J,W,!0)}throw Error("unreachable")};var OG=M(()=>{fH();I0();cD()});var PG=(J)=>J?.[Symbol.toStringTag],dD=(J,W,X)=>{if(W.use!==void 0){let G;switch(X){case"sign":case"verify":G="sig";break;case"encrypt":case"decrypt":G="enc";break}if(W.use!==G)throw TypeError(`Invalid key for this operation, its "use" must be "${G}" when present`)}if(W.alg!==void 0&&W.alg!==J)throw TypeError(`Invalid key for this operation, its "alg" must be "${J}" when present`);if(Array.isArray(W.key_ops)){let G;switch(!0){case(X==="sign"||X==="verify"):case J==="dir":case J.includes("CBC-HS"):G=X;break;case J.startsWith("PBES2"):G="deriveBits";break;case/^A\d{3}(?:GCM)?(?:KW)?$/.test(J):if(!J.includes("GCM")&&J.endsWith("KW"))G=X==="encrypt"?"wrapKey":"unwrapKey";else G=X;break;case(X==="encrypt"&&J.startsWith("RSA")):G="wrapKey";break;case X==="decrypt":G=J.startsWith("RSA")?"unwrapKey":"deriveBits";break}if(G&&W.key_ops?.includes?.(G)===!1)throw TypeError(`Invalid key for this operation, its "key_ops" must include "${G}" when present`)}return!0},Kc=(J,W,X)=>{if(W instanceof Uint8Array)return;if(L1(W)){if(Eq(W)&&dD(J,W,X))return;throw TypeError('JSON Web Key for symmetric algorithms must have JWK "kty" (Key Type) equal to "oct" and the JWK "k" (Key Value) present')}if(!y$(W))throw TypeError(hD(J,W,"CryptoKey","KeyObject","JSON Web Key","Uint8Array"));if(W.type!=="secret")throw TypeError(`${PG(W)} instances for symmetric algorithms must be of type "secret"`)},wc=(J,W,X)=>{if(L1(W))switch(X){case"decrypt":case"sign":if(Bq(W)&&dD(J,W,X))return;throw TypeError("JSON Web Key for this operation be a private JWK");case"encrypt":case"verify":if(Aq(W)&&dD(J,W,X))return;throw TypeError("JSON Web Key for this operation be a public JWK")}if(!y$(W))throw TypeError(hD(J,W,"CryptoKey","KeyObject","JSON Web Key"));if(W.type==="secret")throw TypeError(`${PG(W)} instances for asymmetric algorithms must not be of type "secret"`);if(W.type==="public")switch(X){case"sign":throw TypeError(`${PG(W)} instances for asymmetric algorithm signing must be of type "private"`);case"decrypt":throw TypeError(`${PG(W)} instances for asymmetric algorithm decryption must be of type "private"`);default:break}if(W.type==="private")switch(X){case"verify":throw TypeError(`${PG(W)} instances for asymmetric algorithm verifying must be of type "public"`);case"encrypt":throw TypeError(`${PG(W)} instances for asymmetric algorithm encryption must be of type "public"`);default:break}},VX=(J,W,X)=>{if(J.startsWith("HS")||J==="dir"||J.startsWith("PBES2")||/^A(?:128|192|256)(?:GCM)?(?:KW)?$/.test(J)||/^A(?:128|192|256)CBC-HS(?:256|384|512)$/.test(J))Kc(J,W,X);else wc(J,W,X)};var d$=M(()=>{fH()});async function Rq(J,W,X){if(!P4(J))throw new W6("Flattened JWE must be an object");if(J.protected===void 0&&J.header===void 0&&J.unprotected===void 0)throw new W6("JOSE Header missing");if(J.iv!==void 0&&typeof J.iv!=="string")throw new W6("JWE Initialization Vector incorrect type");if(typeof J.ciphertext!=="string")throw new W6("JWE Ciphertext missing or incorrect type");if(J.tag!==void 0&&typeof J.tag!=="string")throw new W6("JWE Authentication Tag incorrect type");if(J.protected!==void 0&&typeof J.protected!=="string")throw new W6("JWE Protected Header incorrect type");if(J.encrypted_key!==void 0&&typeof J.encrypted_key!=="string")throw new W6("JWE Encrypted Key incorrect type");if(J.aad!==void 0&&typeof J.aad!=="string")throw new W6("JWE AAD incorrect type");if(J.header!==void 0&&!P4(J.header))throw new W6("JWE Shared Unprotected Header incorrect type");if(J.unprotected!==void 0&&!P4(J.unprotected))throw new W6("JWE Per-Recipient Unprotected Header incorrect type");let G;if(J.protected)try{let v=L4(J.protected);G=JSON.parse(k4.decode(v))}catch{throw new W6("JWE Protected Header is invalid")}if(!QX(G,J.header,J.unprotected))throw new W6("JWE Protected, JWE Unprotected Header, and JWE Per-Recipient Unprotected Header Parameter names must be disjoint");let Y={...G,...J.header,...J.unprotected};if(LX(W6,new Map,X?.crit,G,Y),Y.zip!==void 0)throw new M6('JWE "zip" (Compression Algorithm) Header Parameter is not supported.');let{alg:$,enc:K}=Y;if(typeof $!=="string"||!$)throw new W6("missing JWE Algorithm (alg) in JWE Header");if(typeof K!=="string"||!K)throw new W6("missing JWE Encryption Algorithm (enc) in JWE Header");let w=X&&p$("keyManagementAlgorithms",X.keyManagementAlgorithms),H=X&&p$("contentEncryptionAlgorithms",X.contentEncryptionAlgorithms);if(w&&!w.has($)||!w&&$.startsWith("PBES2"))throw new LG('"alg" (Algorithm) Header Parameter value not allowed');if(H&&!H.has(K))throw new LG('"enc" (Encryption Algorithm) Header Parameter value not allowed');let z;if(J.encrypted_key!==void 0)try{z=L4(J.encrypted_key)}catch{throw new W6("Failed to base64url decode the encrypted_key")}let N=!1;if(typeof W==="function")W=await W(G,J),N=!0;VX($==="dir"?K:$,W,"decrypt");let U=await nJ(W,$),F;try{F=await Tq($,U,z,Y,X)}catch(v){if(v instanceof TypeError||v instanceof W6||v instanceof M6)throw v;F=ZX(K)}let Z,L;if(J.iv!==void 0)try{Z=L4(J.iv)}catch{throw new W6("Failed to base64url decode the iv")}if(J.tag!==void 0)try{L=L4(J.tag)}catch{throw new W6("Failed to base64url decode the tag")}let D=s6.encode(J.protected??""),O;if(J.aad!==void 0)O=$0(D,s6.encode("."),s6.encode(J.aad));else O=D;let P;try{P=L4(J.ciphertext)}catch{throw new W6("Failed to base64url decode the ciphertext")}let T={plaintext:await IH(K,F,P,Z,L,O)};if(J.protected!==void 0)T.protectedHeader=G;if(J.aad!==void 0)try{T.additionalAuthenticatedData=L4(J.aad)}catch{throw new W6("Failed to base64url decode the aad")}if(J.unprotected!==void 0)T.sharedUnprotectedHeader=J.unprotected;if(J.header!==void 0)T.unprotectedHeader=J.header;if(N)return{...T,key:U};return T}var Cq=M(()=>{I0();gD();x6();qq();P0();hH();l$();OG();d$()});async function bq(J,W,X){if(J instanceof Uint8Array)J=k4.decode(J);if(typeof J!=="string")throw new W6("Compact JWE must be a string or Uint8Array");let{0:G,1:Y,2:$,3:K,4:w,length:H}=J.split(".");if(H!==5)throw new W6("Invalid Compact JWE");let z=await Rq({ciphertext:K,iv:$||void 0,protected:G,tag:w||void 0,encrypted_key:Y||void 0},W,X),N={plaintext:z.plaintext,protectedHeader:z.protectedHeader};if(typeof W==="function")return{...N,key:z.key};return N}var kq=M(()=>{Cq();x6();P0()});var hq;var gq=M(()=>{hq=Symbol()});async function rD(J){if(f$(J))if(J.type==="secret")J=J.export();else return J.export({format:"jwk"});if(J instanceof Uint8Array)return{kty:"oct",k:S4(J)};if(!rJ(J))throw TypeError(u8(J,"CryptoKey","KeyObject","Uint8Array"));if(!J.extractable)throw TypeError("non-extractable CryptoKey cannot be exported as a JWK");let{ext:W,key_ops:X,alg:G,use:Y,...$}=await crypto.subtle.exportKey("jwk",J);if($.kty==="AKP")$.alg=G;return $}var mq=M(()=>{I0()});async function DX(J){return rD(J)}var yH=M(()=>{mq()});var fq=async(J,W,X,G,Y={})=>{let $,K,w;switch(J){case"dir":{w=X;break}case"ECDH-ES":case"ECDH-ES+A128KW":case"ECDH-ES+A192KW":case"ECDH-ES+A256KW":{if(Q1(X),!kH(X))throw new M6("ECDH with the provided key is not allowed or not supported by your javascript runtime");let{apu:H,apv:z}=Y,N;if(Y.epk)N=await nJ(Y.epk,J);else N=(await crypto.subtle.generateKey(X.algorithm,!0,["deriveBits"])).privateKey;let{x:U,y:F,crv:Z,kty:L}=await DX(N),D=await bH(X,N,J==="ECDH-ES"?W:J,J==="ECDH-ES"?c$(W):parseInt(J.slice(-5,-2),10),H,z);if(K={epk:{x:U,crv:Z,kty:L}},L==="EC")K.epk.y=F;if(H)K.apu=S4(H);if(z)K.apv=S4(z);if(J==="ECDH-ES"){w=D;break}w=G||ZX(W);let O=J.slice(-6);$=await x$(O,D,w);break}case"RSA-OAEP":case"RSA-OAEP-256":case"RSA-OAEP-384":case"RSA-OAEP-512":{w=G||ZX(W),Q1(X),$=await Pq(J,X,w);break}case"PBES2-HS256+A128KW":case"PBES2-HS384+A192KW":case"PBES2-HS512+A256KW":{w=G||ZX(W);let{p2c:H,p2s:z}=Y;({encryptedKey:$,...K}=await Vq(J,X,w,H,z));break}case"A128KW":case"A192KW":case"A256KW":{w=G||ZX(W),$=await x$(J,X,w);break}case"A128GCMKW":case"A192GCMKW":case"A256GCMKW":{w=G||ZX(W);let{iv:H}=Y;({encryptedKey:$,...K}=await Sq(J,X,w,H));break}default:throw new M6('Invalid or unsupported "alg" (JWE Algorithm) header value')}return{cek:w,encryptedKey:$,parameters:K}};var yq=M(()=>{RH();yD();xD();uD();I0();OG();hH();x6();yH();pD()});class nD{#J;#W;#X;#Y;#G;#w;#K;#$;constructor(J){if(!(J instanceof Uint8Array))throw TypeError("plaintext must be an instance of Uint8Array");this.#J=J}setKeyManagementParameters(J){if(this.#$)throw TypeError("setKeyManagementParameters can only be called once");return this.#$=J,this}setProtectedHeader(J){if(this.#W)throw TypeError("setProtectedHeader can only be called once");return this.#W=J,this}setSharedUnprotectedHeader(J){if(this.#X)throw TypeError("setSharedUnprotectedHeader can only be called once");return this.#X=J,this}setUnprotectedHeader(J){if(this.#Y)throw TypeError("setUnprotectedHeader can only be called once");return this.#Y=J,this}setAdditionalAuthenticatedData(J){return this.#G=J,this}setContentEncryptionKey(J){if(this.#w)throw TypeError("setContentEncryptionKey can only be called once");return this.#w=J,this}setInitializationVector(J){if(this.#K)throw TypeError("setInitializationVector can only be called once");return this.#K=J,this}async encrypt(J,W){if(!this.#W&&!this.#Y&&!this.#X)throw new W6("either setProtectedHeader, setUnprotectedHeader, or sharedUnprotectedHeader must be called before #encrypt()");if(!QX(this.#W,this.#Y,this.#X))throw new W6("JWE Protected, JWE Shared Unprotected and JWE Per-Recipient Header Parameter names must be disjoint");let X={...this.#W,...this.#Y,...this.#X};if(LX(W6,new Map,W?.crit,this.#W,X),X.zip!==void 0)throw new M6('JWE "zip" (Compression Algorithm) Header Parameter is not supported.');let{alg:G,enc:Y}=X;if(typeof G!=="string"||!G)throw new W6('JWE "alg" (Algorithm) Header Parameter missing or invalid');if(typeof Y!=="string"||!Y)throw new W6('JWE "enc" (Encryption Algorithm) Header Parameter missing or invalid');let $;if(this.#w&&(G==="dir"||G==="ECDH-ES"))throw TypeError(`setContentEncryptionKey cannot be called with JWE "alg" (Algorithm) Header ${G}`);VX(G==="dir"?Y:G,J,"encrypt");let K;{let L,D=await nJ(J,G);if({cek:K,encryptedKey:$,parameters:L}=await fq(G,Y,D,this.#w,this.#$),L)if(W&&hq in W)if(!this.#Y)this.setUnprotectedHeader(L);else this.#Y={...this.#Y,...L};else if(!this.#W)this.setProtectedHeader(L);else this.#W={...this.#W,...L}}let w,H,z;if(this.#W)H=s6.encode(S4(JSON.stringify(this.#W)));else H=s6.encode("");if(this.#G)z=S4(this.#G),w=$0(H,s6.encode("."),s6.encode(z));else w=H;let{ciphertext:N,tag:U,iv:F}=await mH(Y,this.#J,K,this.#K,w),Z={ciphertext:S4(N)};if(F)Z.iv=S4(F);if(U)Z.tag=S4(U);if($)Z.encrypted_key=S4($);if(z)Z.aad=z;if(this.#W)Z.protected=k4.decode(H);if(this.#X)Z.unprotected=this.#X;if(this.#Y)Z.header=this.#Y;return Z}}var xq=M(()=>{I0();gq();lD();yq();x6();P0();l$();OG();d$()});var xH=(J,W)=>{let X=`SHA-${J.slice(-3)}`;switch(J){case"HS256":case"HS384":case"HS512":return{hash:X,name:"HMAC"};case"PS256":case"PS384":case"PS512":return{hash:X,name:"RSA-PSS",saltLength:parseInt(J.slice(-3),10)>>3};case"RS256":case"RS384":case"RS512":return{hash:X,name:"RSASSA-PKCS1-v1_5"};case"ES256":case"ES384":case"ES512":return{hash:X,name:"ECDSA",namedCurve:W.namedCurve};case"Ed25519":case"EdDSA":return{name:"Ed25519"};case"ML-DSA-44":case"ML-DSA-65":case"ML-DSA-87":return{name:J};default:throw new M6(`alg ${J} is not supported either by JOSE or your javascript runtime`)}};var iD=M(()=>{x6()});var uH=async(J,W,X)=>{if(W instanceof Uint8Array){if(!J.startsWith("HS"))throw TypeError(u8(W,"CryptoKey","KeyObject","JSON Web Key"));return crypto.subtle.importKey("raw",W,{hash:`SHA-${J.slice(-3)}`,name:"HMAC"},!1,[X])}return Nq(W,J,X),W};var aD=()=>{};var uq=async(J,W,X,G)=>{let Y=await uH(J,W,"verify");Z1(J,Y);let $=xH(J,Y.algorithm);try{return await crypto.subtle.verify($,Y,X,G)}catch{return!1}};var cq=M(()=>{iD();aD()});async function lq(J,W,X){if(!P4(J))throw new F4("Flattened JWS must be an object");if(J.protected===void 0&&J.header===void 0)throw new F4('Flattened JWS must have either of the "protected" or "header" members');if(J.protected!==void 0&&typeof J.protected!=="string")throw new F4("JWS Protected Header incorrect type");if(J.payload===void 0)throw new F4("JWS Payload missing");if(typeof J.signature!=="string")throw new F4("JWS Signature missing or incorrect type");if(J.header!==void 0&&!P4(J.header))throw new F4("JWS Unprotected Header incorrect type");let G={};if(J.protected)try{let O=L4(J.protected);G=JSON.parse(k4.decode(O))}catch{throw new F4("JWS Protected Header is invalid")}if(!QX(G,J.header))throw new F4("JWS Protected and JWS Unprotected Header Parameter names must be disjoint");let Y={...G,...J.header},$=LX(F4,new Map([["b64",!0]]),X?.crit,G,Y),K=!0;if($.has("b64")){if(K=G.b64,typeof K!=="boolean")throw new F4('The "b64" (base64url-encode payload) Header Parameter must be a boolean')}let{alg:w}=Y;if(typeof w!=="string"||!w)throw new F4('JWS "alg" (Algorithm) Header Parameter missing or invalid');let H=X&&p$("algorithms",X.algorithms);if(H&&!H.has(w))throw new LG('"alg" (Algorithm) Header Parameter value not allowed');if(K){if(typeof J.payload!=="string")throw new F4("JWS Payload must be a string")}else if(typeof J.payload!=="string"&&!(J.payload instanceof Uint8Array))throw new F4("JWS Payload must be a string or an Uint8Array instance");let z=!1;if(typeof W==="function")W=await W(G,J),z=!0;VX(w,W,"verify");let N=$0(s6.encode(J.protected??""),s6.encode("."),typeof J.payload==="string"?s6.encode(J.payload):J.payload),U;try{U=L4(J.signature)}catch{throw new F4("Failed to base64url decode the signature")}let F=await nJ(W,w);if(!await uq(w,F,U,N))throw new ID;let L;if(K)try{L=L4(J.payload)}catch{throw new F4("Failed to base64url decode the payload")}else if(typeof J.payload==="string")L=s6.encode(J.payload);else L=J.payload;let D={payload:L};if(J.protected!==void 0)D.protectedHeader=G;if(J.header!==void 0)D.unprotectedHeader=J.header;if(z)return{...D,key:F};return D}var pq=M(()=>{I0();cq();x6();P0();d$();l$();OG()});async function dq(J,W,X){if(J instanceof Uint8Array)J=k4.decode(J);if(typeof J!=="string")throw new F4("Compact JWS must be a string or Uint8Array");let{0:G,1:Y,2:$,length:K}=J.split(".");if(K!==3)throw new F4("Invalid Compact JWS");let w=await lq({payload:Y,protected:G,signature:$},W,X),H={payload:w.payload,protectedHeader:w.protectedHeader};if(typeof W==="function")return{...H,key:w.key};return H}var rq=M(()=>{pq();x6();P0()});var qW=(J)=>Math.floor(J.getTime()/1000);var Hc,vG=(J)=>{let W=Hc.exec(J);if(!W||W[4]&&W[1])throw TypeError("Invalid time period format");let X=parseFloat(W[2]),G=W[3].toLowerCase(),Y;switch(G){case"sec":case"secs":case"second":case"seconds":case"s":Y=Math.round(X);break;case"minute":case"minutes":case"min":case"mins":case"m":Y=Math.round(X*60);break;case"hour":case"hours":case"hr":case"hrs":case"h":Y=Math.round(X*3600);break;case"day":case"days":case"d":Y=Math.round(X*86400);break;case"week":case"weeks":case"w":Y=Math.round(X*604800);break;default:Y=Math.round(X*31557600);break}if(W[1]==="-"||W[4]==="ago")return-Y;return Y};var nq=M(()=>{Hc=/^(\+|\-)? ?(\d+|\d+\.\d+) ?(seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)(?: (ago|from now))?$/i});function V1(J,W){if(!Number.isFinite(W))throw TypeError(`Invalid ${J} input`);return W}function cH(J,W,X={}){let G;try{G=JSON.parse(k4.decode(W))}catch{}if(!P4(G))throw new d0("JWT Claims Set must be a top-level JSON object");let{typ:Y}=X;if(Y&&(typeof J.typ!=="string"||iq(J.typ)!==iq(Y)))throw new R0('unexpected "typ" JWT header value',G,"typ","check_failed");let{requiredClaims:$=[],issuer:K,subject:w,audience:H,maxTokenAge:z}=X,N=[...$];if(z!==void 0)N.push("iat");if(H!==void 0)N.push("aud");if(w!==void 0)N.push("sub");if(K!==void 0)N.push("iss");for(let L of new Set(N.reverse()))if(!(L in G))throw new R0(`missing required "${L}" claim`,G,L,"missing");if(K&&!(Array.isArray(K)?K:[K]).includes(G.iss))throw new R0('unexpected "iss" claim value',G,"iss","check_failed");if(w&&G.sub!==w)throw new R0('unexpected "sub" claim value',G,"sub","check_failed");if(H&&!zc(G.aud,typeof H==="string"?[H]:H))throw new R0('unexpected "aud" claim value',G,"aud","check_failed");let U;switch(typeof X.clockTolerance){case"string":U=vG(X.clockTolerance);break;case"number":U=X.clockTolerance;break;case"undefined":U=0;break;default:throw TypeError("Invalid clockTolerance option type")}let{currentDate:F}=X,Z=qW(F||new Date);if((G.iat!==void 0||z)&&typeof G.iat!=="number")throw new R0('"iat" claim must be a number',G,"iat","invalid");if(G.nbf!==void 0){if(typeof G.nbf!=="number")throw new R0('"nbf" claim must be a number',G,"nbf","invalid");if(G.nbf>Z+U)throw new R0('"nbf" claim timestamp check failed',G,"nbf","check_failed")}if(G.exp!==void 0){if(typeof G.exp!=="number")throw new R0('"exp" claim must be a number',G,"exp","invalid");if(G.exp<=Z-U)throw new ZG('"exp" claim timestamp check failed',G,"exp","check_failed")}if(z){let L=Z-G.iat,D=typeof z==="number"?z:vG(z);if(L-U>D)throw new ZG('"iat" claim timestamp check failed (too far in the past)',G,"iat","check_failed");if(L<0-U)throw new R0('"iat" claim timestamp check failed (it should be in the past)',G,"iat","check_failed")}return G}class r${#J;constructor(J){if(!P4(J))throw TypeError("JWT Claims Set MUST be an object");this.#J=structuredClone(J)}data(){return s6.encode(JSON.stringify(this.#J))}get iss(){return this.#J.iss}set iss(J){this.#J.iss=J}get sub(){return this.#J.sub}set sub(J){this.#J.sub=J}get aud(){return this.#J.aud}set aud(J){this.#J.aud=J}set jti(J){this.#J.jti=J}set nbf(J){if(typeof J==="number")this.#J.nbf=V1("setNotBefore",J);else if(J instanceof Date)this.#J.nbf=V1("setNotBefore",qW(J));else this.#J.nbf=qW(new Date)+vG(J)}set exp(J){if(typeof J==="number")this.#J.exp=V1("setExpirationTime",J);else if(J instanceof Date)this.#J.exp=V1("setExpirationTime",qW(J));else this.#J.exp=qW(new Date)+vG(J)}set iat(J){if(typeof J>"u")this.#J.iat=qW(new Date);else if(J instanceof Date)this.#J.iat=V1("setIssuedAt",qW(J));else if(typeof J==="string")this.#J.iat=V1("setIssuedAt",qW(new Date)+vG(J));else this.#J.iat=V1("setIssuedAt",J)}}var iq=(J)=>{if(J.includes("/"))return J.toLowerCase();return`application/${J.toLowerCase()}`},zc=(J,W)=>{if(typeof J==="string")return W.includes(J);if(Array.isArray(J))return W.some(Set.prototype.has.bind(new Set(J)));return!1};var n$=M(()=>{x6();P0();nq();P0()});async function R8(J,W,X){let G=await dq(J,W,X);if(G.protectedHeader.crit?.includes("b64")&&G.protectedHeader.b64===!1)throw new d0("JWTs MUST NOT use unencoded payload");let $={payload:cH(G.protectedHeader,G.payload,X),protectedHeader:G.protectedHeader};if(typeof W==="function")return{...$,key:G.key};return $}var aq=M(()=>{rq();n$();x6()});async function tD(J,W,X){let G=await bq(J,W,X),Y=cH(G.protectedHeader,G.plaintext,X),{protectedHeader:$}=G;if($.iss!==void 0&&$.iss!==Y.iss)throw new R0('replicated "iss" claim header parameter mismatch',Y,"iss","mismatch");if($.sub!==void 0&&$.sub!==Y.sub)throw new R0('replicated "sub" claim header parameter mismatch',Y,"sub","mismatch");if($.aud!==void 0&&JSON.stringify($.aud)!==JSON.stringify(Y.aud))throw new R0('replicated "aud" claim header parameter mismatch',Y,"aud","mismatch");let K={payload:Y,protectedHeader:$};if(typeof W==="function")return{...K,key:G.key};return K}var tq=M(()=>{kq();n$();x6()});class oD{#J;constructor(J){this.#J=new nD(J)}setContentEncryptionKey(J){return this.#J.setContentEncryptionKey(J),this}setInitializationVector(J){return this.#J.setInitializationVector(J),this}setProtectedHeader(J){return this.#J.setProtectedHeader(J),this}setKeyManagementParameters(J){return this.#J.setKeyManagementParameters(J),this}async encrypt(J,W){let X=await this.#J.encrypt(J,W);return[X.protected,X.encrypted_key,X.iv,X.ciphertext,X.tag].join(".")}}var oq=M(()=>{xq()});var sq=async(J,W,X)=>{let G=await uH(J,W,"sign");Z1(J,G);let Y=await crypto.subtle.sign(xH(J,G.algorithm),G,X);return new Uint8Array(Y)};var eq=M(()=>{iD();aD()});class sD{#J;#W;#X;constructor(J){if(!(J instanceof Uint8Array))throw TypeError("payload must be an instance of Uint8Array");this.#J=J}setProtectedHeader(J){if(this.#W)throw TypeError("setProtectedHeader can only be called once");return this.#W=J,this}setUnprotectedHeader(J){if(this.#X)throw TypeError("setUnprotectedHeader can only be called once");return this.#X=J,this}async sign(J,W){if(!this.#W&&!this.#X)throw new F4("either setProtectedHeader or setUnprotectedHeader must be called before #sign()");if(!QX(this.#W,this.#X))throw new F4("JWS Protected and JWS Unprotected Header Parameter names must be disjoint");let X={...this.#W,...this.#X},G=LX(F4,new Map([["b64",!0]]),W?.crit,this.#W,X),Y=!0;if(G.has("b64")){if(Y=this.#W.b64,typeof Y!=="boolean")throw new F4('The "b64" (base64url-encode payload) Header Parameter must be a boolean')}let{alg:$}=X;if(typeof $!=="string"||!$)throw new F4('JWS "alg" (Algorithm) Header Parameter missing or invalid');VX($,J,"sign");let K=this.#J;if(Y)K=s6.encode(S4(K));let w;if(this.#W)w=s6.encode(S4(JSON.stringify(this.#W)));else w=s6.encode("");let H=$0(w,s6.encode("."),K),z=await nJ(J,$),N=await sq($,z,H),U={signature:S4(N),payload:""};if(Y)U.payload=k4.decode(K);if(this.#X)U.header=this.#X;if(this.#W)U.protected=k4.decode(w);return U}}var JB=M(()=>{I0();eq();x6();P0();d$();l$();OG()});class eD{#J;constructor(J){this.#J=new sD(J)}setProtectedHeader(J){return this.#J.setProtectedHeader(J),this}async sign(J,W){let X=await this.#J.sign(J,W);if(X.payload===void 0)throw TypeError("use the flattened module for creating JWS with b64: false");return`${X.protected}.${X.payload}.${X.signature}`}}var WB=M(()=>{JB()});class iJ{#J;#W;constructor(J={}){this.#W=new r$(J)}setIssuer(J){return this.#W.iss=J,this}setSubject(J){return this.#W.sub=J,this}setAudience(J){return this.#W.aud=J,this}setJti(J){return this.#W.jti=J,this}setNotBefore(J){return this.#W.nbf=J,this}setExpirationTime(J){return this.#W.exp=J,this}setIssuedAt(J){return this.#W.iat=J,this}setProtectedHeader(J){return this.#J=J,this}async sign(J,W){let X=new eD(this.#W.data());if(X.setProtectedHeader(this.#J),Array.isArray(this.#J?.crit)&&this.#J.crit.includes("b64")&&this.#J.b64===!1)throw new d0("JWTs MUST NOT use unencoded payload");return X.sign(J,W)}}var XB=M(()=>{WB();x6();n$()});class lH{#J;#W;#X;#Y;#G;#w;#K;#$;constructor(J={}){this.#$=new r$(J)}setIssuer(J){return this.#$.iss=J,this}setSubject(J){return this.#$.sub=J,this}setAudience(J){return this.#$.aud=J,this}setJti(J){return this.#$.jti=J,this}setNotBefore(J){return this.#$.nbf=J,this}setExpirationTime(J){return this.#$.exp=J,this}setIssuedAt(J){return this.#$.iat=J,this}setProtectedHeader(J){if(this.#Y)throw TypeError("setProtectedHeader can only be called once");return this.#Y=J,this}setKeyManagementParameters(J){if(this.#X)throw TypeError("setKeyManagementParameters can only be called once");return this.#X=J,this}setContentEncryptionKey(J){if(this.#J)throw TypeError("setContentEncryptionKey can only be called once");return this.#J=J,this}setInitializationVector(J){if(this.#W)throw TypeError("setInitializationVector can only be called once");return this.#W=J,this}replicateIssuerAsHeader(){return this.#G=!0,this}replicateSubjectAsHeader(){return this.#w=!0,this}replicateAudienceAsHeader(){return this.#K=!0,this}async encrypt(J,W){let X=new oD(this.#$.data());if(this.#Y&&(this.#G||this.#w||this.#K))this.#Y={...this.#Y,iss:this.#G?this.#$.iss:void 0,sub:this.#w?this.#$.sub:void 0,aud:this.#K?this.#$.aud:void 0};if(X.setProtectedHeader(this.#Y),this.#W)X.setInitializationVector(this.#W);if(this.#J)X.setContentEncryptionKey(this.#J);if(this.#X)X.setKeyManagementParameters(this.#X);return X.encrypt(J,W)}}var YB=M(()=>{oq();n$()});async function pH(J,W){let X;if(L1(J))X=J;else if(y$(J))X=await DX(J);else throw TypeError(u8(J,"CryptoKey","KeyObject","JSON Web Key"));if(W??="sha256",W!=="sha256"&&W!=="sha384"&&W!=="sha512")throw TypeError('digestAlgorithm must one of "sha256", "sha384", or "sha512"');let G;switch(X.kty){case"AKP":aJ(X.alg,'"alg" (Algorithm) Parameter'),aJ(X.pub,'"pub" (Public key) Parameter'),G={alg:X.alg,kty:X.kty,pub:X.pub};break;case"EC":aJ(X.crv,'"crv" (Curve) Parameter'),aJ(X.x,'"x" (X Coordinate) Parameter'),aJ(X.y,'"y" (Y Coordinate) Parameter'),G={crv:X.crv,kty:X.kty,x:X.x,y:X.y};break;case"OKP":aJ(X.crv,'"crv" (Subtype of Key Pair) Parameter'),aJ(X.x,'"x" (Public Key) Parameter'),G={crv:X.crv,kty:X.kty,x:X.x};break;case"RSA":aJ(X.e,'"e" (Exponent) Parameter'),aJ(X.n,'"n" (Modulus) Parameter'),G={e:X.e,kty:X.kty,n:X.n};break;case"oct":aJ(X.k,'"k" (Key Value) Parameter'),G={k:X.k,kty:X.kty};break;default:throw new M6('"kty" (Key Type) Parameter missing or unsupported')}let Y=s6.encode(JSON.stringify(G));return S4(await CH(W,Y))}var aJ=(J,W)=>{if(typeof J!=="string"||!J)throw new BD(`${W} missing or invalid`)};var GB=M(()=>{I0();x6();P0();fH();yH()});function Nc(J){switch(typeof J==="string"&&J.slice(0,2)){case"RS":case"PS":return"RSA";case"ES":return"EC";case"Ed":return"OKP";case"ML":return"AKP";default:throw new M6('Unsupported "alg" value for a JSON Web Key Set')}}function Fc(J){return J&&typeof J==="object"&&Array.isArray(J.keys)&&J.keys.every(Uc)}function Uc(J){return P4(J)}class KB{#J;#W=new WeakMap;constructor(J){if(!Fc(J))throw new BH("JSON Web Key Set malformed");this.#J=structuredClone(J)}jwks(){return this.#J}async getKey(J,W){let{alg:X,kid:G}={...J,...W?.header},Y=Nc(X),$=this.#J.keys.filter((H)=>{let z=Y===H.kty;if(z&&typeof G==="string")z=G===H.kid;if(z&&(typeof H.alg==="string"||Y==="AKP"))z=X===H.alg;if(z&&typeof H.use==="string")z=H.use==="sig";if(z&&Array.isArray(H.key_ops))z=H.key_ops.includes("verify");if(z)switch(X){case"ES256":z=H.crv==="P-256";break;case"ES384":z=H.crv==="P-384";break;case"ES512":z=H.crv==="P-521";break;case"Ed25519":case"EdDSA":z=H.crv==="Ed25519";break}return z}),{0:K,length:w}=$;if(w===0)throw new m$;if(w!==1){let H=new AD,z=this.#W;throw H[Symbol.asyncIterator]=async function*(){for(let N of $)try{yield await $B(z,N,X)}catch{}},H}return $B(this.#W,K,X)}}async function $B(J,W,X){let G=J.get(W)||J.set(W,{}).get(W);if(G[X]===void 0){let Y=await VJ({...W,ext:!0},X);if(Y instanceof Uint8Array||Y.type!=="public")throw new BH("JSON Web Key Set members must be public keys");G[X]=Y}return G[X]}function JM(J){let W=new KB(J),X=async(G,Y)=>W.getKey(G,Y);return Object.defineProperties(X,{jwks:{value:()=>structuredClone(W.jwks()),enumerable:!1,configurable:!1,writable:!1}}),X}var wB=M(()=>{gH();x6()});function Qc(){return typeof WebSocketPair<"u"||typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"||typeof EdgeRuntime<"u"&&EdgeRuntime==="vercel"}async function Zc(J,W,X,G=fetch){let Y=await G(J,{method:"GET",signal:X,redirect:"manual",headers:W}).catch(($)=>{if($.name==="TimeoutError")throw new ED;throw $});if(Y.status!==200)throw new K0("Expected 200 OK from the JSON Web Key Set HTTP response");try{return await Y.json()}catch{throw new K0("Failed to parse the JSON Web Key Set HTTP response as JSON")}}function Lc(J,W){if(typeof J!=="object"||J===null)return!1;if(!("uat"in J)||typeof J.uat!=="number"||Date.now()-J.uat>=W)return!1;if(!("jwks"in J)||!P4(J.jwks)||!Array.isArray(J.jwks.keys)||!Array.prototype.every.call(J.jwks.keys,P4))return!1;return!0}class zB{#J;#W;#X;#Y;#G;#w;#K;#$;#H;#z;constructor(J,W){if(!(J instanceof URL))throw TypeError("url must be an instance of URL");if(this.#J=new URL(J.href),this.#W=typeof W?.timeoutDuration==="number"?W?.timeoutDuration:5000,this.#X=typeof W?.cooldownDuration==="number"?W?.cooldownDuration:30000,this.#Y=typeof W?.cacheMaxAge==="number"?W?.cacheMaxAge:600000,this.#K=new Headers(W?.headers),WM&&!this.#K.has("User-Agent"))this.#K.set("User-Agent",WM);if(!this.#K.has("accept"))this.#K.set("accept","application/json"),this.#K.append("accept","application/jwk-set+json");if(this.#$=W?.[HB],W?.[dH]!==void 0){if(this.#z=W?.[dH],Lc(W?.[dH],this.#Y))this.#G=this.#z.uat,this.#H=JM(this.#z.jwks)}}pendingFetch(){return!!this.#w}coolingDown(){return typeof this.#G==="number"?Date.now()<this.#G+this.#X:!1}fresh(){return typeof this.#G==="number"?Date.now()<this.#G+this.#Y:!1}jwks(){return this.#H?.jwks()}async getKey(J,W){if(!this.#H||!this.fresh())await this.reload();try{return await this.#H(J,W)}catch(X){if(X instanceof m$){if(this.coolingDown()===!1)return await this.reload(),this.#H(J,W)}throw X}}async reload(){if(this.#w&&Qc())this.#w=void 0;this.#w||=Zc(this.#J.href,this.#K,AbortSignal.timeout(this.#W),this.#$).then((J)=>{if(this.#H=JM(J),this.#z)this.#z.uat=Date.now(),this.#z.jwks=J;this.#G=Date.now(),this.#w=void 0}).catch((J)=>{throw this.#w=void 0,J}),await this.#w}}function XM(J,W){let X=new zB(J,W),G=async(Y,$)=>X.getKey(Y,$);return Object.defineProperties(G,{coolingDown:{get:()=>X.coolingDown(),enumerable:!0,configurable:!1},fresh:{get:()=>X.fresh(),enumerable:!0,configurable:!1},reload:{value:()=>X.reload(),enumerable:!0,configurable:!1,writable:!1},reloading:{get:()=>X.pendingFetch(),enumerable:!0,configurable:!1},jwks:{value:()=>X.jwks(),enumerable:!0,configurable:!1,writable:!1}}),G}var WM,HB,dH;var NB=M(()=>{x6();wB();if(typeof navigator>"u"||!navigator.userAgent?.startsWith?.("Mozilla/5.0 "))WM="jose/v6.1.0";HB=Symbol();dH=Symbol()});function rH(J){let W;if(typeof J==="string"){let X=J.split(".");if(X.length===3||X.length===5)[W]=X}else if(typeof J==="object"&&J)if("protected"in J)W=J.protected;else throw TypeError("Token does not contain a Protected Header");try{if(typeof W!=="string"||!W)throw Error();let X=JSON.parse(k4.decode(L4(W)));if(!P4(X))throw Error();return X}catch{throw TypeError("Invalid Token or Protected Header formatting")}}var FB=M(()=>{I0();P0()});function DJ(J){if(typeof J!=="string")throw new d0("JWTs must use Compact JWS serialization, JWT must be a string");let{1:W,length:X}=J.split(".");if(X===5)throw new d0("Only JWTs using Compact JWS serialization can be decoded");if(X!==3)throw new d0("Invalid JWT");if(!W)throw new d0("JWTs must contain a payload");let G;try{G=L4(W)}catch{throw new d0("Failed to base64url decode the payload")}let Y;try{Y=JSON.parse(k4.decode(G))}catch{throw new d0("Failed to parse the decoded payload as JSON")}if(!P4(Y))throw new d0("Invalid JWT Claims Set");return Y}var UB=M(()=>{I0();P0();x6()});function YM(J){let W=J?.modulusLength??2048;if(typeof W!=="number"||W<2048)throw new M6("Invalid or unsupported modulusLength option provided, 2048 bits or larger keys must be used");return W}async function GM(J,W){let X,G;switch(J){case"PS256":case"PS384":case"PS512":X={name:"RSA-PSS",hash:`SHA-${J.slice(-3)}`,publicExponent:new Uint8Array([1,0,1]),modulusLength:YM(W)},G=["sign","verify"];break;case"RS256":case"RS384":case"RS512":X={name:"RSASSA-PKCS1-v1_5",hash:`SHA-${J.slice(-3)}`,publicExponent:new Uint8Array([1,0,1]),modulusLength:YM(W)},G=["sign","verify"];break;case"RSA-OAEP":case"RSA-OAEP-256":case"RSA-OAEP-384":case"RSA-OAEP-512":X={name:"RSA-OAEP",hash:`SHA-${parseInt(J.slice(-3),10)||1}`,publicExponent:new Uint8Array([1,0,1]),modulusLength:YM(W)},G=["decrypt","unwrapKey","encrypt","wrapKey"];break;case"ES256":X={name:"ECDSA",namedCurve:"P-256"},G=["sign","verify"];break;case"ES384":X={name:"ECDSA",namedCurve:"P-384"},G=["sign","verify"];break;case"ES512":X={name:"ECDSA",namedCurve:"P-521"},G=["sign","verify"];break;case"Ed25519":case"EdDSA":{G=["sign","verify"],X={name:"Ed25519"};break}case"ML-DSA-44":case"ML-DSA-65":case"ML-DSA-87":{G=["sign","verify"],X={name:J};break}case"ECDH-ES":case"ECDH-ES+A128KW":case"ECDH-ES+A192KW":case"ECDH-ES+A256KW":{G=["deriveBits"];let Y=W?.crv??"P-256";switch(Y){case"P-256":case"P-384":case"P-521":{X={name:"ECDH",namedCurve:Y};break}case"X25519":X={name:"X25519"};break;default:throw new M6("Invalid or unsupported crv option provided, supported values are P-256, P-384, P-521, and X25519")}break}default:throw new M6('Invalid or unsupported JWK "alg" (Algorithm) Parameter value')}return crypto.subtle.generateKey(X,W?.extractable??!1,G)}var QB=M(()=>{x6()});var D1=M(()=>{aq();tq();XB();YB();GB();NB();yH();gH();FB();UB();x6();QB();I0()});async function nH(J,W,X=3600){return await new iJ(J).setProtectedHeader({alg:"HS256"}).setIssuedAt().setExpirationTime(Math.floor(Date.now()/1000)+X).sign(new TextEncoder().encode(W))}async function $M(J,W){try{return(await R8(J,new TextEncoder().encode(W))).payload}catch(X){return null}}async function DB(J,W,X,G=3600){let Y=TD(AY,new TextEncoder().encode(W),new TextEncoder().encode(X),ZB,64),$=await pH({kty:"oct",k:h$.encode(Y)},"sha256");return await new lH(J).setProtectedHeader({alg:LB,enc:VB,kid:$}).setIssuedAt().setExpirationTime(Vc()+G).setJti(crypto.randomUUID()).encrypt(Y)}async function KM(J,W,X){if(!J)return null;try{let{payload:G}=await tD(J,async({kid:Y})=>{let $=TD(AY,new TextEncoder().encode(W),new TextEncoder().encode(X),ZB,64);if(Y===void 0)return $;if(Y===await pH({kty:"oct",k:h$.encode($)},"sha256"))return $;throw Error("no matching decryption secret")},{clockTolerance:15,keyManagementAlgorithms:[LB],contentEncryptionAlgorithms:[VB,"A256GCM"]});return G}catch(G){return null}}var ZB,Vc=()=>Date.now()/1000|0,LB="dir",VB="A256CBC-HS512";var BW=M(()=>{$q();KU();D1();ZB=new Uint8Array([66,101,116,116,101,114,65,117,116,104,46,106,115,32,71,101,110,101,114,97,116,101,100,32,69,110,99,114,121,112,116,105,111,110,32,75,101,121])});var jG=()=>{};function Dc(J,W,X){if(X==="update"){if(J===void 0&&W.onUpdate!==void 0){if(typeof W.onUpdate==="function")return W.onUpdate();return W.onUpdate}return J}if(X==="create"){if(J===void 0||W.required===!0&&J===null){if(W.defaultValue!==void 0){if(typeof W.defaultValue==="function")return W.defaultValue();return W.defaultValue}}}return J}function _4(J){if(_H()<8)return`#${J}`;return`${x4.fg.magenta}#${J}${x4.reset}`}function T4(J,W){return`${x4.bg.black}${x4.fg.yellow}[${J}/${W}]${x4.reset}`}function q4(J){return`${x4.bright}${J}${x4.reset}`}function i4(J){return`${x4.dim}(${J})${x4.reset}`}var MB=({usePlural:J,schema:W,disableIdGeneration:X,options:G,customIdGenerator:Y,supportsUUIDs:$})=>{let K=aX({usePlural:J,schema:W});return({customModelName:H,forceAllowId:z})=>{let N=G.advanced?.database?.useNumberId||G.advanced?.database?.generateId==="serial",U=G.advanced?.database?.generateId==="uuid",F=(()=>{if(X)return!1;else if(N&&!z)return!1;else if(U)return!$;else return!0})(),Z=K(H??"id");return{type:N?"number":"string",required:F?!0:!1,...F?{defaultValue(){if(X)return;let L=G.advanced?.database?.generateId;if(L===!1||N)return;if(typeof L==="function")return L({model:Z});if(Y)return Y({model:Z});if(L==="uuid")return crypto.randomUUID();return l4()}}:{},transform:{input:(L)=>{if(!L)return;if(N){let D=Number(L);if(isNaN(D))return;return D}if(U){if(F&&!z)return L;if(X)return;if($)return;if(z&&typeof L==="string")if(/^[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$/i.test(L))return L;else{let D=Error().stack?.split(`
`).filter((O,P)=>P!==1).join(`
`).replace("Error:","");w6.warn("[Adapter Factory] - Invalid UUID value for field `id` provided when `forceAllowId` is true. Generating a new UUID.",D)}if(typeof L!=="string"&&!$)return crypto.randomUUID();return}return L},output:(L)=>{if(!L)return;return String(L)}}}}},Mc=({usePlural:J,schema:W,options:X,customIdGenerator:G,disableIdGeneration:Y})=>{let $=aX({usePlural:J,schema:W}),K=sK({usePlural:J,schema:W}),w=MB({usePlural:J,schema:W,options:X,customIdGenerator:G,disableIdGeneration:Y});return({model:z,field:N})=>{let U=$(z),F=K({field:N,model:U}),Z=W[U].fields;Z.id=w({customModelName:U});let L=Z[F];if(!L)throw new Y6(`Field ${N} not found in model ${z}`);return L}},iH,C0=-1,Oc=(J)=>(W)=>W(J),i$=({adapter:J,config:W})=>(X)=>{let G=Math.random().toString(36).substring(2,15),Y={...W,supportsBooleans:W.supportsBooleans??!0,supportsDates:W.supportsDates??!0,supportsJSON:W.supportsJSON??!1,adapterName:W.adapterName??W.adapterId,supportsNumericIds:W.supportsNumericIds??!0,supportsUUIDs:W.supportsUUIDs??!1,transaction:W.transaction??!1,disableTransformInput:W.disableTransformInput??!1,disableTransformOutput:W.disableTransformOutput??!1,disableTransformJoin:W.disableTransformJoin??!1};if((X.advanced?.database?.useNumberId===!0||X.advanced?.database?.generateId==="serial")&&Y.supportsNumericIds===!1)throw new Y6(`[${Y.adapterName}] Your database or database adapter does not support numeric ids. Please disable "useNumberId" in your config.`);let $=O8(X),K=(...q)=>{if(Y.debugLogs===!0||typeof Y.debugLogs==="object"){if(typeof Y.debugLogs==="object"&&"isRunningAdapterTests"in Y.debugLogs){if(Y.debugLogs.isRunningAdapterTests)q.shift(),iH.push({instance:G,args:q});return}if(typeof Y.debugLogs==="object"&&Y.debugLogs.logCondition&&!Y.debugLogs.logCondition?.())return;if(typeof q[0]==="object"&&"method"in q[0]){let S=q.shift().method;if(typeof Y.debugLogs==="object"){if(S==="create"&&!Y.debugLogs.create)return;else if(S==="update"&&!Y.debugLogs.update)return;else if(S==="updateMany"&&!Y.debugLogs.updateMany)return;else if(S==="findOne"&&!Y.debugLogs.findOne)return;else if(S==="findMany"&&!Y.debugLogs.findMany)return;else if(S==="delete"&&!Y.debugLogs.delete)return;else if(S==="deleteMany"&&!Y.debugLogs.deleteMany)return;else if(S==="count"&&!Y.debugLogs.count)return}w6.info(`[${Y.adapterName}]`,...q)}else w6.info(`[${Y.adapterName}]`,...q)}},w=aX({usePlural:Y.usePlural,schema:$}),H=sK({usePlural:Y.usePlural,schema:$}),z=Jw({usePlural:Y.usePlural,schema:$}),N=eK({schema:$,usePlural:Y.usePlural}),U=MB({schema:$,options:X,usePlural:Y.usePlural,disableIdGeneration:Y.disableIdGeneration,customIdGenerator:Y.customIdGenerator,supportsUUIDs:Y.supportsUUIDs}),F=Mc({schema:$,options:X,usePlural:Y.usePlural,disableIdGeneration:Y.disableIdGeneration,customIdGenerator:Y.customIdGenerator}),Z=async(q,S,B,A)=>{let E={},I=$[S].fields,m=Y.mapKeysTransformInput??{},u=X.advanced?.database?.useNumberId||X.advanced?.database?.generateId==="serial";I.id=U({customModelName:S,forceAllowId:A&&"id"in q});for(let b in I){let g=q[b],f=I[b],p=m[b]||I[b].fieldName||b;if(g===void 0&&(f.defaultValue===void 0&&!f.transform?.input&&!(B==="update"&&f.onUpdate)||B==="update"&&!f.onUpdate))continue;if(f&&f.type==="date"&&!(g instanceof Date)&&typeof g==="string")try{g=new Date(g)}catch{w6.error("[Adapter Factory] Failed to convert string to date",{value:g,field:b})}let l=Dc(g,f,B);if(f.transform?.input)l=await f.transform.input(l);if(f.references?.field==="id"&&u)if(Array.isArray(l))l=l.map((a)=>a!==null?Number(a):null);else l=l!==null?Number(l):null;else if(Y.supportsJSON===!1&&typeof l==="object"&&f.type==="json")l=JSON.stringify(l);else if(Y.supportsDates===!1&&l instanceof Date&&f.type==="date")l=l.toISOString();else if(Y.supportsBooleans===!1&&typeof l==="boolean")l=l?1:0;if(Y.customTransformInput)l=Y.customTransformInput({data:l,action:B,field:p,fieldAttributes:f,model:z(S),schema:$,options:X});if(l!==void 0)E[p]=l}return E},L=async(q,S,B=[],A)=>{let E=async(u,b,g=[])=>{if(!u)return null;let f=Y.mapKeysTransformOutput??{},p={},l=$[w(b)].fields,a=Object.entries(f).find(([o,H6])=>H6==="id")?.[0];l[a??"id"]={type:X.advanced?.database?.useNumberId||X.advanced?.database?.generateId==="serial"?"number":"string"};for(let o in l){if(g.length&&!g.includes(o))continue;let H6=l[o];if(H6){let O6=H6.fieldName||o,z6=u[Object.entries(f).find(([IX,CW])=>CW===O6)?.[0]||O6];if(H6.transform?.output)z6=await H6.transform.output(z6);let a4=f[o]||o;if(O6==="id"||H6.references?.field==="id"){if(typeof z6<"u"&&z6!==null)z6=String(z6)}else if(Y.supportsJSON===!1&&typeof z6==="string"&&H6.type==="json")z6=l6(z6);else if(Y.supportsDates===!1&&typeof z6==="string"&&H6.type==="date")z6=new Date(z6);else if(Y.supportsBooleans===!1&&typeof z6==="number"&&H6.type==="boolean")z6=z6===1;if(Y.customTransformOutput)z6=Y.customTransformOutput({data:z6,field:a4,fieldAttributes:H6,select:g,model:z(b),schema:$,options:X});p[a4]=z6}}return p};if(!A||Object.keys(A).length===0)return await E(q,S,B);S=w(S);let I=await E(q,S,B),m=Object.entries(A).map(([u,b])=>({modelName:z(u),defaultModelName:w(u),joinConfig:b}));if(!q)return null;for(let{modelName:u,defaultModelName:b,joinConfig:g}of m){let f=await(async()=>{if(X.experimental?.joins)return q[u];else return await P({baseModel:S,baseData:I,joinModel:u,specificJoinConfig:g})})();if(f===void 0||f===null)f=g.relation==="one-to-one"?null:[];if(g.relation==="one-to-many"&&!Array.isArray(f))f=[f];let p=[];if(Array.isArray(f))for(let l of f){let a=await E(l,u,[]);p.push(a)}else{let l=await E(f,u,[]);p.push(l)}I[b]=(g.relation==="one-to-one"?p[0]:p)??null}return I},D=({model:q,where:S})=>{if(!S)return;let B=Y.mapKeysTransformInput??{};return S.map((A)=>{let{field:E,value:I,operator:m="eq",connector:u="AND"}=A;if(m==="in"){if(!Array.isArray(I))throw new Y6("Value must be an array")}let b=I,g=w(q),f=H({field:E,model:q}),p=B[f]||N({field:f,model:g}),l=F({field:f,model:g}),a=X.advanced?.database?.useNumberId||X.advanced?.database?.generateId==="serial";if(f==="id"||l.references?.field==="id"){if(a)if(Array.isArray(I))b=I.map(Number);else b=Number(I)}if(l.type==="date"&&I instanceof Date&&!Y.supportsDates)b=I.toISOString();if(l.type==="boolean"&&typeof I==="boolean"&&!Y.supportsBooleans)b=I?1:0;if(l.type==="json"&&typeof I==="object"&&!Y.supportsJSON)try{b=JSON.stringify(I)}catch(o){throw Error(`Failed to stringify JSON value for field ${p}`,{cause:o})}return{operator:m,connector:u,field:p,value:b}})},O=(q,S,B)=>{if(!S)return;if(Object.keys(S).length===0)return;let A={};for(let[E,I]of Object.entries(S)){if(!I)continue;let m=w(E),u=w(q),b=Object.entries($[m].fields).filter(([z6,a4])=>a4.references&&w(a4.references.model)===u),g=!0;if(!b.length)b=Object.entries($[u].fields).filter(([z6,a4])=>a4.references&&w(a4.references.model)===m),g=!1;if(!b.length)throw new Y6(`No foreign key found for model ${E} and base model ${q} while performing join operation.`);else if(b.length>1)throw new Y6(`Multiple foreign keys found for model ${E} and base model ${q} while performing join operation. Only one foreign key is supported.`);let[f,p]=b[0];if(!p.references)throw new Y6(`No references found for foreign key ${f} on model ${E} while performing join operation.`);let l,a,o;if(g)o=p.references.field,l=N({model:q,field:o}),a=N({model:E,field:f});else o=f,l=N({model:q,field:o}),a=N({model:E,field:p.references.field});if(B&&!B.includes(o))B.push(o);let H6=a==="id"?!0:p.unique??!1,O6=X.advanced?.database?.defaultFindManyLimit??100;if(H6)O6=1;else if(typeof I==="object"&&typeof I.limit==="number")O6=I.limit;A[z(E)]={on:{from:l,to:a},limit:O6,relation:H6?"one-to-one":"one-to-many"}}return{join:A,select:B}},P=async({baseModel:q,baseData:S,joinModel:B,specificJoinConfig:A})=>{if(!S)return S;let E=z(B),I=A.on.to,m=S[H({field:A.on.from,model:q})];if(m===null||m===void 0)return A.relation==="one-to-one"?null:[];let u,b=D({model:E,where:[{field:I,value:m,operator:"eq",connector:"AND"}]});try{if(A.relation==="one-to-one")u=await _.findOne({model:E,where:b});else{let g=A.limit??X.advanced?.database?.defaultFindManyLimit??100;u=await _.findMany({model:E,where:b,limit:g})}}catch(g){throw w6.error(`Failed to query fallback join for model ${E}:`,{where:b,limit:A.limit}),console.error(g),g}return u},_=J({options:X,schema:$,debugLog:K,getFieldName:N,getModelName:z,getDefaultModelName:w,getDefaultFieldName:H,getFieldAttributes:F,transformInput:Z,transformOutput:L,transformWhereClause:D}),T=null,v={transaction:async(q)=>{if(!T)if(!Y.transaction)T=Oc(v);else w6.debug(`[${Y.adapterName}] - Using provided transaction implementation.`),T=Y.transaction;return T(q)},create:async({data:q,model:S,select:B,forceAllowId:A=!1})=>{C0++;let E=C0,I=z(S);if(S=w(S),"id"in q&&typeof q.id<"u"&&!A){w6.warn(`[${Y.adapterName}] - You are trying to create a record with an id. This is not allowed as we handle id generation for you, unless you pass in the \`forceAllowId\` parameter. The id will be ignored.`);let g=Error().stack?.split(`
`).filter((f,p)=>p!==1).join(`
`).replace("Error:","Create method with `id` being called at:");console.log(g),q.id=void 0}K({method:"create"},`${_4(E)} ${T4(1,4)}`,`${q4("create")} ${i4("Unsafe Input")}:`,{model:I,data:q});let m=q;if(!Y.disableTransformInput)m=await Z(q,S,"create",A);K({method:"create"},`${_4(E)} ${T4(2,4)}`,`${q4("create")} ${i4("Parsed Input")}:`,{model:I,data:m});let u=await _.create({data:m,model:I});K({method:"create"},`${_4(E)} ${T4(3,4)}`,`${q4("create")} ${i4("DB Result")}:`,{model:I,res:u});let b=u;if(!Y.disableTransformOutput)b=await L(u,S,B,void 0);return K({method:"create"},`${_4(E)} ${T4(4,4)}`,`${q4("create")} ${i4("Parsed Result")}:`,{model:I,data:b}),b},update:async({model:q,where:S,update:B})=>{C0++;let A=C0;q=w(q);let E=z(q),I=D({model:q,where:S});K({method:"update"},`${_4(A)} ${T4(1,4)}`,`${q4("update")} ${i4("Unsafe Input")}:`,{model:E,data:B});let m=B;if(!Y.disableTransformInput)m=await Z(B,q,"update");K({method:"update"},`${_4(A)} ${T4(2,4)}`,`${q4("update")} ${i4("Parsed Input")}:`,{model:E,data:m});let u=await _.update({model:E,where:I,update:m});K({method:"update"},`${_4(A)} ${T4(3,4)}`,`${q4("update")} ${i4("DB Result")}:`,{model:E,data:u});let b=u;if(!Y.disableTransformOutput)b=await L(u,q,void 0,void 0);return K({method:"update"},`${_4(A)} ${T4(4,4)}`,`${q4("update")} ${i4("Parsed Result")}:`,{model:E,data:b}),b},updateMany:async({model:q,where:S,update:B})=>{C0++;let A=C0,E=z(q),I=D({model:q,where:S});q=w(q),K({method:"updateMany"},`${_4(A)} ${T4(1,4)}`,`${q4("updateMany")} ${i4("Unsafe Input")}:`,{model:E,data:B});let m=B;if(!Y.disableTransformInput)m=await Z(B,q,"update");K({method:"updateMany"},`${_4(A)} ${T4(2,4)}`,`${q4("updateMany")} ${i4("Parsed Input")}:`,{model:E,data:m});let u=await _.updateMany({model:E,where:I,update:m});return K({method:"updateMany"},`${_4(A)} ${T4(3,4)}`,`${q4("updateMany")} ${i4("DB Result")}:`,{model:E,data:u}),K({method:"updateMany"},`${_4(A)} ${T4(4,4)}`,`${q4("updateMany")} ${i4("Parsed Result")}:`,{model:E,data:u}),u},findOne:async({model:q,where:S,select:B,join:A})=>{C0++;let E=C0,I=z(q),m=D({model:q,where:S});q=w(q);let u,b=!0;if(!Y.disableTransformJoin){let p=O(q,A,B);if(p)u=p.join,B=p.select;if(!X.experimental?.joins&&u&&Object.keys(u).length>0)b=!1}else u=A;K({method:"findOne"},`${_4(E)} ${T4(1,3)}`,`${q4("findOne")}:`,{model:I,where:m,select:B,join:u});let g=await _.findOne({model:I,where:m,select:B,join:b?u:void 0});K({method:"findOne"},`${_4(E)} ${T4(2,3)}`,`${q4("findOne")} ${i4("DB Result")}:`,{model:I,data:g});let f=g;if(!Y.disableTransformOutput)f=await L(g,q,B,u);return K({method:"findOne"},`${_4(E)} ${T4(3,3)}`,`${q4("findOne")} ${i4("Parsed Result")}:`,{model:I,data:f}),f},findMany:async({model:q,where:S,limit:B,sortBy:A,offset:E,join:I})=>{C0++;let m=C0,u=B??X.advanced?.database?.defaultFindManyLimit??100,b=z(q),g=D({model:q,where:S});q=w(q);let f,p=!0;if(!Y.disableTransformJoin){let o=O(q,I,void 0);if(o)f=o.join;if(!X.experimental?.joins&&f&&Object.keys(f).length>0)p=!1}else f=I;K({method:"findMany"},`${_4(m)} ${T4(1,3)}`,`${q4("findMany")}:`,{model:b,where:g,limit:u,sortBy:A,offset:E,join:f});let l=await _.findMany({model:b,where:g,limit:u,sortBy:A,offset:E,join:p?f:void 0});K({method:"findMany"},`${_4(m)} ${T4(2,3)}`,`${q4("findMany")} ${i4("DB Result")}:`,{model:b,data:l});let a=l;if(!Y.disableTransformOutput)a=await Promise.all(l.map(async(o)=>{return await L(o,q,void 0,f)}));return K({method:"findMany"},`${_4(m)} ${T4(3,3)}`,`${q4("findMany")} ${i4("Parsed Result")}:`,{model:b,data:a}),a},delete:async({model:q,where:S})=>{C0++;let B=C0,A=z(q),E=D({model:q,where:S});q=w(q),K({method:"delete"},`${_4(B)} ${T4(1,2)}`,`${q4("delete")}:`,{model:A,where:E}),await _.delete({model:A,where:E}),K({method:"delete"},`${_4(B)} ${T4(2,2)}`,`${q4("delete")} ${i4("DB Result")}:`,{model:A})},deleteMany:async({model:q,where:S})=>{C0++;let B=C0,A=z(q),E=D({model:q,where:S});q=w(q),K({method:"deleteMany"},`${_4(B)} ${T4(1,2)}`,`${q4("deleteMany")} ${i4("DeleteMany")}:`,{model:A,where:E});let I=await _.deleteMany({model:A,where:E});return K({method:"deleteMany"},`${_4(B)} ${T4(2,2)}`,`${q4("deleteMany")} ${i4("DB Result")}:`,{model:A,data:I}),I},count:async({model:q,where:S})=>{C0++;let B=C0,A=z(q),E=D({model:q,where:S});q=w(q),K({method:"count"},`${_4(B)} ${T4(1,2)}`,`${q4("count")}:`,{model:A,where:E});let I=await _.count({model:A,where:E});return K({method:"count"},`${_4(B)} ${T4(2,2)}`,`${q4("count")}:`,{model:A,data:I}),I},createSchema:_.createSchema?async(q,S)=>{let B=O8(X);if(X.secondaryStorage&&!X.session?.storeSessionInDatabase)delete B.session;if(X.rateLimit&&X.rateLimit.storage==="database"&&(typeof X.rateLimit.enabled>"u"||X.rateLimit.enabled===!0))B.ratelimit={modelName:X.rateLimit.modelName??"ratelimit",fields:{key:{type:"string",unique:!0,required:!0,fieldName:X.rateLimit.fields?.key??"key"},count:{type:"number",required:!0,fieldName:X.rateLimit.fields?.count??"count"},lastRequest:{type:"number",required:!0,bigint:!0,defaultValue:()=>Date.now(),fieldName:X.rateLimit.fields?.lastRequest??"lastRequest"}}};return _.createSchema({file:S,tables:B})}:void 0,options:{adapterConfig:Y,..._.options??{}},id:Y.adapterId,...Y.debugLogs?.isRunningAdapterTests?{adapterTestDebugLogs:{resetDebugLogs(){iH=iH.filter((q)=>q.instance!==G)},printDebugLogs(){let q="\u2500".repeat(80),S=iH.filter((A)=>A.instance===G);if(S.length===0)return;let B=S.reverse().map((A)=>{return A.args[0]=`
${A.args[0]}`,[...A.args,`
`]}).reduce((A,E)=>{return[...E,...A]},[`
${q}`]);console.log(...B)}}}:{}};return v};var wM=M(()=>{CJ();Y8();I8();$8();m4();iH=[]});var OB={};N0(OB,{memoryAdapter:()=>Pc});var Pc=(J,W)=>{let X=null,G=i$({config:{adapterId:"memory",adapterName:"Memory Adapter",usePlural:!1,debugLogs:W?.debugLogs||!1,customTransformInput(Y){if((Y.options.advanced?.database?.useNumberId||Y.options.advanced?.database?.generateId==="serial")&&Y.field==="id"&&Y.action==="create")return J[Y.model].length+1;return Y.data},transaction:async(Y)=>{let $=structuredClone(J);try{return await Y(G(X))}catch(K){throw Object.keys(J).forEach((w)=>{J[w]=$[w]}),K}}},adapter:({getFieldName:Y,options:$,getModelName:K})=>{let w=(z,N,U)=>{if(!N)return z;return z.sort((F,Z)=>{let L=Y({model:U,field:N.field}),D=F[L],O=Z[L],P=0;if(D==null&&O==null)P=0;else if(D==null)P=-1;else if(O==null)P=1;else if(typeof D==="string"&&typeof O==="string")P=D.localeCompare(O);else if(D instanceof Date&&O instanceof Date)P=D.getTime()-O.getTime();else if(typeof D==="number"&&typeof O==="number")P=D-O;else if(typeof D==="boolean"&&typeof O==="boolean")P=D===O?0:D?1:-1;else P=String(D).localeCompare(String(O));return N.direction==="asc"?P:-P})};function H(z,N,U){let F=(O,P)=>{let _=J[P];if(!_)throw w6.error(`[MemoryAdapter] Model ${P} not found in the DB`,Object.keys(J)),Error(`Model ${P} not found`);let T=(v,q)=>{let{field:S,value:B,operator:A}=q;switch(A){case"in":if(!Array.isArray(B))throw Error("Value must be an array");return B.includes(v[S]);case"not_in":if(!Array.isArray(B))throw Error("Value must be an array");return!B.includes(v[S]);case"contains":return v[S].includes(B);case"starts_with":return v[S].startsWith(B);case"ends_with":return v[S].endsWith(B);case"ne":return v[S]!==B;case"gt":return B!=null&&Boolean(v[S]>B);case"gte":return B!=null&&Boolean(v[S]>=B);case"lt":return B!=null&&Boolean(v[S]<B);case"lte":return B!=null&&Boolean(v[S]<=B);default:return v[S]===B}};return _.filter((v)=>{if(!O.length||O.length===0)return!0;let q=T(v,O[0]);for(let S of O){let B=T(v,S);if(S.connector==="OR")q=q||B;else q=q&&B}return q})};if(!U)return F(z,N);let Z=F(z,N),L=new Map,D=new Map;for(let O of Z){let P=String(O.id);if(!L.has(P)){let T={...O};for(let[v,q]of Object.entries(U)){let S=K(v);if(q.relation==="one-to-one")T[S]=null;else T[S]=[],D.set(`${P}-${v}`,new Set)}L.set(P,T)}let _=L.get(P);for(let[T,v]of Object.entries(U)){let q=K(T),S=J[q];if(!S)throw w6.error(`[MemoryAdapter] JoinOption model ${q} not found in the DB`,Object.keys(J)),Error(`JoinOption model ${q} not found`);let B=S.filter((A)=>A[v.on.to]===O[v.on.from]);if(v.relation==="one-to-one")_[q]=B[0]||null;else{let A=D.get(`${P}-${T}`),E=v.limit??100,I=0;for(let m of B){if(I>=E)break;if(!A.has(m.id))_[q].push(m),A.add(m.id),I++}}}}return Array.from(L.values())}return{create:async({model:z,data:N})=>{if($.advanced?.database?.useNumberId||$.advanced?.database?.generateId==="serial")N.id=J[K(z)].length+1;if(!J[z])J[z]=[];return J[z].push(N),N},findOne:async({model:z,where:N,join:U})=>{let F=H(N,z,U);if(U){let Z=F;if(!Z.length)return null;return Z[0]}return F[0]||null},findMany:async({model:z,where:N,sortBy:U,limit:F,offset:Z,join:L})=>{let D=H(N||[],z,L);if(L){let P=D;if(!P.length)return[];w(P,U,z);let _=P;if(Z!==void 0)_=_.slice(Z);if(F!==void 0)_=_.slice(0,F);return _}let O=w(D,U,z);if(Z!==void 0)O=O.slice(Z);if(F!==void 0)O=O.slice(0,F);return O||[]},count:async({model:z,where:N})=>{if(N)return H(N,z).length;return J[z].length},update:async({model:z,where:N,update:U})=>{let F=H(N,z);return F.forEach((Z)=>{Object.assign(Z,U)}),F[0]||null},delete:async({model:z,where:N})=>{let U=J[z],F=H(N,z);J[z]=U.filter((Z)=>!F.includes(Z))},deleteMany:async({model:z,where:N})=>{let U=J[z],F=H(N,z),Z=0;return J[z]=U.filter((L)=>{if(F.includes(L))return Z++,!1;return!F.includes(L)}),Z},updateMany({model:z,where:N,update:U}){let F=H(N,z);return F.forEach((Z)=>{Object.assign(Z,U)}),F[0]||null}}}});return(Y)=>{return X=Y,G(Y)}};var PB=M(()=>{CJ();Y8();J0();BW();jG();I8();wM();$8()});var HM={};N0(HM,{kyselyAdapter:()=>vc,getKyselyDatabaseType:()=>jY,createKyselyAdapter:()=>oK});var vc=(J,W)=>{let X=null,G=(K)=>{return({getFieldName:w,schema:H,getDefaultFieldName:z,getDefaultModelName:N,getFieldAttributes:U,getModelName:F})=>{let Z=(P)=>{let _=[],T=[];if(P)for(let[v,q]of Object.entries(P)){let S=H[N(v)]?.fields,[B,A]=v.includes(".")?v.split("."):[void 0,v];if(!S)continue;S.id={type:"string"};for(let[E,I]of Object.entries(S))_.push(X6`${X6.ref(`join_${A}`)}.${X6.ref(I.fieldName||E)} as ${X6.ref(`_joined_${A}_${I.fieldName||E}`)}`),T.push({joinModel:v,joinModelRef:A,fieldName:I.fieldName||E})}return{allSelectsStr:T,allSelects:_}},L=async(P,_,T,v)=>{let q;if(W?.type==="mysql"){await _.execute();let S=P.id?"id":v.length>0&&v[0]?.field?v[0].field:"id";if(!P.id&&v.length===0)return q=await K.selectFrom(T).selectAll().orderBy(w({model:T,field:S}),"desc").limit(1).executeTakeFirst(),q;let B=P[S]||v[0]?.value;return q=await K.selectFrom(T).selectAll().orderBy(w({model:T,field:S}),"desc").where(w({model:T,field:S}),"=",B).limit(1).executeTakeFirst(),q}if(W?.type==="mssql")return q=await _.outputAll("inserted").executeTakeFirst(),q;return q=await _.returningAll().executeTakeFirst(),q};function D(P,_){if(!_)return{and:null,or:null};let T={and:[],or:[]};return _.forEach((v)=>{let{field:q,value:S,operator:B="=",connector:A="AND"}=v,E=S,I=w({model:P,field:q}),m=(u)=>{let b=`${P}.${I}`;if(B.toLowerCase()==="in")return u(b,"in",Array.isArray(E)?E:[E]);if(B.toLowerCase()==="not_in")return u(b,"not in",Array.isArray(E)?E:[E]);if(B==="contains")return u(b,"like",`%${E}%`);if(B==="starts_with")return u(b,"like",`${E}%`);if(B==="ends_with")return u(b,"like",`%${E}`);if(B==="eq")return u(b,"=",E);if(B==="ne")return u(b,"<>",E);if(B==="gt")return u(b,">",E);if(B==="gte")return u(b,">=",E);if(B==="lt")return u(b,"<",E);if(B==="lte")return u(b,"<=",E);return u(b,B,E)};if(A==="OR")T.or.push(m);else T.and.push(m)}),{and:T.and.length?T.and:null,or:T.or.length?T.or:null}}function O(P,_,T){if(!_||!P.length)return P;let v=new Map;for(let S of P){let B={},A={};for(let[m]of Object.entries(_))A[F(m)]={};for(let[m,u]of Object.entries(S)){let b=String(m),g=!1;for(let{joinModel:f,fieldName:p,joinModelRef:l}of T)if(b===`_joined_${l}_${p}`){A[F(f)][w({model:f,field:p})]=u,g=!0;break}if(!g)B[m]=u}let E=B.id;if(!E)continue;if(!v.has(E)){let m={...B};for(let[u,b]of Object.entries(_))m[F(u)]=b.relation==="one-to-one"?null:[];v.set(E,m)}let I=v.get(E);for(let[m,u]of Object.entries(_)){let b=u.relation==="one-to-one",g=u.limit??100,f=A[F(m)],p=f&&Object.keys(f).length>0&&Object.values(f).some((l)=>l!==null&&l!==void 0);if(b)I[F(m)]=p?f:null;else{let l=F(m);if(Array.isArray(I[l])&&p){if(I[l].length>=g)continue;let a=w({model:m,field:"id"}),o=f[a];if(o){if(!I[l].some((H6)=>H6[a]===o)&&I[l].length<g)I[l].push(f)}else if(I[l].length<g)I[l].push(f)}}}}let q=Array.from(v.values());for(let S of q)for(let[B,A]of Object.entries(_))if(A.relation!=="one-to-one"){let E=F(B);if(Array.isArray(S[E])){let I=A.limit??100;if(S[E].length>I)S[E]=S[E].slice(0,I)}}return q}return{async create({data:P,model:_}){return await L(P,K.insertInto(_).values(P),_,[])},async findOne({model:P,where:_,select:T,join:v}){let{and:q,or:S}=D(P,_),B=K.selectFrom((u)=>{let b=u.selectFrom(P);if(q)b=b.where((g)=>g.and(q.map((f)=>f(g))));if(S)b=b.where((g)=>g.or(S.map((f)=>f(g))));return b.selectAll().as("primary")}).selectAll("primary");if(v)for(let[u,b]of Object.entries(v)){let[g,f]=u.includes(".")?u.split("."):[void 0,u];B=B.leftJoin(`${u} as join_${f}`,(p)=>p.onRef(`join_${f}.${b.on.to}`,"=",`primary.${b.on.from}`))}let{allSelectsStr:A,allSelects:E}=Z(v);B=B.select(E);let I=await B.execute();if(!I||!Array.isArray(I)||I.length===0)return null;let m=I[0];if(v)return O(I,v,A)[0];return m},async findMany({model:P,where:_,limit:T,offset:v,sortBy:q,join:S}){let{and:B,or:A}=D(P,_),E=K.selectFrom((b)=>{let g=b.selectFrom(P);if(W?.type==="mssql"){if(v!==void 0){if(!q)g=g.orderBy(w({model:P,field:"id"}));g=g.offset(v).fetch(T||100)}else if(T!==void 0)g=g.top(T)}else{if(T!==void 0)g=g.limit(T);if(v!==void 0)g=g.offset(v)}if(q?.field)g=g.orderBy(`${w({model:P,field:q.field})}`,q.direction);if(B)g=g.where((f)=>f.and(B.map((p)=>p(f))));if(A)g=g.where((f)=>f.or(A.map((p)=>p(f))));return g.selectAll().as("primary")}).selectAll("primary");if(S)for(let[b,g]of Object.entries(S)){let[f,p]=b.includes(".")?b.split("."):[void 0,b];E=E.leftJoin(`${b} as join_${p}`,(l)=>l.onRef(`join_${p}.${g.on.to}`,"=",`primary.${g.on.from}`))}let{allSelectsStr:I,allSelects:m}=Z(S);if(E=E.select(m),q?.field)E=E.orderBy(`${w({model:P,field:q.field})}`,q.direction);let u=await E.execute();if(!u)return[];if(S)return O(u,S,I);return u},async update({model:P,where:_,update:T}){let{and:v,or:q}=D(P,_),S=K.updateTable(P).set(T);if(v)S=S.where((B)=>B.and(v.map((A)=>A(B))));if(q)S=S.where((B)=>B.or(q.map((A)=>A(B))));return await L(T,S,P,_)},async updateMany({model:P,where:_,update:T}){let{and:v,or:q}=D(P,_),S=K.updateTable(P).set(T);if(v)S=S.where((B)=>B.and(v.map((A)=>A(B))));if(q)S=S.where((B)=>B.or(q.map((A)=>A(B))));return(await S.execute()).length},async count({model:P,where:_}){let{and:T,or:v}=D(P,_),q=K.selectFrom(P).select(K.fn.count("id").as("count"));if(T)q=q.where((B)=>B.and(T.map((A)=>A(B))));if(v)q=q.where((B)=>B.or(v.map((A)=>A(B))));let S=await q.execute();if(typeof S[0].count==="number")return S[0].count;if(typeof S[0].count==="bigint")return Number(S[0].count);return parseInt(S[0].count)},async delete({model:P,where:_}){let{and:T,or:v}=D(P,_),q=K.deleteFrom(P);if(T)q=q.where((S)=>S.and(T.map((B)=>B(S))));if(v)q=q.where((S)=>S.or(v.map((B)=>B(S))));await q.execute()},async deleteMany({model:P,where:_}){let{and:T,or:v}=D(P,_),q=K.deleteFrom(P);if(T)q=q.where((S)=>S.and(T.map((B)=>B(S))));if(v)q=q.where((S)=>S.or(v.map((B)=>B(S))));return(await q.execute()).length},options:W}}},Y=null;Y={config:{adapterId:"kysely",adapterName:"Kysely Adapter",usePlural:W?.usePlural,debugLogs:W?.debugLogs,supportsBooleans:W?.type==="sqlite"||W?.type==="mssql"||W?.type==="mysql"||!W?.type?!1:!0,supportsDates:W?.type==="sqlite"||W?.type==="mssql"||!W?.type?!1:!0,supportsJSON:!1,supportsUUIDs:W?.type==="postgres"?!0:!1,transaction:W?.transaction?(K)=>J.transaction().execute((w)=>{return K(i$({config:Y.config,adapter:G(w)})(X))}):!1},adapter:G(J)};let $=i$(Y);return(K)=>{return X=K,$(K)}};var zM=M(()=>{iX();CJ();Y8();J0();BW();jG();I8();wM();NJ()});var RO=v6((Ni)=>{Ni.parse=function(J,W){return new IO(J,W).parse()};class IO{constructor(J,W){this.source=J,this.transform=W||zi,this.position=0,this.entries=[],this.recorded=[],this.dimension=0}isEof(){return this.position>=this.source.length}nextCharacter(){var J=this.source[this.position++];if(J==="\\")return{value:this.source[this.position++],escaped:!0};return{value:J,escaped:!1}}record(J){this.recorded.push(J)}newEntry(J){var W;if(this.recorded.length>0||J){if(W=this.recorded.join(""),W==="NULL"&&!J)W=null;if(W!==null)W=this.transform(W);this.entries.push(W),this.recorded=[]}}consumeDimensions(){if(this.source[0]==="[")while(!this.isEof()){var J=this.nextCharacter();if(J.value==="=")break}}parse(J){var W,X,G;this.consumeDimensions();while(!this.isEof())if(W=this.nextCharacter(),W.value==="{"&&!G){if(this.dimension++,this.dimension>1)X=new IO(this.source.substr(this.position-1),this.transform),this.entries.push(X.parse(!0)),this.position+=X.position-2}else if(W.value==="}"&&!G){if(this.dimension--,!this.dimension){if(this.newEntry(),J)return this.entries}}else if(W.value==='"'&&!W.escaped){if(G)this.newEntry(!0);G=!G}else if(W.value===","&&!G)this.newEntry();else this.record(W.value);if(this.dimension!==0)throw Error("array dimension not balanced");return this.entries}}function zi(J){return J}});var CO=v6((UR6,SC)=>{var Ui=RO();SC.exports={create:function(J,W){return{parse:function(){return Ui.parse(J,W)}}}}});var qC=v6((QR6,TC)=>{var Qi=/(\d{1,})-(\d{2})-(\d{2}) (\d{2}):(\d{2}):(\d{2})(\.\d{1,})?.*?( BC)?$/,Zi=/^(\d{1,})-(\d{2})-(\d{2})( BC)?$/,Li=/([Z+-])(\d{2})?:?(\d{2})?:?(\d{2})?/,Vi=/^-?infinity$/;TC.exports=function(W){if(Vi.test(W))return Number(W.replace("i","I"));var X=Qi.exec(W);if(!X)return Di(W)||null;var G=!!X[8],Y=parseInt(X[1],10);if(G)Y=_C(Y);var $=parseInt(X[2],10)-1,K=X[3],w=parseInt(X[4],10),H=parseInt(X[5],10),z=parseInt(X[6],10),N=X[7];N=N?1000*parseFloat(N):0;var U,F=Mi(W);if(F!=null){if(U=new Date(Date.UTC(Y,$,K,w,H,z,N)),bO(Y))U.setUTCFullYear(Y);if(F!==0)U.setTime(U.getTime()-F)}else if(U=new Date(Y,$,K,w,H,z,N),bO(Y))U.setFullYear(Y);return U};function Di(J){var W=Zi.exec(J);if(!W)return;var X=parseInt(W[1],10),G=!!W[4];if(G)X=_C(X);var Y=parseInt(W[2],10)-1,$=W[3],K=new Date(X,Y,$);if(bO(X))K.setFullYear(X);return K}function Mi(J){if(J.endsWith("+00"))return 0;var W=Li.exec(J.split(" ")[1]);if(!W)return;var X=W[1];if(X==="Z")return 0;var G=X==="-"?-1:1,Y=parseInt(W[2],10)*3600+parseInt(W[3]||0,10)*60+parseInt(W[4]||0,10);return Y*G*1000}function _C(J){return-(J-1)}function bO(J){return J>=0&&J<100}});var AC=v6((ZR6,BC)=>{BC.exports=Pi;var Oi=Object.prototype.hasOwnProperty;function Pi(J){for(var W=1;W<arguments.length;W++){var X=arguments[W];for(var G in X)if(Oi.call(X,G))J[G]=X[G]}return J}});var RC=v6((LR6,IC)=>{var vi=AC();IC.exports=fG;function fG(J){if(!(this instanceof fG))return new fG(J);vi(this,bi(J))}var ji=["seconds","minutes","hours","days","months","years"];fG.prototype.toPostgres=function(){var J=ji.filter(this.hasOwnProperty,this);if(this.milliseconds&&J.indexOf("seconds")<0)J.push("seconds");if(J.length===0)return"0";return J.map(function(W){var X=this[W]||0;if(W==="seconds"&&this.milliseconds)X=(X+this.milliseconds/1000).toFixed(6).replace(/\.?0+$/,"");return X+" "+W},this).join(" ")};var Si={years:"Y",months:"M",days:"D",hours:"H",minutes:"M",seconds:"S"},_i=["years","months","days"],Ti=["hours","minutes","seconds"];fG.prototype.toISOString=fG.prototype.toISO=function(){var J=_i.map(X,this).join(""),W=Ti.map(X,this).join("");return"P"+J+"T"+W;function X(G){var Y=this[G]||0;if(G==="seconds"&&this.milliseconds)Y=(Y+this.milliseconds/1000).toFixed(6).replace(/0+$/,"");return Y+Si[G]}};var kO="([+-]?\\d+)",qi=kO+"\\s+years?",Bi=kO+"\\s+mons?",Ai=kO+"\\s+days?",Ei="([+-])?([\\d]*):(\\d\\d):(\\d\\d)\\.?(\\d{1,6})?",Ii=new RegExp([qi,Bi,Ai,Ei].map(function(J){return"("+J+")?"}).join("\\s*")),EC={years:2,months:4,days:6,hours:9,minutes:10,seconds:11,milliseconds:12},Ri=["hours","minutes","seconds","milliseconds"];function Ci(J){var W=J+"000000".slice(J.length);return parseInt(W,10)/1000}function bi(J){if(!J)return{};var W=Ii.exec(J),X=W[8]==="-";return Object.keys(EC).reduce(function(G,Y){var $=EC[Y],K=W[$];if(!K)return G;if(K=Y==="milliseconds"?Ci(K):parseInt(K,10),!K)return G;if(X&&~Ri.indexOf(Y))K*=-1;return G[Y]=K,G},{})}});var bC=v6((VR6,CC)=>{CC.exports=function(W){if(/^\\x/.test(W))return new Buffer(W.substr(2),"hex");var X="",G=0;while(G<W.length)if(W[G]!=="\\")X+=W[G],++G;else if(/[0-7]{3}/.test(W.substr(G+1,3)))X+=String.fromCharCode(parseInt(W.substr(G+1,3),8)),G+=4;else{var Y=1;while(G+Y<W.length&&W[G+Y]==="\\")Y++;for(var $=0;$<Math.floor(Y/2);++$)X+="\\";G+=Math.floor(Y/2)*2}return new Buffer(X,"binary")}});var xC=v6((DR6,yC)=>{var T5=RO(),q5=CO(),b3=qC(),hC=RC(),gC=bC();function k3(J){return function(X){if(X===null)return X;return J(X)}}function mC(J){if(J===null)return J;return J==="TRUE"||J==="t"||J==="true"||J==="y"||J==="yes"||J==="on"||J==="1"}function ki(J){if(!J)return null;return T5.parse(J,mC)}function hi(J){return parseInt(J,10)}function hO(J){if(!J)return null;return T5.parse(J,k3(hi))}function gi(J){if(!J)return null;return T5.parse(J,k3(function(W){return fC(W).trim()}))}var mi=function(J){if(!J)return null;var W=q5.create(J,function(X){if(X!==null)X=yO(X);return X});return W.parse()},gO=function(J){if(!J)return null;var W=q5.create(J,function(X){if(X!==null)X=parseFloat(X);return X});return W.parse()},c8=function(J){if(!J)return null;var W=q5.create(J);return W.parse()},mO=function(J){if(!J)return null;var W=q5.create(J,function(X){if(X!==null)X=b3(X);return X});return W.parse()},fi=function(J){if(!J)return null;var W=q5.create(J,function(X){if(X!==null)X=hC(X);return X});return W.parse()},yi=function(J){if(!J)return null;return T5.parse(J,k3(gC))},fO=function(J){return parseInt(J,10)},fC=function(J){var W=String(J);if(/^\d+$/.test(W))return W;return J},kC=function(J){if(!J)return null;return T5.parse(J,k3(JSON.parse))},yO=function(J){if(J[0]!=="(")return null;return J=J.substring(1,J.length-1).split(","),{x:parseFloat(J[0]),y:parseFloat(J[1])}},xi=function(J){if(J[0]!=="<"&&J[1]!=="(")return null;var W="(",X="",G=!1;for(var Y=2;Y<J.length-1;Y++){if(!G)W+=J[Y];if(J[Y]===")"){G=!0;continue}else if(!G)continue;if(J[Y]===",")continue;X+=J[Y]}var $=yO(W);return $.radius=parseFloat(X),$},ui=function(J){J(20,fC),J(21,fO),J(23,fO),J(26,fO),J(700,parseFloat),J(701,parseFloat),J(16,mC),J(1082,b3),J(1114,b3),J(1184,b3),J(600,yO),J(651,c8),J(718,xi),J(1000,ki),J(1001,yi),J(1005,hO),J(1007,hO),J(1028,hO),J(1016,gi),J(1017,mi),J(1021,gO),J(1022,gO),J(1231,gO),J(1014,c8),J(1015,c8),J(1008,c8),J(1009,c8),J(1040,c8),J(1041,c8),J(1115,mO),J(1182,mO),J(1185,mO),J(1186,hC),J(1187,fi),J(17,gC),J(114,JSON.parse.bind(JSON)),J(3802,JSON.parse.bind(JSON)),J(199,kC),J(3807,kC),J(3907,c8),J(2951,c8),J(791,c8),J(1183,c8),J(1270,c8)};yC.exports={init:ui}});var cC=v6((MR6,uC)=>{var w8=1e6;function ci(J){var W=J.readInt32BE(0),X=J.readUInt32BE(4),G="";if(W<0)W=~W+(X===0),X=~X+1>>>0,G="-";var Y="",$,K,w,H,z,N;{if($=W%w8,W=W/w8>>>0,K=4294967296*$+X,X=K/w8>>>0,w=""+(K-w8*X),X===0&&W===0)return G+w+Y;H="",z=6-w.length;for(N=0;N<z;N++)H+="0";Y=H+w+Y}{if($=W%w8,W=W/w8>>>0,K=4294967296*$+X,X=K/w8>>>0,w=""+(K-w8*X),X===0&&W===0)return G+w+Y;H="",z=6-w.length;for(N=0;N<z;N++)H+="0";Y=H+w+Y}{if($=W%w8,W=W/w8>>>0,K=4294967296*$+X,X=K/w8>>>0,w=""+(K-w8*X),X===0&&W===0)return G+w+Y;H="",z=6-w.length;for(N=0;N<z;N++)H+="0";Y=H+w+Y}return $=W%w8,K=4294967296*$+X,w=""+K%w8,G+w+Y}uC.exports=ci});var nC=v6((OR6,rC)=>{var li=cC(),R4=function(J,W,X,G,Y){X=X||0,G=G||!1,Y=Y||function(Z,L,D){return Z*Math.pow(2,D)+L};var $=X>>3,K=function(Z){if(G)return~Z&255;return Z},w=255,H=8-X%8;if(W<H)w=255<<8-W&255,H=W;if(X)w=w>>X%8;var z=0;if(X%8+W>=8)z=Y(0,K(J[$])&w,H);var N=W+X>>3;for(var U=$+1;U<N;U++)z=Y(z,K(J[U]),8);var F=(W+X)%8;if(F>0)z=Y(z,K(J[N])>>8-F,F);return z},dC=function(J,W,X){var G=Math.pow(2,X-1)-1,Y=R4(J,1),$=R4(J,X,1);if($===0)return 0;var K=1,w=function(z,N,U){if(z===0)z=1;for(var F=1;F<=U;F++)if(K/=2,(N&1<<U-F)>0)z+=K;return z},H=R4(J,W,X+1,!1,w);if($==Math.pow(2,X+1)-1){if(H===0)return Y===0?1/0:-1/0;return NaN}return(Y===0?1:-1)*Math.pow(2,$-G)*H},pi=function(J){if(R4(J,1)==1)return-1*(R4(J,15,1,!0)+1);return R4(J,15,1)},lC=function(J){if(R4(J,1)==1)return-1*(R4(J,31,1,!0)+1);return R4(J,31,1)},di=function(J){return dC(J,23,8)},ri=function(J){return dC(J,52,11)},ni=function(J){var W=R4(J,16,32);if(W==49152)return NaN;var X=Math.pow(1e4,R4(J,16,16)),G=0,Y=[],$=R4(J,16);for(var K=0;K<$;K++)G+=R4(J,16,64+16*K)*X,X/=1e4;var w=Math.pow(10,R4(J,16,48));return(W===0?1:-1)*Math.round(G*w)/w},pC=function(J,W){var X=R4(W,1),G=R4(W,63,1),Y=new Date((X===0?1:-1)*G/1000+946684800000);if(!J)Y.setTime(Y.getTime()+Y.getTimezoneOffset()*60000);return Y.usec=G%1000,Y.getMicroSeconds=function(){return this.usec},Y.setMicroSeconds=function($){this.usec=$},Y.getUTCMicroSeconds=function(){return this.usec},Y},B5=function(J){var W=R4(J,32),X=R4(J,32,32),G=R4(J,32,64),Y=96,$=[];for(var K=0;K<W;K++)$[K]=R4(J,32,Y),Y+=32,Y+=32;var w=function(z){var N=R4(J,32,Y);if(Y+=32,N==4294967295)return null;var U;if(z==23||z==20)return U=R4(J,N*8,Y),Y+=N*8,U;else if(z==25)return U=J.toString(this.encoding,Y>>3,(Y+=N<<3)>>3),U;else console.log("ERROR: ElementType not implemented: "+z)},H=function(z,N){var U=[],F;if(z.length>1){var Z=z.shift();for(F=0;F<Z;F++)U[F]=H(z,N);z.unshift(Z)}else for(F=0;F<z[0];F++)U[F]=w(N);return U};return H($,G)},ii=function(J){return J.toString("utf8")},ai=function(J){if(J===null)return null;return R4(J,8)>0},ti=function(J){J(20,li),J(21,pi),J(23,lC),J(26,lC),J(1700,ni),J(700,di),J(701,ri),J(16,ai),J(1114,pC.bind(null,!1)),J(1184,pC.bind(null,!0)),J(1000,B5),J(1007,B5),J(1016,B5),J(1008,B5),J(1009,B5),J(25,ii)};rC.exports={init:ti}});var aC=v6((PR6,iC)=>{iC.exports={BOOL:16,BYTEA:17,CHAR:18,INT8:20,INT2:21,INT4:23,REGPROC:24,TEXT:25,OID:26,TID:27,XID:28,CID:29,JSON:114,XML:142,PG_NODE_TREE:194,SMGR:210,PATH:602,POLYGON:604,CIDR:650,FLOAT4:700,FLOAT8:701,ABSTIME:702,RELTIME:703,TINTERVAL:704,CIRCLE:718,MACADDR8:774,MONEY:790,MACADDR:829,INET:869,ACLITEM:1033,BPCHAR:1042,VARCHAR:1043,DATE:1082,TIME:1083,TIMESTAMP:1114,TIMESTAMPTZ:1184,INTERVAL:1186,TIMETZ:1266,BIT:1560,VARBIT:1562,NUMERIC:1700,REFCURSOR:1790,REGPROCEDURE:2202,REGOPER:2203,REGOPERATOR:2204,REGCLASS:2205,REGTYPE:2206,UUID:2950,TXID_SNAPSHOT:2970,PG_LSN:3220,PG_NDISTINCT:3361,PG_DEPENDENCIES:3402,TSVECTOR:3614,TSQUERY:3615,GTSVECTOR:3642,REGCONFIG:3734,REGDICTIONARY:3769,JSONB:3802,REGNAMESPACE:4089,REGROLE:4096}});var E5=v6((Ya)=>{var oi=xC(),si=nC(),ei=CO(),Ja=aC();Ya.getTypeParser=Wa;Ya.setTypeParser=Xa;Ya.arrayParser=ei;Ya.builtins=Ja;var A5={text:{},binary:{}};function tC(J){return String(J)}function Wa(J,W){if(W=W||"text",!A5[W])return tC;return A5[W][J]||tC}function Xa(J,W,X){if(typeof W=="function")X=W,W="text";A5[W][J]=X}oi.init(function(J,W){A5.text[J]=W});si.init(function(J,W){A5.binary[J]=W})});var I5=v6((jR6,xO)=>{xO.exports={host:"localhost",user:process.platform==="win32"?process.env.USERNAME:process.env.USER,database:void 0,password:null,connectionString:void 0,port:5432,rows:0,binary:!1,max:10,idleTimeoutMillis:30000,client_encoding:"",ssl:!1,application_name:void 0,fallback_application_name:void 0,options:void 0,parseInputDatesAsUTC:!1,statement_timeout:!1,lock_timeout:!1,idle_in_transaction_session_timeout:!1,query_timeout:!1,connect_timeout:0,keepalives:1,keepalives_idle:0};var yG=E5(),Ha=yG.getTypeParser(20,"text"),za=yG.getTypeParser(1016,"text");xO.exports.__defineSetter__("parseInt8",function(J){yG.setTypeParser(20,"text",J?yG.getTypeParser(23,"text"):Ha),yG.setTypeParser(1016,"text",J?yG.getTypeParser(1007,"text"):za)})});var xG=v6((SR6,eC)=>{var Na=I5(),oC=Q4("util"),{isDate:Fa}=oC.types||oC;function Ua(J){return'"'+J.replace(/\\/g,"\\\\").replace(/"/g,"\\\"")+'"'}function sC(J){let W="{";for(let X=0;X<J.length;X++){if(X>0)W=W+",";if(J[X]===null||typeof J[X]>"u")W=W+"NULL";else if(Array.isArray(J[X]))W=W+sC(J[X]);else if(ArrayBuffer.isView(J[X])){let G=J[X];if(!(G instanceof Buffer)){let Y=Buffer.from(G.buffer,G.byteOffset,G.byteLength);if(Y.length===G.byteLength)G=Y;else G=Y.slice(G.byteOffset,G.byteOffset+G.byteLength)}W+="\\\\x"+G.toString("hex")}else W+=Ua(h3(J[X]))}return W=W+"}",W}var h3=function(J,W){if(J==null)return null;if(typeof J==="object"){if(J instanceof Buffer)return J;if(ArrayBuffer.isView(J)){let X=Buffer.from(J.buffer,J.byteOffset,J.byteLength);if(X.length===J.byteLength)return X;return X.slice(J.byteOffset,J.byteOffset+J.byteLength)}if(Fa(J))if(Na.parseInputDatesAsUTC)return La(J);else return Za(J);if(Array.isArray(J))return sC(J);return Qa(J,W)}return J.toString()};function Qa(J,W){if(J&&typeof J.toPostgres==="function"){if(W=W||[],W.indexOf(J)!==-1)throw Error('circular reference detected while preparing "'+J+'" for query');return W.push(J),h3(J.toPostgres(h3),W)}return JSON.stringify(J)}function Za(J){let W=-J.getTimezoneOffset(),X=J.getFullYear(),G=X<1;if(G)X=Math.abs(X)+1;let Y=String(X).padStart(4,"0")+"-"+String(J.getMonth()+1).padStart(2,"0")+"-"+String(J.getDate()).padStart(2,"0")+"T"+String(J.getHours()).padStart(2,"0")+":"+String(J.getMinutes()).padStart(2,"0")+":"+String(J.getSeconds()).padStart(2,"0")+"."+String(J.getMilliseconds()).padStart(3,"0");if(W<0)Y+="-",W*=-1;else Y+="+";if(Y+=String(Math.floor(W/60)).padStart(2,"0")+":"+String(W%60).padStart(2,"0"),G)Y+=" BC";return Y}function La(J){let W=J.getUTCFullYear(),X=W<1;if(X)W=Math.abs(W)+1;let G=String(W).padStart(4,"0")+"-"+String(J.getUTCMonth()+1).padStart(2,"0")+"-"+String(J.getUTCDate()).padStart(2,"0")+"T"+String(J.getUTCHours()).padStart(2,"0")+":"+String(J.getUTCMinutes()).padStart(2,"0")+":"+String(J.getUTCSeconds()).padStart(2,"0")+"."+String(J.getUTCMilliseconds()).padStart(3,"0");if(G+="+00:00",X)G+=" BC";return G}function Va(J,W,X){if(J=typeof J==="string"?{text:J}:J,W)if(typeof W==="function")J.callback=W;else J.values=W;if(X)J.callback=X;return J}var Da=function(J){return'"'+J.replace(/"/g,'""')+'"'},Ma=function(J){let W=!1,X="'";if(J==null)return"''";if(typeof J!=="string")return"''";for(let G=0;G<J.length;G++){let Y=J[G];if(Y==="'")X+=Y+Y;else if(Y==="\\")X+=Y+Y,W=!0;else X+=Y}if(X+="'",W===!0)X=" E"+X;return X};eC.exports={prepareValue:function(W){return h3(W)},normalizeQueryConfig:Va,escapeIdentifier:Da,escapeLiteral:Ma}});var Wb=v6((_R6,Jb)=>{var uG=Q4("crypto");function uO(J){return uG.createHash("md5").update(J,"utf-8").digest("hex")}function Oa(J,W,X){let G=uO(W+J);return"md5"+uO(Buffer.concat([Buffer.from(G),X]))}function Pa(J){return uG.createHash("sha256").update(J).digest()}function va(J,W){return J=J.replace(/(\D)-/,"$1"),uG.createHash(J).update(W).digest()}function ja(J,W){return uG.createHmac("sha256",J).update(W).digest()}async function Sa(J,W,X){return uG.pbkdf2Sync(J,W,X,32,"sha256")}Jb.exports={postgresMd5PasswordHash:Oa,randomBytes:uG.randomBytes,deriveKey:Sa,sha256:Pa,hashByName:va,hmacSha256:ja,md5:uO}});var $b=v6((TR6,Gb)=>{var Xb=Q4("crypto");Gb.exports={postgresMd5PasswordHash:Ta,randomBytes:_a,deriveKey:Ea,sha256:qa,hashByName:Ba,hmacSha256:Aa,md5:cO};var Yb=Xb.webcrypto||globalThis.crypto,I1=Yb.subtle,lO=new TextEncoder;function _a(J){return Yb.getRandomValues(Buffer.alloc(J))}async function cO(J){try{return Xb.createHash("md5").update(J,"utf-8").digest("hex")}catch(W){let X=typeof J==="string"?lO.encode(J):J,G=await I1.digest("MD5",X);return Array.from(new Uint8Array(G)).map((Y)=>Y.toString(16).padStart(2,"0")).join("")}}async function Ta(J,W,X){let G=await cO(W+J);return"md5"+await cO(Buffer.concat([Buffer.from(G),X]))}async function qa(J){return await I1.digest("SHA-256",J)}async function Ba(J,W){return await I1.digest(J,W)}async function Aa(J,W){let X=await I1.importKey("raw",J,{name:"HMAC",hash:"SHA-256"},!1,["sign"]);return await I1.sign("HMAC",X,lO.encode(W))}async function Ea(J,W,X){let G=await I1.importKey("raw",lO.encode(J),"PBKDF2",!1,["deriveBits"]),Y={name:"PBKDF2",hash:"SHA-256",salt:W,iterations:X};return await I1.deriveBits(Y,G,256,["deriveBits"])}});var dO=v6((qR6,pO)=>{var Ia=parseInt(process.versions&&process.versions.node&&process.versions.node.split(".")[0])<15;if(Ia)pO.exports=Wb();else pO.exports=$b()});var Hb=v6((BR6,wb)=>{function R1(J,W){return Error("SASL channel binding: "+J+" when parsing public certificate "+W.toString("base64"))}function rO(J,W){let X=J[W++];if(X<128)return{length:X,index:W};let G=X&127;if(G>4)throw R1("bad length",J);X=0;for(let Y=0;Y<G;Y++)X=X<<8|J[W++];return{length:X,index:W}}function Kb(J,W){if(J[W++]!==6)throw R1("non-OID data",J);let{length:X,index:G}=rO(J,W);W=G;let Y=W+X,$=J[W++],K=($/40>>0)+"."+$%40;while(W<Y){let w=0;while(W<Y){let H=J[W++];if(w=w<<7|H&127,H<128)break}K+="."+w}return{oid:K,index:W}}function R5(J,W){if(J[W++]!==48)throw R1("non-sequence data",J);return rO(J,W)}function Ra(J,W){if(W===void 0)W=0;W=R5(J,W).index;let{length:X,index:G}=R5(J,W);W=G+X,W=R5(J,W).index;let{oid:Y,index:$}=Kb(J,W);switch(Y){case"1.2.840.113549.1.1.4":return"MD5";case"1.2.840.113549.1.1.5":return"SHA-1";case"1.2.840.113549.1.1.11":return"SHA-256";case"1.2.840.113549.1.1.12":return"SHA-384";case"1.2.840.113549.1.1.13":return"SHA-512";case"1.2.840.113549.1.1.14":return"SHA-224";case"1.2.840.113549.1.1.15":return"SHA512-224";case"1.2.840.113549.1.1.16":return"SHA512-256";case"1.2.840.10045.4.1":return"SHA-1";case"1.2.840.10045.4.3.1":return"SHA-224";case"1.2.840.10045.4.3.2":return"SHA-256";case"1.2.840.10045.4.3.3":return"SHA-384";case"1.2.840.10045.4.3.4":return"SHA-512";case"1.2.840.113549.1.1.10":{if(W=$,W=R5(J,W).index,J[W++]!==160)throw R1("non-tag data",J);W=rO(J,W).index,W=R5(J,W).index;let{oid:K}=Kb(J,W);switch(K){case"1.2.840.113549.2.5":return"MD5";case"1.3.14.3.2.26":return"SHA-1";case"2.16.840.1.101.3.4.2.1":return"SHA-256";case"2.16.840.1.101.3.4.2.2":return"SHA-384";case"2.16.840.1.101.3.4.2.3":return"SHA-512"}throw R1("unknown hash OID "+K,J)}case"1.3.101.110":case"1.3.101.112":return"SHA-512";case"1.3.101.111":case"1.3.101.113":throw R1("Ed448 certificate channel binding is not currently supported by Postgres")}throw R1("unknown OID "+Y,J)}wb.exports={signatureAlgorithmHashFromCertificate:Ra}});var Ub=v6((AR6,Fb)=>{var AX=dO(),{signatureAlgorithmHashFromCertificate:Ca}=Hb();function ba(J,W){let X=["SCRAM-SHA-256"];if(W)X.unshift("SCRAM-SHA-256-PLUS");let G=X.find((K)=>J.includes(K));if(!G)throw Error("SASL: Only mechanism(s) "+X.join(" and ")+" are supported");if(G==="SCRAM-SHA-256-PLUS"&&typeof W.getPeerCertificate!=="function")throw Error("SASL: Mechanism SCRAM-SHA-256-PLUS requires a certificate");let Y=AX.randomBytes(18).toString("base64");return{mechanism:G,clientNonce:Y,response:(G==="SCRAM-SHA-256-PLUS"?"p=tls-server-end-point":W?"y":"n")+",,n=*,r="+Y,message:"SASLInitialResponse"}}async function ka(J,W,X,G){if(J.message!=="SASLInitialResponse")throw Error("SASL: Last message was not SASLInitialResponse");if(typeof W!=="string")throw Error("SASL: SCRAM-SERVER-FIRST-MESSAGE: client password must be a string");if(W==="")throw Error("SASL: SCRAM-SERVER-FIRST-MESSAGE: client password must be a non-empty string");if(typeof X!=="string")throw Error("SASL: SCRAM-SERVER-FIRST-MESSAGE: serverData must be a string");let Y=ma(X);if(!Y.nonce.startsWith(J.clientNonce))throw Error("SASL: SCRAM-SERVER-FIRST-MESSAGE: server nonce does not start with client nonce");else if(Y.nonce.length===J.clientNonce.length)throw Error("SASL: SCRAM-SERVER-FIRST-MESSAGE: server nonce is too short");let $="n=*,r="+J.clientNonce,K="r="+Y.nonce+",s="+Y.salt+",i="+Y.iteration,w=G?"eSws":"biws";if(J.mechanism==="SCRAM-SHA-256-PLUS"){let _=G.getPeerCertificate().raw,T=Ca(_);if(T==="MD5"||T==="SHA-1")T="SHA-256";let v=await AX.hashByName(T,_);w=Buffer.concat([Buffer.from("p=tls-server-end-point,,"),Buffer.from(v)]).toString("base64")}let H="c="+w+",r="+Y.nonce,z=$+","+K+","+H,N=Buffer.from(Y.salt,"base64"),U=await AX.deriveKey(W,N,Y.iteration),F=await AX.hmacSha256(U,"Client Key"),Z=await AX.sha256(F),L=await AX.hmacSha256(Z,z),D=ya(Buffer.from(F),Buffer.from(L)).toString("base64"),O=await AX.hmacSha256(U,"Server Key"),P=await AX.hmacSha256(O,z);J.message="SASLResponse",J.serverSignature=Buffer.from(P).toString("base64"),J.response=H+",p="+D}function ha(J,W){if(J.message!=="SASLResponse")throw Error("SASL: Last message was not SASLResponse");if(typeof W!=="string")throw Error("SASL: SCRAM-SERVER-FINAL-MESSAGE: serverData must be a string");let{serverSignature:X}=fa(W);if(X!==J.serverSignature)throw Error("SASL: SCRAM-SERVER-FINAL-MESSAGE: server signature does not match")}function ga(J){if(typeof J!=="string")throw TypeError("SASL: text must be a string");return J.split("").map((W,X)=>J.charCodeAt(X)).every((W)=>W>=33&&W<=43||W>=45&&W<=126)}function zb(J){return/^(?:[a-zA-Z0-9+/]{4})*(?:[a-zA-Z0-9+/]{2}==|[a-zA-Z0-9+/]{3}=)?$/.test(J)}function Nb(J){if(typeof J!=="string")throw TypeError("SASL: attribute pairs text must be a string");return new Map(J.split(",").map((W)=>{if(!/^.=/.test(W))throw Error("SASL: Invalid attribute pair entry");let X=W[0],G=W.substring(2);return[X,G]}))}function ma(J){let W=Nb(J),X=W.get("r");if(!X)throw Error("SASL: SCRAM-SERVER-FIRST-MESSAGE: nonce missing");else if(!ga(X))throw Error("SASL: SCRAM-SERVER-FIRST-MESSAGE: nonce must only contain printable characters");let G=W.get("s");if(!G)throw Error("SASL: SCRAM-SERVER-FIRST-MESSAGE: salt missing");else if(!zb(G))throw Error("SASL: SCRAM-SERVER-FIRST-MESSAGE: salt must be base64");let Y=W.get("i");if(!Y)throw Error("SASL: SCRAM-SERVER-FIRST-MESSAGE: iteration missing");else if(!/^[1-9][0-9]*$/.test(Y))throw Error("SASL: SCRAM-SERVER-FIRST-MESSAGE: invalid iteration count");let $=parseInt(Y,10);return{nonce:X,salt:G,iteration:$}}function fa(J){let X=Nb(J).get("v");if(!X)throw Error("SASL: SCRAM-SERVER-FINAL-MESSAGE: server signature is missing");else if(!zb(X))throw Error("SASL: SCRAM-SERVER-FINAL-MESSAGE: server signature must be base64");return{serverSignature:X}}function ya(J,W){if(!Buffer.isBuffer(J))throw TypeError("first argument must be a Buffer");if(!Buffer.isBuffer(W))throw TypeError("second argument must be a Buffer");if(J.length!==W.length)throw Error("Buffer lengths must match");if(J.length===0)throw Error("Buffers cannot be empty");return Buffer.from(J.map((X,G)=>J[G]^W[G]))}Fb.exports={startSession:ba,continueSession:ka,finalizeSession:ha}});var m3=v6((ER6,Qb)=>{var xa=E5();function g3(J){this._types=J||xa,this.text={},this.binary={}}g3.prototype.getOverrides=function(J){switch(J){case"text":return this.text;case"binary":return this.binary;default:return{}}};g3.prototype.setTypeParser=function(J,W,X){if(typeof W==="function")X=W,W="text";this.getOverrides(W)[J]=X};g3.prototype.getTypeParser=function(J,W){return W=W||"text",this.getOverrides(W)[J]||this._types.getTypeParser(J,W)};Qb.exports=g3});var Vb=v6((IR6,Lb)=>{function cG(J,W={}){if(J.charAt(0)==="/"){let H=J.split(" ");return{host:H[0],database:H[1]}}let X={},G,Y=!1;if(/ |%[^a-f0-9]|%[a-f0-9][^a-f0-9]/i.test(J))J=encodeURI(J).replace(/%25(\d\d)/g,"%$1");try{try{G=new URL(J,"postgres://base")}catch(H){G=new URL(J.replace("@/","@___DUMMY___/"),"postgres://base"),Y=!0}}catch(H){H.input&&(H.input="*****REDACTED*****")}for(let H of G.searchParams.entries())X[H[0]]=H[1];if(X.user=X.user||decodeURIComponent(G.username),X.password=X.password||decodeURIComponent(G.password),G.protocol=="socket:")return X.host=decodeURI(G.pathname),X.database=G.searchParams.get("db"),X.client_encoding=G.searchParams.get("encoding"),X;let $=Y?"":G.hostname;if(!X.host)X.host=decodeURIComponent($);else if($&&/^%2f/i.test($))G.pathname=$+G.pathname;if(!X.port)X.port=G.port;let K=G.pathname.slice(1)||null;if(X.database=K?decodeURI(K):null,X.ssl==="true"||X.ssl==="1")X.ssl=!0;if(X.ssl==="0")X.ssl=!1;if(X.sslcert||X.sslkey||X.sslrootcert||X.sslmode)X.ssl={};let w=X.sslcert||X.sslkey||X.sslrootcert?Q4("fs"):null;if(X.sslcert)X.ssl.cert=w.readFileSync(X.sslcert).toString();if(X.sslkey)X.ssl.key=w.readFileSync(X.sslkey).toString();if(X.sslrootcert)X.ssl.ca=w.readFileSync(X.sslrootcert).toString();if(W.useLibpqCompat&&X.uselibpqcompat)throw Error("Both useLibpqCompat and uselibpqcompat are set. Please use only one of them.");if(X.uselibpqcompat==="true"||W.useLibpqCompat)switch(X.sslmode){case"disable":{X.ssl=!1;break}case"prefer":{X.ssl.rejectUnauthorized=!1;break}case"require":{if(X.sslrootcert)X.ssl.checkServerIdentity=function(){};else X.ssl.rejectUnauthorized=!1;break}case"verify-ca":{if(!X.ssl.ca)throw Error("SECURITY WARNING: Using sslmode=verify-ca requires specifying a CA with sslrootcert. If a public CA is used, verify-ca allows connections to a server that somebody else may have registered with the CA, making you vulnerable to Man-in-the-Middle attacks. Either specify a custom CA certificate with sslrootcert parameter or use sslmode=verify-full for proper security.");X.ssl.checkServerIdentity=function(){};break}case"verify-full":break}else switch(X.sslmode){case"disable":{X.ssl=!1;break}case"prefer":case"require":case"verify-ca":case"verify-full":break;case"no-verify":{X.ssl.rejectUnauthorized=!1;break}}return X}function ua(J){return Object.entries(J).reduce((X,[G,Y])=>{if(Y!==void 0&&Y!==null)X[G]=Y;return X},{})}function Zb(J){return Object.entries(J).reduce((X,[G,Y])=>{if(G==="ssl"){let $=Y;if(typeof $==="boolean")X[G]=$;if(typeof $==="object")X[G]=ua($)}else if(Y!==void 0&&Y!==null)if(G==="port"){if(Y!==""){let $=parseInt(Y,10);if(isNaN($))throw Error(`Invalid ${G}: ${Y}`);X[G]=$}}else X[G]=Y;return X},{})}function ca(J){return Zb(cG(J))}Lb.exports=cG;cG.parse=cG;cG.toClientConfig=Zb;cG.parseIntoClientConfig=ca});var nO=v6((RR6,Pb)=>{var la=Q4("dns"),Mb=I5(),Db=Vb().parse,n0=function(J,W,X){if(X===void 0)X=process.env["PG"+J.toUpperCase()];else if(X===!1);else X=process.env[X];return W[J]||X||Mb[J]},pa=function(){switch(process.env.PGSSLMODE){case"disable":return!1;case"prefer":case"require":case"verify-ca":case"verify-full":return!0;case"no-verify":return{rejectUnauthorized:!1}}return Mb.ssl},lG=function(J){return"'"+(""+J).replace(/\\/g,"\\\\").replace(/'/g,"\\'")+"'"},l8=function(J,W,X){let G=W[X];if(G!==void 0&&G!==null)J.push(X+"="+lG(G))};class Ob{constructor(J){if(J=typeof J==="string"?Db(J):J||{},J.connectionString)J=Object.assign({},J,Db(J.connectionString));if(this.user=n0("user",J),this.database=n0("database",J),this.database===void 0)this.database=this.user;if(this.port=parseInt(n0("port",J),10),this.host=n0("host",J),Object.defineProperty(this,"password",{configurable:!0,enumerable:!1,writable:!0,value:n0("password",J)}),this.binary=n0("binary",J),this.options=n0("options",J),this.ssl=typeof J.ssl>"u"?pa():J.ssl,typeof this.ssl==="string"){if(this.ssl==="true")this.ssl=!0}if(this.ssl==="no-verify")this.ssl={rejectUnauthorized:!1};if(this.ssl&&this.ssl.key)Object.defineProperty(this.ssl,"key",{enumerable:!1});if(this.client_encoding=n0("client_encoding",J),this.replication=n0("replication",J),this.isDomainSocket=!(this.host||"").indexOf("/"),this.application_name=n0("application_name",J,"PGAPPNAME"),this.fallback_application_name=n0("fallback_application_name",J,!1),this.statement_timeout=n0("statement_timeout",J,!1),this.lock_timeout=n0("lock_timeout",J,!1),this.idle_in_transaction_session_timeout=n0("idle_in_transaction_session_timeout",J,!1),this.query_timeout=n0("query_timeout",J,!1),J.connectionTimeoutMillis===void 0)this.connect_timeout=process.env.PGCONNECT_TIMEOUT||0;else this.connect_timeout=Math.floor(J.connectionTimeoutMillis/1000);if(J.keepAlive===!1)this.keepalives=0;else if(J.keepAlive===!0)this.keepalives=1;if(typeof J.keepAliveInitialDelayMillis==="number")this.keepalives_idle=Math.floor(J.keepAliveInitialDelayMillis/1000)}getLibpqConnectionString(J){let W=[];l8(W,this,"user"),l8(W,this,"password"),l8(W,this,"port"),l8(W,this,"application_name"),l8(W,this,"fallback_application_name"),l8(W,this,"connect_timeout"),l8(W,this,"options");let X=typeof this.ssl==="object"?this.ssl:this.ssl?{sslmode:this.ssl}:{};if(l8(W,X,"sslmode"),l8(W,X,"sslca"),l8(W,X,"sslkey"),l8(W,X,"sslcert"),l8(W,X,"sslrootcert"),this.database)W.push("dbname="+lG(this.database));if(this.replication)W.push("replication="+lG(this.replication));if(this.host)W.push("host="+lG(this.host));if(this.isDomainSocket)return J(null,W.join(" "));if(this.client_encoding)W.push("client_encoding="+lG(this.client_encoding));la.lookup(this.host,function(G,Y){if(G)return J(G,null);return W.push("hostaddr="+lG(Y)),J(null,W.join(" "))})}}Pb.exports=Ob});var iO=v6((CR6,Sb)=>{var da=E5(),vb=/^([A-Za-z]+)(?: (\d+))?(?: (\d+))?/;class jb{constructor(J,W){if(this.command=null,this.rowCount=null,this.oid=null,this.rows=[],this.fields=[],this._parsers=void 0,this._types=W,this.RowCtor=null,this.rowAsArray=J==="array",this.rowAsArray)this.parseRow=this._parseRowAsArray;this._prebuiltEmptyResultObject=null}addCommandComplete(J){let W;if(J.text)W=vb.exec(J.text);else W=vb.exec(J.command);if(W){if(this.command=W[1],W[3])this.oid=parseInt(W[2],10),this.rowCount=parseInt(W[3],10);else if(W[2])this.rowCount=parseInt(W[2],10)}}_parseRowAsArray(J){let W=Array(J.length);for(let X=0,G=J.length;X<G;X++){let Y=J[X];if(Y!==null)W[X]=this._parsers[X](Y);else W[X]=null}return W}parseRow(J){let W={...this._prebuiltEmptyResultObject};for(let X=0,G=J.length;X<G;X++){let Y=J[X],$=this.fields[X].name;if(Y!==null){let K=this.fields[X].format==="binary"?Buffer.from(Y):Y;W[$]=this._parsers[X](K)}else W[$]=null}return W}addRow(J){this.rows.push(J)}addFields(J){if(this.fields=J,this.fields.length)this._parsers=Array(J.length);let W={};for(let X=0;X<J.length;X++){let G=J[X];if(W[G.name]=null,this._types)this._parsers[X]=this._types.getTypeParser(G.dataTypeID,G.format||"text");else this._parsers[X]=da.getTypeParser(G.dataTypeID,G.format||"text")}this._prebuiltEmptyResultObject={...W}}}Sb.exports=jb});var Ab=v6((bR6,Bb)=>{var{EventEmitter:ra}=Q4("events"),_b=iO(),Tb=xG();class qb extends ra{constructor(J,W,X){super();if(J=Tb.normalizeQueryConfig(J,W,X),this.text=J.text,this.values=J.values,this.rows=J.rows,this.types=J.types,this.name=J.name,this.queryMode=J.queryMode,this.binary=J.binary,this.portal=J.portal||"",this.callback=J.callback,this._rowMode=J.rowMode,process.domain&&J.callback)this.callback=process.domain.bind(J.callback);this._result=new _b(this._rowMode,this.types),this._results=this._result,this._canceledDueToError=!1}requiresPreparation(){if(this.queryMode==="extended")return!0;if(this.name)return!0;if(this.rows)return!0;if(!this.text)return!1;if(!this.values)return!1;return this.values.length>0}_checkForMultirow(){if(this._result.command){if(!Array.isArray(this._results))this._results=[this._result];this._result=new _b(this._rowMode,this._result._types),this._results.push(this._result)}}handleRowDescription(J){this._checkForMultirow(),this._result.addFields(J.fields),this._accumulateRows=this.callback||!this.listeners("row").length}handleDataRow(J){let W;if(this._canceledDueToError)return;try{W=this._result.parseRow(J.fields)}catch(X){this._canceledDueToError=X;return}if(this.emit("row",W,this._result),this._accumulateRows)this._result.addRow(W)}handleCommandComplete(J,W){if(this._checkForMultirow(),this._result.addCommandComplete(J),this.rows)W.sync()}handleEmptyQuery(J){if(this.rows)J.sync()}handleError(J,W){if(this._canceledDueToError)J=this._canceledDueToError,this._canceledDueToError=!1;if(this.callback)return this.callback(J);this.emit("error",J)}handleReadyForQuery(J){if(this._canceledDueToError)return this.handleError(this._canceledDueToError,J);if(this.callback)try{this.callback(null,this._results)}catch(W){process.nextTick(()=>{throw W})}this.emit("end",this._results)}submit(J){if(typeof this.text!=="string"&&typeof this.name!=="string")return Error("A query must have either text or a name. Supplying neither is unsupported.");let W=J.parsedStatements[this.name];if(this.text&&W&&this.text!==W)return Error(`Prepared statements must be unique - '${this.name}' was used for a different statement`);if(this.values&&!Array.isArray(this.values))return Error("Query values must be an array");if(this.requiresPreparation()){J.stream.cork&&J.stream.cork();try{this.prepare(J)}finally{J.stream.uncork&&J.stream.uncork()}}else J.query(this.text);return null}hasBeenParsed(J){return this.name&&J.parsedStatements[this.name]}handlePortalSuspended(J){this._getRows(J,this.rows)}_getRows(J,W){if(J.execute({portal:this.portal,rows:W}),!W)J.sync();else J.flush()}prepare(J){if(!this.hasBeenParsed(J))J.parse({text:this.text,name:this.name,types:this.types});try{J.bind({portal:this.portal,statement:this.name,values:this.values,binary:this.binary,valueMapper:Tb.prepareValue})}catch(W){this.handleError(W,J);return}J.describe({type:"P",name:this.portal||""}),this._getRows(J,this.rows)}handleCopyInResponse(J){J.sendCopyFail("No source stream defined")}handleCopyData(J,W){}}Bb.exports=qb});var aO=v6((lb)=>{Object.defineProperty(lb,"__esModule",{value:!0});lb.NoticeMessage=lb.DataRowMessage=lb.CommandCompleteMessage=lb.ReadyForQueryMessage=lb.NotificationResponseMessage=lb.BackendKeyDataMessage=lb.AuthenticationMD5Password=lb.ParameterStatusMessage=lb.ParameterDescriptionMessage=lb.RowDescriptionMessage=lb.Field=lb.CopyResponse=lb.CopyDataMessage=lb.DatabaseError=lb.copyDone=lb.emptyQuery=lb.replicationStart=lb.portalSuspended=lb.noData=lb.closeComplete=lb.bindComplete=lb.parseComplete=void 0;lb.parseComplete={name:"parseComplete",length:5};lb.bindComplete={name:"bindComplete",length:5};lb.closeComplete={name:"closeComplete",length:5};lb.noData={name:"noData",length:5};lb.portalSuspended={name:"portalSuspended",length:5};lb.replicationStart={name:"replicationStart",length:4};lb.emptyQuery={name:"emptyQuery",length:4};lb.copyDone={name:"copyDone",length:4};class Eb extends Error{constructor(J,W,X){super(J);this.length=W,this.name=X}}lb.DatabaseError=Eb;class Ib{constructor(J,W){this.length=J,this.chunk=W,this.name="copyData"}}lb.CopyDataMessage=Ib;class Rb{constructor(J,W,X,G){this.length=J,this.name=W,this.binary=X,this.columnTypes=Array(G)}}lb.CopyResponse=Rb;class Cb{constructor(J,W,X,G,Y,$,K){this.name=J,this.tableID=W,this.columnID=X,this.dataTypeID=G,this.dataTypeSize=Y,this.dataTypeModifier=$,this.format=K}}lb.Field=Cb;class bb{constructor(J,W){this.length=J,this.fieldCount=W,this.name="rowDescription",this.fields=Array(this.fieldCount)}}lb.RowDescriptionMessage=bb;class kb{constructor(J,W){this.length=J,this.parameterCount=W,this.name="parameterDescription",this.dataTypeIDs=Array(this.parameterCount)}}lb.ParameterDescriptionMessage=kb;class hb{constructor(J,W,X){this.length=J,this.parameterName=W,this.parameterValue=X,this.name="parameterStatus"}}lb.ParameterStatusMessage=hb;class gb{constructor(J,W){this.length=J,this.salt=W,this.name="authenticationMD5Password"}}lb.AuthenticationMD5Password=gb;class mb{constructor(J,W,X){this.length=J,this.processID=W,this.secretKey=X,this.name="backendKeyData"}}lb.BackendKeyDataMessage=mb;class fb{constructor(J,W,X,G){this.length=J,this.processId=W,this.channel=X,this.payload=G,this.name="notification"}}lb.NotificationResponseMessage=fb;class yb{constructor(J,W){this.length=J,this.status=W,this.name="readyForQuery"}}lb.ReadyForQueryMessage=yb;class xb{constructor(J,W){this.length=J,this.text=W,this.name="commandComplete"}}lb.CommandCompleteMessage=xb;class ub{constructor(J,W){this.length=J,this.fields=W,this.name="dataRow",this.fieldCount=W.length}}lb.DataRowMessage=ub;class cb{constructor(J,W){this.length=J,this.message=W,this.name="notice"}}lb.NoticeMessage=cb});var ib=v6((rb)=>{Object.defineProperty(rb,"__esModule",{value:!0});rb.Writer=void 0;class db{constructor(J=256){this.size=J,this.offset=5,this.headerPosition=0,this.buffer=Buffer.allocUnsafe(J)}ensure(J){if(this.buffer.length-this.offset<J){let X=this.buffer,G=X.length+(X.length>>1)+J;this.buffer=Buffer.allocUnsafe(G),X.copy(this.buffer)}}addInt32(J){return this.ensure(4),this.buffer[this.offset++]=J>>>24&255,this.buffer[this.offset++]=J>>>16&255,this.buffer[this.offset++]=J>>>8&255,this.buffer[this.offset++]=J>>>0&255,this}addInt16(J){return this.ensure(2),this.buffer[this.offset++]=J>>>8&255,this.buffer[this.offset++]=J>>>0&255,this}addCString(J){if(!J)this.ensure(1);else{let W=Buffer.byteLength(J);this.ensure(W+1),this.buffer.write(J,this.offset,"utf-8"),this.offset+=W}return this.buffer[this.offset++]=0,this}addString(J=""){let W=Buffer.byteLength(J);return this.ensure(W),this.buffer.write(J,this.offset),this.offset+=W,this}add(J){return this.ensure(J.length),J.copy(this.buffer,this.offset),this.offset+=J.length,this}join(J){if(J){this.buffer[this.headerPosition]=J;let W=this.offset-(this.headerPosition+1);this.buffer.writeInt32BE(W,this.headerPosition+1)}return this.buffer.slice(J?0:5,this.offset)}flush(J){let W=this.join(J);return this.offset=5,this.headerPosition=0,this.buffer=Buffer.allocUnsafe(this.size),W}}rb.Writer=db});var sb=v6((tb)=>{Object.defineProperty(tb,"__esModule",{value:!0});tb.serialize=void 0;var tO=ib(),E4=new tO.Writer,Zt=(J)=>{E4.addInt16(3).addInt16(0);for(let G of Object.keys(J))E4.addCString(G).addCString(J[G]);E4.addCString("client_encoding").addCString("UTF8");let W=E4.addCString("").flush(),X=W.length+4;return new tO.Writer().addInt32(X).add(W).flush()},Lt=()=>{let J=Buffer.allocUnsafe(8);return J.writeInt32BE(8,0),J.writeInt32BE(80877103,4),J},Vt=(J)=>{return E4.addCString(J).flush(112)},Dt=function(J,W){return E4.addCString(J).addInt32(Buffer.byteLength(W)).addString(W),E4.flush(112)},Mt=function(J){return E4.addString(J).flush(112)},Ot=(J)=>{return E4.addCString(J).flush(81)},ab=[],Pt=(J)=>{let W=J.name||"";if(W.length>63)console.error("Warning! Postgres only supports 63 characters for query names."),console.error("You supplied %s (%s)",W,W.length),console.error("This can cause conflicts and silent errors executing queries");let X=J.types||ab,G=X.length,Y=E4.addCString(W).addCString(J.text).addInt16(G);for(let $=0;$<G;$++)Y.addInt32(X[$]);return E4.flush(80)},pG=new tO.Writer,vt=function(J,W){for(let X=0;X<J.length;X++){let G=W?W(J[X],X):J[X];if(G==null)E4.addInt16(0),pG.addInt32(-1);else if(G instanceof Buffer)E4.addInt16(1),pG.addInt32(G.length),pG.add(G);else E4.addInt16(0),pG.addInt32(Buffer.byteLength(G)),pG.addString(G)}},jt=(J={})=>{let W=J.portal||"",X=J.statement||"",G=J.binary||!1,Y=J.values||ab,$=Y.length;return E4.addCString(W).addCString(X),E4.addInt16($),vt(Y,J.valueMapper),E4.addInt16($),E4.add(pG.flush()),E4.addInt16(1),E4.addInt16(G?1:0),E4.flush(66)},St=Buffer.from([69,0,0,0,9,0,0,0,0,0]),_t=(J)=>{if(!J||!J.portal&&!J.rows)return St;let W=J.portal||"",X=J.rows||0,G=Buffer.byteLength(W),Y=4+G+1+4,$=Buffer.allocUnsafe(1+Y);return $[0]=69,$.writeInt32BE(Y,1),$.write(W,5,"utf-8"),$[G+5]=0,$.writeUInt32BE(X,$.length-4),$},Tt=(J,W)=>{let X=Buffer.allocUnsafe(16);return X.writeInt32BE(16,0),X.writeInt16BE(1234,4),X.writeInt16BE(5678,6),X.writeInt32BE(J,8),X.writeInt32BE(W,12),X},oO=(J,W)=>{let G=4+Buffer.byteLength(W)+1,Y=Buffer.allocUnsafe(1+G);return Y[0]=J,Y.writeInt32BE(G,1),Y.write(W,5,"utf-8"),Y[G]=0,Y},qt=E4.addCString("P").flush(68),Bt=E4.addCString("S").flush(68),At=(J)=>{return J.name?oO(68,`${J.type}${J.name||""}`):J.type==="P"?qt:Bt},Et=(J)=>{let W=`${J.type}${J.name||""}`;return oO(67,W)},It=(J)=>{return E4.add(J).flush(100)},Rt=(J)=>{return oO(102,J)},f3=(J)=>Buffer.from([J,0,0,0,4]),Ct=f3(72),bt=f3(83),kt=f3(88),ht=f3(99),gt={startup:Zt,password:Vt,requestSsl:Lt,sendSASLInitialResponseMessage:Dt,sendSCRAMClientFinalMessage:Mt,query:Ot,parse:Pt,bind:jt,execute:_t,describe:At,close:Et,flush:()=>Ct,sync:()=>bt,end:()=>kt,copyData:It,copyDone:()=>ht,copyFail:Rt,cancel:Tt};tb.serialize=gt});var Xk=v6((Jk)=>{Object.defineProperty(Jk,"__esModule",{value:!0});Jk.BufferReader=void 0;var mt=Buffer.allocUnsafe(0);class eb{constructor(J=0){this.offset=J,this.buffer=mt,this.encoding="utf-8"}setBuffer(J,W){this.offset=J,this.buffer=W}int16(){let J=this.buffer.readInt16BE(this.offset);return this.offset+=2,J}byte(){let J=this.buffer[this.offset];return this.offset++,J}int32(){let J=this.buffer.readInt32BE(this.offset);return this.offset+=4,J}uint32(){let J=this.buffer.readUInt32BE(this.offset);return this.offset+=4,J}string(J){let W=this.buffer.toString(this.encoding,this.offset,this.offset+J);return this.offset+=J,W}cstring(){let J=this.offset,W=J;while(this.buffer[W++]!==0);return this.offset=W,this.buffer.toString(this.encoding,J,W-1)}bytes(J){let W=this.buffer.slice(this.offset,this.offset+J);return this.offset+=J,W}}Jk.BufferReader=eb});var Hk=v6((Kk)=>{Object.defineProperty(Kk,"__esModule",{value:!0});Kk.Parser=void 0;var C4=aO(),ft=Xk(),sO=1,yt=4,Yk=sO+yt,Gk=Buffer.allocUnsafe(0);class $k{constructor(J){if(this.buffer=Gk,this.bufferLength=0,this.bufferOffset=0,this.reader=new ft.BufferReader,(J===null||J===void 0?void 0:J.mode)==="binary")throw Error("Binary mode not supported yet");this.mode=(J===null||J===void 0?void 0:J.mode)||"text"}parse(J,W){this.mergeBuffer(J);let X=this.bufferOffset+this.bufferLength,G=this.bufferOffset;while(G+Yk<=X){let Y=this.buffer[G],$=this.buffer.readUInt32BE(G+sO),K=sO+$;if(K+G<=X){let w=this.handlePacket(G+Yk,Y,$,this.buffer);W(w),G+=K}else break}if(G===X)this.buffer=Gk,this.bufferLength=0,this.bufferOffset=0;else this.bufferLength=X-G,this.bufferOffset=G}mergeBuffer(J){if(this.bufferLength>0){let W=this.bufferLength+J.byteLength;if(W+this.bufferOffset>this.buffer.byteLength){let G;if(W<=this.buffer.byteLength&&this.bufferOffset>=this.bufferLength)G=this.buffer;else{let Y=this.buffer.byteLength*2;while(W>=Y)Y*=2;G=Buffer.allocUnsafe(Y)}this.buffer.copy(G,0,this.bufferOffset,this.bufferOffset+this.bufferLength),this.buffer=G,this.bufferOffset=0}J.copy(this.buffer,this.bufferOffset+this.bufferLength),this.bufferLength=W}else this.buffer=J,this.bufferOffset=0,this.bufferLength=J.byteLength}handlePacket(J,W,X,G){switch(W){case 50:return C4.bindComplete;case 49:return C4.parseComplete;case 51:return C4.closeComplete;case 110:return C4.noData;case 115:return C4.portalSuspended;case 99:return C4.copyDone;case 87:return C4.replicationStart;case 73:return C4.emptyQuery;case 68:return this.parseDataRowMessage(J,X,G);case 67:return this.parseCommandCompleteMessage(J,X,G);case 90:return this.parseReadyForQueryMessage(J,X,G);case 65:return this.parseNotificationMessage(J,X,G);case 82:return this.parseAuthenticationResponse(J,X,G);case 83:return this.parseParameterStatusMessage(J,X,G);case 75:return this.parseBackendKeyData(J,X,G);case 69:return this.parseErrorMessage(J,X,G,"error");case 78:return this.parseErrorMessage(J,X,G,"notice");case 84:return this.parseRowDescriptionMessage(J,X,G);case 116:return this.parseParameterDescriptionMessage(J,X,G);case 71:return this.parseCopyInMessage(J,X,G);case 72:return this.parseCopyOutMessage(J,X,G);case 100:return this.parseCopyData(J,X,G);default:return new C4.DatabaseError("received invalid response: "+W.toString(16),X,"error")}}parseReadyForQueryMessage(J,W,X){this.reader.setBuffer(J,X);let G=this.reader.string(1);return new C4.ReadyForQueryMessage(W,G)}parseCommandCompleteMessage(J,W,X){this.reader.setBuffer(J,X);let G=this.reader.cstring();return new C4.CommandCompleteMessage(W,G)}parseCopyData(J,W,X){let G=X.slice(J,J+(W-4));return new C4.CopyDataMessage(W,G)}parseCopyInMessage(J,W,X){return this.parseCopyMessage(J,W,X,"copyInResponse")}parseCopyOutMessage(J,W,X){return this.parseCopyMessage(J,W,X,"copyOutResponse")}parseCopyMessage(J,W,X,G){this.reader.setBuffer(J,X);let Y=this.reader.byte()!==0,$=this.reader.int16(),K=new C4.CopyResponse(W,G,Y,$);for(let w=0;w<$;w++)K.columnTypes[w]=this.reader.int16();return K}parseNotificationMessage(J,W,X){this.reader.setBuffer(J,X);let G=this.reader.int32(),Y=this.reader.cstring(),$=this.reader.cstring();return new C4.NotificationResponseMessage(W,G,Y,$)}parseRowDescriptionMessage(J,W,X){this.reader.setBuffer(J,X);let G=this.reader.int16(),Y=new C4.RowDescriptionMessage(W,G);for(let $=0;$<G;$++)Y.fields[$]=this.parseField();return Y}parseField(){let J=this.reader.cstring(),W=this.reader.uint32(),X=this.reader.int16(),G=this.reader.uint32(),Y=this.reader.int16(),$=this.reader.int32(),K=this.reader.int16()===0?"text":"binary";return new C4.Field(J,W,X,G,Y,$,K)}parseParameterDescriptionMessage(J,W,X){this.reader.setBuffer(J,X);let G=this.reader.int16(),Y=new C4.ParameterDescriptionMessage(W,G);for(let $=0;$<G;$++)Y.dataTypeIDs[$]=this.reader.int32();return Y}parseDataRowMessage(J,W,X){this.reader.setBuffer(J,X);let G=this.reader.int16(),Y=Array(G);for(let $=0;$<G;$++){let K=this.reader.int32();Y[$]=K===-1?null:this.reader.string(K)}return new C4.DataRowMessage(W,Y)}parseParameterStatusMessage(J,W,X){this.reader.setBuffer(J,X);let G=this.reader.cstring(),Y=this.reader.cstring();return new C4.ParameterStatusMessage(W,G,Y)}parseBackendKeyData(J,W,X){this.reader.setBuffer(J,X);let G=this.reader.int32(),Y=this.reader.int32();return new C4.BackendKeyDataMessage(W,G,Y)}parseAuthenticationResponse(J,W,X){this.reader.setBuffer(J,X);let G=this.reader.int32(),Y={name:"authenticationOk",length:W};switch(G){case 0:break;case 3:if(Y.length===8)Y.name="authenticationCleartextPassword";break;case 5:if(Y.length===12){Y.name="authenticationMD5Password";let $=this.reader.bytes(4);return new C4.AuthenticationMD5Password(W,$)}break;case 10:{Y.name="authenticationSASL",Y.mechanisms=[];let $;do if($=this.reader.cstring(),$)Y.mechanisms.push($);while($)}break;case 11:Y.name="authenticationSASLContinue",Y.data=this.reader.string(W-8);break;case 12:Y.name="authenticationSASLFinal",Y.data=this.reader.string(W-8);break;default:throw Error("Unknown authenticationOk message type "+G)}return Y}parseErrorMessage(J,W,X,G){this.reader.setBuffer(J,X);let Y={},$=this.reader.string(1);while($!=="\x00")Y[$]=this.reader.cstring(),$=this.reader.string(1);let K=Y.M,w=G==="notice"?new C4.NoticeMessage(W,K):new C4.DatabaseError(K,W,G);return w.severity=Y.S,w.code=Y.C,w.detail=Y.D,w.hint=Y.H,w.position=Y.P,w.internalPosition=Y.p,w.internalQuery=Y.q,w.where=Y.W,w.schema=Y.s,w.table=Y.t,w.column=Y.c,w.dataType=Y.d,w.constraint=Y.n,w.file=Y.F,w.line=Y.L,w.routine=Y.R,w}}Kk.Parser=$k});var eO=v6((y3)=>{Object.defineProperty(y3,"__esModule",{value:!0});y3.DatabaseError=y3.serialize=y3.parse=void 0;var xt=aO();Object.defineProperty(y3,"DatabaseError",{enumerable:!0,get:function(){return xt.DatabaseError}});var ut=sb();Object.defineProperty(y3,"serialize",{enumerable:!0,get:function(){return ut.serialize}});var ct=Hk();function lt(J,W){let X=new ct.Parser;return J.on("data",(G)=>X.parse(G,W)),new Promise((G)=>J.on("end",()=>G()))}y3.parse=lt});var Nk=v6((zk)=>{Object.defineProperty(zk,"__esModule",{value:!0});zk.default={}});var Uk=v6((cR6,Fk)=>{var{getStream:nt,getSecureStream:it}=st();Fk.exports={getStream:nt,getSecureStream:it};function at(){function J(X){return new(Q4("net")).Socket}function W(X){return Q4("tls").connect(X)}return{getStream:J,getSecureStream:W}}function tt(){function J(X){let{CloudflareSocket:G}=Nk();return new G(X)}function W(X){return X.socket.startTls(X),X.socket}return{getStream:J,getSecureStream:W}}function ot(){if(typeof navigator==="object"&&navigator!==null&&typeof navigator.userAgent==="string")return navigator.userAgent==="Cloudflare-Workers";if(typeof Response==="function"){let J=new Response(null,{cf:{thing:!0}});if(typeof J.cf==="object"&&J.cf!==null&&J.cf.thing)return!0}return!1}function st(){if(ot())return tt();return at()}});var JP=v6((lR6,Zk)=>{var et=Q4("events").EventEmitter,{parse:Jo,serialize:z0}=eO(),{getStream:Wo,getSecureStream:Xo}=Uk(),Yo=z0.flush(),Go=z0.sync(),$o=z0.end();class Qk extends et{constructor(J){super();if(J=J||{},this.stream=J.stream||Wo(J.ssl),typeof this.stream==="function")this.stream=this.stream(J);this._keepAlive=J.keepAlive,this._keepAliveInitialDelayMillis=J.keepAliveInitialDelayMillis,this.lastBuffer=!1,this.parsedStatements={},this.ssl=J.ssl||!1,this._ending=!1,this._emitMessage=!1;let W=this;this.on("newListener",function(X){if(X==="message")W._emitMessage=!0})}connect(J,W){let X=this;this._connecting=!0,this.stream.setNoDelay(!0),this.stream.connect(J,W),this.stream.once("connect",function(){if(X._keepAlive)X.stream.setKeepAlive(!0,X._keepAliveInitialDelayMillis);X.emit("connect")});let G=function(Y){if(X._ending&&(Y.code==="ECONNRESET"||Y.code==="EPIPE"))return;X.emit("error",Y)};if(this.stream.on("error",G),this.stream.on("close",function(){X.emit("end")}),!this.ssl)return this.attachListeners(this.stream);this.stream.once("data",function(Y){switch(Y.toString("utf8")){case"S":break;case"N":return X.stream.end(),X.emit("error",Error("The server does not support SSL connections"));default:return X.stream.end(),X.emit("error",Error("There was an error establishing an SSL connection"))}let K={socket:X.stream};if(X.ssl!==!0){if(Object.assign(K,X.ssl),"key"in X.ssl)K.key=X.ssl.key}let w=Q4("net");if(w.isIP&&w.isIP(W)===0)K.servername=W;try{X.stream=Xo(K)}catch(H){return X.emit("error",H)}X.attachListeners(X.stream),X.stream.on("error",G),X.emit("sslconnect")})}attachListeners(J){Jo(J,(W)=>{let X=W.name==="error"?"errorMessage":W.name;if(this._emitMessage)this.emit("message",W);this.emit(X,W)})}requestSsl(){this.stream.write(z0.requestSsl())}startup(J){this.stream.write(z0.startup(J))}cancel(J,W){this._send(z0.cancel(J,W))}password(J){this._send(z0.password(J))}sendSASLInitialResponseMessage(J,W){this._send(z0.sendSASLInitialResponseMessage(J,W))}sendSCRAMClientFinalMessage(J){this._send(z0.sendSCRAMClientFinalMessage(J))}_send(J){if(!this.stream.writable)return!1;return this.stream.write(J)}query(J){this._send(z0.query(J))}parse(J){this._send(z0.parse(J))}bind(J){this._send(z0.bind(J))}execute(J){this._send(z0.execute(J))}flush(){if(this.stream.writable)this.stream.write(Yo)}sync(){this._ending=!0,this._send(Go)}ref(){this.stream.ref()}unref(){this.stream.unref()}end(){if(this._ending=!0,!this._connecting||!this.stream.writable){this.stream.end();return}return this.stream.write($o,()=>{this.stream.end()})}close(J){this._send(z0.close(J))}describe(J){this._send(z0.describe(J))}sendCopyFromChunk(J){this._send(z0.copyData(J))}endCopyFrom(){this._send(z0.copyDone())}sendCopyFail(J){this._send(z0.copyFail(J))}}Zk.exports=Qk});var Mk=v6((pR6,Dk)=>{var{Transform:Ko}=Q4("stream"),{StringDecoder:wo}=Q4("string_decoder"),EX=Symbol("last"),x3=Symbol("decoder");function Ho(J,W,X){let G;if(this.overflow){if(G=this[x3].write(J).split(this.matcher),G.length===1)return X();G.shift(),this.overflow=!1}else this[EX]+=this[x3].write(J),G=this[EX].split(this.matcher);this[EX]=G.pop();for(let Y=0;Y<G.length;Y++)try{Vk(this,this.mapper(G[Y]))}catch($){return X($)}if(this.overflow=this[EX].length>this.maxLength,this.overflow&&!this.skipOverflow){X(Error("maximum buffer reached"));return}X()}function zo(J){if(this[EX]+=this[x3].end(),this[EX])try{Vk(this,this.mapper(this[EX]))}catch(W){return J(W)}J()}function Vk(J,W){if(W!==void 0)J.push(W)}function Lk(J){return J}function No(J,W,X){switch(J=J||/\r?\n/,W=W||Lk,X=X||{},arguments.length){case 1:if(typeof J==="function")W=J,J=/\r?\n/;else if(typeof J==="object"&&!(J instanceof RegExp)&&!J[Symbol.split])X=J,J=/\r?\n/;break;case 2:if(typeof J==="function")X=W,W=J,J=/\r?\n/;else if(typeof W==="object")X=W,W=Lk}X=Object.assign({},X),X.autoDestroy=!0,X.transform=Ho,X.flush=zo,X.readableObjectMode=!0;let G=new Ko(X);return G[EX]="",G[x3]=new wo("utf8"),G.matcher=J,G.mapper=W,G.maxLength=X.maxLength,G.skipOverflow=X.skipOverflow||!1,G.overflow=!1,G._destroy=function(Y,$){this._writableState.errorEmitted=!1,$(Y)},G}Dk.exports=No});var vk=v6((So,RW)=>{var Ok=Q4("path"),Fo=Q4("stream").Stream,Uo=Mk(),Pk=Q4("util"),Qo=5432,u3=process.platform==="win32",C5=process.stderr,Zo=56,Lo=7,Vo=61440,Do=32768;function Mo(J){return(J&Vo)==Do}var dG=["host","port","database","user","password"],WP=dG.length,Oo=dG[WP-1];function XP(){var J=C5 instanceof Fo&&C5.writable===!0;if(J){var W=Array.prototype.slice.call(arguments).concat(`
`);C5.write(Pk.format.apply(Pk,W))}}Object.defineProperty(So,"isWin",{get:function(){return u3},set:function(J){u3=J}});So.warnTo=function(J){var W=C5;return C5=J,W};So.getFileName=function(J){var W=J||process.env,X=W.PGPASSFILE||(u3?Ok.join(W.APPDATA||"./","postgresql","pgpass.conf"):Ok.join(W.HOME||"./",".pgpass"));return X};So.usePgPass=function(J,W){if(Object.prototype.hasOwnProperty.call(process.env,"PGPASSWORD"))return!1;if(u3)return!0;if(W=W||"<unkn>",!Mo(J.mode))return XP('WARNING: password file "%s" is not a plain file',W),!1;if(J.mode&(Zo|Lo))return XP('WARNING: password file "%s" has group or world access; permissions should be u=rw (0600) or less',W),!1;return!0};var Po=So.match=function(J,W){return dG.slice(0,-1).reduce(function(X,G,Y){if(Y==1){if(Number(J[G]||Qo)===Number(W[G]))return X&&!0}return X&&(W[G]==="*"||W[G]===J[G])},!0)};So.getPassword=function(J,W,X){var G,Y=W.pipe(Uo());function $(H){var z=vo(H);if(z&&jo(z)&&Po(J,z))G=z[Oo],Y.end()}var K=function(){W.destroy(),X(G)},w=function(H){W.destroy(),XP("WARNING: error on reading file: %s",H),X(void 0)};W.on("error",w),Y.on("data",$).on("end",K).on("error",w)};var vo=So.parseLine=function(J){if(J.length<11||J.match(/^\s+#/))return null;var W="",X="",G=0,Y=0,$=0,K={},w=!1,H=function(N,U,F){var Z=J.substring(U,F);if(!Object.hasOwnProperty.call(process.env,"PGPASS_NO_DEESCAPE"))Z=Z.replace(/\\([:\\])/g,"$1");K[dG[N]]=Z};for(var z=0;z<J.length-1;z+=1){if(W=J.charAt(z+1),X=J.charAt(z),w=G==WP-1,w){H(G,Y);break}if(z>=0&&W==":"&&X!=="\\")H(G,Y,z+1),Y=z+2,G+=1}return K=Object.keys(K).length===WP?K:null,K},jo=So.isValidEntry=function(J){var W={0:function(K){return K.length>0},1:function(K){if(K==="*")return!0;return K=Number(K),isFinite(K)&&K>0&&K<9007199254740992&&Math.floor(K)===K},2:function(K){return K.length>0},3:function(K){return K.length>0},4:function(K){return K.length>0}};for(var X=0;X<dG.length;X+=1){var G=W[X],Y=J[dG[X]]||"",$=G(Y);if(!$)return!1}return!0}});var Sk=v6((aR6,YP)=>{var iR6=Q4("path"),jk=Q4("fs"),c3=vk();YP.exports=function(J,W){var X=c3.getFileName();jk.stat(X,function(G,Y){if(G||!c3.usePgPass(Y,X))return W(void 0);var $=jk.createReadStream(X);c3.getPassword(J,$,W)})};YP.exports.warnTo=c3.warnTo});var Bk=v6((tR6,qk)=>{var Ao=Q4("events").EventEmitter,_k=xG(),GP=Ub(),Eo=m3(),Io=nO(),Tk=Ab(),Ro=I5(),Co=JP(),bo=dO();class $P extends Ao{constructor(J){super();this.connectionParameters=new Io(J),this.user=this.connectionParameters.user,this.database=this.connectionParameters.database,this.port=this.connectionParameters.port,this.host=this.connectionParameters.host,Object.defineProperty(this,"password",{configurable:!0,enumerable:!1,writable:!0,value:this.connectionParameters.password}),this.replication=this.connectionParameters.replication;let W=J||{};if(this._Promise=W.Promise||global.Promise,this._types=new Eo(W.types),this._ending=!1,this._ended=!1,this._connecting=!1,this._connected=!1,this._connectionError=!1,this._queryable=!0,this.enableChannelBinding=Boolean(W.enableChannelBinding),this.connection=W.connection||new Co({stream:W.stream,ssl:this.connectionParameters.ssl,keepAlive:W.keepAlive||!1,keepAliveInitialDelayMillis:W.keepAliveInitialDelayMillis||0,encoding:this.connectionParameters.client_encoding||"utf8"}),this.queryQueue=[],this.binary=W.binary||Ro.binary,this.processID=null,this.secretKey=null,this.ssl=this.connectionParameters.ssl||!1,this.ssl&&this.ssl.key)Object.defineProperty(this.ssl,"key",{enumerable:!1});this._connectionTimeoutMillis=W.connectionTimeoutMillis||0}_errorAllQueries(J){let W=(X)=>{process.nextTick(()=>{X.handleError(J,this.connection)})};if(this.activeQuery)W(this.activeQuery),this.activeQuery=null;this.queryQueue.forEach(W),this.queryQueue.length=0}_connect(J){let W=this,X=this.connection;if(this._connectionCallback=J,this._connecting||this._connected){let G=Error("Client has already been connected. You cannot reuse a client.");process.nextTick(()=>{J(G)});return}if(this._connecting=!0,this._connectionTimeoutMillis>0){if(this.connectionTimeoutHandle=setTimeout(()=>{X._ending=!0,X.stream.destroy(Error("timeout expired"))},this._connectionTimeoutMillis),this.connectionTimeoutHandle.unref)this.connectionTimeoutHandle.unref()}if(this.host&&this.host.indexOf("/")===0)X.connect(this.host+"/.s.PGSQL."+this.port);else X.connect(this.port,this.host);X.on("connect",function(){if(W.ssl)X.requestSsl();else X.startup(W.getStartupConf())}),X.on("sslconnect",function(){X.startup(W.getStartupConf())}),this._attachListeners(X),X.once("end",()=>{let G=this._ending?Error("Connection terminated"):Error("Connection terminated unexpectedly");if(clearTimeout(this.connectionTimeoutHandle),this._errorAllQueries(G),this._ended=!0,!this._ending){if(this._connecting&&!this._connectionError)if(this._connectionCallback)this._connectionCallback(G);else this._handleErrorEvent(G);else if(!this._connectionError)this._handleErrorEvent(G)}process.nextTick(()=>{this.emit("end")})})}connect(J){if(J){this._connect(J);return}return new this._Promise((W,X)=>{this._connect((G)=>{if(G)X(G);else W()})})}_attachListeners(J){J.on("authenticationCleartextPassword",this._handleAuthCleartextPassword.bind(this)),J.on("authenticationMD5Password",this._handleAuthMD5Password.bind(this)),J.on("authenticationSASL",this._handleAuthSASL.bind(this)),J.on("authenticationSASLContinue",this._handleAuthSASLContinue.bind(this)),J.on("authenticationSASLFinal",this._handleAuthSASLFinal.bind(this)),J.on("backendKeyData",this._handleBackendKeyData.bind(this)),J.on("error",this._handleErrorEvent.bind(this)),J.on("errorMessage",this._handleErrorMessage.bind(this)),J.on("readyForQuery",this._handleReadyForQuery.bind(this)),J.on("notice",this._handleNotice.bind(this)),J.on("rowDescription",this._handleRowDescription.bind(this)),J.on("dataRow",this._handleDataRow.bind(this)),J.on("portalSuspended",this._handlePortalSuspended.bind(this)),J.on("emptyQuery",this._handleEmptyQuery.bind(this)),J.on("commandComplete",this._handleCommandComplete.bind(this)),J.on("parseComplete",this._handleParseComplete.bind(this)),J.on("copyInResponse",this._handleCopyInResponse.bind(this)),J.on("copyData",this._handleCopyData.bind(this)),J.on("notification",this._handleNotification.bind(this))}_checkPgPass(J){let W=this.connection;if(typeof this.password==="function")this._Promise.resolve().then(()=>this.password()).then((X)=>{if(X!==void 0){if(typeof X!=="string"){W.emit("error",TypeError("Password must be a string"));return}this.connectionParameters.password=this.password=X}else this.connectionParameters.password=this.password=null;J()}).catch((X)=>{W.emit("error",X)});else if(this.password!==null)J();else try{Sk()(this.connectionParameters,(G)=>{if(G!==void 0)this.connectionParameters.password=this.password=G;J()})}catch(X){this.emit("error",X)}}_handleAuthCleartextPassword(J){this._checkPgPass(()=>{this.connection.password(this.password)})}_handleAuthMD5Password(J){this._checkPgPass(async()=>{try{let W=await bo.postgresMd5PasswordHash(this.user,this.password,J.salt);this.connection.password(W)}catch(W){this.emit("error",W)}})}_handleAuthSASL(J){this._checkPgPass(()=>{try{this.saslSession=GP.startSession(J.mechanisms,this.enableChannelBinding&&this.connection.stream),this.connection.sendSASLInitialResponseMessage(this.saslSession.mechanism,this.saslSession.response)}catch(W){this.connection.emit("error",W)}})}async _handleAuthSASLContinue(J){try{await GP.continueSession(this.saslSession,this.password,J.data,this.enableChannelBinding&&this.connection.stream),this.connection.sendSCRAMClientFinalMessage(this.saslSession.response)}catch(W){this.connection.emit("error",W)}}_handleAuthSASLFinal(J){try{GP.finalizeSession(this.saslSession,J.data),this.saslSession=null}catch(W){this.connection.emit("error",W)}}_handleBackendKeyData(J){this.processID=J.processID,this.secretKey=J.secretKey}_handleReadyForQuery(J){if(this._connecting){if(this._connecting=!1,this._connected=!0,clearTimeout(this.connectionTimeoutHandle),this._connectionCallback)this._connectionCallback(null,this),this._connectionCallback=null;this.emit("connect")}let{activeQuery:W}=this;if(this.activeQuery=null,this.readyForQuery=!0,W)W.handleReadyForQuery(this.connection);this._pulseQueryQueue()}_handleErrorWhileConnecting(J){if(this._connectionError)return;if(this._connectionError=!0,clearTimeout(this.connectionTimeoutHandle),this._connectionCallback)return this._connectionCallback(J);this.emit("error",J)}_handleErrorEvent(J){if(this._connecting)return this._handleErrorWhileConnecting(J);this._queryable=!1,this._errorAllQueries(J),this.emit("error",J)}_handleErrorMessage(J){if(this._connecting)return this._handleErrorWhileConnecting(J);let W=this.activeQuery;if(!W){this._handleErrorEvent(J);return}this.activeQuery=null,W.handleError(J,this.connection)}_handleRowDescription(J){this.activeQuery.handleRowDescription(J)}_handleDataRow(J){this.activeQuery.handleDataRow(J)}_handlePortalSuspended(J){this.activeQuery.handlePortalSuspended(this.connection)}_handleEmptyQuery(J){this.activeQuery.handleEmptyQuery(this.connection)}_handleCommandComplete(J){if(this.activeQuery==null){let W=Error("Received unexpected commandComplete message from backend.");this._handleErrorEvent(W);return}this.activeQuery.handleCommandComplete(J,this.connection)}_handleParseComplete(){if(this.activeQuery==null){let J=Error("Received unexpected parseComplete message from backend.");this._handleErrorEvent(J);return}if(this.activeQuery.name)this.connection.parsedStatements[this.activeQuery.name]=this.activeQuery.text}_handleCopyInResponse(J){this.activeQuery.handleCopyInResponse(this.connection)}_handleCopyData(J){this.activeQuery.handleCopyData(J,this.connection)}_handleNotification(J){this.emit("notification",J)}_handleNotice(J){this.emit("notice",J)}getStartupConf(){let J=this.connectionParameters,W={user:J.user,database:J.database},X=J.application_name||J.fallback_application_name;if(X)W.application_name=X;if(J.replication)W.replication=""+J.replication;if(J.statement_timeout)W.statement_timeout=String(parseInt(J.statement_timeout,10));if(J.lock_timeout)W.lock_timeout=String(parseInt(J.lock_timeout,10));if(J.idle_in_transaction_session_timeout)W.idle_in_transaction_session_timeout=String(parseInt(J.idle_in_transaction_session_timeout,10));if(J.options)W.options=J.options;return W}cancel(J,W){if(J.activeQuery===W){let X=this.connection;if(this.host&&this.host.indexOf("/")===0)X.connect(this.host+"/.s.PGSQL."+this.port);else X.connect(this.port,this.host);X.on("connect",function(){X.cancel(J.processID,J.secretKey)})}else if(J.queryQueue.indexOf(W)!==-1)J.queryQueue.splice(J.queryQueue.indexOf(W),1)}setTypeParser(J,W,X){return this._types.setTypeParser(J,W,X)}getTypeParser(J,W){return this._types.getTypeParser(J,W)}escapeIdentifier(J){return _k.escapeIdentifier(J)}escapeLiteral(J){return _k.escapeLiteral(J)}_pulseQueryQueue(){if(this.readyForQuery===!0){if(this.activeQuery=this.queryQueue.shift(),this.activeQuery){this.readyForQuery=!1,this.hasExecuted=!0;let J=this.activeQuery.submit(this.connection);if(J)process.nextTick(()=>{this.activeQuery.handleError(J,this.connection),this.readyForQuery=!0,this._pulseQueryQueue()})}else if(this.hasExecuted)this.activeQuery=null,this.emit("drain")}}query(J,W,X){let G,Y,$,K,w;if(J===null||J===void 0)throw TypeError("Client was passed a null or undefined query");else if(typeof J.submit==="function"){if($=J.query_timeout||this.connectionParameters.query_timeout,Y=G=J,typeof W==="function")G.callback=G.callback||W}else if($=J.query_timeout||this.connectionParameters.query_timeout,G=new Tk(J,W,X),!G.callback)Y=new this._Promise((H,z)=>{G.callback=(N,U)=>N?z(N):H(U)}).catch((H)=>{throw Error.captureStackTrace(H),H});if($)w=G.callback,K=setTimeout(()=>{let H=Error("Query read timeout");process.nextTick(()=>{G.handleError(H,this.connection)}),w(H),G.callback=()=>{};let z=this.queryQueue.indexOf(G);if(z>-1)this.queryQueue.splice(z,1);this._pulseQueryQueue()},$),G.callback=(H,z)=>{clearTimeout(K),w(H,z)};if(this.binary&&!G.binary)G.binary=!0;if(G._result&&!G._result._types)G._result._types=this._types;if(!this._queryable)return process.nextTick(()=>{G.handleError(Error("Client has encountered a connection error and is not queryable"),this.connection)}),Y;if(this._ending)return process.nextTick(()=>{G.handleError(Error("Client was closed and is not queryable"),this.connection)}),Y;return this.queryQueue.push(G),this._pulseQueryQueue(),Y}ref(){this.connection.ref()}unref(){this.connection.unref()}end(J){if(this._ending=!0,!this.connection._connecting||this._ended)if(J)J();else return this._Promise.resolve();if(this.activeQuery||!this._queryable)this.connection.stream.destroy();else this.connection.end();if(J)this.connection.once("end",J);else return new this._Promise((W)=>{this.connection.once("end",W)})}}$P.Query=Tk;qk.exports=$P});var bk=v6((oR6,Ck)=>{var ko=Q4("events").EventEmitter,Ak=function(){},Ek=(J,W)=>{let X=J.findIndex(W);return X===-1?void 0:J.splice(X,1)[0]};class Ik{constructor(J,W,X){this.client=J,this.idleListener=W,this.timeoutId=X}}class b5{constructor(J){this.callback=J}}function ho(){throw Error("Release called on client which has already been released to the pool.")}function l3(J,W){if(W)return{callback:W,result:void 0};let X,G,Y=function(K,w){K?X(K):G(w)},$=new J(function(K,w){G=K,X=w}).catch((K)=>{throw Error.captureStackTrace(K),K});return{callback:Y,result:$}}function go(J,W){return function X(G){G.client=W,W.removeListener("error",X),W.on("error",()=>{J.log("additional client error after disconnection due to error",G)}),J._remove(W),J.emit("error",G,W)}}class Rk extends ko{constructor(J,W){super();if(this.options=Object.assign({},J),J!=null&&"password"in J)Object.defineProperty(this.options,"password",{configurable:!0,enumerable:!1,writable:!0,value:J.password});if(J!=null&&J.ssl&&J.ssl.key)Object.defineProperty(this.options.ssl,"key",{enumerable:!1});if(this.options.max=this.options.max||this.options.poolSize||10,this.options.min=this.options.min||0,this.options.maxUses=this.options.maxUses||1/0,this.options.allowExitOnIdle=this.options.allowExitOnIdle||!1,this.options.maxLifetimeSeconds=this.options.maxLifetimeSeconds||0,this.log=this.options.log||function(){},this.Client=this.options.Client||W||KP().Client,this.Promise=this.options.Promise||global.Promise,typeof this.options.idleTimeoutMillis>"u")this.options.idleTimeoutMillis=1e4;this._clients=[],this._idle=[],this._expired=new WeakSet,this._pendingQueue=[],this._endCallback=void 0,this.ending=!1,this.ended=!1}_isFull(){return this._clients.length>=this.options.max}_isAboveMin(){return this._clients.length>this.options.min}_pulseQueue(){if(this.log("pulse queue"),this.ended){this.log("pulse queue ended");return}if(this.ending){if(this.log("pulse queue on ending"),this._idle.length)this._idle.slice().map((W)=>{this._remove(W.client)});if(!this._clients.length)this.ended=!0,this._endCallback();return}if(!this._pendingQueue.length){this.log("no queued requests");return}if(!this._idle.length&&this._isFull())return;let J=this._pendingQueue.shift();if(this._idle.length){let W=this._idle.pop();clearTimeout(W.timeoutId);let X=W.client;X.ref&&X.ref();let G=W.idleListener;return this._acquireClient(X,J,G,!1)}if(!this._isFull())return this.newClient(J);throw Error("unexpected condition")}_remove(J,W){let X=Ek(this._idle,(Y)=>Y.client===J);if(X!==void 0)clearTimeout(X.timeoutId);this._clients=this._clients.filter((Y)=>Y!==J);let G=this;J.end(()=>{if(G.emit("remove",J),typeof W==="function")W()})}connect(J){if(this.ending){let G=Error("Cannot use a pool after calling end on the pool");return J?J(G):this.Promise.reject(G)}let W=l3(this.Promise,J),X=W.result;if(this._isFull()||this._idle.length){if(this._idle.length)process.nextTick(()=>this._pulseQueue());if(!this.options.connectionTimeoutMillis)return this._pendingQueue.push(new b5(W.callback)),X;let G=(K,w,H)=>{clearTimeout($),W.callback(K,w,H)},Y=new b5(G),$=setTimeout(()=>{Ek(this._pendingQueue,(K)=>K.callback===G),Y.timedOut=!0,W.callback(Error("timeout exceeded when trying to connect"))},this.options.connectionTimeoutMillis);if($.unref)$.unref();return this._pendingQueue.push(Y),X}return this.newClient(new b5(W.callback)),X}newClient(J){let W=new this.Client(this.options);this._clients.push(W);let X=go(this,W);this.log("checking client timeout");let G,Y=!1;if(this.options.connectionTimeoutMillis)G=setTimeout(()=>{this.log("ending client due to timeout"),Y=!0,W.connection?W.connection.stream.destroy():W.end()},this.options.connectionTimeoutMillis);this.log("connecting new client"),W.connect(($)=>{if(G)clearTimeout(G);if(W.on("error",X),$){if(this.log("client failed to connect",$),this._clients=this._clients.filter((K)=>K!==W),Y)$=Error("Connection terminated due to connection timeout",{cause:$});if(this._pulseQueue(),!J.timedOut)J.callback($,void 0,Ak)}else{if(this.log("new client connected"),this.options.maxLifetimeSeconds!==0){let K=setTimeout(()=>{if(this.log("ending client due to expired lifetime"),this._expired.add(W),this._idle.findIndex((H)=>H.client===W)!==-1)this._acquireClient(W,new b5((H,z,N)=>N()),X,!1)},this.options.maxLifetimeSeconds*1000);K.unref(),W.once("end",()=>clearTimeout(K))}return this._acquireClient(W,J,X,!0)}})}_acquireClient(J,W,X,G){if(G)this.emit("connect",J);if(this.emit("acquire",J),J.release=this._releaseOnce(J,X),J.removeListener("error",X),!W.timedOut)if(G&&this.options.verify)this.options.verify(J,(Y)=>{if(Y)return J.release(Y),W.callback(Y,void 0,Ak);W.callback(void 0,J,J.release)});else W.callback(void 0,J,J.release);else if(G&&this.options.verify)this.options.verify(J,J.release);else J.release()}_releaseOnce(J,W){let X=!1;return(G)=>{if(X)ho();X=!0,this._release(J,W,G)}}_release(J,W,X){if(J.on("error",W),J._poolUseCount=(J._poolUseCount||0)+1,this.emit("release",X,J),X||this.ending||!J._queryable||J._ending||J._poolUseCount>=this.options.maxUses){if(J._poolUseCount>=this.options.maxUses)this.log("remove expended client");return this._remove(J,this._pulseQueue.bind(this))}if(this._expired.has(J))return this.log("remove expired client"),this._expired.delete(J),this._remove(J,this._pulseQueue.bind(this));let Y;if(this.options.idleTimeoutMillis&&this._isAboveMin()){if(Y=setTimeout(()=>{this.log("remove idle client"),this._remove(J,this._pulseQueue.bind(this))},this.options.idleTimeoutMillis),this.options.allowExitOnIdle)Y.unref()}if(this.options.allowExitOnIdle)J.unref();this._idle.push(new Ik(J,W,Y)),this._pulseQueue()}query(J,W,X){if(typeof J==="function"){let Y=l3(this.Promise,J);return setImmediate(function(){return Y.callback(Error("Passing a function as the first parameter to pool.query is not supported"))}),Y.result}if(typeof W==="function")X=W,W=void 0;let G=l3(this.Promise,X);return X=G.callback,this.connect((Y,$)=>{if(Y)return X(Y);let K=!1,w=(H)=>{if(K)return;K=!0,$.release(H),X(H)};$.once("error",w),this.log("dispatching query");try{$.query(J,W,(H,z)=>{if(this.log("query dispatched"),$.removeListener("error",w),K)return;if(K=!0,$.release(H),H)return X(H);return X(void 0,z)})}catch(H){return $.release(H),X(H)}}),G.result}end(J){if(this.log("ending"),this.ending){let X=Error("Called end on pool more than once");return J?J(X):this.Promise.reject(X)}this.ending=!0;let W=l3(this.Promise,J);return this._endCallback=W.callback,this._pulseQueue(),W.result}get waitingCount(){return this._pendingQueue.length}get idleCount(){return this._idle.length}get expiredCount(){return this._clients.reduce((J,W)=>J+(this._expired.has(W)?1:0),0)}get totalCount(){return this._clients.length}}Ck.exports=Rk});var gk=v6((sR6,hk)=>{var kk=Q4("events").EventEmitter,mo=Q4("util"),wP=xG(),rG=hk.exports=function(J,W,X){kk.call(this),J=wP.normalizeQueryConfig(J,W,X),this.text=J.text,this.values=J.values,this.name=J.name,this.queryMode=J.queryMode,this.callback=J.callback,this.state="new",this._arrayMode=J.rowMode==="array",this._emitRowEvents=!1,this.on("newListener",function(G){if(G==="row")this._emitRowEvents=!0}.bind(this))};mo.inherits(rG,kk);var fo={sqlState:"code",statementPosition:"position",messagePrimary:"message",context:"where",schemaName:"schema",tableName:"table",columnName:"column",dataTypeName:"dataType",constraintName:"constraint",sourceFile:"file",sourceLine:"line",sourceFunction:"routine"};rG.prototype.handleError=function(J){let W=this.native.pq.resultErrorFields();if(W)for(let X in W){let G=fo[X]||X;J[G]=W[X]}if(this.callback)this.callback(J);else this.emit("error",J);this.state="error"};rG.prototype.then=function(J,W){return this._getPromise().then(J,W)};rG.prototype.catch=function(J){return this._getPromise().catch(J)};rG.prototype._getPromise=function(){if(this._promise)return this._promise;return this._promise=new Promise(function(J,W){this._once("end",J),this._once("error",W)}.bind(this)),this._promise};rG.prototype.submit=function(J){this.state="running";let W=this;this.native=J.native,J.native.arrayMode=this._arrayMode;let X=function(G,Y,$){if(J.native.arrayMode=!1,setImmediate(function(){W.emit("_done")}),G)return W.handleError(G);if(W._emitRowEvents)if($.length>1)Y.forEach((K,w)=>{K.forEach((H)=>{W.emit("row",H,$[w])})});else Y.forEach(function(K){W.emit("row",K,$)});if(W.state="end",W.emit("end",$),W.callback)W.callback(null,$)};if(process.domain)X=process.domain.bind(X);if(this.name){if(this.name.length>63)console.error("Warning! Postgres only supports 63 characters for query names."),console.error("You supplied %s (%s)",this.name,this.name.length),console.error("This can cause conflicts and silent errors executing queries");let G=(this.values||[]).map(wP.prepareValue);if(J.namedQueries[this.name]){if(this.text&&J.namedQueries[this.name]!==this.text){let Y=Error(`Prepared statements must be unique - '${this.name}' was used for a different statement`);return X(Y)}return J.native.execute(this.name,G,X)}return J.native.prepare(this.name,this.text,G.length,function(Y){if(Y)return X(Y);return J.namedQueries[W.name]=W.text,W.native.execute(W.name,G,X)})}else if(this.values){if(!Array.isArray(this.values)){let Y=Error("Query values must be an array");return X(Y)}let G=this.values.map(wP.prepareValue);J.native.query(this.text,G,X)}else if(this.queryMode==="extended")J.native.query(this.text,[],X);else J.native.query(this.text,X)}});var HP=v6((eR6,xk)=>{var mk;try{mk=(()=>{throw new Error("Cannot require module "+"pg-native");})()}catch(J){throw J}var yo=m3(),fk=Q4("events").EventEmitter,xo=Q4("util"),uo=nO(),yk=gk(),H8=xk.exports=function(J){fk.call(this),J=J||{},this._Promise=J.Promise||global.Promise,this._types=new yo(J.types),this.native=new mk({types:this._types}),this._queryQueue=[],this._ending=!1,this._connecting=!1,this._connected=!1,this._queryable=!0;let W=this.connectionParameters=new uo(J);if(J.nativeConnectionString)W.nativeConnectionString=J.nativeConnectionString;this.user=W.user,Object.defineProperty(this,"password",{configurable:!0,enumerable:!1,writable:!0,value:W.password}),this.database=W.database,this.host=W.host,this.port=W.port,this.namedQueries={}};H8.Query=yk;xo.inherits(H8,fk);H8.prototype._errorAllQueries=function(J){let W=(X)=>{process.nextTick(()=>{X.native=this.native,X.handleError(J)})};if(this._hasActiveQuery())W(this._activeQuery),this._activeQuery=null;this._queryQueue.forEach(W),this._queryQueue.length=0};H8.prototype._connect=function(J){let W=this;if(this._connecting){process.nextTick(()=>J(Error("Client has already been connected. You cannot reuse a client.")));return}this._connecting=!0,this.connectionParameters.getLibpqConnectionString(function(X,G){if(W.connectionParameters.nativeConnectionString)G=W.connectionParameters.nativeConnectionString;if(X)return J(X);W.native.connect(G,function(Y){if(Y)return W.native.end(),J(Y);W._connected=!0,W.native.on("error",function($){W._queryable=!1,W._errorAllQueries($),W.emit("error",$)}),W.native.on("notification",function($){W.emit("notification",{channel:$.relname,payload:$.extra})}),W.emit("connect"),W._pulseQueryQueue(!0),J()})})};H8.prototype.connect=function(J){if(J){this._connect(J);return}return new this._Promise((W,X)=>{this._connect((G)=>{if(G)X(G);else W()})})};H8.prototype.query=function(J,W,X){let G,Y,$,K,w;if(J===null||J===void 0)throw TypeError("Client was passed a null or undefined query");else if(typeof J.submit==="function"){if($=J.query_timeout||this.connectionParameters.query_timeout,Y=G=J,typeof W==="function")J.callback=W}else if($=J.query_timeout||this.connectionParameters.query_timeout,G=new yk(J,W,X),!G.callback){let H,z;Y=new this._Promise((N,U)=>{H=N,z=U}).catch((N)=>{throw Error.captureStackTrace(N),N}),G.callback=(N,U)=>N?z(N):H(U)}if($)w=G.callback,K=setTimeout(()=>{let H=Error("Query read timeout");process.nextTick(()=>{G.handleError(H,this.connection)}),w(H),G.callback=()=>{};let z=this._queryQueue.indexOf(G);if(z>-1)this._queryQueue.splice(z,1);this._pulseQueryQueue()},$),G.callback=(H,z)=>{clearTimeout(K),w(H,z)};if(!this._queryable)return G.native=this.native,process.nextTick(()=>{G.handleError(Error("Client has encountered a connection error and is not queryable"))}),Y;if(this._ending)return G.native=this.native,process.nextTick(()=>{G.handleError(Error("Client was closed and is not queryable"))}),Y;return this._queryQueue.push(G),this._pulseQueryQueue(),Y};H8.prototype.end=function(J){let W=this;if(this._ending=!0,!this._connected)this.once("connect",this.end.bind(this,J));let X;if(!J)X=new this._Promise(function(G,Y){J=($)=>$?Y($):G()});return this.native.end(function(){W._errorAllQueries(Error("Connection terminated")),process.nextTick(()=>{if(W.emit("end"),J)J()})}),X};H8.prototype._hasActiveQuery=function(){return this._activeQuery&&this._activeQuery.state!=="error"&&this._activeQuery.state!=="end"};H8.prototype._pulseQueryQueue=function(J){if(!this._connected)return;if(this._hasActiveQuery())return;let W=this._queryQueue.shift();if(!W){if(!J)this.emit("drain");return}this._activeQuery=W,W.submit(this);let X=this;W.once("_done",function(){X._pulseQueryQueue()})};H8.prototype.cancel=function(J){if(this._activeQuery===J)this.native.cancel(function(){});else if(this._queryQueue.indexOf(J)!==-1)this._queryQueue.splice(this._queryQueue.indexOf(J),1)};H8.prototype.ref=function(){};H8.prototype.unref=function(){};H8.prototype.setTypeParser=function(J,W,X){return this._types.setTypeParser(J,W,X)};H8.prototype.getTypeParser=function(J,W){return this._types.getTypeParser(J,W)}});var KP=v6((JC6,k5)=>{var co=Bk(),lo=I5(),po=JP(),ro=iO(),no=xG(),io=bk(),ao=m3(),{DatabaseError:to}=eO(),{escapeIdentifier:oo,escapeLiteral:so}=xG(),eo=(J)=>{return class extends io{constructor(X){super(X,J)}}},zP=function(J){this.defaults=lo,this.Client=J,this.Query=this.Client.Query,this.Pool=eo(this.Client),this._pools=[],this.Connection=po,this.types=E5(),this.DatabaseError=to,this.TypeOverrides=ao,this.escapeIdentifier=oo,this.escapeLiteral=so,this.Result=ro,this.utils=no};if(typeof process.env.NODE_PG_FORCE_NATIVE<"u")k5.exports=new zP(HP());else k5.exports=new zP(co),Object.defineProperty(k5.exports,"native",{configurable:!0,enumerable:!1,get(){let J=null;try{J=new zP(HP())}catch(W){if(W.code!=="MODULE_NOT_FOUND")throw W}return Object.defineProperty(k5.exports,"native",{value:J}),J}})});NJ();import*as rk from"path";NJ();var uF={};N0(uF,{up:()=>Yg,down:()=>Gg});async function Yg(J){await J.schema.createTable("connections").addColumn("id","text",(W)=>W.primaryKey()).addColumn("organizationId","text",(W)=>W.notNull()).addColumn("createdById","text",(W)=>W.notNull().references("user.id").onDelete("cascade")).addColumn("name","text",(W)=>W.notNull()).addColumn("description","text").addColumn("icon","text").addColumn("appName","text").addColumn("appId","text").addColumn("connectionType","text",(W)=>W.notNull()).addColumn("connectionUrl","text",(W)=>W.notNull()).addColumn("connectionToken","text").addColumn("connectionHeaders","text").addColumn("oauthConfig","text").addColumn("metadata","text").addColumn("tools","text").addColumn("bindings","text").addColumn("status","text",(W)=>W.notNull().defaultTo("active")).addColumn("createdAt","text",(W)=>W.notNull().defaultTo(X6`CURRENT_TIMESTAMP`)).addColumn("updatedAt","text",(W)=>W.notNull().defaultTo(X6`CURRENT_TIMESTAMP`)).execute(),await J.schema.createTable("api_keys").addColumn("id","text",(W)=>W.primaryKey()).addColumn("userId","text",(W)=>W.notNull().references("user.id").onDelete("cascade")).addColumn("name","text",(W)=>W.notNull()).addColumn("hashedKey","text",(W)=>W.notNull().unique()).addColumn("permissions","text",(W)=>W.notNull()).addColumn("expiresAt","text").addColumn("remaining","integer").addColumn("metadata","text").addColumn("createdAt","text",(W)=>W.notNull().defaultTo(X6`CURRENT_TIMESTAMP`)).addColumn("updatedAt","text",(W)=>W.notNull().defaultTo(X6`CURRENT_TIMESTAMP`)).execute(),await J.schema.createTable("audit_logs").addColumn("id","text",(W)=>W.primaryKey()).addColumn("organizationId","text").addColumn("userId","text",(W)=>W.references("user.id").onDelete("set null")).addColumn("connectionId","text",(W)=>W.references("connections.id").onDelete("set null")).addColumn("toolName","text",(W)=>W.notNull()).addColumn("allowed","integer",(W)=>W.notNull()).addColumn("duration","integer").addColumn("timestamp","text",(W)=>W.notNull().defaultTo(X6`CURRENT_TIMESTAMP`)).addColumn("requestMetadata","text").execute(),await J.schema.createTable("oauth_clients").addColumn("id","text",(W)=>W.primaryKey()).addColumn("clientId","text",(W)=>W.notNull().unique()).addColumn("clientSecret","text").addColumn("clientName","text",(W)=>W.notNull()).addColumn("redirectUris","text",(W)=>W.notNull()).addColumn("grantTypes","text",(W)=>W.notNull()).addColumn("scope","text").addColumn("clientUri","text").addColumn("logoUri","text").addColumn("createdAt","text",(W)=>W.notNull().defaultTo(X6`CURRENT_TIMESTAMP`)).execute(),await J.schema.createTable("oauth_authorization_codes").addColumn("code","text",(W)=>W.primaryKey()).addColumn("clientId","text",(W)=>W.notNull().references("oauth_clients.clientId").onDelete("cascade")).addColumn("userId","text",(W)=>W.notNull().references("user.id").onDelete("cascade")).addColumn("redirectUri","text",(W)=>W.notNull()).addColumn("scope","text").addColumn("codeChallenge","text").addColumn("codeChallengeMethod","text").addColumn("expiresAt","text",(W)=>W.notNull()).addColumn("createdAt","text",(W)=>W.notNull().defaultTo(X6`CURRENT_TIMESTAMP`)).execute(),await J.schema.createTable("oauth_refresh_tokens").addColumn("token","text",(W)=>W.primaryKey()).addColumn("clientId","text",(W)=>W.notNull().references("oauth_clients.clientId").onDelete("cascade")).addColumn("userId","text",(W)=>W.notNull().references("user.id").onDelete("cascade")).addColumn("scope","text").addColumn("expiresAt","text").addColumn("createdAt","text",(W)=>W.notNull().defaultTo(X6`CURRENT_TIMESTAMP`)).execute(),await J.schema.createTable("downstream_tokens").addColumn("id","text",(W)=>W.primaryKey()).addColumn("connectionId","text",(W)=>W.notNull().references("connections.id").onDelete("cascade")).addColumn("userId","text",(W)=>W.references("user.id").onDelete("cascade")).addColumn("accessToken","text",(W)=>W.notNull()).addColumn("refreshToken","text").addColumn("scope","text").addColumn("expiresAt","text").addColumn("createdAt","text",(W)=>W.notNull().defaultTo(X6`CURRENT_TIMESTAMP`)).addColumn("updatedAt","text",(W)=>W.notNull().defaultTo(X6`CURRENT_TIMESTAMP`)).execute(),await J.schema.createIndex("idx_connections_organizationId").on("connections").column("organizationId").execute(),await J.schema.createIndex("idx_audit_logs_organizationId").on("audit_logs").column("organizationId").execute(),await J.schema.createIndex("idx_audit_logs_userId").on("audit_logs").column("userId").execute(),await J.schema.createIndex("idx_audit_logs_timestamp").on("audit_logs").column("timestamp").execute()}async function Gg(J){await J.schema.dropTable("downstream_tokens").execute(),await J.schema.dropTable("oauth_refresh_tokens").execute(),await J.schema.dropTable("oauth_authorization_codes").execute(),await J.schema.dropTable("oauth_clients").execute(),await J.schema.dropTable("audit_logs").execute(),await J.schema.dropTable("api_keys").execute(),await J.schema.dropTable("connections").execute()}NJ();var cF={};N0(cF,{up:()=>$g,down:()=>Kg});async function $g(J){await J.schema.createTable("organization_settings").addColumn("organizationId","text",(W)=>W.primaryKey()).addColumn("modelsBindingConnectionId","text",(W)=>W.references("connections.id").onDelete("set null")).addColumn("createdAt","text",(W)=>W.notNull().defaultTo(X6`CURRENT_TIMESTAMP`)).addColumn("updatedAt","text",(W)=>W.notNull().defaultTo(X6`CURRENT_TIMESTAMP`)).execute()}async function Kg(J){await J.schema.dropTable("organization_settings").execute()}var wg={migration001:uF,migration002:cF},gj=wg;iX();CJ();iX();CJ();Y8();W0();var Z4=(J,W="ms")=>{return new Date(Date.now()+(W==="sec"?J*1000:J))},OH=new WeakMap;function Wq(J,W){let X=W.fields,G={};for(let Y in J){let $=X[Y];if(!$){G[Y]=J[Y];continue}if($.returned===!1)continue;G[Y]=J[Y]}return G}function vD(J,W){if(!OH.has(J))OH.set(J,new Map);let X=OH.get(J);if(X.has(W))return X.get(W);let G={...W==="user"?J.user?.additionalFields:{},...W==="session"?J.session?.additionalFields:{}};for(let Y of J.plugins||[])if(Y.schema&&Y.schema[W])G={...G,...Y.schema[W].fields};return OH.get(J).set(W,G),G}function A8(J,W){return Wq(W,{fields:vD(J,"user")})}function lJ(J,W){return Wq(W,{fields:vD(J,"session")})}function Xq(J,W){let X=W.action||"create",G=W.fields,Y=Object.assign(Object.create(null),null);for(let $ in G){if($ in J){if(G[$].input===!1){if(G[$].defaultValue!==void 0){if(X!=="update"){Y[$]=G[$].defaultValue;continue}}if(J[$])throw new V("BAD_REQUEST",{message:`${$} is not allowed to be set`});continue}if(G[$].validator?.input&&J[$]!==void 0){Y[$]=G[$].validator.input["~standard"].validate(J[$]);continue}if(G[$].transform?.input&&J[$]!==void 0){Y[$]=G[$].transform?.input(J[$]);continue}Y[$]=J[$];continue}if(G[$].defaultValue!==void 0&&X==="create"){if(typeof G[$].defaultValue==="function"){Y[$]=G[$].defaultValue();continue}Y[$]=G[$].defaultValue;continue}if(G[$].required&&X==="create")throw new V("BAD_REQUEST",{message:`${$} is required`})}return Y}function PH(J,W={},X){return Xq(W,{fields:vD(J,"user"),action:X})}function G8(J,W){if(!W)return J;for(let X in W){let G=W[X]?.modelName;if(G)J[X].modelName=G;for(let Y in J[X].fields){let $=W[X]?.fields?.[Y];if(!$)continue;J[X].fields[Y].fieldName=$}}return J}$8();X8();var uu="127.0.0.1";function U1(J,W){if(W.advanced?.ipAddress?.disableIpTracking)return null;if(UX()||FG())return uu;let X="headers"in J?J.headers:J,G=W.advanced?.ipAddress?.ipAddressHeaders||["x-forwarded-for"];for(let Y of G){let $="get"in X?X.get(Y):X[Y];if(typeof $==="string"){let K=$.split(",")[0].trim();if(cu(K))return K}}return null}function cu(J){if(s7().safeParse(J).success)return!0;if(JH().safeParse(J).success)return!0;return!1}I8();kJ();$8();m4();NJ();X8();async function vB(J,W){let X;if(!J.database){let G=O8(J),Y=Object.keys(G).reduce((K,w)=>{return K[w]=[],K},{}),{memoryAdapter:$}=await Promise.resolve().then(() => (PB(),OB));X=$(Y)(J)}else if(typeof J.database==="function")X=J.database(J);else X=await W(J);if(!X.transaction)w6.warn("Adapter does not correctly implement transaction function, patching it automatically. Please update your adapter implementation."),X.transaction=async(G)=>{return G(X)};return X}async function NM(J){return vB(J,async(W)=>{let{createKyselyAdapter:X}=await Promise.resolve().then(() => (zM(),HM)),{kysely:G,databaseType:Y,transaction:$}=await X(W);if(!G)throw new Y6("Failed to initialize database adapter");let{kyselyAdapter:K}=await Promise.resolve().then(() => (zM(),HM));return K(G,{type:Y||"sqlite",debugLogs:W.database&&"debugLogs"in W.database?W.database.debugLogs:!1,transaction:$})(W)})}function jB(J,W){let X=W.hooks;async function G(H,z,N){let U=await v8(),F=H;for(let D of X||[]){let O=D[z]?.create?.before;if(O){let P=await O(F,U);if(P===!1)return null;if(typeof P==="object"&&"data"in P)F={...F,...P.data}}}let Z=N?await N.fn(F):null,L=!N||N.executeMainFn?await(await e(J)).create({model:z,data:F,forceAllowId:!0}):Z;for(let D of X||[]){let O=D[z]?.create?.after;if(O)await O(L,U)}return L}async function Y(H,z,N,U){let F=await v8(),Z=H;for(let O of X||[]){let P=O[N]?.update?.before;if(P){let _=await P(H,F);if(_===!1)return null;if(typeof _==="object"&&"data"in _)Z={...Z,..._.data}}}let L=U?await U.fn(Z):null,D=!U||U.executeMainFn?await(await e(J)).update({model:N,update:Z,where:z}):L;for(let O of X||[]){let P=O[N]?.update?.after;if(P)await P(D,F)}return D}async function $(H,z,N,U){let F=await v8(),Z=H;for(let O of X||[]){let P=O[N]?.update?.before;if(P){let _=await P(H,F);if(_===!1)return null;if(typeof _==="object"&&"data"in _)Z={...Z,..._.data}}}let L=U?await U.fn(Z):null,D=!U||U.executeMainFn?await(await e(J)).updateMany({model:N,update:Z,where:z}):L;for(let O of X||[]){let P=O[N]?.update?.after;if(P)await P(D,F)}return D}async function K(H,z,N){let U=await v8(),F=null;try{F=(await(await e(J)).findMany({model:z,where:H,limit:1}))[0]||null}catch(D){}if(F)for(let D of X||[]){let O=D[z]?.delete?.before;if(O){if(await O(F,U)===!1)return null}}let Z=N?await N.fn(H):null,L=!N||N.executeMainFn?await(await e(J)).delete({model:z,where:H}):Z;if(F)for(let D of X||[]){let O=D[z]?.delete?.after;if(O)await O(F,U)}return L}async function w(H,z,N){let U=await v8(),F=[];try{F=await(await e(J)).findMany({model:z,where:H})}catch(D){}for(let D of F)for(let O of X||[]){let P=O[z]?.delete?.before;if(P){if(await P(D,U)===!1)return null}}let Z=N?await N.fn(H):null,L=!N||N.executeMainFn?await(await e(J)).deleteMany({model:z,where:H}):Z;for(let D of F)for(let O of X||[]){let P=O[z]?.delete?.after;if(P)await P(D,U)}return L}return{createWithHooks:G,updateWithHooks:Y,updateManyWithHooks:$,deleteWithHooks:K,deleteManyWithHooks:w}}var aH=(J,W)=>{let{logger:X,options:G}=W,Y=G.secondaryStorage,$=G.session?.expiresIn||604800,{createWithHooks:K,updateWithHooks:w,updateManyWithHooks:H,deleteWithHooks:z,deleteManyWithHooks:N}=jB(J,W);async function U(F){if(!Y)return;let Z=await Y.get(`active-sessions-${F.id}`);if(!Z)return;let L=Date.now(),D=(l6(Z)||[]).filter((O)=>O.expiresAt>L);await Promise.all(D.map(async({token:O})=>{let P=await Y.get(O);if(!P)return;let _=l6(P);if(!_)return;let T=Math.max(Math.floor(new Date(_.session.expiresAt).getTime()-L)/1000,0);await Y.set(O,JSON.stringify({session:_.session,user:F}),Math.floor(T))}))}return{createOAuthUser:async(F,Z)=>{return d9(J,async()=>{let L=await K({createdAt:new Date,updatedAt:new Date,...F},"user",void 0);return{user:L,account:await K({...Z,userId:L.id,createdAt:new Date,updatedAt:new Date},"account",void 0)}})},createUser:async(F)=>{return await K({createdAt:new Date,updatedAt:new Date,...F,email:F.email?.toLowerCase()},"user",void 0)},createAccount:async(F)=>{return await K({createdAt:new Date,updatedAt:new Date,...F},"account",void 0)},listSessions:async(F)=>{if(Y){let Z=await Y.get(`active-sessions-${F}`);if(!Z)return[];let L=l6(Z)||[],D=Date.now(),O=L.filter((_)=>_.expiresAt>D),P=[];for(let _ of O){let T=await Y.get(_.token);if(T){let v=l6(T);if(!v)return[];let q=lJ(W.options,{...v.session,expiresAt:new Date(v.session.expiresAt)});P.push(q)}}return P}return await(await e(J)).findMany({model:"session",where:[{field:"userId",value:F}]})},listUsers:async(F,Z,L,D)=>{return await(await e(J)).findMany({model:"user",limit:F,offset:Z,sortBy:L,where:D})},countTotalUsers:async(F)=>{let Z=await(await e(J)).count({model:"user",where:F});if(typeof Z==="string")return parseInt(Z);return Z},deleteUser:async(F)=>{if(Y)await Y.delete(`active-sessions-${F}`);if(!Y||G.session?.storeSessionInDatabase)await N([{field:"userId",value:F}],"session",void 0);await N([{field:"userId",value:F}],"account",void 0),await z([{field:"id",value:F}],"user",void 0)},createSession:async(F,Z,L,D)=>{let O=await v8(),P=O.headers||O.request?.headers,{id:_,...T}=L||{},v={ipAddress:O.request||O.headers?U1(O.request||O.headers,O.context.options)||"":"",userAgent:P?.get("user-agent")||"",...T,expiresAt:Z?Z4(86400,"sec"):Z4($,"sec"),userId:F,token:l4(32),createdAt:new Date,updatedAt:new Date,...D?T:{}};return await K(v,"session",Y?{fn:async(q)=>{let S=await Y.get(`active-sessions-${F}`),B=[],A=Date.now();if(S)B=l6(S)||[],B=B.filter((g)=>g.expiresAt>A);let E=B.sort((g,f)=>g.expiresAt-f.expiresAt),I=E.at(-1)?.expiresAt;if(E.push({token:v.token,expiresAt:v.expiresAt.getTime()}),!I||I<v.expiresAt.getTime())I=v.expiresAt.getTime();let m=Math.max(Math.floor((I-A)/1000),0);if(m>0)await Y.set(`active-sessions-${F}`,JSON.stringify(E),m);let u=await J.findOne({model:"user",where:[{field:"id",value:F}]}),b=Math.max(Math.floor((v.expiresAt.getTime()-A)/1000),0);if(b>0)await Y.set(v.token,JSON.stringify({session:q,user:u}),b);return q},executeMainFn:G.session?.storeSessionInDatabase}:void 0)},findSession:async(F)=>{if(Y){let O=await Y.get(F);if(!O&&!G.session?.storeSessionInDatabase)return null;if(O){let P=l6(O);if(!P)return null;return{session:lJ(W.options,{...P.session,expiresAt:new Date(P.session.expiresAt),createdAt:new Date(P.session.createdAt),updatedAt:new Date(P.session.updatedAt)}),user:A8(W.options,{...P.user,createdAt:new Date(P.user.createdAt),updatedAt:new Date(P.user.updatedAt)})}}}let Z=await(await e(J)).findOne({model:"session",where:[{value:F,field:"token"}],join:{user:!0}});if(!Z)return null;let{user:L,...D}=Z;if(!L)return null;return{session:lJ(W.options,D),user:A8(W.options,L)}},findSessions:async(F)=>{if(Y){let L=[];for(let D of F){let O=await Y.get(D);if(O){let P=l6(O);if(!P)return[];let _={session:{...P.session,expiresAt:new Date(P.session.expiresAt)},user:{...P.user,createdAt:new Date(P.user.createdAt),updatedAt:new Date(P.user.updatedAt)}};L.push(_)}}return L}let Z=await(await e(J)).findMany({model:"session",where:[{field:"token",value:F,operator:"in"}],join:{user:!0}});if(!Z.length)return[];if(Z.some((L)=>!L.user))return[];return Z.map((L)=>{let{user:D,...O}=L;return{session:O,user:D}})},updateSession:async(F,Z)=>{return await w(Z,[{field:"token",value:F}],"session",Y?{async fn(L){let D=await Y.get(F),O=null;if(D){let P=l6(D);if(!P)return null;return O={...P.session,...L},O}else return null},executeMainFn:G.session?.storeSessionInDatabase}:void 0)},deleteSession:async(F)=>{if(Y){let Z=await Y.get(F);if(Z){let{session:L}=l6(Z)??{};if(!L){X.error("Session not found in secondary storage");return}let D=L.userId,O=await Y.get(`active-sessions-${D}`);if(O){let P=l6(O)||[],_=Date.now(),T=P.filter((q)=>q.expiresAt>_&&q.token!==F),v=T.sort((q,S)=>q.expiresAt-S.expiresAt).at(-1)?.expiresAt;if(T.length>0&&v&&v>Date.now())await Y.set(`active-sessions-${D}`,JSON.stringify(T),Math.floor((v-_)/1000));else await Y.delete(`active-sessions-${D}`)}else X.error("Active sessions list not found in secondary storage")}if(await Y.delete(F),!G.session?.storeSessionInDatabase||W.options.session?.preserveSessionInDatabase)return}await(await e(J)).delete({model:"session",where:[{field:"token",value:F}]})},deleteAccounts:async(F)=>{await N([{field:"userId",value:F}],"account",void 0)},deleteAccount:async(F)=>{await z([{field:"id",value:F}],"account",void 0)},deleteSessions:async(F)=>{if(Y){if(typeof F==="string"){let Z=await Y.get(`active-sessions-${F}`),L=Z?l6(Z):[];if(!L)return;for(let D of L)await Y.delete(D.token)}else for(let Z of F)if(await Y.get(Z))await Y.delete(Z);if(!G.session?.storeSessionInDatabase||W.options.session?.preserveSessionInDatabase)return}await N([{field:Array.isArray(F)?"token":"userId",value:F,operator:Array.isArray(F)?"in":void 0}],"session",void 0)},findOAuthUser:async(F,Z,L)=>{let D=await(await e(J)).findMany({model:"account",where:[{value:Z,field:"accountId"}],join:{user:!0}}).then((O)=>{return O.find((P)=>P.providerId===L)});if(D)if(D.user)return{user:D.user,accounts:[D]};else{let O=await(await e(J)).findOne({model:"user",where:[{value:F.toLowerCase(),field:"email"}]});if(O)return{user:O,accounts:[D]};return null}else{let O=await(await e(J)).findOne({model:"user",where:[{value:F.toLowerCase(),field:"email"}]});if(O)return{user:O,accounts:await(await e(J)).findMany({model:"account",where:[{value:O.id,field:"userId"}]})||[]};else return null}},findUserByEmail:async(F,Z)=>{let L=await(await e(J)).findOne({model:"user",where:[{value:F.toLowerCase(),field:"email"}],join:{...Z?.includeAccounts?{account:!0}:{}}});if(!L)return null;let{account:D,...O}=L;return{user:O,accounts:D??[]}},findUserById:async(F)=>{return await(await e(J)).findOne({model:"user",where:[{field:"id",value:F}]})},linkAccount:async(F)=>{return await K({createdAt:new Date,updatedAt:new Date,...F},"account",void 0)},updateUser:async(F,Z)=>{let L=await w(Z,[{field:"id",value:F}],"user",void 0);return await U(L),await U(L),L},updateUserByEmail:async(F,Z)=>{let L=await w(Z,[{field:"email",value:F.toLowerCase()}],"user",void 0);return await U(L),await U(L),L},updatePassword:async(F,Z)=>{await H({password:Z},[{field:"userId",value:F},{field:"providerId",value:"credential"}],"account",void 0)},findAccounts:async(F)=>{return await(await e(J)).findMany({model:"account",where:[{field:"userId",value:F}]})},findAccount:async(F)=>{return await(await e(J)).findOne({model:"account",where:[{field:"accountId",value:F}]})},findAccountByProviderId:async(F,Z)=>{return await(await e(J)).findOne({model:"account",where:[{field:"accountId",value:F},{field:"providerId",value:Z}]})},findAccountByUserId:async(F)=>{return await(await e(J)).findMany({model:"account",where:[{field:"userId",value:F}]})},updateAccount:async(F,Z)=>{return await w(Z,[{field:"id",value:F}],"account",void 0)},createVerificationValue:async(F)=>{return await K({createdAt:new Date,updatedAt:new Date,...F},"verification",void 0)},findVerificationValue:async(F)=>{let Z=await(await e(J)).findMany({model:"verification",where:[{field:"identifier",value:F}],sortBy:{field:"createdAt",direction:"desc"},limit:1});if(!G.verification?.disableCleanup)await(await e(J)).deleteMany({model:"verification",where:[{field:"expiresAt",value:new Date,operator:"lt"}]});return Z[0]},deleteVerificationValue:async(F)=>{await(await e(J)).delete({model:"verification",where:[{field:"id",value:F}]})},deleteVerificationByIdentifier:async(F)=>{await(await e(J)).delete({model:"verification",where:[{field:"identifier",value:F}]})},updateVerificationValue:async(F,Z)=>{return await w(Z,[{field:"id",value:F}],"verification",void 0)}}};function AW({fields:J,isClientSide:W}){let X=Object.keys(J).reduce((G,Y)=>{let $=J[Y];if(!$)return G;if(W&&$.input===!1)return G;let K;if($.type==="json")K=I$?I$():R6();else if($.type==="string[]"||$.type==="number[]")K=P6($.type==="string[]"?j():_6());else if(Array.isArray($.type))K=R6();else K=p0[$.type]();if($?.required===!1)K=K.optional();if($?.returned===!1)return G;return{...G,[Y]:K}},{});return c(X)}function SB(J){let W=O8(J),X={};for(let G in W){let Y=W[G],$=Y.fields,K={};if(Object.entries($).forEach(([w,H])=>{if(K[H.fieldName||w]=H,H.references){let z=W[H.references.model];if(z)K[H.fieldName||w].references={...H.references,model:z.modelName,field:H.references.field}}}),X[Y.modelName]){X[Y.modelName].fields={...X[Y.modelName].fields,...K};continue}X[Y.modelName]={fields:K,order:Y.order||1/0}}return X}var jc={postgres:{string:["character varying","varchar","text","uuid"],number:["int4","integer","bigint","smallint","numeric","real","double precision"],boolean:["bool","boolean"],date:["timestamptz","timestamp","date"],json:["json","jsonb"]},mysql:{string:["varchar","text","uuid"],number:["integer","int","bigint","smallint","decimal","float","double"],boolean:["boolean","tinyint"],date:["timestamp","datetime","date"],json:["json"]},sqlite:{string:["TEXT"],number:["INTEGER","REAL"],boolean:["INTEGER","BOOLEAN"],date:["DATE","INTEGER"],json:["TEXT"]},mssql:{string:["varchar","nvarchar","uniqueidentifier"],number:["int","bigint","smallint","decimal","float","double"],boolean:["bit","smallint"],date:["datetime2","date","datetime"],json:["varchar","nvarchar"]}};function _B(J,W,X){function G($){return $.toLowerCase().split("(")[0].trim()}if(W==="string[]"||W==="number[]")return J.toLowerCase().includes("json");let Y=jc[X];return(Array.isArray(W)?Y.string.map(($)=>$.toLowerCase()):Y[W].map(($)=>$.toLowerCase())).includes(G(J))}async function Sc(J){try{let W=await X6`SHOW search_path`.execute(J);if(W.rows[0]?.search_path)return W.rows[0].search_path.split(",").map((X)=>X.trim()).map((X)=>X.replace(/^["']|["']$/g,"")).filter((X)=>!X.startsWith("$"))[0]||"public"}catch(W){}return"public"}async function a$(J){let W=SB(J),X=QG(J.logger),{kysely:G,databaseType:Y}=await oK(J);if(!Y)X.warn("Could not determine database type, defaulting to sqlite. Please provide a type in the database options to avoid this."),Y="sqlite";if(!G)X.error("Only kysely adapter is supported for migrations. You can use `generate` command to generate the schema, if you're using a different adapter."),process.exit(1);let $="public";if(Y==="postgres"){$=await Sc(G),X.debug(`PostgreSQL migration: Using schema '${$}' (from search_path)`);try{if(!(await X6`
				SELECT schema_name 
				FROM information_schema.schemata 
				WHERE schema_name = ${$}
			`.execute(G)).rows[0])X.warn(`Schema '${$}' does not exist. Tables will be inspected from available schemas. Consider creating the schema first or checking your database configuration.`)}catch(v){X.debug(`Could not verify schema existence: ${v instanceof Error?v.message:String(v)}`)}}let K=await G.introspection.getTables(),w=K;if(Y==="postgres")try{let v=await X6`
				SELECT table_name 
				FROM information_schema.tables 
				WHERE table_schema = ${$}
				AND table_type = 'BASE TABLE'
			`.execute(G),q=new Set(v.rows.map((S)=>S.table_name));w=K.filter((S)=>S.schema===$&&q.has(S.name)),X.debug(`Found ${w.length} table(s) in schema '${$}': ${w.map((S)=>S.name).join(", ")||"(none)"}`)}catch(v){X.warn(`Could not filter tables by schema. Using all discovered tables. Error: ${v instanceof Error?v.message:String(v)}`)}let H=[],z=[];for(let[v,q]of Object.entries(W)){let S=w.find((A)=>A.name===v);if(!S){let A=H.findIndex((m)=>m.table===v),E={table:v,fields:q.fields,order:q.order||1/0},I=H.findIndex((m)=>(m.order||1/0)>E.order);if(I===-1)if(A===-1)H.push(E);else H[A].fields={...H[A].fields,...q.fields};else H.splice(I,0,E);continue}let B={};for(let[A,E]of Object.entries(q.fields)){let I=S.columns.find((m)=>m.name===A);if(!I){B[A]=E;continue}if(_B(I.dataType,E.type,Y))continue;else X.warn(`Field ${A} in table ${v} has a different type in the database. Expected ${E.type} but got ${I.dataType}.`)}if(Object.keys(B).length>0)z.push({table:v,fields:B,order:q.order||1/0})}let N=[],U=J.advanced?.database?.generateId==="uuid",F=J.advanced?.database?.useNumberId||J.advanced?.database?.generateId==="serial";function Z(v,q){let S=v.type,B={string:{sqlite:"text",postgres:"text",mysql:v.unique?"varchar(255)":v.references?"varchar(36)":v.sortable?"varchar(255)":v.index?"varchar(255)":"text",mssql:v.unique||v.sortable?"varchar(255)":v.references?"varchar(36)":"varchar(8000)"},boolean:{sqlite:"integer",postgres:"boolean",mysql:"boolean",mssql:"smallint"},number:{sqlite:v.bigint?"bigint":"integer",postgres:v.bigint?"bigint":"integer",mysql:v.bigint?"bigint":"integer",mssql:v.bigint?"bigint":"integer"},date:{sqlite:"date",postgres:"timestamptz",mysql:"timestamp(3)",mssql:X6`datetime2(3)`},json:{sqlite:"text",postgres:"jsonb",mysql:"json",mssql:"varchar(8000)"},id:{postgres:F?X6`integer GENERATED BY DEFAULT AS IDENTITY`:U?"uuid":"text",mysql:F?"integer":U?"varchar(36)":"varchar(36)",mssql:F?"integer":U?"varchar(36)":"varchar(36)",sqlite:F?"integer":"text"},foreignKeyId:{postgres:F?"integer":U?"uuid":"text",mysql:F?"integer":U?"varchar(36)":"varchar(36)",mssql:F?"integer":U?"varchar(36)":"varchar(36)",sqlite:F?"integer":"text"}};if(q==="id"||v.references?.field==="id"){if(q==="id")return B.id[Y];return B.foreignKeyId[Y]}if(Y==="sqlite"&&(S==="string[]"||S==="number[]"))return"text";if(S==="string[]"||S==="number[]")return"jsonb";if(Array.isArray(S))return"text";return B[S][Y||"sqlite"]}let L=Jw({schema:O8(J),usePlural:!1}),D=eK({schema:O8(J),usePlural:!1});function O(v,q){try{return`${L(v)}.${D({model:v,field:q})}`}catch{return`${v}.${q}`}}if(z.length)for(let v of z)for(let[q,S]of Object.entries(v.fields)){let B=Z(S,q),A=G.schema.alterTable(v.table);if(S.index)A=A.addIndex(`${v.table}_${q}_idx`);let E=A.addColumn(q,B,(I)=>{if(I=S.required!==!1?I.notNull():I,S.references)I=I.references(O(S.references.model,S.references.field)).onDelete(S.references.onDelete||"cascade");if(S.unique)I=I.unique();if(S.type==="date"&&typeof S.defaultValue==="function"&&(Y==="postgres"||Y==="mysql"||Y==="mssql"))if(Y==="mysql")I=I.defaultTo(X6`CURRENT_TIMESTAMP(3)`);else I=I.defaultTo(X6`CURRENT_TIMESTAMP`);return I});N.push(E)}let P=[];if(J.advanced?.database?.useNumberId)X.warn("`useNumberId` is deprecated. Please use `generateId` with `serial` instead.");if(H.length)for(let v of H){let q=Z({type:F?"number":"string"},"id"),S=G.schema.createTable(v.table).addColumn("id",q,(B)=>{if(F){if(Y==="postgres")return B.primaryKey().notNull();else if(Y==="sqlite")return B.primaryKey().notNull();else if(Y==="mssql")return B.identity().primaryKey().notNull();return B.autoIncrement().primaryKey().notNull()}if(U){if(Y==="postgres")return B.primaryKey().defaultTo(X6`pg_catalog.gen_random_uuid()`).notNull();return B.primaryKey().notNull()}return B.primaryKey().notNull()});for(let[B,A]of Object.entries(v.fields)){let E=Z(A,B);if(S=S.addColumn(B,E,(I)=>{if(I=A.required!==!1?I.notNull():I,A.references)I=I.references(O(A.references.model,A.references.field)).onDelete(A.references.onDelete||"cascade");if(A.unique)I=I.unique();if(A.type==="date"&&typeof A.defaultValue==="function"&&(Y==="postgres"||Y==="mysql"||Y==="mssql"))if(Y==="mysql")I=I.defaultTo(X6`CURRENT_TIMESTAMP(3)`);else I=I.defaultTo(X6`CURRENT_TIMESTAMP`);return I}),A.index){let I=G.schema.createIndex(`${v.table}_${B}_${A.unique?"uidx":"idx"}`).on(v.table).columns([B]);P.push(A.unique?I.unique():I)}}N.push(S)}if(P.length)for(let v of P)N.push(v);async function _(){for(let v of N)await v.execute()}async function T(){return N.map((v)=>v.compile().sql).join(`;

`)+";"}return{toBeCreated:H,toBeAdded:z,runMigrations:_,compileMigrations:T}}Y8();J0();BW();jG();I8();var Vv6=Object.freeze({status:"aborted"});function x(J,W,X){function G(w,H){var z;Object.defineProperty(w,"_zod",{value:w._zod??{},enumerable:!1}),(z=w._zod).traits??(z.traits=new Set),w._zod.traits.add(J),W(w,H);for(let N in K.prototype)if(!(N in w))Object.defineProperty(w,N,{value:K.prototype[N].bind(w)});w._zod.constr=K,w._zod.def=H}let Y=X?.Parent??Object;class $ extends Y{}Object.defineProperty($,"name",{value:J});function K(w){var H;let z=X?.Parent?new $:this;G(z,w),(H=z._zod).deferred??(H.deferred=[]);for(let N of z._zod.deferred)N();return z}return Object.defineProperty(K,"init",{value:G}),Object.defineProperty(K,Symbol.hasInstance,{value:(w)=>{if(X?.Parent&&w instanceof X.Parent)return!0;return w?._zod?.traits?.has(J)}}),Object.defineProperty(K,"name",{value:J}),K}var Dv6=Symbol("zod_brand");class EW extends Error{constructor(){super("Encountered Promise during synchronous parse. Use .parseAsync() instead.")}}class t$ extends Error{constructor(J){super(`Encountered unidirectional transform during encode: ${J}`);this.name="ZodEncodeError"}}var tH={};function MJ(J){if(J)Object.assign(tH,J);return tH}var e6={};N0(e6,{unwrapMessage:()=>o$,uint8ArrayToHex:()=>ic,uint8ArrayToBase64url:()=>rc,uint8ArrayToBase64:()=>RB,stringifyPrimitive:()=>J3,shallowClone:()=>qB,safeExtend:()=>xc,required:()=>lc,randomString:()=>bc,propertyKeyTypes:()=>LM,promiseAllObject:()=>Cc,primitiveTypes:()=>BB,prefixIssues:()=>W5,pick:()=>mc,partial:()=>cc,optionalKeys:()=>VM,omit:()=>fc,objectClone:()=>Ec,numKeys:()=>kc,nullish:()=>e$,normalizeParams:()=>G6,mergeDefs:()=>OX,merge:()=>uc,jsonStringifyReplacer:()=>_G,joinValues:()=>oH,issue:()=>TG,isPlainObject:()=>M1,isObject:()=>SG,hexToUint8Array:()=>nc,getSizableOrigin:()=>EB,getParsedType:()=>hc,getLengthableOrigin:()=>X5,getEnumValues:()=>UM,getElementAtPath:()=>Rc,floatSafeRemainder:()=>QM,finalizeIssue:()=>tJ,extend:()=>yc,escapeRegex:()=>O1,esc:()=>sH,defineLazy:()=>U4,createTransparentProxy:()=>gc,cloneDef:()=>Ic,clone:()=>OJ,cleanRegex:()=>J5,cleanEnum:()=>pc,captureStackTrace:()=>eH,cached:()=>s$,base64urlToUint8Array:()=>dc,base64ToUint8Array:()=>IB,assignProp:()=>MX,assertNotEqual:()=>Tc,assertNever:()=>Bc,assertIs:()=>qc,assertEqual:()=>_c,assert:()=>Ac,allowsEval:()=>ZM,aborted:()=>PX,NUMBER_FORMAT_RANGES:()=>DM,Class:()=>CB,BIGINT_FORMAT_RANGES:()=>AB});function _c(J){return J}function Tc(J){return J}function qc(J){}function Bc(J){throw Error()}function Ac(J){}function UM(J){let W=Object.values(J).filter((G)=>typeof G==="number");return Object.entries(J).filter(([G,Y])=>W.indexOf(+G)===-1).map(([G,Y])=>Y)}function oH(J,W="|"){return J.map((X)=>J3(X)).join(W)}function _G(J,W){if(typeof W==="bigint")return W.toString();return W}function s$(J){return{get value(){{let X=J();return Object.defineProperty(this,"value",{value:X}),X}throw Error("cached value already set")}}}function e$(J){return J===null||J===void 0}function J5(J){let W=J.startsWith("^")?1:0,X=J.endsWith("$")?J.length-1:J.length;return J.slice(W,X)}function QM(J,W){let X=(J.toString().split(".")[1]||"").length,G=W.toString(),Y=(G.split(".")[1]||"").length;if(Y===0&&/\d?e-\d?/.test(G)){let H=G.match(/\d?e-(\d?)/);if(H?.[1])Y=Number.parseInt(H[1])}let $=X>Y?X:Y,K=Number.parseInt(J.toFixed($).replace(".","")),w=Number.parseInt(W.toFixed($).replace(".",""));return K%w/10**$}var TB=Symbol("evaluating");function U4(J,W,X){let G=void 0;Object.defineProperty(J,W,{get(){if(G===TB)return;if(G===void 0)G=TB,G=X();return G},set(Y){Object.defineProperty(J,W,{value:Y})},configurable:!0})}function Ec(J){return Object.create(Object.getPrototypeOf(J),Object.getOwnPropertyDescriptors(J))}function MX(J,W,X){Object.defineProperty(J,W,{value:X,writable:!0,enumerable:!0,configurable:!0})}function OX(...J){let W={};for(let X of J){let G=Object.getOwnPropertyDescriptors(X);Object.assign(W,G)}return Object.defineProperties({},W)}function Ic(J){return OX(J._zod.def)}function Rc(J,W){if(!W)return J;return W.reduce((X,G)=>X?.[G],J)}function Cc(J){let W=Object.keys(J),X=W.map((G)=>J[G]);return Promise.all(X).then((G)=>{let Y={};for(let $=0;$<W.length;$++)Y[W[$]]=G[$];return Y})}function bc(J=10){let X="";for(let G=0;G<J;G++)X+="abcdefghijklmnopqrstuvwxyz"[Math.floor(Math.random()*26)];return X}function sH(J){return JSON.stringify(J)}var eH="captureStackTrace"in Error?Error.captureStackTrace:(...J)=>{};function SG(J){return typeof J==="object"&&J!==null&&!Array.isArray(J)}var ZM=s$(()=>{if(typeof navigator<"u"&&navigator?.userAgent?.includes("Cloudflare"))return!1;try{return new Function(""),!0}catch(J){return!1}});function M1(J){if(SG(J)===!1)return!1;let W=J.constructor;if(W===void 0)return!0;let X=W.prototype;if(SG(X)===!1)return!1;if(Object.prototype.hasOwnProperty.call(X,"isPrototypeOf")===!1)return!1;return!0}function qB(J){if(M1(J))return{...J};if(Array.isArray(J))return[...J];return J}function kc(J){let W=0;for(let X in J)if(Object.prototype.hasOwnProperty.call(J,X))W++;return W}var hc=(J)=>{let W=typeof J;switch(W){case"undefined":return"undefined";case"string":return"string";case"number":return Number.isNaN(J)?"nan":"number";case"boolean":return"boolean";case"function":return"function";case"bigint":return"bigint";case"symbol":return"symbol";case"object":if(Array.isArray(J))return"array";if(J===null)return"null";if(J.then&&typeof J.then==="function"&&J.catch&&typeof J.catch==="function")return"promise";if(typeof Map<"u"&&J instanceof Map)return"map";if(typeof Set<"u"&&J instanceof Set)return"set";if(typeof Date<"u"&&J instanceof Date)return"date";if(typeof File<"u"&&J instanceof File)return"file";return"object";default:throw Error(`Unknown data type: ${W}`)}},LM=new Set(["string","number","symbol"]),BB=new Set(["string","number","bigint","boolean","symbol","undefined"]);function O1(J){return J.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function OJ(J,W,X){let G=new J._zod.constr(W??J._zod.def);if(!W||X?.parent)G._zod.parent=J;return G}function G6(J){let W=J;if(!W)return{};if(typeof W==="string")return{error:()=>W};if(W?.message!==void 0){if(W?.error!==void 0)throw Error("Cannot specify both `message` and `error` params");W.error=W.message}if(delete W.message,typeof W.error==="string")return{...W,error:()=>W.error};return W}function gc(J){let W;return new Proxy({},{get(X,G,Y){return W??(W=J()),Reflect.get(W,G,Y)},set(X,G,Y,$){return W??(W=J()),Reflect.set(W,G,Y,$)},has(X,G){return W??(W=J()),Reflect.has(W,G)},deleteProperty(X,G){return W??(W=J()),Reflect.deleteProperty(W,G)},ownKeys(X){return W??(W=J()),Reflect.ownKeys(W)},getOwnPropertyDescriptor(X,G){return W??(W=J()),Reflect.getOwnPropertyDescriptor(W,G)},defineProperty(X,G,Y){return W??(W=J()),Reflect.defineProperty(W,G,Y)}})}function J3(J){if(typeof J==="bigint")return J.toString()+"n";if(typeof J==="string")return`"${J}"`;return`${J}`}function VM(J){return Object.keys(J).filter((W)=>{return J[W]._zod.optin==="optional"&&J[W]._zod.optout==="optional"})}var DM={safeint:[Number.MIN_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],int32:[-2147483648,2147483647],uint32:[0,4294967295],float32:[-340282346638528860000000000000000000000,340282346638528860000000000000000000000],float64:[-Number.MAX_VALUE,Number.MAX_VALUE]},AB={int64:[BigInt("-9223372036854775808"),BigInt("9223372036854775807")],uint64:[BigInt(0),BigInt("18446744073709551615")]};function mc(J,W){let X=J._zod.def,G=OX(J._zod.def,{get shape(){let Y={};for(let $ in W){if(!($ in X.shape))throw Error(`Unrecognized key: "${$}"`);if(!W[$])continue;Y[$]=X.shape[$]}return MX(this,"shape",Y),Y},checks:[]});return OJ(J,G)}function fc(J,W){let X=J._zod.def,G=OX(J._zod.def,{get shape(){let Y={...J._zod.def.shape};for(let $ in W){if(!($ in X.shape))throw Error(`Unrecognized key: "${$}"`);if(!W[$])continue;delete Y[$]}return MX(this,"shape",Y),Y},checks:[]});return OJ(J,G)}function yc(J,W){if(!M1(W))throw Error("Invalid input to extend: expected a plain object");let X=J._zod.def.checks;if(X&&X.length>0)throw Error("Object schemas containing refinements cannot be extended. Use `.safeExtend()` instead.");let Y=OX(J._zod.def,{get shape(){let $={...J._zod.def.shape,...W};return MX(this,"shape",$),$},checks:[]});return OJ(J,Y)}function xc(J,W){if(!M1(W))throw Error("Invalid input to safeExtend: expected a plain object");let X={...J._zod.def,get shape(){let G={...J._zod.def.shape,...W};return MX(this,"shape",G),G},checks:J._zod.def.checks};return OJ(J,X)}function uc(J,W){let X=OX(J._zod.def,{get shape(){let G={...J._zod.def.shape,...W._zod.def.shape};return MX(this,"shape",G),G},get catchall(){return W._zod.def.catchall},checks:[]});return OJ(J,X)}function cc(J,W,X){let G=OX(W._zod.def,{get shape(){let Y=W._zod.def.shape,$={...Y};if(X)for(let K in X){if(!(K in Y))throw Error(`Unrecognized key: "${K}"`);if(!X[K])continue;$[K]=J?new J({type:"optional",innerType:Y[K]}):Y[K]}else for(let K in Y)$[K]=J?new J({type:"optional",innerType:Y[K]}):Y[K];return MX(this,"shape",$),$},checks:[]});return OJ(W,G)}function lc(J,W,X){let G=OX(W._zod.def,{get shape(){let Y=W._zod.def.shape,$={...Y};if(X)for(let K in X){if(!(K in $))throw Error(`Unrecognized key: "${K}"`);if(!X[K])continue;$[K]=new J({type:"nonoptional",innerType:Y[K]})}else for(let K in Y)$[K]=new J({type:"nonoptional",innerType:Y[K]});return MX(this,"shape",$),$},checks:[]});return OJ(W,G)}function PX(J,W=0){if(J.aborted===!0)return!0;for(let X=W;X<J.issues.length;X++)if(J.issues[X]?.continue!==!0)return!0;return!1}function W5(J,W){return W.map((X)=>{var G;return(G=X).path??(G.path=[]),X.path.unshift(J),X})}function o$(J){return typeof J==="string"?J:J?.message}function tJ(J,W,X){let G={...J,path:J.path??[]};if(!J.message){let Y=o$(J.inst?._zod.def?.error?.(J))??o$(W?.error?.(J))??o$(X.customError?.(J))??o$(X.localeError?.(J))??"Invalid input";G.message=Y}if(delete G.inst,delete G.continue,!W?.reportInput)delete G.input;return G}function EB(J){if(J instanceof Set)return"set";if(J instanceof Map)return"map";if(J instanceof File)return"file";return"unknown"}function X5(J){if(Array.isArray(J))return"array";if(typeof J==="string")return"string";return"unknown"}function TG(...J){let[W,X,G]=J;if(typeof W==="string")return{message:W,code:"custom",input:X,inst:G};return{...W}}function pc(J){return Object.entries(J).filter(([W,X])=>{return Number.isNaN(Number.parseInt(W,10))}).map((W)=>W[1])}function IB(J){let W=atob(J),X=new Uint8Array(W.length);for(let G=0;G<W.length;G++)X[G]=W.charCodeAt(G);return X}function RB(J){let W="";for(let X=0;X<J.length;X++)W+=String.fromCharCode(J[X]);return btoa(W)}function dc(J){let W=J.replace(/-/g,"+").replace(/_/g,"/"),X="=".repeat((4-W.length%4)%4);return IB(W+X)}function rc(J){return RB(J).replace(/\+/g,"-").replace(/\//g,"_").replace(/=/g,"")}function nc(J){let W=J.replace(/^0x/,"");if(W.length%2!==0)throw Error("Invalid hex string length");let X=new Uint8Array(W.length/2);for(let G=0;G<W.length;G+=2)X[G/2]=Number.parseInt(W.slice(G,G+2),16);return X}function ic(J){return Array.from(J).map((W)=>W.toString(16).padStart(2,"0")).join("")}class CB{constructor(...J){}}var bB=(J,W)=>{J.name="$ZodError",Object.defineProperty(J,"_zod",{value:J._zod,enumerable:!1}),Object.defineProperty(J,"issues",{value:W,enumerable:!1}),J.message=JSON.stringify(W,_G,2),Object.defineProperty(J,"toString",{value:()=>J.message,enumerable:!1})},W3=x("$ZodError",bB),MM=x("$ZodError",bB,{Parent:Error});function kB(J,W=(X)=>X.message){let X={},G=[];for(let Y of J.issues)if(Y.path.length>0)X[Y.path[0]]=X[Y.path[0]]||[],X[Y.path[0]].push(W(Y));else G.push(W(Y));return{formErrors:G,fieldErrors:X}}function hB(J,W=(X)=>X.message){let X={_errors:[]},G=(Y)=>{for(let $ of Y.issues)if($.code==="invalid_union"&&$.errors.length)$.errors.map((K)=>G({issues:K}));else if($.code==="invalid_key")G({issues:$.issues});else if($.code==="invalid_element")G({issues:$.issues});else if($.path.length===0)X._errors.push(W($));else{let K=X,w=0;while(w<$.path.length){let H=$.path[w];if(w!==$.path.length-1)K[H]=K[H]||{_errors:[]};else K[H]=K[H]||{_errors:[]},K[H]._errors.push(W($));K=K[H],w++}}};return G(J),X}var X3=(J)=>(W,X,G,Y)=>{let $=G?Object.assign(G,{async:!1}):{async:!1},K=W._zod.run({value:X,issues:[]},$);if(K instanceof Promise)throw new EW;if(K.issues.length){let w=new(Y?.Err??J)(K.issues.map((H)=>tJ(H,$,MJ())));throw eH(w,Y?.callee),w}return K.value};var Y3=(J)=>async(W,X,G,Y)=>{let $=G?Object.assign(G,{async:!0}):{async:!0},K=W._zod.run({value:X,issues:[]},$);if(K instanceof Promise)K=await K;if(K.issues.length){let w=new(Y?.Err??J)(K.issues.map((H)=>tJ(H,$,MJ())));throw eH(w,Y?.callee),w}return K.value};var Y5=(J)=>(W,X,G)=>{let Y=G?{...G,async:!1}:{async:!1},$=W._zod.run({value:X,issues:[]},Y);if($ instanceof Promise)throw new EW;return $.issues.length?{success:!1,error:new(J??W3)($.issues.map((K)=>tJ(K,Y,MJ())))}:{success:!0,data:$.value}},gB=Y5(MM),G5=(J)=>async(W,X,G)=>{let Y=G?Object.assign(G,{async:!0}):{async:!0},$=W._zod.run({value:X,issues:[]},Y);if($ instanceof Promise)$=await $;return $.issues.length?{success:!1,error:new J($.issues.map((K)=>tJ(K,Y,MJ())))}:{success:!0,data:$.value}},mB=G5(MM),fB=(J)=>(W,X,G)=>{let Y=G?Object.assign(G,{direction:"backward"}):{direction:"backward"};return X3(J)(W,X,Y)};var yB=(J)=>(W,X,G)=>{return X3(J)(W,X,G)};var xB=(J)=>async(W,X,G)=>{let Y=G?Object.assign(G,{direction:"backward"}):{direction:"backward"};return Y3(J)(W,X,Y)};var uB=(J)=>async(W,X,G)=>{return Y3(J)(W,X,G)};var cB=(J)=>(W,X,G)=>{let Y=G?Object.assign(G,{direction:"backward"}):{direction:"backward"};return Y5(J)(W,X,Y)};var lB=(J)=>(W,X,G)=>{return Y5(J)(W,X,G)};var pB=(J)=>async(W,X,G)=>{let Y=G?Object.assign(G,{direction:"backward"}):{direction:"backward"};return G5(J)(W,X,Y)};var dB=(J)=>async(W,X,G)=>{return G5(J)(W,X,G)};var rB=/^[cC][^\s-]{8,}$/,nB=/^[0-9a-z]+$/,iB=/^[0-9A-HJKMNP-TV-Za-hjkmnp-tv-z]{26}$/,aB=/^[0-9a-vA-V]{20}$/,tB=/^[A-Za-z0-9]{27}$/,oB=/^[a-zA-Z0-9_-]{21}$/,sB=/^P(?:(\d+W)|(?!.*W)(?=\d|T\d)(\d+Y)?(\d+M)?(\d+D)?(T(?=\d)(\d+H)?(\d+M)?(\d+([.,]\d+)?S)?)?)$/;var eB=/^([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{12})$/,OM=(J)=>{if(!J)return/^([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[1-8][0-9a-fA-F]{3}-[89abAB][0-9a-fA-F]{3}-[0-9a-fA-F]{12}|00000000-0000-0000-0000-000000000000|ffffffff-ffff-ffff-ffff-ffffffffffff)$/;return new RegExp(`^([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-${J}[0-9a-fA-F]{3}-[89abAB][0-9a-fA-F]{3}-[0-9a-fA-F]{12})$`)};var JA=/^(?!\.)(?!.*\.\.)([A-Za-z0-9_'+\-\.]*)[A-Za-z0-9_+-]@([A-Za-z0-9][A-Za-z0-9\-]*\.)+[A-Za-z]{2,}$/;function WA(){return new RegExp("^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$","u")}var XA=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,YA=/^(([0-9a-fA-F]{1,4}:){7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:))$/,GA=/^((25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/([0-9]|[1-2][0-9]|3[0-2])$/,$A=/^(([0-9a-fA-F]{1,4}:){7}[0-9a-fA-F]{1,4}|::|([0-9a-fA-F]{1,4})?::([0-9a-fA-F]{1,4}:?){0,6})\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,KA=/^$|^(?:[0-9a-zA-Z+/]{4})*(?:(?:[0-9a-zA-Z+/]{2}==)|(?:[0-9a-zA-Z+/]{3}=))?$/,PM=/^[A-Za-z0-9_-]*$/,wA=/^(?=.{1,253}\.?$)[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[-0-9a-zA-Z]{0,61}[0-9a-zA-Z])?)*\.?$/;var HA=/^\+(?:[0-9]){6,14}[0-9]$/,zA="(?:(?:\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-(?:(?:0[13578]|1[02])-(?:0[1-9]|[12]\\d|3[01])|(?:0[469]|11)-(?:0[1-9]|[12]\\d|30)|(?:02)-(?:0[1-9]|1\\d|2[0-8])))",NA=new RegExp(`^${zA}$`);function FA(J){return typeof J.precision==="number"?J.precision===-1?"(?:[01]\\d|2[0-3]):[0-5]\\d":J.precision===0?"(?:[01]\\d|2[0-3]):[0-5]\\d:[0-5]\\d":`(?:[01]\\d|2[0-3]):[0-5]\\d:[0-5]\\d\\.\\d{${J.precision}}`:"(?:[01]\\d|2[0-3]):[0-5]\\d(?::[0-5]\\d(?:\\.\\d+)?)?"}function UA(J){return new RegExp(`^${FA(J)}$`)}function QA(J){let W=FA({precision:J.precision}),X=["Z"];if(J.local)X.push("");if(J.offset)X.push("([+-](?:[01]\\d|2[0-3]):[0-5]\\d)");let G=`${W}(?:${X.join("|")})`;return new RegExp(`^${zA}T(?:${G})$`)}var ZA=(J)=>{let W=J?`[\\s\\S]{${J?.minimum??0},${J?.maximum??""}}`:"[\\s\\S]*";return new RegExp(`^${W}$`)},LA=/^-?\d+n?$/,VA=/^-?\d+$/,DA=/^-?\d+(?:\.\d+)?/,MA=/^(?:true|false)$/i;var OA=/^[^A-Z]*$/,PA=/^[^a-z]*$/;var v0=x("$ZodCheck",(J,W)=>{var X;J._zod??(J._zod={}),J._zod.def=W,(X=J._zod).onattach??(X.onattach=[])}),vA={number:"number",bigint:"bigint",object:"date"},vM=x("$ZodCheckLessThan",(J,W)=>{v0.init(J,W);let X=vA[typeof W.value];J._zod.onattach.push((G)=>{let Y=G._zod.bag,$=(W.inclusive?Y.maximum:Y.exclusiveMaximum)??Number.POSITIVE_INFINITY;if(W.value<$)if(W.inclusive)Y.maximum=W.value;else Y.exclusiveMaximum=W.value}),J._zod.check=(G)=>{if(W.inclusive?G.value<=W.value:G.value<W.value)return;G.issues.push({origin:X,code:"too_big",maximum:W.value,input:G.value,inclusive:W.inclusive,inst:J,continue:!W.abort})}}),jM=x("$ZodCheckGreaterThan",(J,W)=>{v0.init(J,W);let X=vA[typeof W.value];J._zod.onattach.push((G)=>{let Y=G._zod.bag,$=(W.inclusive?Y.minimum:Y.exclusiveMinimum)??Number.NEGATIVE_INFINITY;if(W.value>$)if(W.inclusive)Y.minimum=W.value;else Y.exclusiveMinimum=W.value}),J._zod.check=(G)=>{if(W.inclusive?G.value>=W.value:G.value>W.value)return;G.issues.push({origin:X,code:"too_small",minimum:W.value,input:G.value,inclusive:W.inclusive,inst:J,continue:!W.abort})}}),jA=x("$ZodCheckMultipleOf",(J,W)=>{v0.init(J,W),J._zod.onattach.push((X)=>{var G;(G=X._zod.bag).multipleOf??(G.multipleOf=W.value)}),J._zod.check=(X)=>{if(typeof X.value!==typeof W.value)throw Error("Cannot mix number and bigint in multiple_of check.");if(typeof X.value==="bigint"?X.value%W.value===BigInt(0):QM(X.value,W.value)===0)return;X.issues.push({origin:typeof X.value,code:"not_multiple_of",divisor:W.value,input:X.value,inst:J,continue:!W.abort})}}),SA=x("$ZodCheckNumberFormat",(J,W)=>{v0.init(J,W),W.format=W.format||"float64";let X=W.format?.includes("int"),G=X?"int":"number",[Y,$]=DM[W.format];J._zod.onattach.push((K)=>{let w=K._zod.bag;if(w.format=W.format,w.minimum=Y,w.maximum=$,X)w.pattern=VA}),J._zod.check=(K)=>{let w=K.value;if(X){if(!Number.isInteger(w)){K.issues.push({expected:G,format:W.format,code:"invalid_type",continue:!1,input:w,inst:J});return}if(!Number.isSafeInteger(w)){if(w>0)K.issues.push({input:w,code:"too_big",maximum:Number.MAX_SAFE_INTEGER,note:"Integers must be within the safe integer range.",inst:J,origin:G,continue:!W.abort});else K.issues.push({input:w,code:"too_small",minimum:Number.MIN_SAFE_INTEGER,note:"Integers must be within the safe integer range.",inst:J,origin:G,continue:!W.abort});return}}if(w<Y)K.issues.push({origin:"number",input:w,code:"too_small",minimum:Y,inclusive:!0,inst:J,continue:!W.abort});if(w>$)K.issues.push({origin:"number",input:w,code:"too_big",maximum:$,inst:J})}});var _A=x("$ZodCheckMaxLength",(J,W)=>{var X;v0.init(J,W),(X=J._zod.def).when??(X.when=(G)=>{let Y=G.value;return!e$(Y)&&Y.length!==void 0}),J._zod.onattach.push((G)=>{let Y=G._zod.bag.maximum??Number.POSITIVE_INFINITY;if(W.maximum<Y)G._zod.bag.maximum=W.maximum}),J._zod.check=(G)=>{let Y=G.value;if(Y.length<=W.maximum)return;let K=X5(Y);G.issues.push({origin:K,code:"too_big",maximum:W.maximum,inclusive:!0,input:Y,inst:J,continue:!W.abort})}}),TA=x("$ZodCheckMinLength",(J,W)=>{var X;v0.init(J,W),(X=J._zod.def).when??(X.when=(G)=>{let Y=G.value;return!e$(Y)&&Y.length!==void 0}),J._zod.onattach.push((G)=>{let Y=G._zod.bag.minimum??Number.NEGATIVE_INFINITY;if(W.minimum>Y)G._zod.bag.minimum=W.minimum}),J._zod.check=(G)=>{let Y=G.value;if(Y.length>=W.minimum)return;let K=X5(Y);G.issues.push({origin:K,code:"too_small",minimum:W.minimum,inclusive:!0,input:Y,inst:J,continue:!W.abort})}}),qA=x("$ZodCheckLengthEquals",(J,W)=>{var X;v0.init(J,W),(X=J._zod.def).when??(X.when=(G)=>{let Y=G.value;return!e$(Y)&&Y.length!==void 0}),J._zod.onattach.push((G)=>{let Y=G._zod.bag;Y.minimum=W.length,Y.maximum=W.length,Y.length=W.length}),J._zod.check=(G)=>{let Y=G.value,$=Y.length;if($===W.length)return;let K=X5(Y),w=$>W.length;G.issues.push({origin:K,...w?{code:"too_big",maximum:W.length}:{code:"too_small",minimum:W.length},inclusive:!0,exact:!0,input:G.value,inst:J,continue:!W.abort})}}),$5=x("$ZodCheckStringFormat",(J,W)=>{var X,G;if(v0.init(J,W),J._zod.onattach.push((Y)=>{let $=Y._zod.bag;if($.format=W.format,W.pattern)$.patterns??($.patterns=new Set),$.patterns.add(W.pattern)}),W.pattern)(X=J._zod).check??(X.check=(Y)=>{if(W.pattern.lastIndex=0,W.pattern.test(Y.value))return;Y.issues.push({origin:"string",code:"invalid_format",format:W.format,input:Y.value,...W.pattern?{pattern:W.pattern.toString()}:{},inst:J,continue:!W.abort})});else(G=J._zod).check??(G.check=()=>{})}),BA=x("$ZodCheckRegex",(J,W)=>{$5.init(J,W),J._zod.check=(X)=>{if(W.pattern.lastIndex=0,W.pattern.test(X.value))return;X.issues.push({origin:"string",code:"invalid_format",format:"regex",input:X.value,pattern:W.pattern.toString(),inst:J,continue:!W.abort})}}),AA=x("$ZodCheckLowerCase",(J,W)=>{W.pattern??(W.pattern=OA),$5.init(J,W)}),EA=x("$ZodCheckUpperCase",(J,W)=>{W.pattern??(W.pattern=PA),$5.init(J,W)}),IA=x("$ZodCheckIncludes",(J,W)=>{v0.init(J,W);let X=O1(W.includes),G=new RegExp(typeof W.position==="number"?`^.{${W.position}}${X}`:X);W.pattern=G,J._zod.onattach.push((Y)=>{let $=Y._zod.bag;$.patterns??($.patterns=new Set),$.patterns.add(G)}),J._zod.check=(Y)=>{if(Y.value.includes(W.includes,W.position))return;Y.issues.push({origin:"string",code:"invalid_format",format:"includes",includes:W.includes,input:Y.value,inst:J,continue:!W.abort})}}),RA=x("$ZodCheckStartsWith",(J,W)=>{v0.init(J,W);let X=new RegExp(`^${O1(W.prefix)}.*`);W.pattern??(W.pattern=X),J._zod.onattach.push((G)=>{let Y=G._zod.bag;Y.patterns??(Y.patterns=new Set),Y.patterns.add(X)}),J._zod.check=(G)=>{if(G.value.startsWith(W.prefix))return;G.issues.push({origin:"string",code:"invalid_format",format:"starts_with",prefix:W.prefix,input:G.value,inst:J,continue:!W.abort})}}),CA=x("$ZodCheckEndsWith",(J,W)=>{v0.init(J,W);let X=new RegExp(`.*${O1(W.suffix)}$`);W.pattern??(W.pattern=X),J._zod.onattach.push((G)=>{let Y=G._zod.bag;Y.patterns??(Y.patterns=new Set),Y.patterns.add(X)}),J._zod.check=(G)=>{if(G.value.endsWith(W.suffix))return;G.issues.push({origin:"string",code:"invalid_format",format:"ends_with",suffix:W.suffix,input:G.value,inst:J,continue:!W.abort})}});var bA=x("$ZodCheckOverwrite",(J,W)=>{v0.init(J,W),J._zod.check=(X)=>{X.value=W.tx(X.value)}});class SM{constructor(J=[]){if(this.content=[],this.indent=0,this)this.args=J}indented(J){this.indent+=1,J(this),this.indent-=1}write(J){if(typeof J==="function"){J(this,{execution:"sync"}),J(this,{execution:"async"});return}let X=J.split(`
`).filter(($)=>$),G=Math.min(...X.map(($)=>$.length-$.trimStart().length)),Y=X.map(($)=>$.slice(G)).map(($)=>" ".repeat(this.indent*2)+$);for(let $ of Y)this.content.push($)}compile(){let J=Function,W=this?.args,G=[...(this?.content??[""]).map((Y)=>`  ${Y}`)];return new J(...W,G.join(`
`))}}var hA={major:4,minor:1,patch:12};var B4=x("$ZodType",(J,W)=>{var X;J??(J={}),J._zod.def=W,J._zod.bag=J._zod.bag||{},J._zod.version=hA;let G=[...J._zod.def.checks??[]];if(J._zod.traits.has("$ZodCheck"))G.unshift(J);for(let Y of G)for(let $ of Y._zod.onattach)$(J);if(G.length===0)(X=J._zod).deferred??(X.deferred=[]),J._zod.deferred?.push(()=>{J._zod.run=J._zod.parse});else{let Y=(K,w,H)=>{let z=PX(K),N;for(let U of w){if(U._zod.def.when){if(!U._zod.def.when(K))continue}else if(z)continue;let F=K.issues.length,Z=U._zod.check(K);if(Z instanceof Promise&&H?.async===!1)throw new EW;if(N||Z instanceof Promise)N=(N??Promise.resolve()).then(async()=>{if(await Z,K.issues.length===F)return;if(!z)z=PX(K,F)});else{if(K.issues.length===F)continue;if(!z)z=PX(K,F)}}if(N)return N.then(()=>{return K});return K},$=(K,w,H)=>{if(PX(K))return K.aborted=!0,K;let z=Y(w,G,H);if(z instanceof Promise){if(H.async===!1)throw new EW;return z.then((N)=>J._zod.parse(N,H))}return J._zod.parse(z,H)};J._zod.run=(K,w)=>{if(w.skipChecks)return J._zod.parse(K,w);if(w.direction==="backward"){let z=J._zod.parse({value:K.value,issues:[]},{...w,skipChecks:!0});if(z instanceof Promise)return z.then((N)=>{return $(N,K,w)});return $(z,K,w)}let H=J._zod.parse(K,w);if(H instanceof Promise){if(w.async===!1)throw new EW;return H.then((z)=>Y(z,G,w))}return Y(H,G,w)}}J["~standard"]={validate:(Y)=>{try{let $=gB(J,Y);return $.success?{value:$.data}:{issues:$.error?.issues}}catch($){return mB(J,Y).then((K)=>K.success?{value:K.data}:{issues:K.error?.issues})}},vendor:"zod",version:1}}),w3=x("$ZodString",(J,W)=>{B4.init(J,W),J._zod.pattern=[...J?._zod.bag?.patterns??[]].pop()??ZA(J._zod.bag),J._zod.parse=(X,G)=>{if(W.coerce)try{X.value=String(X.value)}catch(Y){}if(typeof X.value==="string")return X;return X.issues.push({expected:"string",code:"invalid_type",input:X.value,inst:J}),X}}),v4=x("$ZodStringFormat",(J,W)=>{$5.init(J,W),w3.init(J,W)}),pA=x("$ZodGUID",(J,W)=>{W.pattern??(W.pattern=eB),v4.init(J,W)}),dA=x("$ZodUUID",(J,W)=>{if(W.version){let G={v1:1,v2:2,v3:3,v4:4,v5:5,v6:6,v7:7,v8:8}[W.version];if(G===void 0)throw Error(`Invalid UUID version: "${W.version}"`);W.pattern??(W.pattern=OM(G))}else W.pattern??(W.pattern=OM());v4.init(J,W)}),rA=x("$ZodEmail",(J,W)=>{W.pattern??(W.pattern=JA),v4.init(J,W)}),nA=x("$ZodURL",(J,W)=>{v4.init(J,W),J._zod.check=(X)=>{try{let G=X.value.trim(),Y=new URL(G);if(W.hostname){if(W.hostname.lastIndex=0,!W.hostname.test(Y.hostname))X.issues.push({code:"invalid_format",format:"url",note:"Invalid hostname",pattern:wA.source,input:X.value,inst:J,continue:!W.abort})}if(W.protocol){if(W.protocol.lastIndex=0,!W.protocol.test(Y.protocol.endsWith(":")?Y.protocol.slice(0,-1):Y.protocol))X.issues.push({code:"invalid_format",format:"url",note:"Invalid protocol",pattern:W.protocol.source,input:X.value,inst:J,continue:!W.abort})}if(W.normalize)X.value=Y.href;else X.value=G;return}catch(G){X.issues.push({code:"invalid_format",format:"url",input:X.value,inst:J,continue:!W.abort})}}}),iA=x("$ZodEmoji",(J,W)=>{W.pattern??(W.pattern=WA()),v4.init(J,W)}),aA=x("$ZodNanoID",(J,W)=>{W.pattern??(W.pattern=oB),v4.init(J,W)}),tA=x("$ZodCUID",(J,W)=>{W.pattern??(W.pattern=rB),v4.init(J,W)}),oA=x("$ZodCUID2",(J,W)=>{W.pattern??(W.pattern=nB),v4.init(J,W)}),sA=x("$ZodULID",(J,W)=>{W.pattern??(W.pattern=iB),v4.init(J,W)}),eA=x("$ZodXID",(J,W)=>{W.pattern??(W.pattern=aB),v4.init(J,W)}),JE=x("$ZodKSUID",(J,W)=>{W.pattern??(W.pattern=tB),v4.init(J,W)}),WE=x("$ZodISODateTime",(J,W)=>{W.pattern??(W.pattern=QA(W)),v4.init(J,W)}),XE=x("$ZodISODate",(J,W)=>{W.pattern??(W.pattern=NA),v4.init(J,W)}),YE=x("$ZodISOTime",(J,W)=>{W.pattern??(W.pattern=UA(W)),v4.init(J,W)}),GE=x("$ZodISODuration",(J,W)=>{W.pattern??(W.pattern=sB),v4.init(J,W)}),$E=x("$ZodIPv4",(J,W)=>{W.pattern??(W.pattern=XA),v4.init(J,W),J._zod.onattach.push((X)=>{let G=X._zod.bag;G.format="ipv4"})}),KE=x("$ZodIPv6",(J,W)=>{W.pattern??(W.pattern=YA),v4.init(J,W),J._zod.onattach.push((X)=>{let G=X._zod.bag;G.format="ipv6"}),J._zod.check=(X)=>{try{new URL(`http://[${X.value}]`)}catch{X.issues.push({code:"invalid_format",format:"ipv6",input:X.value,inst:J,continue:!W.abort})}}}),wE=x("$ZodCIDRv4",(J,W)=>{W.pattern??(W.pattern=GA),v4.init(J,W)}),HE=x("$ZodCIDRv6",(J,W)=>{W.pattern??(W.pattern=$A),v4.init(J,W),J._zod.check=(X)=>{let G=X.value.split("/");try{if(G.length!==2)throw Error();let[Y,$]=G;if(!$)throw Error();let K=Number($);if(`${K}`!==$)throw Error();if(K<0||K>128)throw Error();new URL(`http://[${Y}]`)}catch{X.issues.push({code:"invalid_format",format:"cidrv6",input:X.value,inst:J,continue:!W.abort})}}});function zE(J){if(J==="")return!0;if(J.length%4!==0)return!1;try{return atob(J),!0}catch{return!1}}var NE=x("$ZodBase64",(J,W)=>{W.pattern??(W.pattern=KA),v4.init(J,W),J._zod.onattach.push((X)=>{X._zod.bag.contentEncoding="base64"}),J._zod.check=(X)=>{if(zE(X.value))return;X.issues.push({code:"invalid_format",format:"base64",input:X.value,inst:J,continue:!W.abort})}});function tc(J){if(!PM.test(J))return!1;let W=J.replace(/[-_]/g,(G)=>G==="-"?"+":"/"),X=W.padEnd(Math.ceil(W.length/4)*4,"=");return zE(X)}var FE=x("$ZodBase64URL",(J,W)=>{W.pattern??(W.pattern=PM),v4.init(J,W),J._zod.onattach.push((X)=>{X._zod.bag.contentEncoding="base64url"}),J._zod.check=(X)=>{if(tc(X.value))return;X.issues.push({code:"invalid_format",format:"base64url",input:X.value,inst:J,continue:!W.abort})}}),UE=x("$ZodE164",(J,W)=>{W.pattern??(W.pattern=HA),v4.init(J,W)});function oc(J,W=null){try{let X=J.split(".");if(X.length!==3)return!1;let[G]=X;if(!G)return!1;let Y=JSON.parse(atob(G));if("typ"in Y&&Y?.typ!=="JWT")return!1;if(!Y.alg)return!1;if(W&&(!("alg"in Y)||Y.alg!==W))return!1;return!0}catch{return!1}}var QE=x("$ZodJWT",(J,W)=>{v4.init(J,W),J._zod.check=(X)=>{if(oc(X.value,W.alg))return;X.issues.push({code:"invalid_format",format:"jwt",input:X.value,inst:J,continue:!W.abort})}});var TM=x("$ZodNumber",(J,W)=>{B4.init(J,W),J._zod.pattern=J._zod.bag.pattern??DA,J._zod.parse=(X,G)=>{if(W.coerce)try{X.value=Number(X.value)}catch(K){}let Y=X.value;if(typeof Y==="number"&&!Number.isNaN(Y)&&Number.isFinite(Y))return X;let $=typeof Y==="number"?Number.isNaN(Y)?"NaN":!Number.isFinite(Y)?"Infinity":void 0:void 0;return X.issues.push({expected:"number",code:"invalid_type",input:Y,inst:J,...$?{received:$}:{}}),X}}),ZE=x("$ZodNumber",(J,W)=>{SA.init(J,W),TM.init(J,W)}),LE=x("$ZodBoolean",(J,W)=>{B4.init(J,W),J._zod.pattern=MA,J._zod.parse=(X,G)=>{if(W.coerce)try{X.value=Boolean(X.value)}catch($){}let Y=X.value;if(typeof Y==="boolean")return X;return X.issues.push({expected:"boolean",code:"invalid_type",input:Y,inst:J}),X}}),VE=x("$ZodBigInt",(J,W)=>{B4.init(J,W),J._zod.pattern=LA,J._zod.parse=(X,G)=>{if(W.coerce)try{X.value=BigInt(X.value)}catch(Y){}if(typeof X.value==="bigint")return X;return X.issues.push({expected:"bigint",code:"invalid_type",input:X.value,inst:J}),X}});var DE=x("$ZodUnknown",(J,W)=>{B4.init(J,W),J._zod.parse=(X)=>X}),ME=x("$ZodNever",(J,W)=>{B4.init(J,W),J._zod.parse=(X,G)=>{return X.issues.push({expected:"never",code:"invalid_type",input:X.value,inst:J}),X}});var OE=x("$ZodDate",(J,W)=>{B4.init(J,W),J._zod.parse=(X,G)=>{if(W.coerce)try{X.value=new Date(X.value)}catch(w){}let Y=X.value,$=Y instanceof Date;if($&&!Number.isNaN(Y.getTime()))return X;return X.issues.push({expected:"date",code:"invalid_type",input:Y,...$?{received:"Invalid Date"}:{},inst:J}),X}});function gA(J,W,X){if(J.issues.length)W.issues.push(...W5(X,J.issues));W.value[X]=J.value}var PE=x("$ZodArray",(J,W)=>{B4.init(J,W),J._zod.parse=(X,G)=>{let Y=X.value;if(!Array.isArray(Y))return X.issues.push({expected:"array",code:"invalid_type",input:Y,inst:J}),X;X.value=Array(Y.length);let $=[];for(let K=0;K<Y.length;K++){let w=Y[K],H=W.element._zod.run({value:w,issues:[]},G);if(H instanceof Promise)$.push(H.then((z)=>gA(z,X,K)));else gA(H,X,K)}if($.length)return Promise.all($).then(()=>X);return X}});function K3(J,W,X,G){if(J.issues.length)W.issues.push(...W5(X,J.issues));if(J.value===void 0){if(X in G)W.value[X]=void 0}else W.value[X]=J.value}function vE(J){let W=Object.keys(J.shape);for(let G of W)if(!J.shape?.[G]?._zod?.traits?.has("$ZodType"))throw Error(`Invalid element at key "${G}": expected a Zod schema`);let X=VM(J.shape);return{...J,keys:W,keySet:new Set(W),numKeys:W.length,optionalKeys:new Set(X)}}function jE(J,W,X,G,Y,$){let K=[],w=Y.keySet,H=Y.catchall._zod,z=H.def.type;for(let N of Object.keys(W)){if(w.has(N))continue;if(z==="never"){K.push(N);continue}let U=H.run({value:W[N],issues:[]},G);if(U instanceof Promise)J.push(U.then((F)=>K3(F,X,N,W)));else K3(U,X,N,W)}if(K.length)X.issues.push({code:"unrecognized_keys",keys:K,input:W,inst:$});if(!J.length)return X;return Promise.all(J).then(()=>{return X})}var sc=x("$ZodObject",(J,W)=>{if(B4.init(J,W),!Object.getOwnPropertyDescriptor(W,"shape")?.get){let w=W.shape;Object.defineProperty(W,"shape",{get:()=>{let H={...w};return Object.defineProperty(W,"shape",{value:H}),H}})}let G=s$(()=>vE(W));U4(J._zod,"propValues",()=>{let w=W.shape,H={};for(let z in w){let N=w[z]._zod;if(N.values){H[z]??(H[z]=new Set);for(let U of N.values)H[z].add(U)}}return H});let Y=SG,$=W.catchall,K;J._zod.parse=(w,H)=>{K??(K=G.value);let z=w.value;if(!Y(z))return w.issues.push({expected:"object",code:"invalid_type",input:z,inst:J}),w;w.value={};let N=[],U=K.shape;for(let F of K.keys){let L=U[F]._zod.run({value:z[F],issues:[]},H);if(L instanceof Promise)N.push(L.then((D)=>K3(D,w,F,z)));else K3(L,w,F,z)}if(!$)return N.length?Promise.all(N).then(()=>w):w;return jE(N,z,w,H,G.value,J)}}),SE=x("$ZodObjectJIT",(J,W)=>{sc.init(J,W);let X=J._zod.parse,G=s$(()=>vE(W)),Y=(F)=>{let Z=new SM(["shape","payload","ctx"]),L=G.value,D=(T)=>{let v=sH(T);return`shape[${v}]._zod.run({ value: input[${v}], issues: [] }, ctx)`};Z.write("const input = payload.value;");let O=Object.create(null),P=0;for(let T of L.keys)O[T]=`key_${P++}`;Z.write("const newResult = {};");for(let T of L.keys){let v=O[T],q=sH(T);Z.write(`const ${v} = ${D(T)};`),Z.write(`
        if (${v}.issues.length) {
          payload.issues = payload.issues.concat(${v}.issues.map(iss => ({
            ...iss,
            path: iss.path ? [${q}, ...iss.path] : [${q}]
          })));
        }
        
        
        if (${v}.value === undefined) {
          if (${q} in input) {
            newResult[${q}] = undefined;
          }
        } else {
          newResult[${q}] = ${v}.value;
        }
        
      `)}Z.write("payload.value = newResult;"),Z.write("return payload;");let _=Z.compile();return(T,v)=>_(F,T,v)},$,K=SG,w=!tH.jitless,z=w&&ZM.value,N=W.catchall,U;J._zod.parse=(F,Z)=>{U??(U=G.value);let L=F.value;if(!K(L))return F.issues.push({expected:"object",code:"invalid_type",input:L,inst:J}),F;if(w&&z&&Z?.async===!1&&Z.jitless!==!0){if(!$)$=Y(W.shape);if(F=$(F,Z),!N)return F;return jE([],L,F,Z,U,J)}return X(F,Z)}});function mA(J,W,X,G){for(let $ of J)if($.issues.length===0)return W.value=$.value,W;let Y=J.filter(($)=>!PX($));if(Y.length===1)return W.value=Y[0].value,Y[0];return W.issues.push({code:"invalid_union",input:W.value,inst:X,errors:J.map(($)=>$.issues.map((K)=>tJ(K,G,MJ())))}),W}var _E=x("$ZodUnion",(J,W)=>{B4.init(J,W),U4(J._zod,"optin",()=>W.options.some((Y)=>Y._zod.optin==="optional")?"optional":void 0),U4(J._zod,"optout",()=>W.options.some((Y)=>Y._zod.optout==="optional")?"optional":void 0),U4(J._zod,"values",()=>{if(W.options.every((Y)=>Y._zod.values))return new Set(W.options.flatMap((Y)=>Array.from(Y._zod.values)));return}),U4(J._zod,"pattern",()=>{if(W.options.every((Y)=>Y._zod.pattern)){let Y=W.options.map(($)=>$._zod.pattern);return new RegExp(`^(${Y.map(($)=>J5($.source)).join("|")})$`)}return});let X=W.options.length===1,G=W.options[0]._zod.run;J._zod.parse=(Y,$)=>{if(X)return G(Y,$);let K=!1,w=[];for(let H of W.options){let z=H._zod.run({value:Y.value,issues:[]},$);if(z instanceof Promise)w.push(z),K=!0;else{if(z.issues.length===0)return z;w.push(z)}}if(!K)return mA(w,Y,J,$);return Promise.all(w).then((H)=>{return mA(H,Y,J,$)})}});var TE=x("$ZodIntersection",(J,W)=>{B4.init(J,W),J._zod.parse=(X,G)=>{let Y=X.value,$=W.left._zod.run({value:Y,issues:[]},G),K=W.right._zod.run({value:Y,issues:[]},G);if($ instanceof Promise||K instanceof Promise)return Promise.all([$,K]).then(([H,z])=>{return fA(X,H,z)});return fA(X,$,K)}});function _M(J,W){if(J===W)return{valid:!0,data:J};if(J instanceof Date&&W instanceof Date&&+J===+W)return{valid:!0,data:J};if(M1(J)&&M1(W)){let X=Object.keys(W),G=Object.keys(J).filter(($)=>X.indexOf($)!==-1),Y={...J,...W};for(let $ of G){let K=_M(J[$],W[$]);if(!K.valid)return{valid:!1,mergeErrorPath:[$,...K.mergeErrorPath]};Y[$]=K.data}return{valid:!0,data:Y}}if(Array.isArray(J)&&Array.isArray(W)){if(J.length!==W.length)return{valid:!1,mergeErrorPath:[]};let X=[];for(let G=0;G<J.length;G++){let Y=J[G],$=W[G],K=_M(Y,$);if(!K.valid)return{valid:!1,mergeErrorPath:[G,...K.mergeErrorPath]};X.push(K.data)}return{valid:!0,data:X}}return{valid:!1,mergeErrorPath:[]}}function fA(J,W,X){if(W.issues.length)J.issues.push(...W.issues);if(X.issues.length)J.issues.push(...X.issues);if(PX(J))return J;let G=_M(W.value,X.value);if(!G.valid)throw Error(`Unmergable intersection. Error path: ${JSON.stringify(G.mergeErrorPath)}`);return J.value=G.data,J}var qE=x("$ZodEnum",(J,W)=>{B4.init(J,W);let X=UM(W.entries),G=new Set(X);J._zod.values=G,J._zod.pattern=new RegExp(`^(${X.filter((Y)=>LM.has(typeof Y)).map((Y)=>typeof Y==="string"?O1(Y):Y.toString()).join("|")})$`),J._zod.parse=(Y,$)=>{let K=Y.value;if(G.has(K))return Y;return Y.issues.push({code:"invalid_value",values:X,input:K,inst:J}),Y}});var BE=x("$ZodTransform",(J,W)=>{B4.init(J,W),J._zod.parse=(X,G)=>{if(G.direction==="backward")throw new t$(J.constructor.name);let Y=W.transform(X.value,X);if(G.async)return(Y instanceof Promise?Y:Promise.resolve(Y)).then((K)=>{return X.value=K,X});if(Y instanceof Promise)throw new EW;return X.value=Y,X}});function yA(J,W){if(J.issues.length&&W===void 0)return{issues:[],value:void 0};return J}var AE=x("$ZodOptional",(J,W)=>{B4.init(J,W),J._zod.optin="optional",J._zod.optout="optional",U4(J._zod,"values",()=>{return W.innerType._zod.values?new Set([...W.innerType._zod.values,void 0]):void 0}),U4(J._zod,"pattern",()=>{let X=W.innerType._zod.pattern;return X?new RegExp(`^(${J5(X.source)})?$`):void 0}),J._zod.parse=(X,G)=>{if(W.innerType._zod.optin==="optional"){let Y=W.innerType._zod.run(X,G);if(Y instanceof Promise)return Y.then(($)=>yA($,X.value));return yA(Y,X.value)}if(X.value===void 0)return X;return W.innerType._zod.run(X,G)}}),EE=x("$ZodNullable",(J,W)=>{B4.init(J,W),U4(J._zod,"optin",()=>W.innerType._zod.optin),U4(J._zod,"optout",()=>W.innerType._zod.optout),U4(J._zod,"pattern",()=>{let X=W.innerType._zod.pattern;return X?new RegExp(`^(${J5(X.source)}|null)$`):void 0}),U4(J._zod,"values",()=>{return W.innerType._zod.values?new Set([...W.innerType._zod.values,null]):void 0}),J._zod.parse=(X,G)=>{if(X.value===null)return X;return W.innerType._zod.run(X,G)}}),IE=x("$ZodDefault",(J,W)=>{B4.init(J,W),J._zod.optin="optional",U4(J._zod,"values",()=>W.innerType._zod.values),J._zod.parse=(X,G)=>{if(G.direction==="backward")return W.innerType._zod.run(X,G);if(X.value===void 0)return X.value=W.defaultValue,X;let Y=W.innerType._zod.run(X,G);if(Y instanceof Promise)return Y.then(($)=>xA($,W));return xA(Y,W)}});function xA(J,W){if(J.value===void 0)J.value=W.defaultValue;return J}var RE=x("$ZodPrefault",(J,W)=>{B4.init(J,W),J._zod.optin="optional",U4(J._zod,"values",()=>W.innerType._zod.values),J._zod.parse=(X,G)=>{if(G.direction==="backward")return W.innerType._zod.run(X,G);if(X.value===void 0)X.value=W.defaultValue;return W.innerType._zod.run(X,G)}}),CE=x("$ZodNonOptional",(J,W)=>{B4.init(J,W),U4(J._zod,"values",()=>{let X=W.innerType._zod.values;return X?new Set([...X].filter((G)=>G!==void 0)):void 0}),J._zod.parse=(X,G)=>{let Y=W.innerType._zod.run(X,G);if(Y instanceof Promise)return Y.then(($)=>uA($,J));return uA(Y,J)}});function uA(J,W){if(!J.issues.length&&J.value===void 0)J.issues.push({code:"invalid_type",expected:"nonoptional",input:J.value,inst:W});return J}var bE=x("$ZodCatch",(J,W)=>{B4.init(J,W),U4(J._zod,"optin",()=>W.innerType._zod.optin),U4(J._zod,"optout",()=>W.innerType._zod.optout),U4(J._zod,"values",()=>W.innerType._zod.values),J._zod.parse=(X,G)=>{if(G.direction==="backward")return W.innerType._zod.run(X,G);let Y=W.innerType._zod.run(X,G);if(Y instanceof Promise)return Y.then(($)=>{if(X.value=$.value,$.issues.length)X.value=W.catchValue({...X,error:{issues:$.issues.map((K)=>tJ(K,G,MJ()))},input:X.value}),X.issues=[];return X});if(X.value=Y.value,Y.issues.length)X.value=W.catchValue({...X,error:{issues:Y.issues.map(($)=>tJ($,G,MJ()))},input:X.value}),X.issues=[];return X}});var kE=x("$ZodPipe",(J,W)=>{B4.init(J,W),U4(J._zod,"values",()=>W.in._zod.values),U4(J._zod,"optin",()=>W.in._zod.optin),U4(J._zod,"optout",()=>W.out._zod.optout),U4(J._zod,"propValues",()=>W.in._zod.propValues),J._zod.parse=(X,G)=>{if(G.direction==="backward"){let $=W.out._zod.run(X,G);if($ instanceof Promise)return $.then((K)=>$3(K,W.in,G));return $3($,W.in,G)}let Y=W.in._zod.run(X,G);if(Y instanceof Promise)return Y.then(($)=>$3($,W.out,G));return $3(Y,W.out,G)}});function $3(J,W,X){if(J.issues.length)return J.aborted=!0,J;return W._zod.run({value:J.value,issues:J.issues},X)}var hE=x("$ZodReadonly",(J,W)=>{B4.init(J,W),U4(J._zod,"propValues",()=>W.innerType._zod.propValues),U4(J._zod,"values",()=>W.innerType._zod.values),U4(J._zod,"optin",()=>W.innerType._zod.optin),U4(J._zod,"optout",()=>W.innerType._zod.optout),J._zod.parse=(X,G)=>{if(G.direction==="backward")return W.innerType._zod.run(X,G);let Y=W.innerType._zod.run(X,G);if(Y instanceof Promise)return Y.then(cA);return cA(Y)}});function cA(J){return J.value=Object.freeze(J.value),J}var gE=x("$ZodCustom",(J,W)=>{v0.init(J,W),B4.init(J,W),J._zod.parse=(X,G)=>{return X},J._zod.check=(X)=>{let G=X.value,Y=W.fn(G);if(Y instanceof Promise)return Y.then(($)=>lA($,X,G,J));lA(Y,X,G,J);return}});function lA(J,W,X,G){if(!J){let Y={code:"custom",input:X,inst:G,path:[...G._zod.def.path??[]],continue:!G._zod.def.abort};if(G._zod.def.params)Y.params=G._zod.def.params;W.issues.push(TG(Y))}}var ec=(J)=>{let W=typeof J;switch(W){case"number":return Number.isNaN(J)?"NaN":"number";case"object":{if(Array.isArray(J))return"array";if(J===null)return"null";if(Object.getPrototypeOf(J)!==Object.prototype&&J.constructor)return J.constructor.name}}return W},Jl=()=>{let J={string:{unit:"characters",verb:"to have"},file:{unit:"bytes",verb:"to have"},array:{unit:"items",verb:"to have"},set:{unit:"items",verb:"to have"}};function W(G){return J[G]??null}let X={regex:"input",email:"email address",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO datetime",date:"ISO date",time:"ISO time",duration:"ISO duration",ipv4:"IPv4 address",ipv6:"IPv6 address",cidrv4:"IPv4 range",cidrv6:"IPv6 range",base64:"base64-encoded string",base64url:"base64url-encoded string",json_string:"JSON string",e164:"E.164 number",jwt:"JWT",template_literal:"input"};return(G)=>{switch(G.code){case"invalid_type":return`Invalid input: expected ${G.expected}, received ${ec(G.input)}`;case"invalid_value":if(G.values.length===1)return`Invalid input: expected ${J3(G.values[0])}`;return`Invalid option: expected one of ${oH(G.values,"|")}`;case"too_big":{let Y=G.inclusive?"<=":"<",$=W(G.origin);if($)return`Too big: expected ${G.origin??"value"} to have ${Y}${G.maximum.toString()} ${$.unit??"elements"}`;return`Too big: expected ${G.origin??"value"} to be ${Y}${G.maximum.toString()}`}case"too_small":{let Y=G.inclusive?">=":">",$=W(G.origin);if($)return`Too small: expected ${G.origin} to have ${Y}${G.minimum.toString()} ${$.unit}`;return`Too small: expected ${G.origin} to be ${Y}${G.minimum.toString()}`}case"invalid_format":{let Y=G;if(Y.format==="starts_with")return`Invalid string: must start with "${Y.prefix}"`;if(Y.format==="ends_with")return`Invalid string: must end with "${Y.suffix}"`;if(Y.format==="includes")return`Invalid string: must include "${Y.includes}"`;if(Y.format==="regex")return`Invalid string: must match pattern ${Y.pattern}`;return`Invalid ${X[Y.format]??G.format}`}case"not_multiple_of":return`Invalid number: must be a multiple of ${G.divisor}`;case"unrecognized_keys":return`Unrecognized key${G.keys.length>1?"s":""}: ${oH(G.keys,", ")}`;case"invalid_key":return`Invalid key in ${G.origin}`;case"invalid_union":return"Invalid input";case"invalid_element":return`Invalid value in ${G.origin}`;default:return"Invalid input"}}};function qM(){return{localeError:Jl()}}var bv6=Symbol("ZodOutput"),kv6=Symbol("ZodInput");class mE{constructor(){this._map=new WeakMap,this._idmap=new Map}add(J,...W){let X=W[0];if(this._map.set(J,X),X&&typeof X==="object"&&"id"in X){if(this._idmap.has(X.id))throw Error(`ID ${X.id} already exists in the registry`);this._idmap.set(X.id,J)}return this}clear(){return this._map=new WeakMap,this._idmap=new Map,this}remove(J){let W=this._map.get(J);if(W&&typeof W==="object"&&"id"in W)this._idmap.delete(W.id);return this._map.delete(J),this}get(J){let W=J._zod.parent;if(W){let X={...this.get(W)??{}};delete X.id;let G={...X,...this._map.get(J)};return Object.keys(G).length?G:void 0}return this._map.get(J)}has(J){return this._map.has(J)}}function Wl(){return new mE}var K5=Wl();function fE(J,W){return new J({type:"string",...G6(W)})}function yE(J,W){return new J({type:"string",coerce:!0,...G6(W)})}function xE(J,W){return new J({type:"string",format:"email",check:"string_format",abort:!1,...G6(W)})}function BM(J,W){return new J({type:"string",format:"guid",check:"string_format",abort:!1,...G6(W)})}function uE(J,W){return new J({type:"string",format:"uuid",check:"string_format",abort:!1,...G6(W)})}function cE(J,W){return new J({type:"string",format:"uuid",check:"string_format",abort:!1,version:"v4",...G6(W)})}function lE(J,W){return new J({type:"string",format:"uuid",check:"string_format",abort:!1,version:"v6",...G6(W)})}function pE(J,W){return new J({type:"string",format:"uuid",check:"string_format",abort:!1,version:"v7",...G6(W)})}function dE(J,W){return new J({type:"string",format:"url",check:"string_format",abort:!1,...G6(W)})}function rE(J,W){return new J({type:"string",format:"emoji",check:"string_format",abort:!1,...G6(W)})}function nE(J,W){return new J({type:"string",format:"nanoid",check:"string_format",abort:!1,...G6(W)})}function iE(J,W){return new J({type:"string",format:"cuid",check:"string_format",abort:!1,...G6(W)})}function aE(J,W){return new J({type:"string",format:"cuid2",check:"string_format",abort:!1,...G6(W)})}function tE(J,W){return new J({type:"string",format:"ulid",check:"string_format",abort:!1,...G6(W)})}function oE(J,W){return new J({type:"string",format:"xid",check:"string_format",abort:!1,...G6(W)})}function sE(J,W){return new J({type:"string",format:"ksuid",check:"string_format",abort:!1,...G6(W)})}function eE(J,W){return new J({type:"string",format:"ipv4",check:"string_format",abort:!1,...G6(W)})}function JI(J,W){return new J({type:"string",format:"ipv6",check:"string_format",abort:!1,...G6(W)})}function WI(J,W){return new J({type:"string",format:"cidrv4",check:"string_format",abort:!1,...G6(W)})}function XI(J,W){return new J({type:"string",format:"cidrv6",check:"string_format",abort:!1,...G6(W)})}function YI(J,W){return new J({type:"string",format:"base64",check:"string_format",abort:!1,...G6(W)})}function GI(J,W){return new J({type:"string",format:"base64url",check:"string_format",abort:!1,...G6(W)})}function $I(J,W){return new J({type:"string",format:"e164",check:"string_format",abort:!1,...G6(W)})}function KI(J,W){return new J({type:"string",format:"jwt",check:"string_format",abort:!1,...G6(W)})}function wI(J,W){return new J({type:"string",format:"datetime",check:"string_format",offset:!1,local:!1,precision:null,...G6(W)})}function HI(J,W){return new J({type:"string",format:"date",check:"string_format",...G6(W)})}function zI(J,W){return new J({type:"string",format:"time",check:"string_format",precision:null,...G6(W)})}function NI(J,W){return new J({type:"string",format:"duration",check:"string_format",...G6(W)})}function FI(J,W){return new J({type:"number",checks:[],...G6(W)})}function UI(J,W){return new J({type:"number",coerce:!0,checks:[],...G6(W)})}function QI(J,W){return new J({type:"number",check:"number_format",abort:!1,format:"safeint",...G6(W)})}function ZI(J,W){return new J({type:"boolean",...G6(W)})}function LI(J,W){return new J({type:"boolean",coerce:!0,...G6(W)})}function VI(J,W){return new J({type:"bigint",coerce:!0,...G6(W)})}function DI(J){return new J({type:"unknown"})}function MI(J,W){return new J({type:"never",...G6(W)})}function OI(J,W){return new J({type:"date",...G6(W)})}function PI(J,W){return new J({type:"date",coerce:!0,...G6(W)})}function qG(J,W){return new vM({check:"less_than",...G6(W),value:J,inclusive:!1})}function IW(J,W){return new vM({check:"less_than",...G6(W),value:J,inclusive:!0})}function BG(J,W){return new jM({check:"greater_than",...G6(W),value:J,inclusive:!1})}function PJ(J,W){return new jM({check:"greater_than",...G6(W),value:J,inclusive:!0})}function w5(J,W){return new jA({check:"multiple_of",...G6(W),value:J})}function H3(J,W){return new _A({check:"max_length",...G6(W),maximum:J})}function AG(J,W){return new TA({check:"min_length",...G6(W),minimum:J})}function z3(J,W){return new qA({check:"length_equals",...G6(W),length:J})}function AM(J,W){return new BA({check:"string_format",format:"regex",...G6(W),pattern:J})}function EM(J){return new AA({check:"string_format",format:"lowercase",...G6(J)})}function IM(J){return new EA({check:"string_format",format:"uppercase",...G6(J)})}function RM(J,W){return new IA({check:"string_format",format:"includes",...G6(W),includes:J})}function CM(J,W){return new RA({check:"string_format",format:"starts_with",...G6(W),prefix:J})}function bM(J,W){return new CA({check:"string_format",format:"ends_with",...G6(W),suffix:J})}function P1(J){return new bA({check:"overwrite",tx:J})}function kM(J){return P1((W)=>W.normalize(J))}function hM(){return P1((J)=>J.trim())}function gM(){return P1((J)=>J.toLowerCase())}function mM(){return P1((J)=>J.toUpperCase())}function vI(J,W,X){return new J({type:"array",element:W,...G6(X)})}function jI(J,W,X){return new J({type:"custom",check:"custom",fn:W,...G6(X)})}function SI(J){let W=Xl((X)=>{return X.addIssue=(G)=>{if(typeof G==="string")X.issues.push(TG(G,X.value,W._zod.def));else{let Y=G;if(Y.fatal)Y.continue=!1;Y.code??(Y.code="custom"),Y.input??(Y.input=X.value),Y.inst??(Y.inst=W),Y.continue??(Y.continue=!W._zod.def.abort),X.issues.push(TG(Y))}},J(X.value,X)});return W}function Xl(J,W){let X=new v0({check:"custom",...G6(W)});return X._zod.check=J,X}var zl=x("ZodISODateTime",(J,W)=>{WE.init(J,W),A4.init(J,W)});function _I(J){return wI(zl,J)}var Nl=x("ZodISODate",(J,W)=>{XE.init(J,W),A4.init(J,W)});function TI(J){return HI(Nl,J)}var Fl=x("ZodISOTime",(J,W)=>{YE.init(J,W),A4.init(J,W)});function qI(J){return zI(Fl,J)}var Ul=x("ZodISODuration",(J,W)=>{GE.init(J,W),A4.init(J,W)});function BI(J){return NI(Ul,J)}var II=(J,W)=>{W3.init(J,W),J.name="ZodError",Object.defineProperties(J,{format:{value:(X)=>hB(J,X)},flatten:{value:(X)=>kB(J,X)},addIssue:{value:(X)=>{J.issues.push(X),J.message=JSON.stringify(J.issues,_G,2)}},addIssues:{value:(X)=>{J.issues.push(...X),J.message=JSON.stringify(J.issues,_G,2)}},isEmpty:{get(){return J.issues.length===0}}})},Kj6=x("ZodError",II),C8=x("ZodError",II,{Parent:Error});var RI=X3(C8),CI=Y3(C8),bI=Y5(C8),kI=G5(C8),hI=fB(C8),gI=yB(C8),mI=xB(C8),fI=uB(C8),yI=cB(C8),xI=lB(C8),uI=pB(C8),cI=dB(C8);var h4=x("ZodType",(J,W)=>{return B4.init(J,W),J.def=W,J.type=W.type,Object.defineProperty(J,"_def",{value:W}),J.check=(...X)=>{return J.clone(e6.mergeDefs(W,{checks:[...W.checks??[],...X.map((G)=>typeof G==="function"?{_zod:{check:G,def:{check:"custom"},onattach:[]}}:G)]}))},J.clone=(X,G)=>OJ(J,X,G),J.brand=()=>J,J.register=(X,G)=>{return X.add(J,G),J},J.parse=(X,G)=>RI(J,X,G,{callee:J.parse}),J.safeParse=(X,G)=>bI(J,X,G),J.parseAsync=async(X,G)=>CI(J,X,G,{callee:J.parseAsync}),J.safeParseAsync=async(X,G)=>kI(J,X,G),J.spa=J.safeParseAsync,J.encode=(X,G)=>hI(J,X,G),J.decode=(X,G)=>gI(J,X,G),J.encodeAsync=async(X,G)=>mI(J,X,G),J.decodeAsync=async(X,G)=>fI(J,X,G),J.safeEncode=(X,G)=>yI(J,X,G),J.safeDecode=(X,G)=>xI(J,X,G),J.safeEncodeAsync=async(X,G)=>uI(J,X,G),J.safeDecodeAsync=async(X,G)=>cI(J,X,G),J.refine=(X,G)=>J.check(Xp(X,G)),J.superRefine=(X)=>J.check(Yp(X)),J.overwrite=(X)=>J.check(P1(X)),J.optional=()=>rI(J),J.nullable=()=>nI(J),J.nullish=()=>rI(nI(J)),J.nonoptional=(X)=>al(J,X),J.array=()=>gl(J),J.or=(X)=>yl([J,X]),J.and=(X)=>ul(J,X),J.transform=(X)=>iI(J,ll(X)),J.default=(X)=>rl(J,X),J.prefault=(X)=>il(J,X),J.catch=(X)=>ol(J,X),J.pipe=(X)=>iI(J,X),J.readonly=()=>Jp(J),J.describe=(X)=>{let G=J.clone();return K5.add(G,{description:X}),G},Object.defineProperty(J,"description",{get(){return K5.get(J)?.description},configurable:!0}),J.meta=(...X)=>{if(X.length===0)return K5.get(J);let G=J.clone();return K5.add(G,X[0]),G},J.isOptional=()=>J.safeParse(void 0).success,J.isNullable=()=>J.safeParse(null).success,J}),aI=x("_ZodString",(J,W)=>{w3.init(J,W),h4.init(J,W);let X=J._zod.bag;J.format=X.format??null,J.minLength=X.minimum??null,J.maxLength=X.maximum??null,J.regex=(...G)=>J.check(AM(...G)),J.includes=(...G)=>J.check(RM(...G)),J.startsWith=(...G)=>J.check(CM(...G)),J.endsWith=(...G)=>J.check(bM(...G)),J.min=(...G)=>J.check(AG(...G)),J.max=(...G)=>J.check(H3(...G)),J.length=(...G)=>J.check(z3(...G)),J.nonempty=(...G)=>J.check(AG(1,...G)),J.lowercase=(G)=>J.check(EM(G)),J.uppercase=(G)=>J.check(IM(G)),J.trim=()=>J.check(hM()),J.normalize=(...G)=>J.check(kM(...G)),J.toLowerCase=()=>J.check(gM()),J.toUpperCase=()=>J.check(mM())}),yM=x("ZodString",(J,W)=>{w3.init(J,W),aI.init(J,W),J.email=(X)=>J.check(xE(Zl,X)),J.url=(X)=>J.check(dE(Ll,X)),J.jwt=(X)=>J.check(KI(Il,X)),J.emoji=(X)=>J.check(rE(Vl,X)),J.guid=(X)=>J.check(BM(lI,X)),J.uuid=(X)=>J.check(uE(N3,X)),J.uuidv4=(X)=>J.check(cE(N3,X)),J.uuidv6=(X)=>J.check(lE(N3,X)),J.uuidv7=(X)=>J.check(pE(N3,X)),J.nanoid=(X)=>J.check(nE(Dl,X)),J.guid=(X)=>J.check(BM(lI,X)),J.cuid=(X)=>J.check(iE(Ml,X)),J.cuid2=(X)=>J.check(aE(Ol,X)),J.ulid=(X)=>J.check(tE(Pl,X)),J.base64=(X)=>J.check(YI(Bl,X)),J.base64url=(X)=>J.check(GI(Al,X)),J.xid=(X)=>J.check(oE(vl,X)),J.ksuid=(X)=>J.check(sE(jl,X)),J.ipv4=(X)=>J.check(eE(Sl,X)),J.ipv6=(X)=>J.check(JI(_l,X)),J.cidrv4=(X)=>J.check(WI(Tl,X)),J.cidrv6=(X)=>J.check(XI(ql,X)),J.e164=(X)=>J.check($I(El,X)),J.datetime=(X)=>J.check(_I(X)),J.date=(X)=>J.check(TI(X)),J.time=(X)=>J.check(qI(X)),J.duration=(X)=>J.check(BI(X))});function p4(J){return fE(yM,J)}var A4=x("ZodStringFormat",(J,W)=>{v4.init(J,W),aI.init(J,W)}),Zl=x("ZodEmail",(J,W)=>{rA.init(J,W),A4.init(J,W)});var lI=x("ZodGUID",(J,W)=>{pA.init(J,W),A4.init(J,W)});var N3=x("ZodUUID",(J,W)=>{dA.init(J,W),A4.init(J,W)});var Ll=x("ZodURL",(J,W)=>{nA.init(J,W),A4.init(J,W)});var Vl=x("ZodEmoji",(J,W)=>{iA.init(J,W),A4.init(J,W)});var Dl=x("ZodNanoID",(J,W)=>{aA.init(J,W),A4.init(J,W)});var Ml=x("ZodCUID",(J,W)=>{tA.init(J,W),A4.init(J,W)});var Ol=x("ZodCUID2",(J,W)=>{oA.init(J,W),A4.init(J,W)});var Pl=x("ZodULID",(J,W)=>{sA.init(J,W),A4.init(J,W)});var vl=x("ZodXID",(J,W)=>{eA.init(J,W),A4.init(J,W)});var jl=x("ZodKSUID",(J,W)=>{JE.init(J,W),A4.init(J,W)});var Sl=x("ZodIPv4",(J,W)=>{$E.init(J,W),A4.init(J,W)});var _l=x("ZodIPv6",(J,W)=>{KE.init(J,W),A4.init(J,W)});var Tl=x("ZodCIDRv4",(J,W)=>{wE.init(J,W),A4.init(J,W)});var ql=x("ZodCIDRv6",(J,W)=>{HE.init(J,W),A4.init(J,W)});var Bl=x("ZodBase64",(J,W)=>{NE.init(J,W),A4.init(J,W)});var Al=x("ZodBase64URL",(J,W)=>{FE.init(J,W),A4.init(J,W)});var El=x("ZodE164",(J,W)=>{UE.init(J,W),A4.init(J,W)});var Il=x("ZodJWT",(J,W)=>{QE.init(J,W),A4.init(J,W)});var F3=x("ZodNumber",(J,W)=>{TM.init(J,W),h4.init(J,W),J.gt=(G,Y)=>J.check(BG(G,Y)),J.gte=(G,Y)=>J.check(PJ(G,Y)),J.min=(G,Y)=>J.check(PJ(G,Y)),J.lt=(G,Y)=>J.check(qG(G,Y)),J.lte=(G,Y)=>J.check(IW(G,Y)),J.max=(G,Y)=>J.check(IW(G,Y)),J.int=(G)=>J.check(pI(G)),J.safe=(G)=>J.check(pI(G)),J.positive=(G)=>J.check(BG(0,G)),J.nonnegative=(G)=>J.check(PJ(0,G)),J.negative=(G)=>J.check(qG(0,G)),J.nonpositive=(G)=>J.check(IW(0,G)),J.multipleOf=(G,Y)=>J.check(w5(G,Y)),J.step=(G,Y)=>J.check(w5(G,Y)),J.finite=()=>J;let X=J._zod.bag;J.minValue=Math.max(X.minimum??Number.NEGATIVE_INFINITY,X.exclusiveMinimum??Number.NEGATIVE_INFINITY)??null,J.maxValue=Math.min(X.maximum??Number.POSITIVE_INFINITY,X.exclusiveMaximum??Number.POSITIVE_INFINITY)??null,J.isInt=(X.format??"").includes("int")||Number.isSafeInteger(X.multipleOf??0.5),J.isFinite=!0,J.format=X.format??null});function xM(J){return FI(F3,J)}var Rl=x("ZodNumberFormat",(J,W)=>{ZE.init(J,W),F3.init(J,W)});function pI(J){return QI(Rl,J)}var uM=x("ZodBoolean",(J,W)=>{LE.init(J,W),h4.init(J,W)});function tI(J){return ZI(uM,J)}var oI=x("ZodBigInt",(J,W)=>{VE.init(J,W),h4.init(J,W),J.gte=(G,Y)=>J.check(PJ(G,Y)),J.min=(G,Y)=>J.check(PJ(G,Y)),J.gt=(G,Y)=>J.check(BG(G,Y)),J.gte=(G,Y)=>J.check(PJ(G,Y)),J.min=(G,Y)=>J.check(PJ(G,Y)),J.lt=(G,Y)=>J.check(qG(G,Y)),J.lte=(G,Y)=>J.check(IW(G,Y)),J.max=(G,Y)=>J.check(IW(G,Y)),J.positive=(G)=>J.check(BG(BigInt(0),G)),J.negative=(G)=>J.check(qG(BigInt(0),G)),J.nonpositive=(G)=>J.check(IW(BigInt(0),G)),J.nonnegative=(G)=>J.check(PJ(BigInt(0),G)),J.multipleOf=(G,Y)=>J.check(w5(G,Y));let X=J._zod.bag;J.minValue=X.minimum??null,J.maxValue=X.maximum??null,J.format=X.format??null});var Cl=x("ZodUnknown",(J,W)=>{DE.init(J,W),h4.init(J,W)});function dI(){return DI(Cl)}var bl=x("ZodNever",(J,W)=>{ME.init(J,W),h4.init(J,W)});function kl(J){return MI(bl,J)}var cM=x("ZodDate",(J,W)=>{OE.init(J,W),h4.init(J,W),J.min=(G,Y)=>J.check(PJ(G,Y)),J.max=(G,Y)=>J.check(IW(G,Y));let X=J._zod.bag;J.minDate=X.minimum?new Date(X.minimum):null,J.maxDate=X.maximum?new Date(X.maximum):null});function v1(J){return OI(cM,J)}var hl=x("ZodArray",(J,W)=>{PE.init(J,W),h4.init(J,W),J.element=W.element,J.min=(X,G)=>J.check(AG(X,G)),J.nonempty=(X)=>J.check(AG(1,X)),J.max=(X,G)=>J.check(H3(X,G)),J.length=(X,G)=>J.check(z3(X,G)),J.unwrap=()=>J.element});function gl(J,W){return vI(hl,J,W)}var ml=x("ZodObject",(J,W)=>{SE.init(J,W),h4.init(J,W),e6.defineLazy(J,"shape",()=>{return W.shape}),J.keyof=()=>pM(Object.keys(J._zod.def.shape)),J.catchall=(X)=>J.clone({...J._zod.def,catchall:X}),J.passthrough=()=>J.clone({...J._zod.def,catchall:dI()}),J.loose=()=>J.clone({...J._zod.def,catchall:dI()}),J.strict=()=>J.clone({...J._zod.def,catchall:kl()}),J.strip=()=>J.clone({...J._zod.def,catchall:void 0}),J.extend=(X)=>{return e6.extend(J,X)},J.safeExtend=(X)=>{return e6.safeExtend(J,X)},J.merge=(X)=>e6.merge(J,X),J.pick=(X)=>e6.pick(J,X),J.omit=(X)=>e6.omit(J,X),J.partial=(...X)=>e6.partial(sI,J,X[0]),J.required=(...X)=>e6.required(eI,J,X[0])});function lM(J,W){let X={type:"object",shape:J??{},...e6.normalizeParams(W)};return new ml(X)}var fl=x("ZodUnion",(J,W)=>{_E.init(J,W),h4.init(J,W),J.options=W.options});function yl(J,W){return new fl({type:"union",options:J,...e6.normalizeParams(W)})}var xl=x("ZodIntersection",(J,W)=>{TE.init(J,W),h4.init(J,W)});function ul(J,W){return new xl({type:"intersection",left:J,right:W})}var fM=x("ZodEnum",(J,W)=>{qE.init(J,W),h4.init(J,W),J.enum=W.entries,J.options=Object.values(W.entries);let X=new Set(Object.keys(W.entries));J.extract=(G,Y)=>{let $={};for(let K of G)if(X.has(K))$[K]=W.entries[K];else throw Error(`Key ${K} not found in enum`);return new fM({...W,checks:[],...e6.normalizeParams(Y),entries:$})},J.exclude=(G,Y)=>{let $={...W.entries};for(let K of G)if(X.has(K))delete $[K];else throw Error(`Key ${K} not found in enum`);return new fM({...W,checks:[],...e6.normalizeParams(Y),entries:$})}});function pM(J,W){let X=Array.isArray(J)?Object.fromEntries(J.map((G)=>[G,G])):J;return new fM({type:"enum",entries:X,...e6.normalizeParams(W)})}var cl=x("ZodTransform",(J,W)=>{BE.init(J,W),h4.init(J,W),J._zod.parse=(X,G)=>{if(G.direction==="backward")throw new t$(J.constructor.name);X.addIssue=($)=>{if(typeof $==="string")X.issues.push(e6.issue($,X.value,W));else{let K=$;if(K.fatal)K.continue=!1;K.code??(K.code="custom"),K.input??(K.input=X.value),K.inst??(K.inst=J),X.issues.push(e6.issue(K))}};let Y=W.transform(X.value,X);if(Y instanceof Promise)return Y.then(($)=>{return X.value=$,X});return X.value=Y,X}});function ll(J){return new cl({type:"transform",transform:J})}var sI=x("ZodOptional",(J,W)=>{AE.init(J,W),h4.init(J,W),J.unwrap=()=>J._zod.def.innerType});function rI(J){return new sI({type:"optional",innerType:J})}var pl=x("ZodNullable",(J,W)=>{EE.init(J,W),h4.init(J,W),J.unwrap=()=>J._zod.def.innerType});function nI(J){return new pl({type:"nullable",innerType:J})}var dl=x("ZodDefault",(J,W)=>{IE.init(J,W),h4.init(J,W),J.unwrap=()=>J._zod.def.innerType,J.removeDefault=J.unwrap});function rl(J,W){return new dl({type:"default",innerType:J,get defaultValue(){return typeof W==="function"?W():e6.shallowClone(W)}})}var nl=x("ZodPrefault",(J,W)=>{RE.init(J,W),h4.init(J,W),J.unwrap=()=>J._zod.def.innerType});function il(J,W){return new nl({type:"prefault",innerType:J,get defaultValue(){return typeof W==="function"?W():e6.shallowClone(W)}})}var eI=x("ZodNonOptional",(J,W)=>{CE.init(J,W),h4.init(J,W),J.unwrap=()=>J._zod.def.innerType});function al(J,W){return new eI({type:"nonoptional",innerType:J,...e6.normalizeParams(W)})}var tl=x("ZodCatch",(J,W)=>{bE.init(J,W),h4.init(J,W),J.unwrap=()=>J._zod.def.innerType,J.removeCatch=J.unwrap});function ol(J,W){return new tl({type:"catch",innerType:J,catchValue:typeof W==="function"?W:()=>W})}var sl=x("ZodPipe",(J,W)=>{kE.init(J,W),h4.init(J,W),J.in=W.in,J.out=W.out});function iI(J,W){return new sl({type:"pipe",in:J,out:W})}var el=x("ZodReadonly",(J,W)=>{hE.init(J,W),h4.init(J,W),J.unwrap=()=>J._zod.def.innerType});function Jp(J){return new el({type:"readonly",innerType:J})}var Wp=x("ZodCustom",(J,W)=>{gE.init(J,W),h4.init(J,W)});function Xp(J,W={}){return jI(Wp,J,W)}function Yp(J){return SI(J)}var H5={};N0(H5,{string:()=>Gp,number:()=>$p,date:()=>Hp,boolean:()=>Kp,bigint:()=>wp});function Gp(J){return yE(yM,J)}function $p(J){return UI(F3,J)}function Kp(J){return LI(uM,J)}function wp(J){return VI(oI,J)}function Hp(J){return PI(cM,J)}MJ(qM());var U3=lM({id:p4(),createdAt:v1().default(()=>new Date),updatedAt:v1().default(()=>new Date)}),XS6=U3.extend({providerId:p4(),accountId:p4(),userId:H5.string(),accessToken:p4().nullish(),refreshToken:p4().nullish(),idToken:p4().nullish(),accessTokenExpiresAt:v1().nullish(),refreshTokenExpiresAt:v1().nullish(),scope:p4().nullish(),password:p4().nullish()}),YS6=lM({key:p4(),count:xM(),lastRequest:xM()}),GS6=U3.extend({userId:H5.string(),expiresAt:v1(),token:p4(),ipAddress:p4().nullish(),userAgent:p4().nullish()}),$S6=U3.extend({email:p4().transform((J)=>J.toLowerCase()),emailVerified:tI().default(!1),name:p4(),image:p4().nullish()}),KS6=U3.extend({value:p4(),expiresAt:v1(),identifier:p4()});iX();CJ();Y8();J0();BW();jG();I8();$8();m4();function Np(J){try{return(new URL(J).pathname.replace(/\/+$/,"")||"/")!=="/"}catch(W){throw new Y6(`Invalid base URL: ${J}. Please provide a valid base URL.`)}}function Fp(J){try{let W=new URL(J);if(W.protocol!=="http:"&&W.protocol!=="https:")throw new Y6(`Invalid base URL: ${J}. URL must include 'http://' or 'https://'`)}catch(W){if(W instanceof Y6)throw W;throw new Y6(`Invalid base URL: ${J}. Please provide a valid base URL.`,String(W))}}function z5(J,W="/api/auth"){if(Fp(J),Np(J))return J;let X=J.replace(/\/+$/,"");if(!W||W==="/")return X;return W=W.startsWith("/")?W:`/${W}`,`${X}${W}`}function IG(J,W,X,G){if(J)return z5(J,W);if(G!==!1){let K=C6.BETTER_AUTH_URL||C6.NEXT_PUBLIC_BETTER_AUTH_URL||C6.PUBLIC_BETTER_AUTH_URL||C6.NUXT_PUBLIC_BETTER_AUTH_URL||C6.NUXT_PUBLIC_AUTH_URL||(C6.BASE_URL!=="/"?C6.BASE_URL:void 0);if(K)return z5(K,W)}let Y=X?.headers.get("x-forwarded-host"),$=X?.headers.get("x-forwarded-proto");if(Y&&$)return z5(`${$}://${Y}`,W);if(X){let K=oJ(X.url);if(!K)throw new Y6("Could not get origin from request. Please provide a valid base URL.");return z5(K,W)}if(typeof window<"u"&&window.location)return z5(window.location.origin,W)}function oJ(J){try{let W=new URL(J);return W.origin==="null"?null:W.origin}catch(W){return null}}function dM(J){try{return new URL(J).protocol}catch(W){return null}}function rM(J){try{return new URL(J).host}catch(W){return null}}Y8();J0();BW();I8();BW();I8();$8();m4();X8();f0();var nM=new Map,Up=new TextEncoder,iM={decode:(J,W="utf-8")=>{if(!nM.has(W))nM.set(W,new TextDecoder(W));return nM.get(W).decode(J)},encode:Up.encode};Gw();f0();tX();var j1=(J="SHA-256",W="none")=>{let X={importKey:async(G,Y)=>{return P8().importKey("raw",typeof G==="string"?new TextEncoder().encode(G):G,{name:"HMAC",hash:{name:J}},!1,[Y])},sign:async(G,Y)=>{if(typeof G==="string")G=await X.importKey(G,"sign");let $=await P8().sign("HMAC",G,typeof Y==="string"?new TextEncoder().encode(Y):Y);if(W==="hex")return _Y.encode($);if(W==="base64"||W==="base64url"||W==="base64urlnopad")return L0.encode($,{padding:W!=="base64urlnopad"});return $},verify:async(G,Y,$)=>{if(typeof G==="string")G=await X.importKey(G,"verify");if(W==="hex")$=_Y.decode($);if(W==="base64"||W==="base64url"||W==="base64urlnopad")$=await f4.decode($);return P8().verify("HMAC",G,typeof $==="string"?new TextEncoder().encode($):$,typeof Y==="string"?new TextEncoder().encode(Y):Y)}};return X};var RG=1000,CG=RG*60,bG=CG*60,_1=bG*24,N5=_1*7,kG=_1*365.25,F5=kG/12;function sM(J,W){if(typeof J==="string")return Qp(J);else if(typeof J==="number")return Vp(J,W);throw Error(`Value provided to ms() must be a string or number. value=${JSON.stringify(J)}`)}function Qp(J){if(typeof J!=="string"||J.length===0||J.length>100)throw Error(`Value provided to ms.parse() must be a string with length between 1 and 99. value=${JSON.stringify(J)}`);let W=/^(?<value>-?\d*\.?\d+) *(?<unit>milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|months?|mo|years?|yrs?|y)?$/i.exec(J);if(!W?.groups)return NaN;let{value:X,unit:G="ms"}=W.groups,Y=parseFloat(X),$=G.toLowerCase();switch($){case"years":case"year":case"yrs":case"yr":case"y":return Y*kG;case"months":case"month":case"mo":return Y*F5;case"weeks":case"week":case"w":return Y*N5;case"days":case"day":case"d":return Y*_1;case"hours":case"hour":case"hrs":case"hr":case"h":return Y*bG;case"minutes":case"minute":case"mins":case"min":case"m":return Y*CG;case"seconds":case"second":case"secs":case"sec":case"s":return Y*RG;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return Y;default:throw Error(`Unknown unit "${$}" provided to ms.parse(). value=${JSON.stringify(J)}`)}}function Zp(J){let W=Math.abs(J);if(W>=kG)return`${Math.round(J/kG)}y`;if(W>=F5)return`${Math.round(J/F5)}mo`;if(W>=N5)return`${Math.round(J/N5)}w`;if(W>=_1)return`${Math.round(J/_1)}d`;if(W>=bG)return`${Math.round(J/bG)}h`;if(W>=CG)return`${Math.round(J/CG)}m`;if(W>=RG)return`${Math.round(J/RG)}s`;return`${J}ms`}function Lp(J){let W=Math.abs(J);if(W>=kG)return S1(J,W,kG,"year");if(W>=F5)return S1(J,W,F5,"month");if(W>=N5)return S1(J,W,N5,"week");if(W>=_1)return S1(J,W,_1,"day");if(W>=bG)return S1(J,W,bG,"hour");if(W>=CG)return S1(J,W,CG,"minute");if(W>=RG)return S1(J,W,RG,"second");return`${J} ms`}function Vp(J,W){if(typeof J!=="number"||!Number.isFinite(J))throw Error("Value provided to ms.format() must be of type number.");return W?.long?Lp(J):Zp(J)}function S1(J,W,X,G){let Y=W>=X*1.5;return`${Math.round(J/X)} ${G}${Y?"s":""}`}var XR=4096,tM=200,aM=XR-tM;function Dp(J){let W=J.headers?.get("cookie");if(!W)return{};let X={},G=W.split("; ");for(let Y of G){let[$,...K]=Y.split("=");if($&&K.length>0)X[$]=K.join("=")}return X}function JR(J){let W=J.split("."),X=W[W.length-1],G=parseInt(X||"0",10);return isNaN(G)?0:G}function Mp(J,W){let X={},G=Dp(W);for(let[Y,$]of Object.entries(G))if(Y.startsWith(J))X[Y]=$;return X}function Op(J){return Object.keys(J).sort((W,X)=>{return JR(W)-JR(X)}).map((W)=>J[W]).join("")}function Pp(J,W,X){let G=Math.ceil(J.value.length/aM);if(G===1)return W[J.name]=J.value,[J];let Y=[];for(let $=0;$<G;$++){let K=`${J.name}.${$}`,w=$*aM,H=J.value.substring(w,w+aM);Y.push({...J,name:K,value:H}),W[K]=H}return X.debug("CHUNKING_SESSION_COOKIE",{message:`Session cookie exceeds allowed ${XR} bytes.`,emptyCookieSize:tM,valueSize:J.value.length,chunkCount:G,chunks:Y.map(($)=>$.value.length+tM)}),Y}function WR(J,W){let X={};for(let G in J)X[G]={name:G,value:"",options:{...W,maxAge:0}};return X}function oM(J,W,X){let G=Mp(J,X),Y=X.context.logger;return{getValue(){return Op(G)},hasChunks(){return Object.keys(G).length>0},chunk($,K){let w=WR(G,W);for(let N in G)delete G[N];let H=w,z=Pp({name:J,value:$,options:{...W,...K}},G,Y);for(let N of z)H[N.name]=N;return Object.values(H)},clean(){let $=WR(G,W);for(let K in G)delete G[K];return Object.values($)},setCookies($){for(let K of $)X.setCookie(K.name,K.value,K.options)}}}function YR(J,W){let X=J.getCookie(W);if(X)return X;let G=[],Y=J.headers?.get("cookie");if(!Y)return null;let $={},K=Y.split("; ");for(let w of K){let[H,...z]=w.split("=");if(H&&z.length>0)$[H]=z.join("=")}for(let[w,H]of Object.entries($))if(w.startsWith(W+".")){let z=w.split(".").at(-1),N=parseInt(z||"0",10);if(!isNaN(N))G.push({index:N,value:H})}if(G.length>0)return G.sort((w,H)=>w.index-H.index),G.map((w)=>w.value).join("");return null}var GR=E0(c({disableCookieCache:o6.boolean().meta({description:"Disable cookie cache and fetch session from database"}).optional(),disableRefresh:o6.boolean().meta({description:"Disable session refresh. Useful for checking session status, without updating the session"}).optional()}));function vX(J){let W=new Map;return J.split(", ").forEach((X)=>{let[G,...Y]=X.split(";").map((z)=>z.trim()),[$,...K]=(G||"").split("="),w=K.join("=");if(!$||w===void 0)return;let H={value:w};Y.forEach((z)=>{let[N,...U]=z.split("="),F=U.join("="),Z=N.trim().toLowerCase();switch(Z){case"max-age":H["max-age"]=F?parseInt(F.trim(),10):void 0;break;case"expires":H.expires=F?new Date(F.trim()):void 0;break;case"domain":H.domain=F?F.trim():void 0;break;case"path":H.path=F?F.trim():void 0;break;case"secure":H.secure=!0;break;case"httponly":H.httponly=!0;break;case"samesite":H.samesite=F?F.trim().toLowerCase():void 0;break;default:H[Z]=F?F.trim():!0;break}}),W.set($,H)}),W}function eM(J){let W=(J.advanced?.useSecureCookies!==void 0?J.advanced?.useSecureCookies:J.baseURL!==void 0?J.baseURL.startsWith("https://")?!0:!1:TW)?"__Secure-":"",X=!!J.advanced?.crossSubDomainCookies?.enabled,G=X?J.advanced?.crossSubDomainCookies?.domain||(J.baseURL?new URL(J.baseURL).hostname:void 0):void 0;if(X&&!G)throw new Y6("baseURL is required when crossSubdomainCookies are enabled");function Y($,K={}){let w=J.advanced?.cookiePrefix||"better-auth",H=J.advanced?.cookies?.[$]?.name||`${w}.${$}`,z=J.advanced?.cookies?.[$]?.attributes;return{name:`${W}${H}`,attributes:{secure:!!W,sameSite:"lax",path:"/",httpOnly:!0,...X?{domain:G}:{},...J.advanced?.defaultCookieAttributes,...K,...z}}}return Y}function $R(J){let W=eM(J),X=W("session_token",{maxAge:J.session?.expiresIn||sM("7d")/1000}),G=W("session_data",{maxAge:J.session?.cookieCache?.maxAge||300}),Y=W("account_data",{maxAge:J.session?.cookieCache?.maxAge||300}),$=W("dont_remember");return{sessionToken:{name:X.name,options:X.attributes},sessionData:{name:G.name,options:G.attributes},dontRememberToken:{name:$.name,options:$.attributes},accountData:{name:Y.name,options:Y.attributes}}}async function U5(J,W,X){if(J.context.options.session?.cookieCache?.enabled){let G=Object.entries(W.session).reduce((F,[Z,L])=>{let D=J.context.options.session?.additionalFields?.[Z];if(!D||D.returned!==!1)F[Z]=L;return F},{}),Y=A8(J.context.options,W.user),$=J.context.options.session?.cookieCache?.version,K="1";if($){if(typeof $==="string")K=$;else if(typeof $==="function"){let F=$(W.session,W.user);K=F instanceof Promise?await F:F}}let w={session:G,user:Y,updatedAt:Date.now(),version:K},H={...J.context.authCookies.sessionData.options,maxAge:X?void 0:J.context.authCookies.sessionData.options.maxAge},z=Z4(H.maxAge||60,"sec").getTime(),N=J.context.options.session?.cookieCache?.strategy||"compact",U;if(N==="jwe")U=await DB(w,J.context.secret,"better-auth-session",H.maxAge||300);else if(N==="jwt")U=await nH(w,J.context.secret,H.maxAge||300);else U=L0.encode(JSON.stringify({session:w,expiresAt:z,signature:await j1("SHA-256","base64urlnopad").sign(J.context.secret,JSON.stringify({...w,expiresAt:z}))}),{padding:!1});if(U.length>4093){let F=oM(J.context.authCookies.sessionData.name,H,J),Z=F.chunk(U,H);F.setCookies(Z)}else{let F=oM(J.context.authCookies.sessionData.name,H,J);if(F.hasChunks()){let Z=F.clean();F.setCookies(Z)}J.setCookie(J.context.authCookies.sessionData.name,U,H)}}}async function k6(J,W,X,G){let Y=await J.getSignedCookie(J.context.authCookies.dontRememberToken.name,J.context.secret);X=X!==void 0?X:!!Y;let $=J.context.authCookies.sessionToken.options,K=X?void 0:J.context.sessionConfig.expiresIn;if(await J.setSignedCookie(J.context.authCookies.sessionToken.name,W.session.token,J.context.secret,{...$,maxAge:K,...G}),X)await J.setSignedCookie(J.context.authCookies.dontRememberToken.name,"true",J.context.secret,J.context.authCookies.dontRememberToken.options);if(await U5(J,W,X),J.context.setNewSession(W),J.context.options.secondaryStorage)await J.context.secondaryStorage?.set(W.session.token,JSON.stringify({user:W.user,session:W.session}),Math.floor((new Date(W.session.expiresAt).getTime()-Date.now())/1000))}function vJ(J,W){J.setCookie(J.context.authCookies.sessionToken.name,"",{...J.context.authCookies.sessionToken.options,maxAge:0});let X=oM(J.context.authCookies.sessionData.name,J.context.authCookies.sessionData.options,J),G=X.clean();if(X.setCookies(G),!W)J.setCookie(J.context.authCookies.dontRememberToken.name,"",{...J.context.authCookies.dontRememberToken.options,maxAge:0})}BW();I8();m4();W0();X8();Uw();OU();W0();var Q5=J1(async()=>{return{}}),u6=J1.create({use:[Q5,J1(async()=>{return{}})]}),vp=[Q5],y=(J,W,X)=>{return a9(J,{...W,use:[...W?.use||[],...vp]},async(G)=>RY(G,()=>X(G)))};f0();var Q3=()=>y("/get-session",{method:"GET",operationId:"getSession",query:GR,requireHeaders:!0,metadata:{openapi:{operationId:"getSession",description:"Get the current session",responses:{"200":{description:"Success",content:{"application/json":{schema:{type:"object",properties:{session:{$ref:"#/components/schemas/Session"},user:{$ref:"#/components/schemas/User"}},required:["session","user"]}}}}}}}},async(J)=>{try{let W=await J.getSignedCookie(J.context.authCookies.sessionToken.name,J.context.secret);if(!W)return null;let X=YR(J,J.context.authCookies.sessionData.name),G=null;if(X){let H=J.context.options.session?.cookieCache?.strategy||"compact";if(H==="jwe"){let z=await KM(X,J.context.secret,"better-auth-session");if(z&&z.session&&z.user)G={session:{session:z.session,user:z.user,updatedAt:z.updatedAt,version:z.version},expiresAt:z.exp?z.exp*1000:Date.now()};else{let N=J.context.authCookies.sessionData.name;return J.setCookie(N,"",{maxAge:0}),J.json(null)}}else if(H==="jwt"){let z=await $M(X,J.context.secret);if(z&&z.session&&z.user)G={session:{session:z.session,user:z.user,updatedAt:z.updatedAt,version:z.version},expiresAt:z.exp?z.exp*1000:Date.now()};else{let N=J.context.authCookies.sessionData.name;return J.setCookie(N,"",{maxAge:0}),J.json(null)}}else{let z=l6(iM.decode(L0.decode(X)));if(z)if(await j1("SHA-256","base64urlnopad").verify(J.context.secret,JSON.stringify({...z.session,expiresAt:z.expiresAt}),z.signature))G=z;else{let N=J.context.authCookies.sessionData.name;return J.setCookie(N,"",{maxAge:0}),J.json(null)}}}let Y=await J.getSignedCookie(J.context.authCookies.dontRememberToken.name,J.context.secret);if(G?.session&&J.context.options.session?.cookieCache?.enabled&&!J.query?.disableCookieCache){let H=G.session,z=J.context.options.session?.cookieCache?.version,N="1";if(z){if(typeof z==="string")N=z;else if(typeof z==="function"){let U=z(H.session,H.user);N=U instanceof Promise?await U:U}}if((H.version||"1")!==N){let U=J.context.authCookies.sessionData.name;J.setCookie(U,"",{maxAge:0})}else if(G.expiresAt<Date.now()||H.session.expiresAt<new Date){let U=J.context.authCookies.sessionData.name;J.setCookie(U,"",{maxAge:0})}else{let U=J.context.sessionConfig.cookieRefreshCache;if(U===!1)return J.context.session=H,J.json({session:H.session,user:H.user});if(G.expiresAt-Date.now()<U.updateAge*1000){let L=Z4(J.context.options.session?.cookieCache?.maxAge||300,"sec"),D={session:{...H.session,expiresAt:L},user:H.user,updatedAt:Date.now()};await U5(J,D,!1);let O=lJ(J.context.options,{...D.session,expiresAt:new Date(D.session.expiresAt),createdAt:new Date(D.session.createdAt),updatedAt:new Date(D.session.updatedAt)}),P=A8(J.context.options,{...D.user,createdAt:new Date(D.user.createdAt),updatedAt:new Date(D.user.updatedAt)});return J.context.session={session:O,user:P},J.json({session:O,user:P})}let F=lJ(J.context.options,{...H.session,expiresAt:new Date(H.session.expiresAt),createdAt:new Date(H.session.createdAt),updatedAt:new Date(H.session.updatedAt)}),Z=A8(J.context.options,{...H.user,createdAt:new Date(H.user.createdAt),updatedAt:new Date(H.user.updatedAt)});return J.context.session={session:F,user:Z},J.json({session:F,user:Z})}}let $=await J.context.internalAdapter.findSession(W);if(J.context.session=$,!$||$.session.expiresAt<new Date){if(vJ(J),$)await J.context.internalAdapter.deleteSession($.session.token);return J.json(null)}if(Y||J.query?.disableRefresh){let H=lJ(J.context.options,$.session),z=A8(J.context.options,$.user);return J.json({session:H,user:z})}let K=J.context.sessionConfig.expiresIn,w=J.context.sessionConfig.updateAge;if($.session.expiresAt.valueOf()-K*1000+w*1000<=Date.now()&&(!J.query?.disableRefresh||!J.context.options.session?.disableSessionRefresh)){let H=await J.context.internalAdapter.updateSession($.session.token,{expiresAt:Z4(J.context.sessionConfig.expiresIn,"sec"),updatedAt:new Date});if(!H)return vJ(J),J.json(null,{status:401});let z=(H.expiresAt.valueOf()-Date.now())/1000;await k6(J,{session:H,user:$.user},!1,{maxAge:z});let N=lJ(J.context.options,H),U=A8(J.context.options,$.user);return J.json({session:N,user:U})}return await U5(J,$,!!Y),J.json($)}catch(W){throw J.context.logger.error("INTERNAL_SERVER_ERROR",W),new V("INTERNAL_SERVER_ERROR",{message:s.FAILED_TO_GET_SESSION})}}),j6=async(J,W)=>{if(J.context.session)return J.context.session;let X=await Q3()({...J,asResponse:!1,headers:J.headers,returnHeaders:!1,returnStatus:!1,query:{...W,...J.query}}).catch((G)=>{return null});return J.context.session=X,X},u4=u6(async(J)=>{let W=await j6(J);if(!W?.session)throw new V("UNAUTHORIZED");return{session:W}}),jX=u6(async(J)=>{let W=await j6(J,{disableCookieCache:!0});if(!W?.session)throw new V("UNAUTHORIZED");return{session:W}}),KR=u6(async(J)=>{let W=await j6(J);if(!W?.session&&(J.request||J.headers))throw new V("UNAUTHORIZED");return{session:W}}),wR=u6(async(J)=>{let W=await j6(J);if(!W?.session)throw new V("UNAUTHORIZED");if(J.context.sessionConfig.freshAge===0)return{session:W};let X=J.context.sessionConfig.freshAge,G=new Date(W.session.updatedAt||W.session.createdAt).getTime();if(!(Date.now()-G<X*1000))throw new V("FORBIDDEN",{message:"Session is not fresh"});return{session:W}}),HR=()=>y("/list-sessions",{method:"GET",operationId:"listUserSessions",use:[u4],requireHeaders:!0,metadata:{openapi:{operationId:"listUserSessions",description:"List all active sessions for the user",responses:{"200":{description:"Success",content:{"application/json":{schema:{type:"array",items:{$ref:"#/components/schemas/Session"}}}}}}}}},async(J)=>{try{let W=(await J.context.internalAdapter.listSessions(J.context.session.user.id)).filter((X)=>{return X.expiresAt>new Date});return J.json(W)}catch(W){throw J.context.logger.error(W),J.error("INTERNAL_SERVER_ERROR")}}),zR=y("/revoke-session",{method:"POST",body:c({token:j().meta({description:"The token to revoke"})}),use:[jX],requireHeaders:!0,metadata:{openapi:{description:"Revoke a single session",requestBody:{content:{"application/json":{schema:{type:"object",properties:{token:{type:"string",description:"The token to revoke"}},required:["token"]}}}},responses:{"200":{description:"Success",content:{"application/json":{schema:{type:"object",properties:{status:{type:"boolean",description:"Indicates if the session was revoked successfully"}},required:["status"]}}}}}}}},async(J)=>{let W=J.body.token;if((await J.context.internalAdapter.findSession(W))?.session.userId===J.context.session.user.id)try{await J.context.internalAdapter.deleteSession(W)}catch(X){throw J.context.logger.error(X&&typeof X==="object"&&"name"in X?X.name:"",X),new V("INTERNAL_SERVER_ERROR")}return J.json({status:!0})}),NR=y("/revoke-sessions",{method:"POST",use:[jX],requireHeaders:!0,metadata:{openapi:{description:"Revoke all sessions for the user",responses:{"200":{description:"Success",content:{"application/json":{schema:{type:"object",properties:{status:{type:"boolean",description:"Indicates if all sessions were revoked successfully"}},required:["status"]}}}}}}}},async(J)=>{try{await J.context.internalAdapter.deleteSessions(J.context.session.user.id)}catch(W){throw J.context.logger.error(W&&typeof W==="object"&&"name"in W?W.name:"",W),new V("INTERNAL_SERVER_ERROR")}return J.json({status:!0})}),FR=y("/revoke-other-sessions",{method:"POST",requireHeaders:!0,use:[jX],metadata:{openapi:{description:"Revoke all other sessions for the user except the current one",responses:{"200":{description:"Success",content:{"application/json":{schema:{type:"object",properties:{status:{type:"boolean",description:"Indicates if all other sessions were revoked successfully"}},required:["status"]}}}}}}}},async(J)=>{let W=J.context.session;if(!W.user)throw new V("UNAUTHORIZED");let X=(await J.context.internalAdapter.listSessions(W.user.id)).filter((G)=>{return G.expiresAt>new Date}).filter((G)=>G.token!==J.context.session.session.token);return await Promise.all(X.map((G)=>J.context.internalAdapter.deleteSession(G.token))),J.json({status:!0})});kJ();$8();m4();W0();X8();D1();SD();f0();var{defineProperty:jp,defineProperties:Sp,getOwnPropertyDescriptors:_p,getOwnPropertySymbols:UR}=Object,Tp=Object.prototype.hasOwnProperty,qp=Object.prototype.propertyIsEnumerable,QR=(J,W,X)=>(W in J)?jp(J,W,{enumerable:!0,configurable:!0,writable:!0,value:X}):J[W]=X,T1=(J,W)=>{for(var X in W||(W={}))if(Tp.call(W,X))QR(J,X,W[X]);if(UR){for(var X of UR(W))if(qp.call(W,X))QR(J,X,W[X])}return J},q1=(J,W)=>Sp(J,_p(W)),Bp=class extends Error{constructor(J,W,X){super(W||J.toString(),{cause:X});this.status=J,this.statusText=W,this.error=X}},Ap=async(J,W)=>{var X,G,Y,$,K,w;let H=W||{},z={onRequest:[W==null?void 0:W.onRequest],onResponse:[W==null?void 0:W.onResponse],onSuccess:[W==null?void 0:W.onSuccess],onError:[W==null?void 0:W.onError],onRetry:[W==null?void 0:W.onRetry]};if(!W||!(W==null?void 0:W.plugins))return{url:J,options:H,hooks:z};for(let N of(W==null?void 0:W.plugins)||[]){if(N.init){let U=await((X=N.init)==null?void 0:X.call(N,J.toString(),W));H=U.options||H,J=U.url}z.onRequest.push((G=N.hooks)==null?void 0:G.onRequest),z.onResponse.push((Y=N.hooks)==null?void 0:Y.onResponse),z.onSuccess.push(($=N.hooks)==null?void 0:$.onSuccess),z.onError.push((K=N.hooks)==null?void 0:K.onError),z.onRetry.push((w=N.hooks)==null?void 0:w.onRetry)}return{url:J,options:H,hooks:z}},ZR=class{constructor(J){this.options=J}shouldAttemptRetry(J,W){if(this.options.shouldRetry)return Promise.resolve(J<this.options.attempts&&this.options.shouldRetry(W));return Promise.resolve(J<this.options.attempts)}getDelay(){return this.options.delay}},Ep=class{constructor(J){this.options=J}shouldAttemptRetry(J,W){if(this.options.shouldRetry)return Promise.resolve(J<this.options.attempts&&this.options.shouldRetry(W));return Promise.resolve(J<this.options.attempts)}getDelay(J){return Math.min(this.options.maxDelay,this.options.baseDelay*2**J)}};function Ip(J){if(typeof J==="number")return new ZR({type:"linear",attempts:J,delay:1000});switch(J.type){case"linear":return new ZR(J);case"exponential":return new Ep(J);default:throw Error("Invalid retry strategy")}}var Rp=async(J)=>{let W={},X=async(G)=>typeof G==="function"?await G():G;if(J==null?void 0:J.auth){if(J.auth.type==="Bearer"){let G=await X(J.auth.token);if(!G)return W;W.authorization=`Bearer ${G}`}else if(J.auth.type==="Basic"){let G=X(J.auth.username),Y=X(J.auth.password);if(!G||!Y)return W;W.authorization=`Basic ${btoa(`${G}:${Y}`)}`}else if(J.auth.type==="Custom"){let G=X(J.auth.value);if(!G)return W;W.authorization=`${X(J.auth.prefix)} ${G}`}}return W},Cp=/^application\/(?:[\w!#$%&*.^`~-]*\+)?json(;.+)?$/i;function bp(J){let W=J.headers.get("content-type"),X=new Set(["image/svg","application/xml","application/xhtml","application/html"]);if(!W)return"json";let G=W.split(";").shift()||"";if(Cp.test(G))return"json";if(X.has(G)||G.startsWith("text/"))return"text";return"blob"}function kp(J){try{return JSON.parse(J),!0}catch(W){return!1}}function DR(J){if(J===void 0)return!1;let W=typeof J;if(W==="string"||W==="number"||W==="boolean"||W===null)return!0;if(W!=="object")return!1;if(Array.isArray(J))return!0;if(J.buffer)return!1;return J.constructor&&J.constructor.name==="Object"||typeof J.toJSON==="function"}function LR(J){try{return JSON.parse(J)}catch(W){return J}}function VR(J){return typeof J==="function"}function hp(J){if(J==null?void 0:J.customFetchImpl)return J.customFetchImpl;if(typeof globalThis<"u"&&VR(globalThis.fetch))return globalThis.fetch;if(typeof window<"u"&&VR(window.fetch))return window.fetch;throw Error("No fetch implementation found")}async function gp(J){let W=new Headers(J==null?void 0:J.headers),X=await Rp(J);for(let[G,Y]of Object.entries(X||{}))W.set(G,Y);if(!W.has("content-type")){let G=mp(J==null?void 0:J.body);if(G)W.set("content-type",G)}return W}function mp(J){if(DR(J))return"application/json";return null}function fp(J){if(!(J==null?void 0:J.body))return null;let W=new Headers(J==null?void 0:J.headers);if(DR(J.body)&&!W.has("content-type")){for(let[X,G]of Object.entries(J==null?void 0:J.body))if(G instanceof Date)J.body[X]=G.toISOString();return JSON.stringify(J.body)}return J.body}function yp(J,W){var X;if(W==null?void 0:W.method)return W.method.toUpperCase();if(J.startsWith("@")){let G=(X=J.split("@")[1])==null?void 0:X.split("/")[0];if(!MR.includes(G))return(W==null?void 0:W.body)?"POST":"GET";return G.toUpperCase()}return(W==null?void 0:W.body)?"POST":"GET"}function xp(J,W){let X;if(!(J==null?void 0:J.signal)&&(J==null?void 0:J.timeout))X=setTimeout(()=>W==null?void 0:W.abort(),J==null?void 0:J.timeout);return{abortTimeout:X,clearTimeout:()=>{if(X)clearTimeout(X)}}}var up=class J extends Error{constructor(W,X){super(X||JSON.stringify(W,null,2));this.issues=W,Object.setPrototypeOf(this,J.prototype)}};async function cp(J,W){let X=await J["~standard"].validate(W);if(X.issues)throw new up(X.issues);return X.value}var MR=["get","post","put","patch","delete"];function lp(J,W){let{baseURL:X,params:G,query:Y}=W||{query:{},params:{},baseURL:""},$=J.startsWith("http")?J.split("/").slice(0,3).join("/"):X||"";if(J.startsWith("@")){let U=J.toString().split("@")[1].split("/")[0];if(MR.includes(U))J=J.replace(`@${U}/`,"/")}if(!$.endsWith("/"))$+="/";let[K,w]=J.replace($,"").split("?"),H=new URLSearchParams(w);for(let[U,F]of Object.entries(Y||{})){if(F==null)continue;H.set(U,String(F))}if(G)if(Array.isArray(G)){let U=K.split("/").filter((F)=>F.startsWith(":"));for(let[F,Z]of U.entries()){let L=G[F];K=K.replace(Z,L)}}else for(let[U,F]of Object.entries(G))K=K.replace(`:${U}`,String(F));if(K=K.split("/").map(encodeURIComponent).join("/"),K.startsWith("/"))K=K.slice(1);let z=H.toString();if(z=z.length>0?`?${z}`.replace(/\+/g,"%20"):"",!$.startsWith("http"))return`${$}${K}${z}`;return new URL(`${K}${z}`,$)}var Q6=async(J,W)=>{var X,G,Y,$,K,w,H,z;let{hooks:N,url:U,options:F}=await Ap(J,W),Z=hp(F),L=new AbortController,D=(X=F.signal)!=null?X:L.signal,O=lp(U,F),P=fp(F),_=await gp(F),T=yp(U,F),v=q1(T1({},F),{url:O,headers:_,body:P,method:T,signal:D});for(let b of N.onRequest)if(b){let g=await b(v);if(g instanceof Object)v=g}if("pipeTo"in v&&typeof v.pipeTo==="function"||typeof((G=W==null?void 0:W.body)==null?void 0:G.pipe)==="function"){if(!("duplex"in v))v.duplex="half"}let{clearTimeout:q}=xp(F,L),S=await Z(v.url,v);q();let B={response:S,request:v};for(let b of N.onResponse)if(b){let g=await b(q1(T1({},B),{response:((Y=W==null?void 0:W.hookOptions)==null?void 0:Y.cloneResponse)?S.clone():S}));if(g instanceof Response)S=g;else if(g instanceof Object)S=g.response}if(S.ok){if(v.method==="HEAD")return{data:"",error:null};let g=bp(S),f={data:"",response:S,request:v};if(g==="json"||g==="text"){let p=await S.text(),a=await(($=v.jsonParser)!=null?$:LR)(p);f.data=a}else f.data=await S[g]();if(v==null?void 0:v.output){if(v.output&&!v.disableValidation)f.data=await cp(v.output,f.data)}for(let p of N.onSuccess)if(p)await p(q1(T1({},f),{response:((K=W==null?void 0:W.hookOptions)==null?void 0:K.cloneResponse)?S.clone():S}));if(W==null?void 0:W.throw)return f.data;return{data:f.data,error:null}}let A=(w=W==null?void 0:W.jsonParser)!=null?w:LR,E=await S.text(),I=kp(E),m=I?await A(E):null,u={response:S,responseText:E,request:v,error:q1(T1({},m),{status:S.status,statusText:S.statusText})};for(let b of N.onError)if(b)await b(q1(T1({},u),{response:((H=W==null?void 0:W.hookOptions)==null?void 0:H.cloneResponse)?S.clone():S}));if(W==null?void 0:W.retry){let b=Ip(W.retry),g=(z=W.retryAttempt)!=null?z:0;if(await b.shouldAttemptRetry(g,S)){for(let p of N.onRetry)if(p)await p(B);let f=b.getDelay(g);return await new Promise((p)=>setTimeout(p,f)),await Q6(J,q1(T1({},W),{retryAttempt:g+1}))}}if(W==null?void 0:W.throw)throw new Bp(S.status,S.statusText,I?m:E);return{data:null,error:q1(T1({},m),{status:S.status,statusText:S.statusText})}};function Z3(J){let W=(X)=>{return new Date(new Date().getTime()+X*1000)};return{tokenType:J.token_type,accessToken:J.access_token,refreshToken:J.refresh_token,accessTokenExpiresAt:J.expires_in?W(J.expires_in):void 0,refreshTokenExpiresAt:J.refresh_token_expires_in?W(J.refresh_token_expires_in):void 0,scopes:J?.scope?typeof J.scope==="string"?J.scope.split(" "):J.scope:[],idToken:J.id_token,raw:J}}async function L3(J){let W=new TextEncoder().encode(J),X=await crypto.subtle.digest("SHA-256",W);return L0.encode(new Uint8Array(X),{padding:!1})}async function r6({id:J,options:W,authorizationEndpoint:X,state:G,codeVerifier:Y,scopes:$,claims:K,redirectURI:w,duration:H,prompt:z,accessType:N,responseType:U,display:F,loginHint:Z,hd:L,responseMode:D,additionalParams:O,scopeJoiner:P}){let _=new URL(X);_.searchParams.set("response_type",U||"code");let T=Array.isArray(W.clientId)?W.clientId[0]:W.clientId;if(_.searchParams.set("client_id",T),_.searchParams.set("state",G),_.searchParams.set("scope",$.join(P||" ")),_.searchParams.set("redirect_uri",W.redirectURI||w),H&&_.searchParams.set("duration",H),F&&_.searchParams.set("display",F),Z&&_.searchParams.set("login_hint",Z),z&&_.searchParams.set("prompt",z),L&&_.searchParams.set("hd",L),N&&_.searchParams.set("access_type",N),D&&_.searchParams.set("response_mode",D),Y){let v=await L3(Y);_.searchParams.set("code_challenge_method","S256"),_.searchParams.set("code_challenge",v)}if(K){let v=K.reduce((q,S)=>{return q[S]=null,q},{});_.searchParams.set("claims",JSON.stringify({id_token:{email:null,email_verified:null,...v}}))}if(O)Object.entries(O).forEach(([v,q])=>{_.searchParams.set(v,q)});return _}function OR({refreshToken:J,options:W,authentication:X,extraParams:G,resource:Y}){let $=new URLSearchParams,K={"content-type":"application/x-www-form-urlencoded",accept:"application/json"};if($.set("grant_type","refresh_token"),$.set("refresh_token",J),X==="basic"){let w=Array.isArray(W.clientId)?W.clientId[0]:W.clientId;if(w)K.authorization="Basic "+f4.encode(`${w}:${W.clientSecret??""}`);else K.authorization="Basic "+f4.encode(`:${W.clientSecret??""}`)}else{let w=Array.isArray(W.clientId)?W.clientId[0]:W.clientId;if($.set("client_id",w),W.clientSecret)$.set("client_secret",W.clientSecret)}if(Y)if(typeof Y==="string")$.append("resource",Y);else for(let w of Y)$.append("resource",w);if(G)for(let[w,H]of Object.entries(G))$.set(w,H);return{body:$,headers:K}}async function h6({refreshToken:J,options:W,tokenEndpoint:X,authentication:G,extraParams:Y}){let{body:$,headers:K}=OR({refreshToken:J,options:W,authentication:G,extraParams:Y}),{data:w,error:H}=await Q6(X,{method:"POST",body:$,headers:K});if(H)throw H;let z={accessToken:w.access_token,refreshToken:w.refresh_token,tokenType:w.token_type,scopes:w.scope?.split(" "),idToken:w.id_token};if(w.expires_in){let N=new Date;z.accessTokenExpiresAt=new Date(N.getTime()+w.expires_in*1000)}return z}function PR({code:J,codeVerifier:W,redirectURI:X,options:G,authentication:Y,deviceId:$,headers:K,additionalParams:w={},resource:H}){let z=new URLSearchParams,N={"content-type":"application/x-www-form-urlencoded",accept:"application/json",...K};if(z.set("grant_type","authorization_code"),z.set("code",J),W&&z.set("code_verifier",W),G.clientKey&&z.set("client_key",G.clientKey),$&&z.set("device_id",$),z.set("redirect_uri",G.redirectURI||X),H)if(typeof H==="string")z.append("resource",H);else for(let U of H)z.append("resource",U);if(Y==="basic"){let U=Array.isArray(G.clientId)?G.clientId[0]:G.clientId;N.authorization=`Basic ${f4.encode(`${U}:${G.clientSecret??""}`)}`}else{let U=Array.isArray(G.clientId)?G.clientId[0]:G.clientId;if(z.set("client_id",U),G.clientSecret)z.set("client_secret",G.clientSecret)}for(let[U,F]of Object.entries(w))if(!z.has(U))z.append(U,F);return{body:z,headers:N}}async function g6({code:J,codeVerifier:W,redirectURI:X,options:G,tokenEndpoint:Y,authentication:$,deviceId:K,headers:w,additionalParams:H={},resource:z}){let{body:N,headers:U}=PR({code:J,codeVerifier:W,redirectURI:X,options:G,authentication:$,deviceId:K,headers:w,additionalParams:H,resource:z}),{data:F,error:Z}=await Q6(Y,{method:"POST",body:N,headers:U});if(Z)throw Z;return Z3(F)}y9();lF();f0();D1();W0();var pp=(J)=>{return{id:"apple",name:"Apple",async createAuthorizationURL({state:X,scopes:G,redirectURI:Y}){let $=J.disableDefaultScope?[]:["email","name"];if(J.scope)$.push(...J.scope);if(G)$.push(...G);return await r6({id:"apple",options:J,authorizationEndpoint:"https://appleid.apple.com/auth/authorize",scopes:$,state:X,redirectURI:Y,responseMode:"form_post",responseType:"code id_token"})},validateAuthorizationCode:async({code:X,codeVerifier:G,redirectURI:Y})=>{return g6({code:X,codeVerifier:G,redirectURI:Y,options:J,tokenEndpoint:"https://appleid.apple.com/auth/token"})},async verifyIdToken(X,G){if(J.disableIdTokenSignIn)return!1;if(J.verifyIdToken)return J.verifyIdToken(X,G);let{kid:Y,alg:$}=rH(X);if(!Y||!$)return!1;let{payload:K}=await R8(X,await dp(Y),{algorithms:[$],issuer:"https://appleid.apple.com",audience:J.audience&&J.audience.length?J.audience:J.appBundleIdentifier?J.appBundleIdentifier:J.clientId,maxTokenAge:"1h"});if(["email_verified","is_private_email"].forEach((w)=>{if(K[w]!==void 0)K[w]=Boolean(K[w])}),G&&K.nonce!==G)return!1;return!!K},refreshAccessToken:J.refreshAccessToken?J.refreshAccessToken:async(X)=>{return h6({refreshToken:X,options:{clientId:J.clientId,clientKey:J.clientKey,clientSecret:J.clientSecret},tokenEndpoint:"https://appleid.apple.com/auth/token"})},async getUserInfo(X){if(J.getUserInfo)return J.getUserInfo(X);if(!X.idToken)return null;let G=DJ(X.idToken);if(!G)return null;let Y=X.user?`${X.user.name?.firstName} ${X.user.name?.lastName}`:G.name||G.email,$=typeof G.email_verified==="boolean"?G.email_verified:G.email_verified==="true",K={...G,name:Y},w=await J.mapProfileToUser?.(K);return{user:{id:G.sub,name:K.name,emailVerified:$,email:G.email,...w},data:K}},options:J}},dp=async(J)=>{let{data:W}=await Q6("https://appleid.apple.com/auth/keys");if(!W?.keys)throw new V("BAD_REQUEST",{message:"Keys not found"});let X=W.keys.find((G)=>G.kid===J);if(!X)throw Error(`JWK with kid ${J} not found`);return await VJ(X,X.alg)},rp=(J)=>{return{id:"atlassian",name:"Atlassian",async createAuthorizationURL({state:W,scopes:X,codeVerifier:G,redirectURI:Y}){if(!J.clientId||!J.clientSecret)throw w6.error("Client Id and Secret are required for Atlassian"),new Y6("CLIENT_ID_AND_SECRET_REQUIRED");if(!G)throw new Y6("codeVerifier is required for Atlassian");let $=J.disableDefaultScope?[]:["read:jira-user","offline_access"];if(J.scope)$.push(...J.scope);if(X)$.push(...X);return r6({id:"atlassian",options:J,authorizationEndpoint:"https://auth.atlassian.com/authorize",scopes:$,state:W,codeVerifier:G,redirectURI:Y,additionalParams:{audience:"api.atlassian.com"},prompt:J.prompt})},validateAuthorizationCode:async({code:W,codeVerifier:X,redirectURI:G})=>{return g6({code:W,codeVerifier:X,redirectURI:G,options:J,tokenEndpoint:"https://auth.atlassian.com/oauth/token"})},refreshAccessToken:J.refreshAccessToken?J.refreshAccessToken:async(W)=>{return h6({refreshToken:W,options:{clientId:J.clientId,clientSecret:J.clientSecret},tokenEndpoint:"https://auth.atlassian.com/oauth/token"})},async getUserInfo(W){if(J.getUserInfo)return J.getUserInfo(W);if(!W.accessToken)return null;try{let{data:X}=await Q6("https://api.atlassian.com/me",{headers:{Authorization:`Bearer ${W.accessToken}`}});if(!X)return null;let G=await J.mapProfileToUser?.(X);return{user:{id:X.account_id,name:X.name,email:X.email,image:X.picture,emailVerified:!1,...G},data:X}}catch(X){return w6.error("Failed to fetch user info from Figma:",X),null}},options:J}},np=(J)=>{if(!J.domain||!J.region||!J.userPoolId)throw w6.error("Domain, region and userPoolId are required for Amazon Cognito. Make sure to provide them in the options."),new Y6("DOMAIN_AND_REGION_REQUIRED");let W=J.domain.replace(/^https?:\/\//,""),X=`https://${W}/oauth2/authorize`,G=`https://${W}/oauth2/token`,Y=`https://${W}/oauth2/userinfo`;return{id:"cognito",name:"Cognito",async createAuthorizationURL({state:$,scopes:K,codeVerifier:w,redirectURI:H}){if(!J.clientId)throw w6.error("ClientId is required for Amazon Cognito. Make sure to provide them in the options."),new Y6("CLIENT_ID_AND_SECRET_REQUIRED");if(J.requireClientSecret&&!J.clientSecret)throw w6.error("Client Secret is required when requireClientSecret is true. Make sure to provide it in the options."),new Y6("CLIENT_SECRET_REQUIRED");let z=J.disableDefaultScope?[]:["openid","profile","email"];if(J.scope)z.push(...J.scope);if(K)z.push(...K);return await r6({id:"cognito",options:{...J},authorizationEndpoint:X,scopes:z,state:$,codeVerifier:w,redirectURI:H,prompt:J.prompt})},validateAuthorizationCode:async({code:$,codeVerifier:K,redirectURI:w})=>{return g6({code:$,codeVerifier:K,redirectURI:w,options:J,tokenEndpoint:G})},refreshAccessToken:J.refreshAccessToken?J.refreshAccessToken:async($)=>{return h6({refreshToken:$,options:{clientId:J.clientId,clientKey:J.clientKey,clientSecret:J.clientSecret},tokenEndpoint:G})},async verifyIdToken($,K){if(J.disableIdTokenSignIn)return!1;if(J.verifyIdToken)return J.verifyIdToken($,K);try{let{kid:w,alg:H}=rH($);if(!w||!H)return!1;let z=await ip(w,J.region,J.userPoolId),N=`https://cognito-idp.${J.region}.amazonaws.com/${J.userPoolId}`,{payload:U}=await R8($,z,{algorithms:[H],issuer:N,audience:J.clientId,maxTokenAge:"1h"});if(K&&U.nonce!==K)return!1;return!0}catch(w){return w6.error("Failed to verify ID token:",w),!1}},async getUserInfo($){if(J.getUserInfo)return J.getUserInfo($);if($.idToken)try{let K=DJ($.idToken);if(!K)return null;let w=K.name||K.given_name||K.username||K.email,H={...K,name:w},z=await J.mapProfileToUser?.(H);return{user:{id:K.sub,name:H.name,email:K.email,image:K.picture,emailVerified:K.email_verified,...z},data:H}}catch(K){w6.error("Failed to decode ID token:",K)}if($.accessToken)try{let{data:K}=await Q6(Y,{headers:{Authorization:`Bearer ${$.accessToken}`}});if(K){let w=await J.mapProfileToUser?.(K);return{user:{id:K.sub,name:K.name||K.given_name||K.username,email:K.email,image:K.picture,emailVerified:K.email_verified,...w},data:K}}}catch(K){w6.error("Failed to fetch user info from Cognito:",K)}return null},options:J}},ip=async(J,W,X)=>{let G=`https://cognito-idp.${W}.amazonaws.com/${X}/.well-known/jwks.json`;try{let{data:Y}=await Q6(G);if(!Y?.keys)throw new V("BAD_REQUEST",{message:"Keys not found"});let $=Y.keys.find((K)=>K.kid===J);if(!$)throw Error(`JWK with kid ${J} not found`);return await VJ($,$.alg)}catch(Y){throw w6.error("Failed to fetch Cognito public key:",Y),Y}},ap=(J)=>{return{id:"discord",name:"Discord",createAuthorizationURL({state:W,scopes:X,redirectURI:G}){let Y=J.disableDefaultScope?[]:["identify","email"];if(X)Y.push(...X);if(J.scope)Y.push(...J.scope);let $=Y.includes("bot")&&J.permissions!==void 0?`&permissions=${J.permissions}`:"";return new URL(`https://discord.com/api/oauth2/authorize?scope=${Y.join("+")}&response_type=code&client_id=${J.clientId}&redirect_uri=${encodeURIComponent(J.redirectURI||G)}&state=${W}&prompt=${J.prompt||"none"}${$}`)},validateAuthorizationCode:async({code:W,redirectURI:X})=>{return g6({code:W,redirectURI:X,options:J,tokenEndpoint:"https://discord.com/api/oauth2/token"})},refreshAccessToken:J.refreshAccessToken?J.refreshAccessToken:async(W)=>{return h6({refreshToken:W,options:{clientId:J.clientId,clientKey:J.clientKey,clientSecret:J.clientSecret},tokenEndpoint:"https://discord.com/api/oauth2/token"})},async getUserInfo(W){if(J.getUserInfo)return J.getUserInfo(W);let{data:X,error:G}=await Q6("https://discord.com/api/users/@me",{headers:{authorization:`Bearer ${W.accessToken}`}});if(G)return null;if(X.avatar===null)X.image_url=`https://cdn.discordapp.com/embed/avatars/${X.discriminator==="0"?Number(BigInt(X.id)>>BigInt(22))%6:parseInt(X.discriminator)%5}.png`;else{let $=X.avatar.startsWith("a_")?"gif":"png";X.image_url=`https://cdn.discordapp.com/avatars/${X.id}/${X.avatar}.${$}`}let Y=await J.mapProfileToUser?.(X);return{user:{id:X.id,name:X.global_name||X.username||"",email:X.email,emailVerified:X.verified,image:X.image_url,...Y},data:X}},options:J}},tp=(J)=>{return{id:"dropbox",name:"Dropbox",createAuthorizationURL:async({state:X,scopes:G,codeVerifier:Y,redirectURI:$})=>{let K=J.disableDefaultScope?[]:["account_info.read"];if(J.scope)K.push(...J.scope);if(G)K.push(...G);let w={};if(J.accessType)w.token_access_type=J.accessType;return await r6({id:"dropbox",options:J,authorizationEndpoint:"https://www.dropbox.com/oauth2/authorize",scopes:K,state:X,redirectURI:$,codeVerifier:Y,additionalParams:w})},validateAuthorizationCode:async({code:X,codeVerifier:G,redirectURI:Y})=>{return await g6({code:X,codeVerifier:G,redirectURI:Y,options:J,tokenEndpoint:"https://api.dropboxapi.com/oauth2/token"})},refreshAccessToken:J.refreshAccessToken?J.refreshAccessToken:async(X)=>{return h6({refreshToken:X,options:{clientId:J.clientId,clientKey:J.clientKey,clientSecret:J.clientSecret},tokenEndpoint:"https://api.dropbox.com/oauth2/token"})},async getUserInfo(X){if(J.getUserInfo)return J.getUserInfo(X);let{data:G,error:Y}=await Q6("https://api.dropboxapi.com/2/users/get_current_account",{method:"POST",headers:{Authorization:`Bearer ${X.accessToken}`}});if(Y)return null;let $=await J.mapProfileToUser?.(G);return{user:{id:G.account_id,name:G.name?.display_name,email:G.email,emailVerified:G.email_verified||!1,image:G.profile_photo_url,...$},data:G}},options:J}},op=(J)=>{return{id:"facebook",name:"Facebook",async createAuthorizationURL({state:W,scopes:X,redirectURI:G,loginHint:Y}){let $=J.disableDefaultScope?[]:["email","public_profile"];if(J.scope)$.push(...J.scope);if(X)$.push(...X);return await r6({id:"facebook",options:J,authorizationEndpoint:"https://www.facebook.com/v21.0/dialog/oauth",scopes:$,state:W,redirectURI:G,loginHint:Y,additionalParams:J.configId?{config_id:J.configId}:{}})},validateAuthorizationCode:async({code:W,redirectURI:X})=>{return g6({code:W,redirectURI:X,options:J,tokenEndpoint:"https://graph.facebook.com/oauth/access_token"})},async verifyIdToken(W,X){if(J.disableIdTokenSignIn)return!1;if(J.verifyIdToken)return J.verifyIdToken(W,X);if(W.split(".").length===3)try{let{payload:G}=await R8(W,XM(new URL("https://limited.facebook.com/.well-known/oauth/openid/jwks/")),{algorithms:["RS256"],audience:J.clientId,issuer:"https://www.facebook.com"});if(X&&G.nonce!==X)return!1;return!!G}catch(G){return!1}return!0},refreshAccessToken:J.refreshAccessToken?J.refreshAccessToken:async(W)=>{return h6({refreshToken:W,options:{clientId:J.clientId,clientKey:J.clientKey,clientSecret:J.clientSecret},tokenEndpoint:"https://graph.facebook.com/v18.0/oauth/access_token"})},async getUserInfo(W){if(J.getUserInfo)return J.getUserInfo(W);if(W.idToken&&W.idToken.split(".").length===3){let $=DJ(W.idToken),K={id:$.sub,name:$.name,email:$.email,picture:{data:{url:$.picture,height:100,width:100,is_silhouette:!1}}},w=await J.mapProfileToUser?.({...K,email_verified:!1});return{user:{...K,emailVerified:!1,...w},data:$}}let{data:X,error:G}=await Q6("https://graph.facebook.com/me?fields="+["id","name","email","picture",...J?.fields||[]].join(","),{auth:{type:"Bearer",token:W.accessToken}});if(G)return null;let Y=await J.mapProfileToUser?.(X);return{user:{id:X.id,name:X.name,email:X.email,image:X.picture.data.url,emailVerified:X.email_verified,...Y},data:X}},options:J}},sp=(J)=>{return{id:"figma",name:"Figma",async createAuthorizationURL({state:W,scopes:X,codeVerifier:G,redirectURI:Y}){if(!J.clientId||!J.clientSecret)throw w6.error("Client Id and Client Secret are required for Figma. Make sure to provide them in the options."),new Y6("CLIENT_ID_AND_SECRET_REQUIRED");if(!G)throw new Y6("codeVerifier is required for Figma");let $=J.disableDefaultScope?[]:["file_read"];if(J.scope)$.push(...J.scope);if(X)$.push(...X);return await r6({id:"figma",options:J,authorizationEndpoint:"https://www.figma.com/oauth",scopes:$,state:W,codeVerifier:G,redirectURI:Y})},validateAuthorizationCode:async({code:W,codeVerifier:X,redirectURI:G})=>{return g6({code:W,codeVerifier:X,redirectURI:G,options:J,tokenEndpoint:"https://www.figma.com/api/oauth/token"})},refreshAccessToken:J.refreshAccessToken?J.refreshAccessToken:async(W)=>{return h6({refreshToken:W,options:{clientId:J.clientId,clientKey:J.clientKey,clientSecret:J.clientSecret},tokenEndpoint:"https://www.figma.com/api/oauth/token"})},async getUserInfo(W){if(J.getUserInfo)return J.getUserInfo(W);try{let{data:X}=await Q6("https://api.figma.com/v1/me",{headers:{Authorization:`Bearer ${W.accessToken}`}});if(!X)return w6.error("Failed to fetch user from Figma"),null;let G=await J.mapProfileToUser?.(X);return{user:{id:X.id,name:X.handle,email:X.email,image:X.img_url,emailVerified:!!X.email,...G},data:X}}catch(X){return w6.error("Failed to fetch user info from Figma:",X),null}},options:J}},ep=(J)=>{return{id:"github",name:"GitHub",createAuthorizationURL({state:X,scopes:G,loginHint:Y,redirectURI:$}){let K=J.disableDefaultScope?[]:["read:user","user:email"];if(J.scope)K.push(...J.scope);if(G)K.push(...G);return r6({id:"github",options:J,authorizationEndpoint:"https://github.com/login/oauth/authorize",scopes:K,state:X,redirectURI:$,loginHint:Y,prompt:J.prompt})},validateAuthorizationCode:async({code:X,redirectURI:G})=>{return g6({code:X,redirectURI:G,options:J,tokenEndpoint:"https://github.com/login/oauth/access_token"})},refreshAccessToken:J.refreshAccessToken?J.refreshAccessToken:async(X)=>{return h6({refreshToken:X,options:{clientId:J.clientId,clientKey:J.clientKey,clientSecret:J.clientSecret},tokenEndpoint:"https://github.com/login/oauth/access_token"})},async getUserInfo(X){if(J.getUserInfo)return J.getUserInfo(X);let{data:G,error:Y}=await Q6("https://api.github.com/user",{headers:{"User-Agent":"better-auth",authorization:`Bearer ${X.accessToken}`}});if(Y)return null;let{data:$}=await Q6("https://api.github.com/user/emails",{headers:{Authorization:`Bearer ${X.accessToken}`,"User-Agent":"better-auth"}});if(!G.email&&$)G.email=($.find((H)=>H.primary)??$[0])?.email;let K=$?.find((H)=>H.email===G.email)?.verified??!1,w=await J.mapProfileToUser?.(G);return{user:{id:G.id,name:G.name||G.login,email:G.email,image:G.avatar_url,emailVerified:K,...w},data:G}},options:J}},JO=(J="")=>{return J.split("://").map((W)=>W.replace(/\/{2,}/g,"/")).join("://")},Jd=(J)=>{let W=J||"https://gitlab.com";return{authorizationEndpoint:JO(`${W}/oauth/authorize`),tokenEndpoint:JO(`${W}/oauth/token`),userinfoEndpoint:JO(`${W}/api/v4/user`)}},Wd=(J)=>{let{authorizationEndpoint:W,tokenEndpoint:X,userinfoEndpoint:G}=Jd(J.issuer),Y="gitlab";return{id:"gitlab",name:"Gitlab",createAuthorizationURL:async({state:$,scopes:K,codeVerifier:w,loginHint:H,redirectURI:z})=>{let N=J.disableDefaultScope?[]:["read_user"];if(J.scope)N.push(...J.scope);if(K)N.push(...K);return await r6({id:"gitlab",options:J,authorizationEndpoint:W,scopes:N,state:$,redirectURI:z,codeVerifier:w,loginHint:H})},validateAuthorizationCode:async({code:$,redirectURI:K,codeVerifier:w})=>{return g6({code:$,redirectURI:K,options:J,codeVerifier:w,tokenEndpoint:X})},refreshAccessToken:J.refreshAccessToken?J.refreshAccessToken:async($)=>{return h6({refreshToken:$,options:{clientId:J.clientId,clientKey:J.clientKey,clientSecret:J.clientSecret},tokenEndpoint:X})},async getUserInfo($){if(J.getUserInfo)return J.getUserInfo($);let{data:K,error:w}=await Q6(G,{headers:{authorization:`Bearer ${$.accessToken}`}});if(w||K.state!=="active"||K.locked)return null;let H=await J.mapProfileToUser?.(K);return{user:{id:K.id,name:K.name??K.username,email:K.email,image:K.avatar_url,emailVerified:K.email_verified??!1,...H},data:K}},options:J}},Xd=(J)=>{return{id:"google",name:"Google",async createAuthorizationURL({state:W,scopes:X,codeVerifier:G,redirectURI:Y,loginHint:$,display:K}){if(!J.clientId||!J.clientSecret)throw w6.error("Client Id and Client Secret is required for Google. Make sure to provide them in the options."),new Y6("CLIENT_ID_AND_SECRET_REQUIRED");if(!G)throw new Y6("codeVerifier is required for Google");let w=J.disableDefaultScope?[]:["email","profile","openid"];if(J.scope)w.push(...J.scope);if(X)w.push(...X);return await r6({id:"google",options:J,authorizationEndpoint:"https://accounts.google.com/o/oauth2/auth",scopes:w,state:W,codeVerifier:G,redirectURI:Y,prompt:J.prompt,accessType:J.accessType,display:K||J.display,loginHint:$,hd:J.hd,additionalParams:{include_granted_scopes:"true"}})},validateAuthorizationCode:async({code:W,codeVerifier:X,redirectURI:G})=>{return g6({code:W,codeVerifier:X,redirectURI:G,options:J,tokenEndpoint:"https://oauth2.googleapis.com/token"})},refreshAccessToken:J.refreshAccessToken?J.refreshAccessToken:async(W)=>{return h6({refreshToken:W,options:{clientId:J.clientId,clientKey:J.clientKey,clientSecret:J.clientSecret},tokenEndpoint:"https://www.googleapis.com/oauth2/v4/token"})},async verifyIdToken(W,X){if(J.disableIdTokenSignIn)return!1;if(J.verifyIdToken)return J.verifyIdToken(W,X);let{data:G}=await Q6(`https://www.googleapis.com/oauth2/v3/tokeninfo?id_token=${W}`);if(!G)return!1;return G.aud===J.clientId&&(G.iss==="https://accounts.google.com"||G.iss==="accounts.google.com")},async getUserInfo(W){if(J.getUserInfo)return J.getUserInfo(W);if(!W.idToken)return null;let X=DJ(W.idToken),G=await J.mapProfileToUser?.(X);return{user:{id:X.sub,name:X.name,email:X.email,image:X.picture,emailVerified:X.email_verified,...G},data:X}},options:J}},Yd=(J)=>{return{id:"huggingface",name:"Hugging Face",createAuthorizationURL({state:W,scopes:X,codeVerifier:G,redirectURI:Y}){let $=J.disableDefaultScope?[]:["openid","profile","email"];if(J.scope)$.push(...J.scope);if(X)$.push(...X);return r6({id:"huggingface",options:J,authorizationEndpoint:"https://huggingface.co/oauth/authorize",scopes:$,state:W,codeVerifier:G,redirectURI:Y})},validateAuthorizationCode:async({code:W,codeVerifier:X,redirectURI:G})=>{return g6({code:W,codeVerifier:X,redirectURI:G,options:J,tokenEndpoint:"https://huggingface.co/oauth/token"})},refreshAccessToken:J.refreshAccessToken?J.refreshAccessToken:async(W)=>{return h6({refreshToken:W,options:{clientId:J.clientId,clientKey:J.clientKey,clientSecret:J.clientSecret},tokenEndpoint:"https://huggingface.co/oauth/token"})},async getUserInfo(W){if(J.getUserInfo)return J.getUserInfo(W);let{data:X,error:G}=await Q6("https://huggingface.co/oauth/userinfo",{method:"GET",headers:{Authorization:`Bearer ${W.accessToken}`}});if(G)return null;let Y=await J.mapProfileToUser?.(X);return{user:{id:X.sub,name:X.name||X.preferred_username,email:X.email,image:X.picture,emailVerified:X.email_verified??!1,...Y},data:X}},options:J}},Gd=(J)=>{return{id:"kakao",name:"Kakao",createAuthorizationURL({state:W,scopes:X,redirectURI:G}){let Y=J.disableDefaultScope?[]:["account_email","profile_image","profile_nickname"];if(J.scope)Y.push(...J.scope);if(X)Y.push(...X);return r6({id:"kakao",options:J,authorizationEndpoint:"https://kauth.kakao.com/oauth/authorize",scopes:Y,state:W,redirectURI:G})},validateAuthorizationCode:async({code:W,redirectURI:X})=>{return g6({code:W,redirectURI:X,options:J,tokenEndpoint:"https://kauth.kakao.com/oauth/token"})},refreshAccessToken:J.refreshAccessToken?J.refreshAccessToken:async(W)=>{return h6({refreshToken:W,options:{clientId:J.clientId,clientKey:J.clientKey,clientSecret:J.clientSecret},tokenEndpoint:"https://kauth.kakao.com/oauth/token"})},async getUserInfo(W){if(J.getUserInfo)return J.getUserInfo(W);let{data:X,error:G}=await Q6("https://kapi.kakao.com/v2/user/me",{headers:{Authorization:`Bearer ${W.accessToken}`}});if(G||!X)return null;let Y=await J.mapProfileToUser?.(X),$=X.kakao_account||{},K=$.profile||{};return{user:{id:String(X.id),name:K.nickname||$.name||void 0,email:$.email,image:K.profile_image_url||K.thumbnail_image_url,emailVerified:!!$.is_email_valid&&!!$.is_email_verified,...Y},data:X}},options:J}},$d=(J)=>{return{id:"kick",name:"Kick",createAuthorizationURL({state:W,scopes:X,redirectURI:G,codeVerifier:Y}){let $=J.disableDefaultScope?[]:["user:read"];if(J.scope)$.push(...J.scope);if(X)$.push(...X);return r6({id:"kick",redirectURI:G,options:J,authorizationEndpoint:"https://id.kick.com/oauth/authorize",scopes:$,codeVerifier:Y,state:W})},async validateAuthorizationCode({code:W,redirectURI:X,codeVerifier:G}){return g6({code:W,redirectURI:X,options:J,tokenEndpoint:"https://id.kick.com/oauth/token",codeVerifier:G})},async getUserInfo(W){if(J.getUserInfo)return J.getUserInfo(W);let{data:X,error:G}=await Q6("https://api.kick.com/public/v1/users",{method:"GET",headers:{Authorization:`Bearer ${W.accessToken}`}});if(G)return null;let Y=X.data[0],$=await J.mapProfileToUser?.(Y);return{user:{id:Y.user_id,name:Y.name,email:Y.email,image:Y.profile_picture,emailVerified:!1,...$},data:Y}},options:J}},Kd=(J)=>{return{id:"line",name:"LINE",async createAuthorizationURL({state:$,scopes:K,codeVerifier:w,redirectURI:H,loginHint:z}){let N=J.disableDefaultScope?[]:["openid","profile","email"];if(J.scope)N.push(...J.scope);if(K)N.push(...K);return await r6({id:"line",options:J,authorizationEndpoint:"https://access.line.me/oauth2/v2.1/authorize",scopes:N,state:$,codeVerifier:w,redirectURI:H,loginHint:z})},validateAuthorizationCode:async({code:$,codeVerifier:K,redirectURI:w})=>{return g6({code:$,codeVerifier:K,redirectURI:w,options:J,tokenEndpoint:"https://api.line.me/oauth2/v2.1/token"})},refreshAccessToken:J.refreshAccessToken?J.refreshAccessToken:async($)=>{return h6({refreshToken:$,options:{clientId:J.clientId,clientSecret:J.clientSecret},tokenEndpoint:"https://api.line.me/oauth2/v2.1/token"})},async verifyIdToken($,K){if(J.disableIdTokenSignIn)return!1;if(J.verifyIdToken)return J.verifyIdToken($,K);let w=new URLSearchParams;if(w.set("id_token",$),w.set("client_id",J.clientId),K)w.set("nonce",K);let{data:H,error:z}=await Q6("https://api.line.me/oauth2/v2.1/verify",{method:"POST",headers:{"content-type":"application/x-www-form-urlencoded"},body:w});if(z||!H)return!1;if(H.aud!==J.clientId)return!1;if(K&&H.nonce&&H.nonce!==K)return!1;return!0},async getUserInfo($){if(J.getUserInfo)return J.getUserInfo($);let K=null;if($.idToken)try{K=DJ($.idToken)}catch{}if(!K){let{data:U}=await Q6("https://api.line.me/oauth2/v2.1/userinfo",{headers:{authorization:`Bearer ${$.accessToken}`}});K=U||null}if(!K)return null;let w=await J.mapProfileToUser?.(K),H=K.sub||K.userId,z=K.name||K.displayName,N=K.picture||K.pictureUrl||void 0;return{user:{id:H,name:z,email:K.email,image:N,emailVerified:!1,...w},data:K}},options:J}},wd=(J)=>{return{id:"linear",name:"Linear",createAuthorizationURL({state:X,scopes:G,loginHint:Y,redirectURI:$}){let K=J.disableDefaultScope?[]:["read"];if(J.scope)K.push(...J.scope);if(G)K.push(...G);return r6({id:"linear",options:J,authorizationEndpoint:"https://linear.app/oauth/authorize",scopes:K,state:X,redirectURI:$,loginHint:Y})},validateAuthorizationCode:async({code:X,redirectURI:G})=>{return g6({code:X,redirectURI:G,options:J,tokenEndpoint:"https://api.linear.app/oauth/token"})},refreshAccessToken:J.refreshAccessToken?J.refreshAccessToken:async(X)=>{return h6({refreshToken:X,options:{clientId:J.clientId,clientKey:J.clientKey,clientSecret:J.clientSecret},tokenEndpoint:"https://api.linear.app/oauth/token"})},async getUserInfo(X){if(J.getUserInfo)return J.getUserInfo(X);let{data:G,error:Y}=await Q6("https://api.linear.app/graphql",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${X.accessToken}`},body:JSON.stringify({query:`
							query {
								viewer {
									id
									name
									email
									avatarUrl
									active
									createdAt
									updatedAt
								}
							}
						`})});if(Y||!G?.data?.viewer)return null;let $=G.data.viewer,K=await J.mapProfileToUser?.($);return{user:{id:G.data.viewer.id,name:G.data.viewer.name,email:G.data.viewer.email,image:G.data.viewer.avatarUrl,emailVerified:!1,...K},data:$}},options:J}},Hd=(J)=>{return{id:"linkedin",name:"Linkedin",createAuthorizationURL:async({state:G,scopes:Y,redirectURI:$,loginHint:K})=>{let w=J.disableDefaultScope?[]:["profile","email","openid"];if(J.scope)w.push(...J.scope);if(Y)w.push(...Y);return await r6({id:"linkedin",options:J,authorizationEndpoint:"https://www.linkedin.com/oauth/v2/authorization",scopes:w,state:G,loginHint:K,redirectURI:$})},validateAuthorizationCode:async({code:G,redirectURI:Y})=>{return await g6({code:G,redirectURI:Y,options:J,tokenEndpoint:"https://www.linkedin.com/oauth/v2/accessToken"})},refreshAccessToken:J.refreshAccessToken?J.refreshAccessToken:async(G)=>{return h6({refreshToken:G,options:{clientId:J.clientId,clientKey:J.clientKey,clientSecret:J.clientSecret},tokenEndpoint:"https://www.linkedin.com/oauth/v2/accessToken"})},async getUserInfo(G){if(J.getUserInfo)return J.getUserInfo(G);let{data:Y,error:$}=await Q6("https://api.linkedin.com/v2/userinfo",{method:"GET",headers:{Authorization:`Bearer ${G.accessToken}`}});if($)return null;let K=await J.mapProfileToUser?.(Y);return{user:{id:Y.sub,name:Y.name,email:Y.email,emailVerified:Y.email_verified||!1,image:Y.picture,...K},data:Y}},options:J}},zd=(J)=>{let W=J.tenantId||"common",X=J.authority||"https://login.microsoftonline.com",G=`${X}/${W}/oauth2/v2.0/authorize`,Y=`${X}/${W}/oauth2/v2.0/token`;return{id:"microsoft",name:"Microsoft EntraID",createAuthorizationURL($){let K=J.disableDefaultScope?[]:["openid","profile","email","User.Read","offline_access"];if(J.scope)K.push(...J.scope);if($.scopes)K.push(...$.scopes);return r6({id:"microsoft",options:J,authorizationEndpoint:G,state:$.state,codeVerifier:$.codeVerifier,scopes:K,redirectURI:$.redirectURI,prompt:J.prompt,loginHint:$.loginHint})},validateAuthorizationCode({code:$,codeVerifier:K,redirectURI:w}){return g6({code:$,codeVerifier:K,redirectURI:w,options:J,tokenEndpoint:Y})},async getUserInfo($){if(J.getUserInfo)return J.getUserInfo($);if(!$.idToken)return null;let K=DJ($.idToken),w=J.profilePhotoSize||48;await Q6(`https://graph.microsoft.com/v1.0/me/photos/${w}x${w}/$value`,{headers:{Authorization:`Bearer ${$.accessToken}`},async onResponse(N){if(J.disableProfilePhoto||!N.response.ok)return;try{let U=await N.response.clone().arrayBuffer();K.picture=`data:image/jpeg;base64, ${f4.encode(U)}`}catch(U){w6.error(U&&typeof U==="object"&&"name"in U?U.name:"",U)}}});let H=await J.mapProfileToUser?.(K),z=K.email_verified!==void 0?K.email_verified:K.email&&(K.verified_primary_email?.includes(K.email)||K.verified_secondary_email?.includes(K.email))?!0:!1;return{user:{id:K.sub,name:K.name,email:K.email,image:K.picture,emailVerified:z,...H},data:K}},refreshAccessToken:J.refreshAccessToken?J.refreshAccessToken:async($)=>{let K=J.disableDefaultScope?[]:["openid","profile","email","User.Read","offline_access"];if(J.scope)K.push(...J.scope);return h6({refreshToken:$,options:{clientId:J.clientId,clientSecret:J.clientSecret},extraParams:{scope:K.join(" ")},tokenEndpoint:Y})},options:J}},Nd=(J)=>{return{id:"naver",name:"Naver",createAuthorizationURL({state:W,scopes:X,redirectURI:G}){let Y=J.disableDefaultScope?[]:["profile","email"];if(J.scope)Y.push(...J.scope);if(X)Y.push(...X);return r6({id:"naver",options:J,authorizationEndpoint:"https://nid.naver.com/oauth2.0/authorize",scopes:Y,state:W,redirectURI:G})},validateAuthorizationCode:async({code:W,redirectURI:X})=>{return g6({code:W,redirectURI:X,options:J,tokenEndpoint:"https://nid.naver.com/oauth2.0/token"})},refreshAccessToken:J.refreshAccessToken?J.refreshAccessToken:async(W)=>{return h6({refreshToken:W,options:{clientId:J.clientId,clientKey:J.clientKey,clientSecret:J.clientSecret},tokenEndpoint:"https://nid.naver.com/oauth2.0/token"})},async getUserInfo(W){if(J.getUserInfo)return J.getUserInfo(W);let{data:X,error:G}=await Q6("https://openapi.naver.com/v1/nid/me",{headers:{Authorization:`Bearer ${W.accessToken}`}});if(G||!X||X.resultcode!=="00")return null;let Y=await J.mapProfileToUser?.(X),$=X.response||{};return{user:{id:$.id,name:$.name||$.nickname,email:$.email,image:$.profile_image,emailVerified:!1,...Y},data:X}},options:J}},Fd=(J)=>{return{id:"notion",name:"Notion",createAuthorizationURL({state:X,scopes:G,loginHint:Y,redirectURI:$}){let K=J.disableDefaultScope?[]:[];if(J.scope)K.push(...J.scope);if(G)K.push(...G);return r6({id:"notion",options:J,authorizationEndpoint:"https://api.notion.com/v1/oauth/authorize",scopes:K,state:X,redirectURI:$,loginHint:Y,additionalParams:{owner:"user"}})},validateAuthorizationCode:async({code:X,redirectURI:G})=>{return g6({code:X,redirectURI:G,options:J,tokenEndpoint:"https://api.notion.com/v1/oauth/token",authentication:"basic"})},refreshAccessToken:J.refreshAccessToken?J.refreshAccessToken:async(X)=>{return h6({refreshToken:X,options:{clientId:J.clientId,clientKey:J.clientKey,clientSecret:J.clientSecret},tokenEndpoint:"https://api.notion.com/v1/oauth/token"})},async getUserInfo(X){if(J.getUserInfo)return J.getUserInfo(X);let{data:G,error:Y}=await Q6("https://api.notion.com/v1/users/me",{headers:{Authorization:`Bearer ${X.accessToken}`,"Notion-Version":"2022-06-28"}});if(Y||!G)return null;let $=G.bot?.owner?.user;if(!$)return null;let K=await J.mapProfileToUser?.($);return{user:{id:$.id,name:$.name||"Notion User",email:$.person?.email||null,image:$.avatar_url,emailVerified:!!$.person?.email,...K},data:$}},options:J}},Ud=(J)=>{let W=J.issuer||"https://idp.paybin.io",X=`${W}/oauth2/authorize`,G=`${W}/oauth2/token`;return{id:"paybin",name:"Paybin",async createAuthorizationURL({state:Y,scopes:$,codeVerifier:K,redirectURI:w,loginHint:H}){if(!J.clientId||!J.clientSecret)throw w6.error("Client Id and Client Secret is required for Paybin. Make sure to provide them in the options."),new Y6("CLIENT_ID_AND_SECRET_REQUIRED");if(!K)throw new Y6("codeVerifier is required for Paybin");let z=J.disableDefaultScope?[]:["openid","email","profile"];if(J.scope)z.push(...J.scope);if($)z.push(...$);return await r6({id:"paybin",options:J,authorizationEndpoint:X,scopes:z,state:Y,codeVerifier:K,redirectURI:w,prompt:J.prompt,loginHint:H})},validateAuthorizationCode:async({code:Y,codeVerifier:$,redirectURI:K})=>{return g6({code:Y,codeVerifier:$,redirectURI:K,options:J,tokenEndpoint:G})},refreshAccessToken:J.refreshAccessToken?J.refreshAccessToken:async(Y)=>{return h6({refreshToken:Y,options:{clientId:J.clientId,clientKey:J.clientKey,clientSecret:J.clientSecret},tokenEndpoint:G})},async getUserInfo(Y){if(J.getUserInfo)return J.getUserInfo(Y);if(!Y.idToken)return null;let $=DJ(Y.idToken),K=await J.mapProfileToUser?.($);return{user:{id:$.sub,name:$.name||$.preferred_username||($.email?$.email.split("@")[0]:"User")||"User",email:$.email,image:$.picture,emailVerified:$.email_verified||!1,...K},data:$}},options:J}},Qd=(J)=>{let W=(J.environment||"sandbox")==="sandbox",X=W?"https://www.sandbox.paypal.com/signin/authorize":"https://www.paypal.com/signin/authorize",G=W?"https://api-m.sandbox.paypal.com/v1/oauth2/token":"https://api-m.paypal.com/v1/oauth2/token",Y=W?"https://api-m.sandbox.paypal.com/v1/identity/oauth2/userinfo":"https://api-m.paypal.com/v1/identity/oauth2/userinfo";return{id:"paypal",name:"PayPal",async createAuthorizationURL({state:$,codeVerifier:K,redirectURI:w}){if(!J.clientId||!J.clientSecret)throw w6.error("Client Id and Client Secret is required for PayPal. Make sure to provide them in the options."),new Y6("CLIENT_ID_AND_SECRET_REQUIRED");return await r6({id:"paypal",options:J,authorizationEndpoint:X,scopes:[],state:$,codeVerifier:K,redirectURI:w,prompt:J.prompt})},validateAuthorizationCode:async({code:$,redirectURI:K})=>{let w=f4.encode(`${J.clientId}:${J.clientSecret}`);try{let H=await Q6(G,{method:"POST",headers:{Authorization:`Basic ${w}`,Accept:"application/json","Accept-Language":"en_US","Content-Type":"application/x-www-form-urlencoded"},body:new URLSearchParams({grant_type:"authorization_code",code:$,redirect_uri:K}).toString()});if(!H.data)throw new Y6("FAILED_TO_GET_ACCESS_TOKEN");let z=H.data;return{accessToken:z.access_token,refreshToken:z.refresh_token,accessTokenExpiresAt:z.expires_in?new Date(Date.now()+z.expires_in*1000):void 0,idToken:z.id_token}}catch(H){throw w6.error("PayPal token exchange failed:",H),new Y6("FAILED_TO_GET_ACCESS_TOKEN")}},refreshAccessToken:J.refreshAccessToken?J.refreshAccessToken:async($)=>{let K=f4.encode(`${J.clientId}:${J.clientSecret}`);try{let w=await Q6(G,{method:"POST",headers:{Authorization:`Basic ${K}`,Accept:"application/json","Accept-Language":"en_US","Content-Type":"application/x-www-form-urlencoded"},body:new URLSearchParams({grant_type:"refresh_token",refresh_token:$}).toString()});if(!w.data)throw new Y6("FAILED_TO_REFRESH_ACCESS_TOKEN");let H=w.data;return{accessToken:H.access_token,refreshToken:H.refresh_token,accessTokenExpiresAt:H.expires_in?new Date(Date.now()+H.expires_in*1000):void 0}}catch(w){throw w6.error("PayPal token refresh failed:",w),new Y6("FAILED_TO_REFRESH_ACCESS_TOKEN")}},async verifyIdToken($,K){if(J.disableIdTokenSignIn)return!1;if(J.verifyIdToken)return J.verifyIdToken($,K);try{return!!DJ($).sub}catch(w){return w6.error("Failed to verify PayPal ID token:",w),!1}},async getUserInfo($){if(J.getUserInfo)return J.getUserInfo($);if(!$.accessToken)return w6.error("Access token is required to fetch PayPal user info"),null;try{let K=await Q6(`${Y}?schema=paypalv1.1`,{headers:{Authorization:`Bearer ${$.accessToken}`,Accept:"application/json"}});if(!K.data)return w6.error("Failed to fetch user info from PayPal"),null;let w=K.data,H=await J.mapProfileToUser?.(w);return{user:{id:w.user_id,name:w.name,email:w.email,image:w.picture,emailVerified:w.email_verified,...H},data:w}}catch(K){return w6.error("Failed to fetch user info from PayPal:",K),null}},options:J}},Zd=(J)=>{return{id:"polar",name:"Polar",createAuthorizationURL({state:W,scopes:X,codeVerifier:G,redirectURI:Y}){let $=J.disableDefaultScope?[]:["openid","profile","email"];if(J.scope)$.push(...J.scope);if(X)$.push(...X);return r6({id:"polar",options:J,authorizationEndpoint:"https://polar.sh/oauth2/authorize",scopes:$,state:W,codeVerifier:G,redirectURI:Y,prompt:J.prompt})},validateAuthorizationCode:async({code:W,codeVerifier:X,redirectURI:G})=>{return g6({code:W,codeVerifier:X,redirectURI:G,options:J,tokenEndpoint:"https://api.polar.sh/v1/oauth2/token"})},refreshAccessToken:J.refreshAccessToken?J.refreshAccessToken:async(W)=>{return h6({refreshToken:W,options:{clientId:J.clientId,clientKey:J.clientKey,clientSecret:J.clientSecret},tokenEndpoint:"https://api.polar.sh/v1/oauth2/token"})},async getUserInfo(W){if(J.getUserInfo)return J.getUserInfo(W);let{data:X,error:G}=await Q6("https://api.polar.sh/v1/oauth2/userinfo",{headers:{Authorization:`Bearer ${W.accessToken}`}});if(G)return null;let Y=await J.mapProfileToUser?.(X);return{user:{id:X.id,name:X.public_name||X.username,email:X.email,image:X.avatar_url,emailVerified:X.email_verified??!1,...Y},data:X}},options:J}},Ld=(J)=>{return{id:"reddit",name:"Reddit",createAuthorizationURL({state:W,scopes:X,redirectURI:G}){let Y=J.disableDefaultScope?[]:["identity"];if(J.scope)Y.push(...J.scope);if(X)Y.push(...X);return r6({id:"reddit",options:J,authorizationEndpoint:"https://www.reddit.com/api/v1/authorize",scopes:Y,state:W,redirectURI:G,duration:J.duration})},validateAuthorizationCode:async({code:W,redirectURI:X})=>{let G=new URLSearchParams({grant_type:"authorization_code",code:W,redirect_uri:J.redirectURI||X}),{data:Y,error:$}=await Q6("https://www.reddit.com/api/v1/access_token",{method:"POST",headers:{"content-type":"application/x-www-form-urlencoded",accept:"text/plain","user-agent":"better-auth",Authorization:`Basic ${f4.encode(`${J.clientId}:${J.clientSecret}`)}`},body:G.toString()});if($)throw $;return Z3(Y)},refreshAccessToken:J.refreshAccessToken?J.refreshAccessToken:async(W)=>{return h6({refreshToken:W,options:{clientId:J.clientId,clientKey:J.clientKey,clientSecret:J.clientSecret},authentication:"basic",tokenEndpoint:"https://www.reddit.com/api/v1/access_token"})},async getUserInfo(W){if(J.getUserInfo)return J.getUserInfo(W);let{data:X,error:G}=await Q6("https://oauth.reddit.com/api/v1/me",{headers:{Authorization:`Bearer ${W.accessToken}`,"User-Agent":"better-auth"}});if(G)return null;let Y=await J.mapProfileToUser?.(X);return{user:{id:X.id,name:X.name,email:X.oauth_client_id,emailVerified:X.has_verified_email,image:X.icon_img?.split("?")[0],...Y},data:X}},options:J}},Vd=(J)=>{return{id:"roblox",name:"Roblox",createAuthorizationURL({state:W,scopes:X,redirectURI:G}){let Y=J.disableDefaultScope?[]:["openid","profile"];if(J.scope)Y.push(...J.scope);if(X)Y.push(...X);return new URL(`https://apis.roblox.com/oauth/v1/authorize?scope=${Y.join("+")}&response_type=code&client_id=${J.clientId}&redirect_uri=${encodeURIComponent(J.redirectURI||G)}&state=${W}&prompt=${J.prompt||"select_account consent"}`)},validateAuthorizationCode:async({code:W,redirectURI:X})=>{return g6({code:W,redirectURI:J.redirectURI||X,options:J,tokenEndpoint:"https://apis.roblox.com/oauth/v1/token",authentication:"post"})},refreshAccessToken:J.refreshAccessToken?J.refreshAccessToken:async(W)=>{return h6({refreshToken:W,options:{clientId:J.clientId,clientKey:J.clientKey,clientSecret:J.clientSecret},tokenEndpoint:"https://apis.roblox.com/oauth/v1/token"})},async getUserInfo(W){if(J.getUserInfo)return J.getUserInfo(W);let{data:X,error:G}=await Q6("https://apis.roblox.com/oauth/v1/userinfo",{headers:{authorization:`Bearer ${W.accessToken}`}});if(G)return null;let Y=await J.mapProfileToUser?.(X);return{user:{id:X.sub,name:X.nickname||X.preferred_username||"",image:X.picture,email:X.preferred_username||null,emailVerified:!1,...Y},data:{...X}}},options:J}},Dd=(J)=>{let W=(J.environment??"production")==="sandbox",X=J.loginUrl?`https://${J.loginUrl}/services/oauth2/authorize`:W?"https://test.salesforce.com/services/oauth2/authorize":"https://login.salesforce.com/services/oauth2/authorize",G=J.loginUrl?`https://${J.loginUrl}/services/oauth2/token`:W?"https://test.salesforce.com/services/oauth2/token":"https://login.salesforce.com/services/oauth2/token",Y=J.loginUrl?`https://${J.loginUrl}/services/oauth2/userinfo`:W?"https://test.salesforce.com/services/oauth2/userinfo":"https://login.salesforce.com/services/oauth2/userinfo";return{id:"salesforce",name:"Salesforce",async createAuthorizationURL({state:$,scopes:K,codeVerifier:w,redirectURI:H}){if(!J.clientId||!J.clientSecret)throw w6.error("Client Id and Client Secret are required for Salesforce. Make sure to provide them in the options."),new Y6("CLIENT_ID_AND_SECRET_REQUIRED");if(!w)throw new Y6("codeVerifier is required for Salesforce");let z=J.disableDefaultScope?[]:["openid","email","profile"];if(J.scope)z.push(...J.scope);if(K)z.push(...K);return r6({id:"salesforce",options:J,authorizationEndpoint:X,scopes:z,state:$,codeVerifier:w,redirectURI:J.redirectURI||H})},validateAuthorizationCode:async({code:$,codeVerifier:K,redirectURI:w})=>{return g6({code:$,codeVerifier:K,redirectURI:J.redirectURI||w,options:J,tokenEndpoint:G})},refreshAccessToken:J.refreshAccessToken?J.refreshAccessToken:async($)=>{return h6({refreshToken:$,options:{clientId:J.clientId,clientSecret:J.clientSecret},tokenEndpoint:G})},async getUserInfo($){if(J.getUserInfo)return J.getUserInfo($);try{let{data:K}=await Q6(Y,{headers:{Authorization:`Bearer ${$.accessToken}`}});if(!K)return w6.error("Failed to fetch user info from Salesforce"),null;let w=await J.mapProfileToUser?.(K);return{user:{id:K.user_id,name:K.name,email:K.email,image:K.photos?.picture||K.photos?.thumbnail,emailVerified:K.email_verified??!1,...w},data:K}}catch(K){return w6.error("Failed to fetch user info from Salesforce:",K),null}},options:J}},Md=(J)=>{return{id:"slack",name:"Slack",createAuthorizationURL({state:W,scopes:X,redirectURI:G}){let Y=J.disableDefaultScope?[]:["openid","profile","email"];if(X)Y.push(...X);if(J.scope)Y.push(...J.scope);let $=new URL("https://slack.com/openid/connect/authorize");return $.searchParams.set("scope",Y.join(" ")),$.searchParams.set("response_type","code"),$.searchParams.set("client_id",J.clientId),$.searchParams.set("redirect_uri",J.redirectURI||G),$.searchParams.set("state",W),$},validateAuthorizationCode:async({code:W,redirectURI:X})=>{return g6({code:W,redirectURI:X,options:J,tokenEndpoint:"https://slack.com/api/openid.connect.token"})},refreshAccessToken:J.refreshAccessToken?J.refreshAccessToken:async(W)=>{return h6({refreshToken:W,options:{clientId:J.clientId,clientKey:J.clientKey,clientSecret:J.clientSecret},tokenEndpoint:"https://slack.com/api/openid.connect.token"})},async getUserInfo(W){if(J.getUserInfo)return J.getUserInfo(W);let{data:X,error:G}=await Q6("https://slack.com/api/openid.connect.userInfo",{headers:{authorization:`Bearer ${W.accessToken}`}});if(G)return null;let Y=await J.mapProfileToUser?.(X);return{user:{id:X["https://slack.com/user_id"],name:X.name||"",email:X.email,emailVerified:X.email_verified,image:X.picture||X["https://slack.com/user_image_512"],...Y},data:X}},options:J}},Od=(J)=>{return{id:"spotify",name:"Spotify",createAuthorizationURL({state:W,scopes:X,codeVerifier:G,redirectURI:Y}){let $=J.disableDefaultScope?[]:["user-read-email"];if(J.scope)$.push(...J.scope);if(X)$.push(...X);return r6({id:"spotify",options:J,authorizationEndpoint:"https://accounts.spotify.com/authorize",scopes:$,state:W,codeVerifier:G,redirectURI:Y})},validateAuthorizationCode:async({code:W,codeVerifier:X,redirectURI:G})=>{return g6({code:W,codeVerifier:X,redirectURI:G,options:J,tokenEndpoint:"https://accounts.spotify.com/api/token"})},refreshAccessToken:J.refreshAccessToken?J.refreshAccessToken:async(W)=>{return h6({refreshToken:W,options:{clientId:J.clientId,clientKey:J.clientKey,clientSecret:J.clientSecret},tokenEndpoint:"https://accounts.spotify.com/api/token"})},async getUserInfo(W){if(J.getUserInfo)return J.getUserInfo(W);let{data:X,error:G}=await Q6("https://api.spotify.com/v1/me",{method:"GET",headers:{Authorization:`Bearer ${W.accessToken}`}});if(G)return null;let Y=await J.mapProfileToUser?.(X);return{user:{id:X.id,name:X.display_name,email:X.email,image:X.images[0]?.url,emailVerified:!1,...Y},data:X}},options:J}},Pd=(J)=>{return{id:"tiktok",name:"TikTok",createAuthorizationURL({state:W,scopes:X,redirectURI:G}){let Y=J.disableDefaultScope?[]:["user.info.profile"];if(J.scope)Y.push(...J.scope);if(X)Y.push(...X);return new URL(`https://www.tiktok.com/v2/auth/authorize?scope=${Y.join(",")}&response_type=code&client_key=${J.clientKey}&redirect_uri=${encodeURIComponent(J.redirectURI||G)}&state=${W}`)},validateAuthorizationCode:async({code:W,redirectURI:X})=>{return g6({code:W,redirectURI:J.redirectURI||X,options:{clientKey:J.clientKey,clientSecret:J.clientSecret},tokenEndpoint:"https://open.tiktokapis.com/v2/oauth/token/"})},refreshAccessToken:J.refreshAccessToken?J.refreshAccessToken:async(W)=>{return h6({refreshToken:W,options:{clientSecret:J.clientSecret},tokenEndpoint:"https://open.tiktokapis.com/v2/oauth/token/",authentication:"post",extraParams:{client_key:J.clientKey}})},async getUserInfo(W){if(J.getUserInfo)return J.getUserInfo(W);let{data:X,error:G}=await Q6(`https://open.tiktokapis.com/v2/user/info/?fields=${["open_id","avatar_large_url","display_name","username"].join(",")}`,{headers:{authorization:`Bearer ${W.accessToken}`}});if(G)return null;return{user:{email:X.data.user.email||X.data.user.username,id:X.data.user.open_id,name:X.data.user.display_name||X.data.user.username,image:X.data.user.avatar_large_url,emailVerified:X.data.user.email?!0:!1},data:X}},options:J}},vd=(J)=>{return{id:"twitch",name:"Twitch",createAuthorizationURL({state:W,scopes:X,redirectURI:G}){let Y=J.disableDefaultScope?[]:["user:read:email","openid"];if(J.scope)Y.push(...J.scope);if(X)Y.push(...X);return r6({id:"twitch",redirectURI:G,options:J,authorizationEndpoint:"https://id.twitch.tv/oauth2/authorize",scopes:Y,state:W,claims:J.claims||["email","email_verified","preferred_username","picture"]})},validateAuthorizationCode:async({code:W,redirectURI:X})=>{return g6({code:W,redirectURI:X,options:J,tokenEndpoint:"https://id.twitch.tv/oauth2/token"})},refreshAccessToken:J.refreshAccessToken?J.refreshAccessToken:async(W)=>{return h6({refreshToken:W,options:{clientId:J.clientId,clientKey:J.clientKey,clientSecret:J.clientSecret},tokenEndpoint:"https://id.twitch.tv/oauth2/token"})},async getUserInfo(W){if(J.getUserInfo)return J.getUserInfo(W);let X=W.idToken;if(!X)return w6.error("No idToken found in token"),null;let G=DJ(X),Y=await J.mapProfileToUser?.(G);return{user:{id:G.sub,name:G.preferred_username,email:G.email,image:G.picture,emailVerified:G.email_verified,...Y},data:G}},options:J}},jd=(J)=>{return{id:"twitter",name:"Twitter",createAuthorizationURL(W){let X=J.disableDefaultScope?[]:["users.read","tweet.read","offline.access","users.email"];if(J.scope)X.push(...J.scope);if(W.scopes)X.push(...W.scopes);return r6({id:"twitter",options:J,authorizationEndpoint:"https://x.com/i/oauth2/authorize",scopes:X,state:W.state,codeVerifier:W.codeVerifier,redirectURI:W.redirectURI})},validateAuthorizationCode:async({code:W,codeVerifier:X,redirectURI:G})=>{return g6({code:W,codeVerifier:X,authentication:"basic",redirectURI:G,options:J,tokenEndpoint:"https://api.x.com/2/oauth2/token"})},refreshAccessToken:J.refreshAccessToken?J.refreshAccessToken:async(W)=>{return h6({refreshToken:W,options:{clientId:J.clientId,clientKey:J.clientKey,clientSecret:J.clientSecret},authentication:"basic",tokenEndpoint:"https://api.x.com/2/oauth2/token"})},async getUserInfo(W){if(J.getUserInfo)return J.getUserInfo(W);let{data:X,error:G}=await Q6("https://api.x.com/2/users/me?user.fields=profile_image_url",{method:"GET",headers:{Authorization:`Bearer ${W.accessToken}`}});if(G)return null;let{data:Y,error:$}=await Q6("https://api.x.com/2/users/me?user.fields=confirmed_email",{method:"GET",headers:{Authorization:`Bearer ${W.accessToken}`}}),K=!1;if(!$&&Y?.data?.confirmed_email)X.data.email=Y.data.confirmed_email,K=!0;let w=await J.mapProfileToUser?.(X);return{user:{id:X.data.id,name:X.data.name,email:X.data.email||X.data.username||null,image:X.data.profile_image_url,emailVerified:K,...w},data:X}},options:J}},Sd=(J)=>{return{id:"vk",name:"VK",async createAuthorizationURL({state:W,scopes:X,codeVerifier:G,redirectURI:Y}){let $=J.disableDefaultScope?[]:["email","phone"];if(J.scope)$.push(...J.scope);if(X)$.push(...X);return r6({id:"vk",options:J,authorizationEndpoint:"https://id.vk.com/authorize",scopes:$,state:W,redirectURI:Y,codeVerifier:G})},validateAuthorizationCode:async({code:W,codeVerifier:X,redirectURI:G,deviceId:Y})=>{return g6({code:W,codeVerifier:X,redirectURI:J.redirectURI||G,options:J,deviceId:Y,tokenEndpoint:"https://id.vk.com/oauth2/auth"})},refreshAccessToken:J.refreshAccessToken?J.refreshAccessToken:async(W)=>{return h6({refreshToken:W,options:{clientId:J.clientId,clientKey:J.clientKey,clientSecret:J.clientSecret},tokenEndpoint:"https://id.vk.com/oauth2/auth"})},async getUserInfo(W){if(J.getUserInfo)return J.getUserInfo(W);if(!W.accessToken)return null;let X=new URLSearchParams({access_token:W.accessToken,client_id:J.clientId}).toString(),{data:G,error:Y}=await Q6("https://id.vk.com/oauth2/user_info",{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:X});if(Y)return null;let $=await J.mapProfileToUser?.(G);if(!G.user.email&&!$?.email)return null;return{user:{id:G.user.user_id,first_name:G.user.first_name,last_name:G.user.last_name,email:G.user.email,image:G.user.avatar,emailVerified:!!G.user.email,birthday:G.user.birthday,sex:G.user.sex,name:`${G.user.first_name} ${G.user.last_name}`,...$},data:G}},options:J}},_d=(J)=>{let W={pkce:!0,...J};return{id:"zoom",name:"Zoom",createAuthorizationURL:async({state:X,redirectURI:G,codeVerifier:Y})=>{let $=new URLSearchParams({response_type:"code",redirect_uri:W.redirectURI?W.redirectURI:G,client_id:W.clientId,state:X});if(W.pkce){let w=await L3(Y);$.set("code_challenge_method","S256"),$.set("code_challenge",w)}let K=new URL("https://zoom.us/oauth/authorize");return K.search=$.toString(),K},validateAuthorizationCode:async({code:X,redirectURI:G,codeVerifier:Y})=>{return g6({code:X,redirectURI:W.redirectURI||G,codeVerifier:Y,options:W,tokenEndpoint:"https://zoom.us/oauth/token",authentication:"post"})},refreshAccessToken:W.refreshAccessToken?W.refreshAccessToken:async(X)=>h6({refreshToken:X,options:{clientId:W.clientId,clientKey:W.clientKey,clientSecret:W.clientSecret},tokenEndpoint:"https://zoom.us/oauth/token"}),async getUserInfo(X){if(W.getUserInfo)return W.getUserInfo(X);let{data:G,error:Y}=await Q6("https://api.zoom.us/v2/users/me",{headers:{authorization:`Bearer ${X.accessToken}`}});if(Y)return null;let $=await W.mapProfileToUser?.(G);return{user:{id:G.id,name:G.display_name,image:G.pic_url,email:G.email,emailVerified:Boolean(G.verified),...$},data:{...G}}}}},WO={apple:pp,atlassian:rp,cognito:np,discord:ap,facebook:op,figma:sp,github:ep,microsoft:zd,google:Xd,huggingface:Yd,slack:Md,spotify:Od,twitch:vd,twitter:jd,dropbox:tp,kick:$d,linear:wd,linkedin:Hd,gitlab:Wd,tiktok:Pd,reddit:Ld,roblox:Vd,salesforce:Dd,vk:Sd,zoom:_d,notion:Fd,kakao:Gd,naver:Nd,line:Kd,paybin:Ud,paypal:Qd,polar:Zd},Td=Object.keys(WO),XO=pM(Td).or(p4());function YO(J){if(J===null||typeof J!=="object")return!1;let W=Object.getPrototypeOf(J);if(W!==null&&W!==Object.prototype&&Object.getPrototypeOf(W)!==null)return!1;if(Symbol.iterator in J)return!1;if(Symbol.toStringTag in J)return Object.prototype.toString.call(J)==="[object Module]";return!0}function GO(J,W,X=".",G){if(!YO(W))return GO(J,{},X,G);let Y=Object.assign({},W);for(let $ in J){if($==="__proto__"||$==="constructor")continue;let K=J[$];if(K===null||K===void 0)continue;if(G&&G(Y,$,K,X))continue;if(Array.isArray(K)&&Array.isArray(Y[$]))Y[$]=[...K,...Y[$]];else if(YO(K)&&YO(Y[$]))Y[$]=GO(K,Y[$],(X?`${X}.`:"")+$.toString(),G);else Y[$]=K}return Y}function Z5(J){return(...W)=>W.reduce((X,G)=>GO(X,G,"",J),{})}var V3=Z5(),j_6=Z5((J,W,X)=>{if(J[W]!==void 0&&typeof X==="function")return J[W]=X(J[W]),!0}),S_6=Z5((J,W,X)=>{if(Array.isArray(J[W])&&typeof X==="function")return J[W]=X(J[W]),!0});x6();function $O(J){if(J==="-"||J==="^"||J==="$"||J==="+"||J==="."||J==="("||J===")"||J==="|"||J==="["||J==="]"||J==="{"||J==="}"||J==="*"||J==="?"||J==="\\")return`\\${J}`;else return J}function qd(J){let W="";for(let X=0;X<J.length;X++)W+=$O(J[X]);return W}function TR(J,W=!0){if(Array.isArray(J))return`(?:${J.map((z)=>`^${TR(z,W)}$`).join("|")})`;let X="",G="",Y=".";if(W===!0)X="/",G="[/\\\\]",Y="[^/\\\\]";else if(W)if(X=W,G=qd(X),G.length>1)G=`(?:${G})`,Y=`((?!${G}).)`;else Y=`[^${G}]`;let $=W?`${G}+?`:"",K=W?`${G}*?`:"",w=W?J.split(X):[J],H="";for(let z=0;z<w.length;z++){let N=w[z],U=w[z+1],F="";if(!N&&z>0)continue;if(W)if(z===w.length-1)F=K;else if(U!=="**")F=$;else F="";if(W&&N==="**"){if(F)H+=z===0?"":F,H+=`(?:${Y}*?${F})*?`;continue}for(let Z=0;Z<N.length;Z++){let L=N[Z];if(L==="\\"){if(Z<N.length-1)H+=$O(N[Z+1]),Z++}else if(L==="?")H+=Y;else if(L==="*")H+=`${Y}*?`;else H+=$O(L)}H+=F}return H}function Bd(J,W){if(typeof W!=="string")throw TypeError(`Sample must be a string, but ${typeof W} given`);return J.test(W)}function L5(J,W){if(typeof J!=="string"&&!Array.isArray(J))throw TypeError(`The first argument must be a single pattern string or an array of patterns, but ${typeof J} given`);if(typeof W==="string"||typeof W==="boolean")W={separator:W};if(arguments.length===2&&!(typeof W>"u"||typeof W==="object"&&W!==null&&!Array.isArray(W)))throw TypeError(`The second argument must be an options object or a string/boolean separator, but ${typeof W} given`);if(W=W||{},W.separator==="\\")throw Error("\\ is not a valid separator because it is used for escaping. Try setting the separator to `true` instead");let X=TR(J,W.separator),G=new RegExp(`^${X}$`,W.flags),Y=Bd.bind(null,G);return Y.options=W,Y.pattern=J,Y.regexp=G,Y}var Ad=u6(async(J)=>{if(J.request?.method==="GET"||J.request?.method==="OPTIONS"||J.request?.method==="HEAD"||!J.request)return;let W=J.request?.headers,X=J.request,{body:G,query:Y,context:$}=J,K=W?.get("origin")||W?.get("referer")||"",w=G?.callbackURL||Y?.callbackURL,H=G?.redirectTo,z=G?.errorCallbackURL,N=G?.newUserCallbackURL,U=Array.isArray($.options.trustedOrigins)?$.trustedOrigins:[...$.trustedOrigins,...await $.options.trustedOrigins?.(X)||[]],F=W?.has("cookie"),Z=(D,O)=>{if(D.startsWith("/"))return!1;if(O.includes("*")){if(O.includes("://"))return L5(O)(oJ(D)||D);let _=rM(D);if(!_)return!1;return L5(O)(_)}let P=dM(D);return P==="http:"||P==="https:"||!P?O===oJ(D):D.startsWith(O)},L=(D,O)=>{if(!D)return;if(!U.some((P)=>Z(D,P)||D?.startsWith("/")&&O!=="origin"&&/^\/(?!\/|\\|%2f|%5c)[\w\-.\+/@]*(?:\?[\w\-.\+/=&%@]*)?$/.test(D)))throw J.context.logger.error(`Invalid ${O}: ${D}`),J.context.logger.info(`If it's a valid URL, please add ${D} to trustedOrigins in your auth config
`,`Current list of trustedOrigins: ${U}`),new V("FORBIDDEN",{message:`Invalid ${O}`})};if(F&&!J.context.skipCSRFCheck&&!J.context.skipOriginCheck){if(!K||K==="null")throw new V("FORBIDDEN",{message:"Missing or null Origin"});L(K,"origin")}w&&L(w,"callbackURL"),H&&L(H,"redirectURL"),z&&L(z,"errorCallbackURL"),N&&L(N,"newUserCallbackURL")}),V5=(J)=>u6(async(W)=>{if(!W.request)return;let{context:X}=W,G=J(W),Y=Array.isArray(X.options.trustedOrigins)?X.trustedOrigins:[...X.trustedOrigins,...await X.options.trustedOrigins?.(W.request)||[]],$=(H,z)=>{if(H.startsWith("/"))return!1;if(z.includes("*")){if(z.includes("://"))return L5(z)(oJ(H)||H);let U=rM(H);if(!U)return!1;return L5(z)(U)}let N=dM(H);return N==="http:"||N==="https:"||!N?z===oJ(H):H.startsWith(z)},K=(H,z)=>{if(!H)return;if(!Y.some((N)=>$(H,N)||H?.startsWith("/")&&z!=="origin"&&/^\/(?!\/|\\|%2f|%5c)[\w\-.\+/@]*(?:\?[\w\-.\+/=&%@]*)?$/.test(H)))throw W.context.logger.error(`Invalid ${z}: ${H}`),W.context.logger.info(`If it's a valid URL, please add ${H} to trustedOrigins in your auth config
`,`Current list of trustedOrigins: ${Y}`),new V("FORBIDDEN",{message:`Invalid ${z}`})},w=Array.isArray(G)?G:[G];for(let H of w)K(H,"callbackURL")});function Ed(J,W,X){let G=Date.now(),Y=W*1000;return G-X.lastRequest<Y&&X.count>=J}function Id(J){return new Response(JSON.stringify({message:"Too many requests. Please try again later."}),{status:429,statusText:"Too Many Requests",headers:{"X-Retry-After":J.toString()}})}function Rd(J,W){let X=Date.now(),G=W*1000;return Math.ceil((J+G-X)/1000)}function Cd(J){let X=J.adapter;return{get:async(G)=>{let Y=(await X.findMany({model:"rateLimit",where:[{field:"key",value:G}]}))[0];if(typeof Y?.lastRequest==="bigint")Y.lastRequest=Number(Y.lastRequest);return Y},set:async(G,Y,$)=>{try{if($)await X.updateMany({model:"rateLimit",where:[{field:"key",value:G}],update:{count:Y.count,lastRequest:Y.lastRequest}});else await X.create({model:"rateLimit",data:{key:G,count:Y.count,lastRequest:Y.lastRequest}})}catch(K){J.logger.error("Error setting rate limit",K)}}}}var vR=new Map;function bd(J,W){if(J.options.rateLimit?.customStorage)return J.options.rateLimit.customStorage;let X=J.rateLimit.storage;if(X==="secondary-storage")return{get:async(G)=>{let Y=await J.options.secondaryStorage?.get(G);return Y?l6(Y):void 0},set:async(G,Y,$)=>{let K=W?.window??J.options.rateLimit?.window??10;await J.options.secondaryStorage?.set?.(G,JSON.stringify(Y),K)}};else if(X==="memory")return{async get(G){return vR.get(G)},async set(G,Y,$){vR.set(G,Y)}};return Cd(J)}async function jR(J,W){if(!W.rateLimit.enabled)return;let X=new URL(J.url).pathname.replace(W.options.basePath||"/api/auth",""),G=W.rateLimit.window,Y=W.rateLimit.max,$=U1(J,W.options);if(!$)return;let K=$+X,w=kd().find((U)=>U.pathMatcher(X));if(w)G=w.window,Y=w.max;for(let U of W.options.plugins||[])if(U.rateLimit){let F=U.rateLimit.find((Z)=>Z.pathMatcher(X));if(F){G=F.window,Y=F.max;break}}if(W.rateLimit.customRules){let U=Object.keys(W.rateLimit.customRules).find((F)=>{if(F.includes("*"))return L5(F)(X);return F===X});if(U){let F=W.rateLimit.customRules[U],Z=typeof F==="function"?await F(J):F;if(Z)G=Z.window,Y=Z.max;if(Z===!1)return}}let H=bd(W,{window:G}),z=await H.get(K),N=Date.now();if(!z)await H.set(K,{key:K,count:1,lastRequest:N});else{let U=N-z.lastRequest;if(Ed(Y,G,z))return Id(Rd(z.lastRequest,G));else if(U>G*1000)await H.set(K,{...z,count:1,lastRequest:N},!0);else await H.set(K,{...z,count:z.count+1,lastRequest:N},!0)}}function kd(){return[{pathMatcher(J){return J.startsWith("/sign-in")||J.startsWith("/sign-up")||J.startsWith("/change-password")||J.startsWith("/change-email")},window:10,max:3}]}function KO(J,W){if(!J)return J;if(W.options.account?.encryptOAuthTokens)return QJ({key:W.secret,data:J});return J}function b0(J,W){if(W.options.account?.encryptOAuthTokens&&J)return UJ({key:W.secret,data:J});return J}var hd=y("/list-accounts",{method:"GET",use:[u4],metadata:{openapi:{operationId:"listUserAccounts",description:"List all accounts linked to the user",responses:{"200":{description:"Success",content:{"application/json":{schema:{type:"array",items:{type:"object",properties:{id:{type:"string"},providerId:{type:"string"},createdAt:{type:"string",format:"date-time"},updatedAt:{type:"string",format:"date-time"},accountId:{type:"string"},userId:{type:"string"},scopes:{type:"array",items:{type:"string"}}},required:["id","providerId","createdAt","updatedAt","accountId","userId","scopes"]}}}}}}}}},async(J)=>{let W=J.context.session,X=await J.context.internalAdapter.findAccounts(W.user.id);return J.json(X.map((G)=>({id:G.id,providerId:G.providerId,createdAt:G.createdAt,updatedAt:G.updatedAt,accountId:G.accountId,userId:G.userId,scopes:G.scope?.split(",")||[]})))}),gd=y("/link-social",{method:"POST",requireHeaders:!0,body:c({callbackURL:j().meta({description:"The URL to redirect to after the user has signed in"}).optional(),provider:XO,idToken:c({token:j(),nonce:j().optional(),accessToken:j().optional(),refreshToken:j().optional(),scopes:P6(j()).optional()}).optional(),requestSignUp:G4().optional(),scopes:P6(j()).meta({description:"Additional scopes to request from the provider"}).optional(),errorCallbackURL:j().meta({description:"The URL to redirect to if there is an error during the link process"}).optional(),disableRedirect:G4().meta({description:"Disable automatic redirection to the provider. Useful for handling the redirection yourself"}).optional(),additionalData:T6(j(),R6()).optional()}),use:[u4],metadata:{openapi:{description:"Link a social account to the user",operationId:"linkSocialAccount",responses:{"200":{description:"Success",content:{"application/json":{schema:{type:"object",properties:{url:{type:"string",description:"The authorization URL to redirect the user to"},redirect:{type:"boolean",description:"Indicates if the user should be redirected to the authorization URL"},status:{type:"boolean"}},required:["redirect"]}}}}}}}},async(J)=>{let W=J.context.session,X=J.context.socialProviders.find(($)=>$.id===J.body.provider);if(!X)throw J.context.logger.error("Provider not found. Make sure to add the provider in your auth config",{provider:J.body.provider}),new V("NOT_FOUND",{message:s.PROVIDER_NOT_FOUND});if(J.body.idToken){if(!X.verifyIdToken)throw J.context.logger.error("Provider does not support id token verification",{provider:J.body.provider}),new V("NOT_FOUND",{message:s.ID_TOKEN_NOT_SUPPORTED});let{token:$,nonce:K}=J.body.idToken;if(!await X.verifyIdToken($,K))throw J.context.logger.error("Invalid id token",{provider:J.body.provider}),new V("UNAUTHORIZED",{message:s.INVALID_TOKEN});let w=await X.getUserInfo({idToken:$,accessToken:J.body.idToken.accessToken,refreshToken:J.body.idToken.refreshToken});if(!w||!w?.user)throw J.context.logger.error("Failed to get user info",{provider:J.body.provider}),new V("UNAUTHORIZED",{message:s.FAILED_TO_GET_USER_INFO});let H=String(w.user.id);if(!w.user.email)throw J.context.logger.error("User email not found",{provider:J.body.provider}),new V("UNAUTHORIZED",{message:s.USER_EMAIL_NOT_FOUND});if((await J.context.internalAdapter.findAccounts(W.user.id)).find((z)=>z.providerId===X.id&&z.accountId===H))return J.json({url:"",status:!0,redirect:!1});if(!J.context.options.account?.accountLinking?.trustedProviders?.includes(X.id)&&!w.user.emailVerified||J.context.options.account?.accountLinking?.enabled===!1)throw new V("UNAUTHORIZED",{message:"Account not linked - linking not allowed"});if(w.user.email!==W.user.email&&J.context.options.account?.accountLinking?.allowDifferentEmails!==!0)throw new V("UNAUTHORIZED",{message:"Account not linked - different emails not allowed"});try{await J.context.internalAdapter.createAccount({userId:W.user.id,providerId:X.id,accountId:H,accessToken:J.body.idToken.accessToken,idToken:$,refreshToken:J.body.idToken.refreshToken,scope:J.body.idToken.scopes?.join(",")})}catch(z){throw new V("EXPECTATION_FAILED",{message:"Account not linked - unable to create account"})}if(J.context.options.account?.accountLinking?.updateUserInfoOnLink===!0)try{await J.context.internalAdapter.updateUser(W.user.id,{name:w.user?.name,image:w.user?.image})}catch(z){console.warn("Could not update user - "+z.toString())}return J.json({url:"",status:!0,redirect:!1})}let G=await R$(J,{userId:W.user.id,email:W.user.email},J.body.additionalData),Y=await X.createAuthorizationURL({state:G.state,codeVerifier:G.codeVerifier,redirectURI:`${J.context.baseURL}/callback/${X.id}`,scopes:J.body.scopes});return J.json({url:Y.toString(),redirect:!J.body.disableRedirect})}),md=y("/unlink-account",{method:"POST",body:c({providerId:j(),accountId:j().optional()}),use:[wR],metadata:{openapi:{description:"Unlink an account",responses:{"200":{description:"Success",content:{"application/json":{schema:{type:"object",properties:{status:{type:"boolean"}}}}}}}}}},async(J)=>{let{providerId:W,accountId:X}=J.body,G=await J.context.internalAdapter.findAccounts(J.context.session.user.id);if(G.length===1&&!J.context.options.account?.accountLinking?.allowUnlinkingAll)throw new V("BAD_REQUEST",{message:s.FAILED_TO_UNLINK_LAST_ACCOUNT});let Y=G.find(($)=>X?$.accountId===X&&$.providerId===W:$.providerId===W);if(!Y)throw new V("BAD_REQUEST",{message:s.ACCOUNT_NOT_FOUND});return await J.context.internalAdapter.deleteAccount(Y.id),J.json({status:!0})}),qR=y("/get-access-token",{method:"POST",body:c({providerId:j().meta({description:"The provider ID for the OAuth provider"}),accountId:j().meta({description:"The account ID associated with the refresh token"}).optional(),userId:j().meta({description:"The user ID associated with the account"}).optional()}),metadata:{openapi:{description:"Get a valid access token, doing a refresh if needed",responses:{200:{description:"A Valid access token",content:{"application/json":{schema:{type:"object",properties:{tokenType:{type:"string"},idToken:{type:"string"},accessToken:{type:"string"},refreshToken:{type:"string"},accessTokenExpiresAt:{type:"string",format:"date-time"},refreshTokenExpiresAt:{type:"string",format:"date-time"}}}}}},400:{description:"Invalid refresh token or provider configuration"}}}}},async(J)=>{let{providerId:W,accountId:X,userId:G}=J.body||{},Y=J.request,$=await j6(J);if(Y&&!$)throw J.error("UNAUTHORIZED");let K=$?.user?.id||G;if(!K)throw J.error("UNAUTHORIZED");if(!J.context.socialProviders.find((F)=>F.id===W))throw new V("BAD_REQUEST",{message:`Provider ${W} is not supported.`});let w=J.context.authCookies.accountData.name,H=await J.getSignedCookie(w,J.context.secret),z=H?l6(H):null,N=void 0;if(z&&W===z.providerId&&(!X||z.id===X))N=z;else N=(await J.context.internalAdapter.findAccounts(K)).find((F)=>X?F.id===X&&F.providerId===W:F.providerId===W);if(!N)throw new V("BAD_REQUEST",{message:"Account not found"});let U=J.context.socialProviders.find((F)=>F.id===W);if(!U)throw new V("BAD_REQUEST",{message:`Provider ${W} not found.`});try{let F=null,Z=N.accessTokenExpiresAt&&new Date(N.accessTokenExpiresAt).getTime()-Date.now()<5000;if(N.refreshToken&&Z&&U.refreshAccessToken){let D=await KO(N.refreshToken,J.context);F=await U.refreshAccessToken(D);let O=await J.context.internalAdapter.updateAccount(N.id,{accessToken:await b0(F.accessToken,J.context),accessTokenExpiresAt:F.accessTokenExpiresAt,refreshToken:await b0(F.refreshToken,J.context),refreshTokenExpiresAt:F.refreshTokenExpiresAt});if(J.context.options.account?.storeAccountCookie&&O)await J.setSignedCookie(w,JSON.stringify(O),J.context.secret,J.context.authCookies.accountData.options)}let L={accessToken:F?.accessToken??await KO(N.accessToken??"",J.context),accessTokenExpiresAt:F?.accessTokenExpiresAt??N.accessTokenExpiresAt??void 0,scopes:N.scope?.split(",")??[],idToken:F?.idToken??N.idToken??void 0};return J.json(L)}catch(F){throw new V("BAD_REQUEST",{message:"Failed to get a valid access token",cause:F})}}),fd=y("/refresh-token",{method:"POST",body:c({providerId:j().meta({description:"The provider ID for the OAuth provider"}),accountId:j().meta({description:"The account ID associated with the refresh token"}).optional(),userId:j().meta({description:"The user ID associated with the account"}).optional()}),metadata:{openapi:{description:"Refresh the access token using a refresh token",responses:{200:{description:"Access token refreshed successfully",content:{"application/json":{schema:{type:"object",properties:{tokenType:{type:"string"},idToken:{type:"string"},accessToken:{type:"string"},refreshToken:{type:"string"},accessTokenExpiresAt:{type:"string",format:"date-time"},refreshTokenExpiresAt:{type:"string",format:"date-time"}}}}}},400:{description:"Invalid refresh token or provider configuration"}}}}},async(J)=>{let{providerId:W,accountId:X,userId:G}=J.body,Y=J.request,$=await j6(J);if(Y&&!$)throw J.error("UNAUTHORIZED");let K=$?.user?.id||G;if(!K)throw new V("BAD_REQUEST",{message:"Either userId or session is required"});let w=J.context.socialProviders.find((Z)=>Z.id===W);if(!w)throw new V("BAD_REQUEST",{message:`Provider ${W} not found.`});if(!w.refreshAccessToken)throw new V("BAD_REQUEST",{message:`Provider ${W} does not support token refreshing.`});let H=J.context.authCookies.accountData.name,z=await J.getSignedCookie(H,J.context.secret),N=void 0,U=z?l6(z):null;if(U&&(!W||W===U?.providerId))N=U;else N=(await J.context.internalAdapter.findAccounts(K)).find((Z)=>X?Z.id===X&&Z.providerId===W:Z.providerId===W);if(!N)throw new V("BAD_REQUEST",{message:"Account not found"});let F=void 0;if(U&&W===U.providerId)F=U.refreshToken??void 0;else F=N.refreshToken??void 0;if(!F)throw new V("BAD_REQUEST",{message:"Refresh token not found"});try{let Z=await KO(F,J.context),L=await w.refreshAccessToken(Z);if(N.id){let D={...N||{},accessToken:await b0(L.accessToken,J.context),refreshToken:await b0(L.refreshToken,J.context),accessTokenExpiresAt:L.accessTokenExpiresAt,refreshTokenExpiresAt:L.refreshTokenExpiresAt,scope:L.scopes?.join(",")||N.scope,idToken:L.idToken||N.idToken};await J.context.internalAdapter.updateAccount(N.id,D)}if(U&&W===U.providerId&&J.context.options.account?.storeAccountCookie){let D={...U,accessToken:await b0(L.accessToken,J.context),refreshToken:await b0(L.refreshToken,J.context),accessTokenExpiresAt:L.accessTokenExpiresAt,refreshTokenExpiresAt:L.refreshTokenExpiresAt,scope:L.scopes?.join(",")||U.scope,idToken:L.idToken||U.idToken};await J.setSignedCookie(H,JSON.stringify(D),J.context.secret,J.context.authCookies.accountData.options)}return J.json({accessToken:L.accessToken,refreshToken:L.refreshToken,accessTokenExpiresAt:L.accessTokenExpiresAt,refreshTokenExpiresAt:L.refreshTokenExpiresAt,scope:L.scopes?.join(",")||N.scope,idToken:L.idToken||N.idToken,providerId:N.providerId,accountId:N.accountId})}catch(Z){throw new V("BAD_REQUEST",{message:"Failed to refresh access token",cause:Z})}}),yd=E0(c({accountId:j().meta({description:"The provider given account id for which to get the account info"}).optional()})),xd=y("/account-info",{method:"GET",use:[u4],metadata:{openapi:{description:"Get the account info provided by the provider",responses:{"200":{description:"Success",content:{"application/json":{schema:{type:"object",properties:{user:{type:"object",properties:{id:{type:"string"},name:{type:"string"},email:{type:"string"},image:{type:"string"},emailVerified:{type:"boolean"}},required:["id","emailVerified"]},data:{type:"object",properties:{},additionalProperties:!0}},required:["user","data"],additionalProperties:!1}}}}}}},query:yd},async(J)=>{let W=J.query?.accountId,X=void 0;if(!W){if(J.context.options.account?.storeAccountCookie){let K=J.context.authCookies.accountData.name,w=await J.getSignedCookie(K,J.context.secret);if(w){let H=l6(w);if(H)X=H}}}else{let K=await J.context.internalAdapter.findAccount(W);if(K)X=K}if(!X||X.userId!==J.context.session.user.id)throw new V("BAD_REQUEST",{message:"Account not found"});let G=J.context.socialProviders.find((K)=>K.id===X.providerId);if(!G)throw new V("INTERNAL_SERVER_ERROR",{message:`Provider account provider is ${X.providerId} but it is not configured`});let Y=await qR({...J,method:"POST",body:{accountId:X.id,providerId:X.providerId},returnHeaders:!1,returnStatus:!1});if(!Y.accessToken)throw new V("BAD_REQUEST",{message:"Access token not found"});let $=await G.getUserInfo({...Y,accessToken:Y.accessToken});return J.json($)});async function wO(J,{userInfo:W,account:X,callbackURL:G,disableSignUp:Y,overrideUserInfo:$}){let K=await J.context.internalAdapter.findOAuthUser(W.email.toLowerCase(),X.accountId,X.providerId).catch((N)=>{w6.error(`Better auth was unable to query your database.
Error: `,N);let U=J.context.options.onAPIError?.errorURL||`${J.context.baseURL}/error`;throw J.redirect(`${U}?error=internal_server_error`)}),w=K?.user,H=!w;if(K){let N=K.accounts.find((U)=>U.providerId===X.providerId&&U.accountId===X.accountId);if(!N){if(!J.context.options.account?.accountLinking?.trustedProviders?.includes(X.providerId)&&!W.emailVerified||J.context.options.account?.accountLinking?.enabled===!1){if(FG())w6.warn(`User already exist but account isn't linked to ${X.providerId}. To read more about how account linking works in Better Auth see https://www.better-auth.com/docs/concepts/users-accounts#account-linking.`);return{error:"account not linked",data:null}}try{await J.context.internalAdapter.linkAccount({providerId:X.providerId,accountId:W.id.toString(),userId:K.user.id,accessToken:await b0(X.accessToken,J.context),refreshToken:await b0(X.refreshToken,J.context),idToken:X.idToken,accessTokenExpiresAt:X.accessTokenExpiresAt,refreshTokenExpiresAt:X.refreshTokenExpiresAt,scope:X.scope})}catch(U){return w6.error("Unable to link account",U),{error:"unable to link account",data:null}}if(W.emailVerified&&!K.user.emailVerified&&W.email.toLowerCase()===K.user.email)await J.context.internalAdapter.updateUser(K.user.id,{emailVerified:!0})}else{if(J.context.options.account?.updateAccountOnSignIn!==!1){let U=Object.fromEntries(Object.entries({idToken:X.idToken,accessToken:await b0(X.accessToken,J.context),refreshToken:await b0(X.refreshToken,J.context),accessTokenExpiresAt:X.accessTokenExpiresAt,refreshTokenExpiresAt:X.refreshTokenExpiresAt,scope:X.scope}).filter(([F,Z])=>Z!==void 0));if(J.context.options.account?.storeAccountCookie){let F=J.context.authCookies.accountData;await J.setSignedCookie(F.name,JSON.stringify(U),J.context.secret,F.options)}if(Object.keys(U).length>0)await J.context.internalAdapter.updateAccount(N.id,U)}if(W.emailVerified&&!K.user.emailVerified&&W.email.toLowerCase()===K.user.email)await J.context.internalAdapter.updateUser(K.user.id,{emailVerified:!0})}if($){let{id:U,...F}=W;w=await J.context.internalAdapter.updateUser(K.user.id,{...F,email:W.email.toLowerCase(),emailVerified:W.email.toLowerCase()===K.user.email?K.user.emailVerified||W.emailVerified:W.emailVerified})}}else{if(Y)return{error:"signup disabled",data:null,isRegister:!1};try{let{id:N,...U}=W,F={accessToken:await b0(X.accessToken,J.context),refreshToken:await b0(X.refreshToken,J.context),idToken:X.idToken,accessTokenExpiresAt:X.accessTokenExpiresAt,refreshTokenExpiresAt:X.refreshTokenExpiresAt,scope:X.scope,providerId:X.providerId,accountId:W.id.toString()},{user:Z,account:L}=await J.context.internalAdapter.createOAuthUser({...U,email:W.email.toLowerCase()},F);if(w=Z,J.context.options.account?.storeAccountCookie){let D=J.context.authCookies.accountData;await J.setSignedCookie(D.name,JSON.stringify(L),J.context.secret,D.options)}if(!W.emailVerified&&w&&J.context.options.emailVerification?.sendOnSignUp){let D=await jJ(J.context.secret,w.email,void 0,J.context.options.emailVerification?.expiresIn),O=`${J.context.baseURL}/verify-email?token=${D}&callbackURL=${G}`;await J.context.options.emailVerification?.sendVerificationEmail?.({user:w,url:O,token:D},J.request)}}catch(N){if(w6.error(N),N instanceof V)return{error:N.message,data:null,isRegister:!1};return{error:"unable to create user",data:null,isRegister:!1}}}if(!w)return{error:"unable to create user",data:null,isRegister:!1};let z=await J.context.internalAdapter.createSession(w.id);if(!z)return{error:"unable to create session",data:null,isRegister:!1};return{data:{session:z,user:w},error:null,isRegister:H}}var B1=c({code:j().optional(),error:j().optional(),device_id:j().optional(),error_description:j().optional(),state:j().optional(),user:j().optional()}),ud=y("/callback/:id",{method:["GET","POST"],operationId:"handleOAuthCallback",body:B1.optional(),query:B1.optional(),metadata:{...NG,allowedMediaTypes:["application/x-www-form-urlencoded","application/json"]}},async(J)=>{let W,X=J.context.options.onAPIError?.errorURL||`${J.context.baseURL}/error`;if(J.method==="POST"){let B=J.body?B1.parse(J.body):{},A=J.query?B1.parse(J.query):{},E=B1.parse({...B,...A}),I=new URLSearchParams;for(let[u,b]of Object.entries(E))if(b!==void 0&&b!==null)I.set(u,String(b));let m=`${J.context.baseURL}/callback/${J.params.id}?${I.toString()}`;throw J.redirect(m)}try{if(J.method==="GET")W=B1.parse(J.query);else if(J.method==="POST")W=B1.parse(J.body);else throw Error("Unsupported method")}catch(B){throw J.context.logger.error("INVALID_CALLBACK_REQUEST",B),J.redirect(`${X}?error=invalid_callback_request`)}let{code:G,error:Y,state:$,error_description:K,device_id:w}=W;if(!$){J.context.logger.error("State not found",Y);let B=`${X}${X.includes("?")?"&":"?"}state=state_not_found`;throw J.redirect(B)}let{codeVerifier:H,callbackURL:z,link:N,errorURL:U,newUserURL:F,requestSignUp:Z}=await MH(J);function L(B,A){let E=U??X,I=new URLSearchParams({error:B});if(A)I.set("error_description",A);let m=`${E}${E.includes("?")?"&":"?"}${I.toString()}`;throw J.redirect(m)}if(Y)L(Y,K);if(!G)throw J.context.logger.error("Code not found"),L("no_code");let D=J.context.socialProviders.find((B)=>B.id===J.params.id);if(!D)throw J.context.logger.error("Oauth provider with id",J.params.id,"not found"),L("oauth_provider_not_found");let O;try{O=await D.validateAuthorizationCode({code:G,codeVerifier:H,deviceId:w,redirectURI:`${J.context.baseURL}/callback/${D.id}`})}catch(B){throw J.context.logger.error("",B),L("invalid_code")}let P=await D.getUserInfo({...O,user:J.body?.user?l6(J.body.user):void 0}).then((B)=>B?.user);if(!P)return J.context.logger.error("Unable to get user info"),L("unable_to_get_user_info");if(!z)throw J.context.logger.error("No callback URL found"),L("no_callback_url");if(N){if(!J.context.options.account?.accountLinking?.trustedProviders?.includes(D.id)&&!P.emailVerified||J.context.options.account?.accountLinking?.enabled===!1)return J.context.logger.error("Unable to link account - untrusted provider"),L("unable_to_link_account");if(P.email!==N.email&&J.context.options.account?.accountLinking?.allowDifferentEmails!==!0)return L("email_doesn't_match");let B=await J.context.internalAdapter.findAccount(String(P.id));if(B){if(B.userId.toString()!==N.userId.toString())return L("account_already_linked_to_different_user");let E=Object.fromEntries(Object.entries({accessToken:await b0(O.accessToken,J.context),refreshToken:await b0(O.refreshToken,J.context),idToken:O.idToken,accessTokenExpiresAt:O.accessTokenExpiresAt,refreshTokenExpiresAt:O.refreshTokenExpiresAt,scope:O.scopes?.join(",")}).filter(([I,m])=>m!==void 0));await J.context.internalAdapter.updateAccount(B.id,E)}else if(!await J.context.internalAdapter.createAccount({userId:N.userId,providerId:D.id,accountId:String(P.id),...O,accessToken:await b0(O.accessToken,J.context),refreshToken:await b0(O.refreshToken,J.context),scope:O.scopes?.join(",")}))return L("unable_to_link_account");let A;try{A=z.toString()}catch{A=z}throw J.redirect(A)}if(!P.email)return J.context.logger.error("Provider did not return email. This could be due to misconfiguration in the provider settings."),L("email_not_found");let _={providerId:D.id,accountId:String(P.id),...O,scope:O.scopes?.join(",")},T=await wO(J,{userInfo:{...P,id:String(P.id),email:P.email,name:P.name||P.email},account:_,callbackURL:z,disableSignUp:D.disableImplicitSignUp&&!Z||D.options?.disableSignUp,overrideUserInfo:D.options?.overrideUserInfoOnSignIn});if(T.error)return J.context.logger.error(T.error.split(" ").join("_")),L(T.error.split(" ").join("_"));let{session:v,user:q}=T.data;await k6(J,{session:v,user:q});let S;try{S=(T.isRegister?F||z:z).toString()}catch{S=T.isRegister?F||z:z}throw J.redirect(S)});async function jJ(J,W,X,G=3600,Y){return await nH({email:W.toLowerCase(),updateTo:X,...Y},J,G)}async function SR(J,W){if(!J.context.options.emailVerification?.sendVerificationEmail)throw J.context.logger.error("Verification email isn't enabled."),new V("BAD_REQUEST",{message:"Verification email isn't enabled"});let X=await jJ(J.context.secret,W.email,void 0,J.context.options.emailVerification?.expiresIn),G=J.body.callbackURL?encodeURIComponent(J.body.callbackURL):encodeURIComponent("/"),Y=`${J.context.baseURL}/verify-email?token=${X}&callbackURL=${G}`;await J.context.options.emailVerification.sendVerificationEmail({user:W,url:Y,token:X},J.request)}var cd=y("/send-verification-email",{method:"POST",operationId:"sendVerificationEmail",body:c({email:B8().meta({description:"The email to send the verification email to"}),callbackURL:j().meta({description:"The URL to use for email verification callback"}).optional()}),metadata:{openapi:{operationId:"sendVerificationEmail",description:"Send a verification email to the user",requestBody:{content:{"application/json":{schema:{type:"object",properties:{email:{type:"string",description:"The email to send the verification email to",example:"user@example.com"},callbackURL:{type:"string",description:"The URL to use for email verification callback",example:"https://example.com/callback",nullable:!0}},required:["email"]}}}},responses:{"200":{description:"Success",content:{"application/json":{schema:{type:"object",properties:{status:{type:"boolean",description:"Indicates if the email was sent successfully",example:!0}}}}}},"400":{description:"Bad Request",content:{"application/json":{schema:{type:"object",properties:{message:{type:"string",description:"Error message",example:"Verification email isn't enabled"}}}}}}}}}},async(J)=>{if(!J.context.options.emailVerification?.sendVerificationEmail)throw J.context.logger.error("Verification email isn't enabled."),new V("BAD_REQUEST",{message:"Verification email isn't enabled"});let{email:W}=J.body,X=await j6(J);if(!X){let G=await J.context.internalAdapter.findUserByEmail(W);if(!G)return await jJ(J.context.secret,W,void 0,J.context.options.emailVerification?.expiresIn),J.json({status:!0});return await SR(J,G.user),J.json({status:!0})}if(X?.user.emailVerified)throw new V("BAD_REQUEST",{message:"You can only send a verification email to an unverified email"});if(X?.user.email!==W)throw new V("BAD_REQUEST",{message:"You can only send a verification email to your own email"});return await SR(J,X.user),J.json({status:!0})}),ld=y("/verify-email",{method:"GET",operationId:"verifyEmail",query:c({token:j().meta({description:"The token to verify the email"}),callbackURL:j().meta({description:"The URL to redirect to after email verification"}).optional()}),use:[V5((J)=>J.query.callbackURL)],metadata:{openapi:{description:"Verify the email of the user",parameters:[{name:"token",in:"query",description:"The token to verify the email",required:!0,schema:{type:"string"}},{name:"callbackURL",in:"query",description:"The URL to redirect to after email verification",required:!1,schema:{type:"string"}}],responses:{"200":{description:"Success",content:{"application/json":{schema:{type:"object",properties:{user:{type:"object",$ref:"#/components/schemas/User"},status:{type:"boolean",description:"Indicates if the email was verified successfully"}},required:["user","status"]}}}}}}}},async(J)=>{function W(w){if(J.query.callbackURL){if(J.query.callbackURL.includes("?"))throw J.redirect(`${J.query.callbackURL}&error=${w}`);throw J.redirect(`${J.query.callbackURL}?error=${w}`)}throw new V("UNAUTHORIZED",{message:w})}let{token:X}=J.query,G;try{G=await R8(X,new TextEncoder().encode(J.context.secret),{algorithms:["HS256"]})}catch(w){if(w instanceof ZG)return W("token_expired");return W("invalid_token")}let Y=c({email:B8(),updateTo:j().optional(),requestType:j().optional()}).parse(G.payload),$=await J.context.internalAdapter.findUserByEmail(Y.email);if(!$)return W("user_not_found");if(Y.updateTo){let w=await j6(J);if(w&&w.user.email!==Y.email)return W("unauthorized");if(Y.requestType==="change-email-confirmation"){let U=await jJ(J.context.secret,Y.email,Y.updateTo,J.context.options.emailVerification?.expiresIn,{requestType:"change-email-verification"}),F=J.query.callbackURL?encodeURIComponent(J.query.callbackURL):encodeURIComponent("/"),Z=`${J.context.baseURL}/verify-email?token=${U}&callbackURL=${F}`;if(await J.context.options.emailVerification?.sendVerificationEmail?.({user:{...$.user,email:Y.updateTo},url:Z,token:U},J.request),J.query.callbackURL)throw J.redirect(J.query.callbackURL);return J.json({status:!0})}if(!w){let U=await J.context.internalAdapter.createSession($.user.id);if(!U)throw new V("INTERNAL_SERVER_ERROR",{message:"Failed to create session"});w={session:U,user:$.user}}if(Y.requestType==="change-email-verification"){let U=await J.context.internalAdapter.updateUserByEmail(Y.email,{email:Y.updateTo,emailVerified:!0});if(await k6(J,{session:w.session,user:{...w.user,email:Y.updateTo,emailVerified:!0}}),J.query.callbackURL)throw J.redirect(J.query.callbackURL);return J.json({status:!0,user:U})}let H=await J.context.internalAdapter.updateUserByEmail(Y.email,{email:Y.updateTo,emailVerified:!1}),z=await jJ(J.context.secret,Y.updateTo),N=J.query.callbackURL?encodeURIComponent(J.query.callbackURL):encodeURIComponent("/");if(await J.context.options.emailVerification?.sendVerificationEmail?.({user:H,url:`${J.context.baseURL}/verify-email?token=${z}&callbackURL=${N}`,token:z},J.request),await k6(J,{session:w.session,user:{...w.user,email:Y.updateTo,emailVerified:!1}}),J.query.callbackURL)throw J.redirect(J.query.callbackURL);return J.json({status:!0,user:{id:H.id,email:H.email,name:H.name,image:H.image,emailVerified:H.emailVerified,createdAt:H.createdAt,updatedAt:H.updatedAt}})}if($.user.emailVerified){if(J.query.callbackURL)throw J.redirect(J.query.callbackURL);return J.json({status:!0,user:null})}if(J.context.options.emailVerification?.onEmailVerification)await J.context.options.emailVerification.onEmailVerification($.user,J.request);let K=await J.context.internalAdapter.updateUserByEmail(Y.email,{emailVerified:!0});if(J.context.options.emailVerification?.afterEmailVerification)await J.context.options.emailVerification.afterEmailVerification(K,J.request);if(J.context.options.emailVerification?.autoSignInAfterVerification){let w=await j6(J);if(!w||w.user.email!==Y.email){let H=await J.context.internalAdapter.createSession($.user.id);if(!H)throw new V("INTERNAL_SERVER_ERROR",{message:"Failed to create session"});await k6(J,{session:H,user:{...$.user,emailVerified:!0}})}else await k6(J,{session:w.session,user:{...w.user,emailVerified:!0}})}if(J.query.callbackURL)throw J.redirect(J.query.callbackURL);return J.json({status:!0,user:null})});function BR(J){return J.replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#39;").replace(/&(?!amp;|lt;|gt;|quot;|#39;|#x[0-9a-fA-F]+;|#[0-9]+;)/g,"&amp;")}var pd=(J,W="Unknown",X=null)=>{let G=J.onAPIError?.customizeDefaultErrorPage;return`<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Error</title>
    <style>
      * {
        box-sizing: border-box;
      }
      body {
        font-family: ${G?.font?.defaultFamily||"-apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif"};
        background: ${G?.colors?.background||"var(--background)"};
        color: var(--foreground);
        margin: 0;
      }
      :root,
      :host {
        --spacing: 0.25rem;
        --container-md: 28rem;
        --text-sm: ${G?.size?.textSm||"0.875rem"};
        --text-sm--line-height: calc(1.25 / 0.875);
        --text-2xl: ${G?.size?.text2xl||"1.5rem"};
        --text-2xl--line-height: calc(2 / 1.5);
        --text-4xl: ${G?.size?.text4xl||"2.25rem"};
        --text-4xl--line-height: calc(2.5 / 2.25);
        --text-6xl: ${G?.size?.text6xl||"3rem"};
        --text-6xl--line-height: 1;
        --font-weight-medium: 500;
        --font-weight-semibold: 600;
        --font-weight-bold: 700;
        --default-transition-duration: 150ms;
        --default-transition-timing-function: cubic-bezier(0.4, 0, 0.2, 1);
        --radius: ${G?.size?.radiusSm||"0.625rem"};
        --default-mono-font-family: ${G?.font?.monoFamily||"var(--font-geist-mono)"};
        --primary: ${G?.colors?.primary||"black"};
        --primary-foreground: ${G?.colors?.primaryForeground||"white"};
        --background: ${G?.colors?.background||"white"};
        --foreground: ${G?.colors?.foreground||"oklch(0.271 0 0)"};
        --border: ${G?.colors?.border||"oklch(0.89 0 0)"};
        --destructive: ${G?.colors?.destructive||"oklch(0.55 0.15 25.723)"};
        --muted-foreground: ${G?.colors?.mutedForeground||"oklch(0.545 0 0)"};
        --corner-border: ${G?.colors?.cornerBorder||"#404040"};
      }

      button, .btn {
        cursor: pointer;
        background: none;
        border: none;
        color: inherit;
        font: inherit;
        transition: all var(--default-transition-duration)
          var(--default-transition-timing-function);
      }
      button:hover, .btn:hover {
        opacity: 0.8;
      }

      @media (prefers-color-scheme: dark) {
        :root,
        :host {
          --primary: ${G?.colors?.primary||"white"};
          --primary-foreground: ${G?.colors?.primaryForeground||"black"};
          --background: ${G?.colors?.background||"oklch(0.15 0 0)"};
          --foreground: ${G?.colors?.foreground||"oklch(0.98 0 0)"};
          --border: ${G?.colors?.border||"oklch(0.27 0 0)"};
          --destructive: ${G?.colors?.destructive||"oklch(0.65 0.15 25.723)"};
          --muted-foreground: ${G?.colors?.mutedForeground||"oklch(0.65 0 0)"};
          --corner-border: ${G?.colors?.cornerBorder||"#a0a0a0"};
        }
      }
      @media (max-width: 640px) {
        :root, :host {
          --text-6xl: 2.5rem;
          --text-2xl: 1.25rem;
          --text-sm: 0.8125rem;
        }
      }
      @media (max-width: 480px) {
        :root, :host {
          --text-6xl: 2rem;
          --text-2xl: 1.125rem;
        }
      }
    </style>
  </head>
  <body style="width: 100vw; min-height: 100vh; overflow-x: hidden; overflow-y: auto;">
    <div
        style="
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            gap: 1.5rem;
            position: relative;
            width: 100%;
            min-height: 100vh;
            padding: 1rem;
        "
        >
${G?.disableBackgroundGrid?"":`
      <div
        style="
          position: absolute;
          inset: 0;
          background-image: linear-gradient(to right, ${G?.colors?.gridColor||"var(--border)"} 1px, transparent 1px),
            linear-gradient(to bottom, ${G?.colors?.gridColor||"var(--border)"} 1px, transparent 1px);
          background-size: 40px 40px;
          opacity: 0.6;
          pointer-events: none;
          width: 100vw;
          height: 100vh;
        "
      ></div>
      <div
        style="
          position: absolute;
          inset: 0;
          display: flex;
          align-items: center;
          justify-content: center;
          background: ${G?.colors?.background||"var(--background)"};
          mask-image: radial-gradient(ellipse at center, transparent 20%, black);
          -webkit-mask-image: radial-gradient(ellipse at center, transparent 20%, black);
          pointer-events: none;
        "
      ></div>
`}

<div
  style="
    position: relative;
    z-index: 10;
    border: 2px solid var(--border);
    background: ${G?.colors?.cardBackground||"var(--background)"};
    padding: 1.5rem;
    max-width: 42rem;
    width: 100%;
  "
>
    ${G?.disableCornerDecorations?"":`
        <!-- Corner decorations -->
        <div
          style="
            position: absolute;
            top: -2px;
            left: -2px;
            width: 2rem;
            height: 2rem;
            border-top: 4px solid var(--corner-border);
            border-left: 4px solid var(--corner-border);
          "
        ></div>
        <div
          style="
            position: absolute;
            top: -2px;
            right: -2px;
            width: 2rem;
            height: 2rem;
            border-top: 4px solid var(--corner-border);
            border-right: 4px solid var(--corner-border);
          "
        ></div>
  
        <div
          style="
            position: absolute;
            bottom: -2px;
            left: -2px;
            width: 2rem;
            height: 2rem;
            border-bottom: 4px solid var(--corner-border);
            border-left: 4px solid var(--corner-border);
          "
        ></div>
        <div
          style="
            position: absolute;
            bottom: -2px;
            right: -2px;
            width: 2rem;
            height: 2rem;
            border-bottom: 4px solid var(--corner-border);
            border-right: 4px solid var(--corner-border);
          "
        ></div>`}

        <div style="text-align: center; margin-bottom: 1.5rem;">
          <div style="margin-bottom: 1.5rem;">
            <div
              style="
                display: inline-block;
                border: 2px solid ${G?.disableTitleBorder?"transparent":G?.colors?.titleBorder||"var(--destructive)"};
                padding: 0.375rem 1rem;
              "
            >
              <h1
                style="
                  font-size: var(--text-6xl);
                  font-weight: var(--font-weight-semibold);
                  color: ${G?.colors?.titleColor||"var(--foreground)"};
                  letter-spacing: -0.02em;
                  margin: 0;
                "
              >
                ERROR
              </h1>
            </div>
            <div
              style="
                height: 2px;
                background-color: var(--border);
                width: calc(100% + 3rem);
                margin-left: -1.5rem;
                margin-top: 1.5rem;
              "
            ></div>
          </div>

          <h2
            style="
              font-size: var(--text-2xl);
              font-weight: var(--font-weight-semibold);
              color: var(--foreground);
              margin: 0 0 1rem;
            "
          >
            Something went wrong
          </h2>

          <div
            style="
                display: inline-flex;
                align-items: center;
                gap: 0.5rem;
                border: 2px solid var(--border);
                background-color: var(--muted);
                padding: 0.375rem 0.75rem;
                margin: 0 0 1rem;
                flex-wrap: wrap;
                justify-content: center;
            "
            >
            <span
                style="
                font-size: 0.75rem;
                color: var(--muted-foreground);
                font-weight: var(--font-weight-semibold);
                "
            >
                CODE:
            </span>
            <span
                style="
                font-size: var(--text-sm);
                font-family: var(--default-mono-font-family, monospace);
                color: var(--foreground);
                word-break: break-all;
                "
            >
                ${BR(W)}
            </span>
            </div>

          <p
            style="
              color: var(--muted-foreground);
              max-width: 28rem;
              margin: 0 auto;
              font-size: var(--text-sm);
              line-height: 1.5;
              text-wrap: pretty;
            "
          >
            ${!X?`We encountered an unexpected error. Please try again or return to the home page. If you're a developer, you can find more information about the error <a href='https://better-auth.com/docs/errors/${encodeURIComponent(W)}' target='_blank' rel="noopener noreferrer" style='color: var(--foreground); text-decoration: underline;'>here</a>.`:X}
          </p>
        </div>

        <div
          style="
            display: flex;
            gap: 0.75rem;
            margin-top: 1.5rem;
            justify-content: center;
            flex-wrap: wrap;
          "
        >
          <a
            href="/"
            style="
              text-decoration: none;
            "
          >
            <div
              style="
                border: 2px solid var(--border);
                background: var(--primary);
                color: var(--primary-foreground);
                padding: 0.5rem 1rem;
                border-radius: 0;
                white-space: nowrap;
              "
              class="btn"
            >
              Go Home
            </div>
          </a>
          <a
            href="https://better-auth.com/docs/errors/${encodeURIComponent(W)}?askai=${encodeURIComponent(`What does the error code ${W} mean?`)}"
            target="_blank"
            rel="noopener noreferrer"
            style="
              text-decoration: none;
            "
          >
            <div
              style="
                border: 2px solid var(--border);
                background: transparent;
                color: var(--foreground);
                padding: 0.5rem 1rem;
                border-radius: 0;
                white-space: nowrap;
              "
              class="btn"
            >
              Ask AI
            </div>
          </a>
        </div>
      </div>
    </div>
  </body>
</html>`},dd=y("/error",{method:"GET",metadata:{...NG,openapi:{description:"Displays an error page",responses:{"200":{description:"Success",content:{"text/html":{schema:{type:"string",description:"The HTML content of the error page"}}}}}}}},async(J)=>{let W=new URL(J.request?.url||""),X=W.searchParams.get("error")||"UNKNOWN",G=W.searchParams.get("error_description")||null,Y=/^[\'A-Za-z0-9_-]+$/.test(X||"")?X:"UNKNOWN",$=G?BR(G):null,K=new URLSearchParams;if(K.set("error",Y),G)K.set("error_description",G);let w=J.context.options,H=w.onAPIError?.errorURL;if(H)return new Response(null,{status:302,headers:{Location:`${H}${H.includes("?")?"&":"?"}${K.toString()}`}});if(TW&&!w.onAPIError?.customizeDefaultErrorPage)return new Response(null,{status:302,headers:{Location:`/?${K.toString()}`}});return new Response(pd(J.context.options,Y,$),{headers:{"Content-Type":"text/html"}})}),rd=y("/ok",{method:"GET",metadata:{...NG,openapi:{description:"Check if the API is working",responses:{"200":{description:"API is working",content:{"application/json":{schema:{type:"object",properties:{ok:{type:"boolean",description:"Indicates if the API is working"}},required:["ok"]}}}}}}}},async(J)=>{return J.json({ok:!0})});function _R(J,W,X){let G=W?new URL(W,J.baseURL):new URL(`${J.baseURL}/error`);if(X)Object.entries(X).forEach(([Y,$])=>G.searchParams.set(Y,$));return G.href}function nd(J,W,X){let G=new URL(W,J.baseURL);if(X)Object.entries(X).forEach(([Y,$])=>G.searchParams.set(Y,$));return G.href}var id=y("/request-password-reset",{method:"POST",operationId:"forgetPassword",body:c({email:B8().meta({description:"The email address of the user to send a password reset email to"}),redirectTo:j().meta({description:"The URL to redirect the user to reset their password. If the token isn't valid or expired, it'll be redirected with a query parameter `?error=INVALID_TOKEN`. If the token is valid, it'll be redirected with a query parameter `?token=VALID_TOKEN"}).optional()}),metadata:{openapi:{operationId:"forgetPassword",description:"Send a password reset email to the user",responses:{"200":{description:"Success",content:{"application/json":{schema:{type:"object",properties:{status:{type:"boolean"},message:{type:"string"}}}}}}}}}},async(J)=>{if(!J.context.options.emailAndPassword?.sendResetPassword)throw J.context.logger.error("Reset password isn't enabled.Please pass an emailAndPassword.sendResetPassword function in your auth config!"),new V("BAD_REQUEST",{message:"Reset password isn't enabled"});let{email:W,redirectTo:X}=J.body,G=await J.context.internalAdapter.findUserByEmail(W,{includeAccounts:!0});if(!G)return l4(24),await J.context.internalAdapter.findVerificationValue("dummy-verification-token"),J.context.logger.error("Reset Password: User not found",{email:W}),J.json({status:!0,message:"If this email exists in our system, check your email for the reset link"});let Y=Z4(J.context.options.emailAndPassword.resetPasswordTokenExpiresIn||3600,"sec"),$=l4(24);await J.context.internalAdapter.createVerificationValue({value:G.user.id,identifier:`reset-password:${$}`,expiresAt:Y});let K=X?encodeURIComponent(X):"",w=`${J.context.baseURL}/reset-password/${$}?callbackURL=${K}`;return J.context.options.emailAndPassword.sendResetPassword({user:G.user,url:w,token:$},J.request).catch((H)=>{J.context.logger.error("Failed to send reset password email",H)}),J.json({status:!0,message:"If this email exists in our system, check your email for the reset link"})}),ad=y("/reset-password/:token",{method:"GET",operationId:"forgetPasswordCallback",query:c({callbackURL:j().meta({description:"The URL to redirect the user to reset their password"})}),use:[V5((J)=>J.query.callbackURL)],metadata:{openapi:{operationId:"resetPasswordCallback",description:"Redirects the user to the callback URL with the token",parameters:[{name:"token",in:"path",required:!0,description:"The token to reset the password",schema:{type:"string"}},{name:"callbackURL",in:"query",required:!0,description:"The URL to redirect the user to reset their password",schema:{type:"string"}}],responses:{"200":{description:"Success",content:{"application/json":{schema:{type:"object",properties:{token:{type:"string"}}}}}}}}}},async(J)=>{let{token:W}=J.params,{callbackURL:X}=J.query;if(!W||!X)throw J.redirect(_R(J.context,X,{error:"INVALID_TOKEN"}));let G=await J.context.internalAdapter.findVerificationValue(`reset-password:${W}`);if(!G||G.expiresAt<new Date)throw J.redirect(_R(J.context,X,{error:"INVALID_TOKEN"}));throw J.redirect(nd(J.context,X,{token:W}))}),td=y("/reset-password",{method:"POST",operationId:"resetPassword",query:c({token:j().optional()}).optional(),body:c({newPassword:j().meta({description:"The new password to set"}),token:j().meta({description:"The token to reset the password"}).optional()}),metadata:{openapi:{operationId:"resetPassword",description:"Reset the password for a user",responses:{"200":{description:"Success",content:{"application/json":{schema:{type:"object",properties:{status:{type:"boolean"}}}}}}}}}},async(J)=>{let W=J.body.token||J.query?.token;if(!W)throw new V("BAD_REQUEST",{message:s.INVALID_TOKEN});let{newPassword:X}=J.body,G=J.context.password?.config.minPasswordLength,Y=J.context.password?.config.maxPasswordLength;if(X.length<G)throw new V("BAD_REQUEST",{message:s.PASSWORD_TOO_SHORT});if(X.length>Y)throw new V("BAD_REQUEST",{message:s.PASSWORD_TOO_LONG});let $=`reset-password:${W}`,K=await J.context.internalAdapter.findVerificationValue($);if(!K||K.expiresAt<new Date)throw new V("BAD_REQUEST",{message:s.INVALID_TOKEN});let w=K.value,H=await J.context.password.hash(X);if(!(await J.context.internalAdapter.findAccounts(w)).find((z)=>z.providerId==="credential"))await J.context.internalAdapter.createAccount({userId:w,providerId:"credential",password:H,accountId:w});else await J.context.internalAdapter.updatePassword(w,H);if(await J.context.internalAdapter.deleteVerificationValue(K.id),J.context.options.emailAndPassword?.onPasswordReset){let z=await J.context.internalAdapter.findUserById(w);if(z)await J.context.options.emailAndPassword.onPasswordReset({user:z},J.request)}if(J.context.options.emailAndPassword?.revokeSessionsOnPasswordReset)await J.context.internalAdapter.deleteSessions(w);return J.json({status:!0})}),od=y("/sign-in/social",{method:"POST",operationId:"socialSignIn",body:c({callbackURL:j().meta({description:"Callback URL to redirect to after the user has signed in"}).optional(),newUserCallbackURL:j().optional(),errorCallbackURL:j().meta({description:"Callback URL to redirect to if an error happens"}).optional(),provider:XO,disableRedirect:G4().meta({description:"Disable automatic redirection to the provider. Useful for handling the redirection yourself"}).optional(),idToken:E0(c({token:j().meta({description:"ID token from the provider"}),nonce:j().meta({description:"Nonce used to generate the token"}).optional(),accessToken:j().meta({description:"Access token from the provider"}).optional(),refreshToken:j().meta({description:"Refresh token from the provider"}).optional(),expiresAt:_6().meta({description:"Expiry date of the token"}).optional()})),scopes:P6(j()).meta({description:"Array of scopes to request from the provider. This will override the default scopes passed."}).optional(),requestSignUp:G4().meta({description:"Explicitly request sign-up. Useful when disableImplicitSignUp is true for this provider"}).optional(),loginHint:j().meta({description:"The login hint to use for the authorization code request"}).optional(),additionalData:T6(j(),R6()).optional().meta({description:"Additional data to be passed through the OAuth flow"})}),metadata:{openapi:{description:"Sign in with a social provider",operationId:"socialSignIn",responses:{"200":{description:"Success - Returns either session details or redirect URL",content:{"application/json":{schema:{type:"object",description:"Session response when idToken is provided",properties:{token:{type:"string"},user:{type:"object",$ref:"#/components/schemas/User"},url:{type:"string"},redirect:{type:"boolean",enum:[!1]}},required:["redirect","token","user"]}}}}}}}},async(J)=>{let W=J.context.socialProviders.find(($)=>$.id===J.body.provider);if(!W)throw J.context.logger.error("Provider not found. Make sure to add the provider in your auth config",{provider:J.body.provider}),new V("NOT_FOUND",{message:s.PROVIDER_NOT_FOUND});if(J.body.idToken){if(!W.verifyIdToken)throw J.context.logger.error("Provider does not support id token verification",{provider:J.body.provider}),new V("NOT_FOUND",{message:s.ID_TOKEN_NOT_SUPPORTED});let{token:$,nonce:K}=J.body.idToken;if(!await W.verifyIdToken($,K))throw J.context.logger.error("Invalid id token",{provider:J.body.provider}),new V("UNAUTHORIZED",{message:s.INVALID_TOKEN});let w=await W.getUserInfo({idToken:$,accessToken:J.body.idToken.accessToken,refreshToken:J.body.idToken.refreshToken});if(!w||!w?.user)throw J.context.logger.error("Failed to get user info",{provider:J.body.provider}),new V("UNAUTHORIZED",{message:s.FAILED_TO_GET_USER_INFO});if(!w.user.email)throw J.context.logger.error("User email not found",{provider:J.body.provider}),new V("UNAUTHORIZED",{message:s.USER_EMAIL_NOT_FOUND});let H=await wO(J,{userInfo:{...w.user,email:w.user.email,id:String(w.user.id),name:w.user.name||"",image:w.user.image,emailVerified:w.user.emailVerified||!1},account:{providerId:W.id,accountId:String(w.user.id),accessToken:J.body.idToken.accessToken},callbackURL:J.body.callbackURL,disableSignUp:W.disableImplicitSignUp&&!J.body.requestSignUp||W.disableSignUp});if(H.error)throw new V("UNAUTHORIZED",{message:H.error});return await k6(J,H.data),J.json({redirect:!1,token:H.data.session.token,url:void 0,user:{id:H.data.user.id,email:H.data.user.email,name:H.data.user.name,image:H.data.user.image,emailVerified:H.data.user.emailVerified,createdAt:H.data.user.createdAt,updatedAt:H.data.user.updatedAt}})}let{codeVerifier:X,state:G}=await R$(J,void 0,J.body.additionalData),Y=await W.createAuthorizationURL({state:G,codeVerifier:X,redirectURI:`${J.context.baseURL}/callback/${W.id}`,scopes:J.body.scopes,loginHint:J.body.loginHint});return J.json({url:Y.toString(),redirect:!J.body.disableRedirect})}),sd=y("/sign-in/email",{method:"POST",operationId:"signInEmail",body:c({email:j().meta({description:"Email of the user"}),password:j().meta({description:"Password of the user"}),callbackURL:j().meta({description:"Callback URL to use as a redirect for email verification"}).optional(),rememberMe:G4().meta({description:"If this is false, the session will not be remembered. Default is `true`."}).default(!0).optional()}),metadata:{openapi:{operationId:"signInEmail",description:"Sign in with email and password",responses:{"200":{description:"Success - Returns either session details or redirect URL",content:{"application/json":{schema:{type:"object",description:"Session response when idToken is provided",properties:{redirect:{type:"boolean",enum:[!1]},token:{type:"string",description:"Session token"},url:{type:"null",nullable:!0},user:{type:"object",$ref:"#/components/schemas/User"}},required:["redirect","token","user"]}}}}}}}},async(J)=>{if(!J.context.options?.emailAndPassword?.enabled)throw J.context.logger.error("Email and password is not enabled. Make sure to enable it in the options on you `auth.ts` file. Check `https://better-auth.com/docs/authentication/email-password` for more!"),new V("BAD_REQUEST",{message:"Email and password is not enabled"});let{email:W,password:X}=J.body;if(!B8().safeParse(W).success)throw new V("BAD_REQUEST",{message:s.INVALID_EMAIL});let G=await J.context.internalAdapter.findUserByEmail(W,{includeAccounts:!0});if(!G)throw await J.context.password.hash(X),J.context.logger.error("User not found",{email:W}),new V("UNAUTHORIZED",{message:s.INVALID_EMAIL_OR_PASSWORD});let Y=G.accounts.find((w)=>w.providerId==="credential");if(!Y)throw await J.context.password.hash(X),J.context.logger.error("Credential account not found",{email:W}),new V("UNAUTHORIZED",{message:s.INVALID_EMAIL_OR_PASSWORD});let $=Y?.password;if(!$)throw await J.context.password.hash(X),J.context.logger.error("Password not found",{email:W}),new V("UNAUTHORIZED",{message:s.INVALID_EMAIL_OR_PASSWORD});if(!await J.context.password.verify({hash:$,password:X}))throw J.context.logger.error("Invalid password"),new V("UNAUTHORIZED",{message:s.INVALID_EMAIL_OR_PASSWORD});if(J.context.options?.emailAndPassword?.requireEmailVerification&&!G.user.emailVerified){if(!J.context.options?.emailVerification?.sendVerificationEmail)throw new V("FORBIDDEN",{message:s.EMAIL_NOT_VERIFIED});if(J.context.options?.emailVerification?.sendOnSignIn){let w=await jJ(J.context.secret,G.user.email,void 0,J.context.options.emailVerification?.expiresIn),H=J.body.callbackURL?encodeURIComponent(J.body.callbackURL):encodeURIComponent("/"),z=`${J.context.baseURL}/verify-email?token=${w}&callbackURL=${H}`;await J.context.options.emailVerification.sendVerificationEmail({user:G.user,url:z,token:w},J.request)}throw new V("FORBIDDEN",{message:s.EMAIL_NOT_VERIFIED})}let K=await J.context.internalAdapter.createSession(G.user.id,J.body.rememberMe===!1);if(!K)throw J.context.logger.error("Failed to create session"),new V("UNAUTHORIZED",{message:s.FAILED_TO_CREATE_SESSION});return await k6(J,{session:K,user:G.user},J.body.rememberMe===!1),J.json({redirect:!!J.body.callbackURL,token:K.token,url:J.body.callbackURL,user:{id:G.user.id,email:G.user.email,name:G.user.name,image:G.user.image,emailVerified:G.user.emailVerified,createdAt:G.user.createdAt,updatedAt:G.user.updatedAt}})}),ed=y("/sign-out",{method:"POST",operationId:"signOut",requireHeaders:!0,metadata:{openapi:{operationId:"signOut",description:"Sign out the current user",responses:{"200":{description:"Success",content:{"application/json":{schema:{type:"object",properties:{success:{type:"boolean"}}}}}}}}}},async(J)=>{let W=await J.getSignedCookie(J.context.authCookies.sessionToken.name,J.context.secret);if(W)try{await J.context.internalAdapter.deleteSession(W)}catch(X){J.context.logger.error("Failed to delete session from database",X)}return vJ(J),J.json({success:!0})}),Jr=()=>y("/sign-up/email",{method:"POST",operationId:"signUpWithEmailAndPassword",body:T6(j(),R6()),metadata:{$Infer:{body:{}},openapi:{operationId:"signUpWithEmailAndPassword",description:"Sign up a user using email and password",requestBody:{content:{"application/json":{schema:{type:"object",properties:{name:{type:"string",description:"The name of the user"},email:{type:"string",description:"The email of the user"},password:{type:"string",description:"The password of the user"},image:{type:"string",description:"The profile image URL of the user"},callbackURL:{type:"string",description:"The URL to use for email verification callback"},rememberMe:{type:"boolean",description:"If this is false, the session will not be remembered. Default is `true`."}},required:["name","email","password"]}}}},responses:{"200":{description:"Successfully created user",content:{"application/json":{schema:{type:"object",properties:{token:{type:"string",nullable:!0,description:"Authentication token for the session"},user:{type:"object",properties:{id:{type:"string",description:"The unique identifier of the user"},email:{type:"string",format:"email",description:"The email address of the user"},name:{type:"string",description:"The name of the user"},image:{type:"string",format:"uri",nullable:!0,description:"The profile image URL of the user"},emailVerified:{type:"boolean",description:"Whether the email has been verified"},createdAt:{type:"string",format:"date-time",description:"When the user was created"},updatedAt:{type:"string",format:"date-time",description:"When the user was last updated"}},required:["id","email","name","emailVerified","createdAt","updatedAt"]}},required:["user"]}}}},"422":{description:"Unprocessable Entity. User already exists or failed to create user.",content:{"application/json":{schema:{type:"object",properties:{message:{type:"string"}}}}}}}}}},async(J)=>{return d9(J.context.adapter,async()=>{if(!J.context.options.emailAndPassword?.enabled||J.context.options.emailAndPassword?.disableSignUp)throw new V("BAD_REQUEST",{message:"Email and password sign up is not enabled"});let W=J.body,{name:X,email:G,password:Y,image:$,callbackURL:K,rememberMe:w,...H}=W;if(!B8().safeParse(G).success)throw new V("BAD_REQUEST",{message:s.INVALID_EMAIL});let z=J.context.password.config.minPasswordLength;if(Y.length<z)throw J.context.logger.error("Password is too short"),new V("BAD_REQUEST",{message:s.PASSWORD_TOO_SHORT});let N=J.context.password.config.maxPasswordLength;if(Y.length>N)throw J.context.logger.error("Password is too long"),new V("BAD_REQUEST",{message:s.PASSWORD_TOO_LONG});if((await J.context.internalAdapter.findUserByEmail(G))?.user)throw J.context.logger.info(`Sign-up attempt for existing email: ${G}`),new V("UNPROCESSABLE_ENTITY",{message:s.USER_ALREADY_EXISTS_USE_ANOTHER_EMAIL});let U=await J.context.password.hash(Y),F;try{let L=PH(J.context.options,H,"create");if(F=await J.context.internalAdapter.createUser({email:G.toLowerCase(),name:X,image:$,...L,emailVerified:!1}),!F)throw new V("BAD_REQUEST",{message:s.FAILED_TO_CREATE_USER})}catch(L){if(FG())J.context.logger.error("Failed to create user",L);if(L instanceof V)throw L;throw J.context.logger?.error("Failed to create user",L),new V("UNPROCESSABLE_ENTITY",{message:s.FAILED_TO_CREATE_USER,details:L})}if(!F)throw new V("UNPROCESSABLE_ENTITY",{message:s.FAILED_TO_CREATE_USER});if(await J.context.internalAdapter.linkAccount({userId:F.id,providerId:"credential",accountId:F.id,password:U}),J.context.options.emailVerification?.sendOnSignUp||J.context.options.emailAndPassword.requireEmailVerification){let L=await jJ(J.context.secret,F.email,void 0,J.context.options.emailVerification?.expiresIn),D=W.callbackURL?encodeURIComponent(W.callbackURL):encodeURIComponent("/"),O=`${J.context.baseURL}/verify-email?token=${L}&callbackURL=${D}`,P=J.request?[{user:F,url:O,token:L},J.request]:[{user:F,url:O,token:L}];await J.context.options.emailVerification?.sendVerificationEmail?.(...P)}if(J.context.options.emailAndPassword.autoSignIn===!1||J.context.options.emailAndPassword.requireEmailVerification)return J.json({token:null,user:{id:F.id,email:F.email,name:F.name,image:F.image,emailVerified:F.emailVerified,createdAt:F.createdAt,updatedAt:F.updatedAt}});let Z=await J.context.internalAdapter.createSession(F.id,w===!1);if(!Z)throw new V("BAD_REQUEST",{message:s.FAILED_TO_CREATE_SESSION});return await k6(J,{session:Z,user:F},w===!1),J.json({token:Z.token,user:{id:F.id,email:F.email,name:F.name,image:F.image,emailVerified:F.emailVerified,createdAt:F.createdAt,updatedAt:F.updatedAt}})})}),Wr=()=>y("/update-user",{method:"POST",operationId:"updateUser",body:T6(j().meta({description:"Field name must be a string"}),R6()),use:[u4],metadata:{$Infer:{body:{}},openapi:{operationId:"updateUser",description:"Update the current user",requestBody:{content:{"application/json":{schema:{type:"object",properties:{name:{type:"string",description:"The name of the user"},image:{type:"string",description:"The image of the user"}}}}}},responses:{"200":{description:"Success",content:{"application/json":{schema:{type:"object",properties:{user:{type:"object",$ref:"#/components/schemas/User"}}}}}}}}}},async(J)=>{let W=J.body;if(W.email)throw new V("BAD_REQUEST",{message:s.EMAIL_CAN_NOT_BE_UPDATED});let{name:X,image:G,...Y}=W,$=J.context.session,K=PH(J.context.options,Y,"update");if(G===void 0&&X===void 0&&Object.keys(K).length===0)throw new V("BAD_REQUEST",{message:"No fields to update"});let w=await J.context.internalAdapter.updateUser($.user.id,{name:X,image:G,...K});return await k6(J,{session:$.session,user:w}),J.json({status:!0})}),Xr=y("/change-password",{method:"POST",operationId:"changePassword",body:c({newPassword:j().meta({description:"The new password to set"}),currentPassword:j().meta({description:"The current password is required"}),revokeOtherSessions:G4().meta({description:"Must be a boolean value"}).optional()}),use:[jX],metadata:{openapi:{operationId:"changePassword",description:"Change the password of the user",responses:{"200":{description:"Password successfully changed",content:{"application/json":{schema:{type:"object",properties:{token:{type:"string",nullable:!0,description:"New session token if other sessions were revoked"},user:{type:"object",properties:{id:{type:"string",description:"The unique identifier of the user"},email:{type:"string",format:"email",description:"The email address of the user"},name:{type:"string",description:"The name of the user"},image:{type:"string",format:"uri",nullable:!0,description:"The profile image URL of the user"},emailVerified:{type:"boolean",description:"Whether the email has been verified"},createdAt:{type:"string",format:"date-time",description:"When the user was created"},updatedAt:{type:"string",format:"date-time",description:"When the user was last updated"}},required:["id","email","name","emailVerified","createdAt","updatedAt"]}},required:["user"]}}}}}}}},async(J)=>{let{newPassword:W,currentPassword:X,revokeOtherSessions:G}=J.body,Y=J.context.session,$=J.context.password.config.minPasswordLength;if(W.length<$)throw J.context.logger.error("Password is too short"),new V("BAD_REQUEST",{message:s.PASSWORD_TOO_SHORT});let K=J.context.password.config.maxPasswordLength;if(W.length>K)throw J.context.logger.error("Password is too long"),new V("BAD_REQUEST",{message:s.PASSWORD_TOO_LONG});let w=(await J.context.internalAdapter.findAccounts(Y.user.id)).find((N)=>N.providerId==="credential"&&N.password);if(!w||!w.password)throw new V("BAD_REQUEST",{message:s.CREDENTIAL_ACCOUNT_NOT_FOUND});let H=await J.context.password.hash(W);if(!await J.context.password.verify({hash:w.password,password:X}))throw new V("BAD_REQUEST",{message:s.INVALID_PASSWORD});await J.context.internalAdapter.updateAccount(w.id,{password:H});let z=null;if(G){await J.context.internalAdapter.deleteSessions(Y.user.id);let N=await J.context.internalAdapter.createSession(Y.user.id);if(!N)throw new V("INTERNAL_SERVER_ERROR",{message:s.FAILED_TO_GET_SESSION});await k6(J,{session:N,user:Y.user}),z=N.token}return J.json({token:z,user:{id:Y.user.id,email:Y.user.email,name:Y.user.name,image:Y.user.image,emailVerified:Y.user.emailVerified,createdAt:Y.user.createdAt,updatedAt:Y.user.updatedAt}})}),Yr=y("/set-password",{method:"POST",body:c({newPassword:j().meta({description:"The new password to set is required"})}),metadata:{SERVER_ONLY:!0},use:[jX]},async(J)=>{let{newPassword:W}=J.body,X=J.context.session,G=J.context.password.config.minPasswordLength;if(W.length<G)throw J.context.logger.error("Password is too short"),new V("BAD_REQUEST",{message:s.PASSWORD_TOO_SHORT});let Y=J.context.password.config.maxPasswordLength;if(W.length>Y)throw J.context.logger.error("Password is too long"),new V("BAD_REQUEST",{message:s.PASSWORD_TOO_LONG});let $=(await J.context.internalAdapter.findAccounts(X.user.id)).find((w)=>w.providerId==="credential"&&w.password),K=await J.context.password.hash(W);if(!$)return await J.context.internalAdapter.linkAccount({userId:X.user.id,providerId:"credential",accountId:X.user.id,password:K}),J.json({status:!0});throw new V("BAD_REQUEST",{message:"user already has a password"})}),Gr=y("/delete-user",{method:"POST",use:[jX],body:c({callbackURL:j().meta({description:"The callback URL to redirect to after the user is deleted"}).optional(),password:j().meta({description:"The password of the user is required to delete the user"}).optional(),token:j().meta({description:"The token to delete the user is required"}).optional()}),metadata:{openapi:{operationId:"deleteUser",description:"Delete the user",requestBody:{content:{"application/json":{schema:{type:"object",properties:{callbackURL:{type:"string",description:"The callback URL to redirect to after the user is deleted"},password:{type:"string",description:"The user's password. Required if session is not fresh"},token:{type:"string",description:"The deletion verification token"}}}}}},responses:{"200":{description:"User deletion processed successfully",content:{"application/json":{schema:{type:"object",properties:{success:{type:"boolean",description:"Indicates if the operation was successful"},message:{type:"string",enum:["User deleted","Verification email sent"],description:"Status message of the deletion process"}},required:["success","message"]}}}}}}}},async(J)=>{if(!J.context.options.user?.deleteUser?.enabled)throw J.context.logger.error("Delete user is disabled. Enable it in the options"),new V("NOT_FOUND");let W=J.context.session;if(J.body.password){let Y=(await J.context.internalAdapter.findAccounts(W.user.id)).find(($)=>$.providerId==="credential"&&$.password);if(!Y||!Y.password)throw new V("BAD_REQUEST",{message:s.CREDENTIAL_ACCOUNT_NOT_FOUND});if(!await J.context.password.verify({hash:Y.password,password:J.body.password}))throw new V("BAD_REQUEST",{message:s.INVALID_PASSWORD})}if(J.body.token)return await AR({...J,query:{token:J.body.token}}),J.json({success:!0,message:"User deleted"});if(J.context.options.user.deleteUser?.sendDeleteAccountVerification){let Y=t6(32,"0-9","a-z");await J.context.internalAdapter.createVerificationValue({value:W.user.id,identifier:`delete-account-${Y}`,expiresAt:new Date(Date.now()+(J.context.options.user.deleteUser?.deleteTokenExpiresIn||86400)*1000)});let $=`${J.context.baseURL}/delete-user/callback?token=${Y}&callbackURL=${J.body.callbackURL||"/"}`;return await J.context.options.user.deleteUser.sendDeleteAccountVerification({user:W.user,url:$,token:Y},J.request),J.json({success:!0,message:"Verification email sent"})}if(!J.body.password&&J.context.sessionConfig.freshAge!==0){let Y=new Date(W.session.createdAt).getTime(),$=J.context.sessionConfig.freshAge*1000;if(Date.now()-Y>$*1000)throw new V("BAD_REQUEST",{message:s.SESSION_EXPIRED})}let X=J.context.options.user.deleteUser?.beforeDelete;if(X)await X(W.user,J.request);await J.context.internalAdapter.deleteUser(W.user.id),await J.context.internalAdapter.deleteSessions(W.user.id),vJ(J);let G=J.context.options.user.deleteUser?.afterDelete;if(G)await G(W.user,J.request);return J.json({success:!0,message:"User deleted"})}),AR=y("/delete-user/callback",{method:"GET",query:c({token:j().meta({description:"The token to verify the deletion request"}),callbackURL:j().meta({description:"The URL to redirect to after deletion"}).optional()}),use:[V5((J)=>J.query.callbackURL)],metadata:{openapi:{description:"Callback to complete user deletion with verification token",responses:{"200":{description:"User successfully deleted",content:{"application/json":{schema:{type:"object",properties:{success:{type:"boolean",description:"Indicates if the deletion was successful"},message:{type:"string",enum:["User deleted"],description:"Confirmation message"}},required:["success","message"]}}}}}}}},async(J)=>{if(!J.context.options.user?.deleteUser?.enabled)throw J.context.logger.error("Delete user is disabled. Enable it in the options"),new V("NOT_FOUND");let W=await j6(J);if(!W)throw new V("NOT_FOUND",{message:s.FAILED_TO_GET_USER_INFO});let X=await J.context.internalAdapter.findVerificationValue(`delete-account-${J.query.token}`);if(!X||X.expiresAt<new Date)throw new V("NOT_FOUND",{message:s.INVALID_TOKEN});if(X.value!==W.user.id)throw new V("NOT_FOUND",{message:s.INVALID_TOKEN});let G=J.context.options.user.deleteUser?.beforeDelete;if(G)await G(W.user,J.request);await J.context.internalAdapter.deleteUser(W.user.id),await J.context.internalAdapter.deleteSessions(W.user.id),await J.context.internalAdapter.deleteAccounts(W.user.id),await J.context.internalAdapter.deleteVerificationValue(X.id),vJ(J);let Y=J.context.options.user.deleteUser?.afterDelete;if(Y)await Y(W.user,J.request);if(J.query.callbackURL)throw J.redirect(J.query.callbackURL||"/");return J.json({success:!0,message:"User deleted"})}),$r=y("/change-email",{method:"POST",body:c({newEmail:B8().meta({description:"The new email address to set must be a valid email address"}),callbackURL:j().meta({description:"The URL to redirect to after email verification"}).optional()}),use:[jX],metadata:{openapi:{operationId:"changeEmail",responses:{"200":{description:"Email change request processed successfully",content:{"application/json":{schema:{type:"object",properties:{user:{type:"object",$ref:"#/components/schemas/User"},status:{type:"boolean",description:"Indicates if the request was successful"},message:{type:"string",enum:["Email updated","Verification email sent"],description:"Status message of the email change process",nullable:!0}},required:["status"]}}}},"422":{description:"Unprocessable Entity. Email already exists",content:{"application/json":{schema:{type:"object",properties:{message:{type:"string"}}}}}}}}}},async(J)=>{if(!J.context.options.user?.changeEmail?.enabled)throw J.context.logger.error("Change email is disabled."),new V("BAD_REQUEST",{message:"Change email is disabled"});let W=J.body.newEmail.toLowerCase();if(W===J.context.session.user.email)throw J.context.logger.error("Email is the same"),new V("BAD_REQUEST",{message:"Email is the same"});if(await J.context.internalAdapter.findUserByEmail(W))throw J.context.logger.error("Email already exists"),new V("UNPROCESSABLE_ENTITY",{message:s.USER_ALREADY_EXISTS_USE_ANOTHER_EMAIL});if(J.context.session.user.emailVerified!==!0&&J.context.options.user.changeEmail.updateEmailWithoutVerification){if(await J.context.internalAdapter.updateUserByEmail(J.context.session.user.email,{email:W}),await k6(J,{session:J.context.session.session,user:{...J.context.session.user,email:W}}),J.context.options.emailVerification?.sendVerificationEmail){let Y=await jJ(J.context.secret,W,void 0,J.context.options.emailVerification?.expiresIn),$=`${J.context.baseURL}/verify-email?token=${Y}&callbackURL=${J.body.callbackURL||"/"}`;await J.context.options.emailVerification.sendVerificationEmail({user:{...J.context.session.user,email:W},url:$,token:Y},J.request)}return J.json({status:!0})}if(J.context.session.user.emailVerified&&(J.context.options.user.changeEmail.sendChangeEmailConfirmation||J.context.options.user.changeEmail.sendChangeEmailVerification)){let Y=await jJ(J.context.secret,J.context.session.user.email,W,J.context.options.emailVerification?.expiresIn,{requestType:"change-email-confirmation"}),$=`${J.context.baseURL}/verify-email?token=${Y}&callbackURL=${J.body.callbackURL||"/"}`,K=J.context.options.user.changeEmail.sendChangeEmailConfirmation||J.context.options.user.changeEmail.sendChangeEmailVerification;if(K)await K({user:J.context.session.user,newEmail:W,url:$,token:Y},J.request);return J.json({status:!0})}if(!J.context.options.emailVerification?.sendVerificationEmail)throw J.context.logger.error("Verification email isn't enabled."),new V("BAD_REQUEST",{message:"Verification email isn't enabled"});let X=await jJ(J.context.secret,J.context.session.user.email,W,J.context.options.emailVerification?.expiresIn,{requestType:"change-email-verification"}),G=`${J.context.baseURL}/verify-email?token=${X}&callbackURL=${J.body.callbackURL||"/"}`;return await J.context.options.emailVerification.sendVerificationEmail({user:{...J.context.session.user,email:W},url:G,token:X},J.request),J.json({status:!0})}),ER=Z5((J,W,X)=>{if(Array.isArray(J[W])&&Array.isArray(X))return J[W]=X,!0});function Kr(J,W){let X={};for(let[G,Y]of Object.entries(J))X[G]=async($)=>{let K=async()=>{let w=await W,H={...$,context:{...w,returned:void 0,responseHeaders:void 0,session:null},path:Y.path,headers:$?.headers?new Headers($?.headers):void 0};return RY(H,async()=>{let{beforeHooks:z,afterHooks:N}=zr(w),U=await wr(H,z);if("context"in U&&U.context&&typeof U.context==="object"){let{headers:L,...D}=U.context;if(L)L.forEach((O,P)=>{H.headers.set(P,O)});H=ER(D,H)}else if(U)return $?.asResponse?YX(U,{headers:$?.headers}):$?.returnHeaders?{headers:$?.headers,response:U}:U;H.asResponse=!1,H.returnHeaders=!0,H.returnStatus=!0;let F=await RY(H,()=>Y(H)).catch((L)=>{if(L instanceof V)return{response:L,status:L.statusCode,headers:L.headers?new Headers(L.headers):null};throw L});if(F&&F instanceof Response)return F;H.context.returned=F.response,H.context.responseHeaders=F.headers;let Z=await Hr(H,N);if(Z.response)F.response=Z.response;if(F.response instanceof V&&UG(w.logger.level,"debug"))F.response.stack=F.response.errorStack;if(F.response instanceof V&&!$?.asResponse)throw F.response;return $?.asResponse?YX(F.response,{headers:F.headers,status:F.status}):$?.returnHeaders?$?.returnStatus?{headers:F.headers,response:F.response,status:F.status}:{headers:F.headers,response:F.response}:$?.returnStatus?{response:F.response,status:F.status}:F.response})};if(await ZU())return K();else return LU(new WeakMap,K)},X[G].path=Y.path,X[G].options=Y.options;return X}async function wr(J,W){let X={};for(let G of W)if(G.matcher(J)){let Y=await G.handler({...J,returnHeaders:!1}).catch(($)=>{if($ instanceof V&&UG(J.context.logger.level,"debug"))$.stack=$.errorStack;throw $});if(Y&&typeof Y==="object"){if("context"in Y&&typeof Y.context==="object"){let{headers:$,...K}=Y.context;if($ instanceof Headers)if(X.headers)$.forEach((w,H)=>{X.headers?.set(H,w)});else X.headers=$;X=ER(K,X);continue}return Y}}return{context:X}}async function Hr(J,W){for(let X of W)if(X.matcher(J)){let G=await X.handler(J).catch((Y)=>{if(Y instanceof V){if(UG(J.context.logger.level,"debug"))Y.stack=Y.errorStack;return{response:Y,headers:Y.headers?new Headers(Y.headers):null}}throw Y});if(G.headers)G.headers.forEach((Y,$)=>{if(!J.context.responseHeaders)J.context.responseHeaders=new Headers({[$]:Y});else if($.toLowerCase()==="set-cookie")J.context.responseHeaders.append($,Y);else J.context.responseHeaders.set($,Y)});if(G.response)J.context.returned=G.response}return{response:J.context.returned,headers:J.context.responseHeaders}}function zr(J){let W=J.options.plugins||[],X=[],G=[];if(J.options.hooks?.before)X.push({matcher:()=>!0,handler:J.options.hooks.before});if(J.options.hooks?.after)G.push({matcher:()=>!0,handler:J.options.hooks.after});let Y=W.map((K)=>{if(K.hooks?.before)return K.hooks.before}).filter((K)=>K!==void 0).flat(),$=W.map((K)=>{if(K.hooks?.after)return K.hooks.after}).filter((K)=>K!==void 0).flat();if(Y.length)X.push(...Y);if($.length)G.push(...$);return{beforeHooks:X,afterHooks:G}}function IR(J,W){let X=new Map;J.plugins?.forEach((Y)=>{if(Y.endpoints){for(let[$,K]of Object.entries(Y.endpoints))if(K&&"path"in K){let w=K.path,H=[];if(K.options&&"method"in K.options){if(Array.isArray(K.options.method))H=K.options.method;else if(typeof K.options.method==="string")H=[K.options.method]}if(H.length===0)H=["*"];if(!X.has(w))X.set(w,[]);X.get(w).push({pluginId:Y.id,endpointKey:$,methods:H})}}});let G=[];for(let[Y,$]of X.entries())if($.length>1){let K=new Map,w=!1;for(let H of $)for(let z of H.methods){if(!K.has(z))K.set(z,[]);if(K.get(z).push(H.pluginId),K.get(z).length>1)w=!0;if(z==="*"&&$.length>1)w=!0;else if(z!=="*"&&K.has("*"))w=!0}if(w){let H=[...new Set($.map((N)=>N.pluginId))],z=[];for(let[N,U]of K.entries())if(U.length>1||N==="*"&&$.length>1||N!=="*"&&K.has("*"))z.push(N);G.push({path:Y,plugins:H,conflictingMethods:z})}}if(G.length>0){let Y=G.map(($)=>`  - "${$.path}" [${$.conflictingMethods.join(", ")}] used by plugins: ${$.plugins.join(", ")}`).join(`
`);W.error(`Endpoint path conflicts detected! Multiple plugins are trying to use the same endpoint paths with conflicting HTTP methods:
${Y}

To resolve this, you can:
	1. Use only one of the conflicting plugins
	2. Configure the plugins to use different paths (if supported)
	3. Ensure plugins use different HTTP methods for the same path
`)}}function hG(J,W){let X=W.plugins?.reduce((Y,$)=>{return{...Y,...$.endpoints}},{})??{},G=W.plugins?.map((Y)=>Y.middlewares?.map(($)=>{let K=async(w)=>{let H=await J;return $.middleware({...w,context:{...H,...w.context}})};return K.options=$.middleware.options,{path:$.path,middleware:K}})).filter((Y)=>Y!==void 0).flat()||[];return{api:Kr({signInSocial:od,callbackOAuth:ud,getSession:Q3(),signOut:ed,signUpEmail:Jr(),signInEmail:sd,resetPassword:td,verifyEmail:ld,sendVerificationEmail:cd,changeEmail:$r,changePassword:Xr,setPassword:Yr,updateUser:Wr(),deleteUser:Gr,requestPasswordReset:id,requestPasswordResetCallback:ad,listSessions:HR(),revokeSession:zR,revokeSessions:NR,revokeOtherSessions:FR,linkSocialAccount:gd,listUserAccounts:hd,deleteUserCallback:AR,unlinkAccount:md,refreshToken:fd,getAccessToken:qR,accountInfo:xd,...X,ok:rd,error:dd},J),middlewares:G}}var RR=(J,W)=>{let{api:X,middlewares:G}=hG(J,W),Y=new URL(J.baseURL).pathname;return j_(X,{routerContext:J,openapi:{disabled:!0},basePath:Y,routerMiddleware:[{path:"/**",middleware:Ad},...G],allowedMediaTypes:["application/json"],async onRequest($){let K=J.options.disabledPaths||[],w=new URL($.url).pathname.replace(Y,"");if(K.includes(w))return new Response("Not Found",{status:404});for(let H of J.options.plugins||[])if(H.onRequest){let z=await H.onRequest($,J);if(z&&"response"in z)return z.response;if(z&&"request"in z){let N=await jR(z.request,J);if(N)return N;return z.request}}return jR($,J)},async onResponse($){for(let K of J.options.plugins||[])if(K.onResponse){let w=await K.onResponse($,J);if(w)return w.response}return $},onError($){if($ instanceof V&&$.status==="FOUND")return;if(W.onAPIError?.throw)throw $;if(W.onAPIError?.onError){W.onAPIError.onError($,J);return}let K=W.logger?.level,w=K==="error"||K==="warn"||K==="debug"?w6:void 0;if(W.logger?.disabled!==!0){if($&&typeof $==="object"&&"message"in $&&typeof $.message==="string"){if($.message.includes("no column")||$.message.includes("column")||$.message.includes("relation")||$.message.includes("table")||$.message.includes("does not exist")){J.logger?.error($.message);return}}if($ instanceof V){if($.status==="INTERNAL_SERVER_ERROR")J.logger.error($.status,$);w?.error($.message)}else J.logger?.error($&&typeof $==="object"&&"name"in $?$.name:"",$)}}})};CJ();Y8();J0();W0();async function CR(J,W){let X=(await W.context.internalAdapter.findAccounts(J))?.find((Y)=>Y.providerId==="credential"),G=X?.password;if(!X||!G||!W.body.password)throw new V("BAD_REQUEST",{message:"No password credential found"});if(!await W.context.password.verify({hash:G,password:W.body.password}))throw new V("BAD_REQUEST",{message:"Invalid password"});return!0}kJ();$8();m4();$8();f0();QW();Nw();function mR(J,W){return{database:W?.database,adapter:W?.adapter,emailVerification:{sendVerificationEmail:!!J.emailVerification?.sendVerificationEmail,sendOnSignUp:!!J.emailVerification?.sendOnSignUp,sendOnSignIn:!!J.emailVerification?.sendOnSignIn,autoSignInAfterVerification:!!J.emailVerification?.autoSignInAfterVerification,expiresIn:J.emailVerification?.expiresIn,onEmailVerification:!!J.emailVerification?.onEmailVerification,afterEmailVerification:!!J.emailVerification?.afterEmailVerification},emailAndPassword:{enabled:!!J.emailAndPassword?.enabled,disableSignUp:!!J.emailAndPassword?.disableSignUp,requireEmailVerification:!!J.emailAndPassword?.requireEmailVerification,maxPasswordLength:J.emailAndPassword?.maxPasswordLength,minPasswordLength:J.emailAndPassword?.minPasswordLength,sendResetPassword:!!J.emailAndPassword?.sendResetPassword,resetPasswordTokenExpiresIn:J.emailAndPassword?.resetPasswordTokenExpiresIn,onPasswordReset:!!J.emailAndPassword?.onPasswordReset,password:{hash:!!J.emailAndPassword?.password?.hash,verify:!!J.emailAndPassword?.password?.verify},autoSignIn:!!J.emailAndPassword?.autoSignIn,revokeSessionsOnPasswordReset:!!J.emailAndPassword?.revokeSessionsOnPasswordReset},socialProviders:Object.keys(J.socialProviders||{}).map((X)=>{let G=J.socialProviders?.[X];if(!G)return{};return{id:X,mapProfileToUser:!!G.mapProfileToUser,disableDefaultScope:!!G.disableDefaultScope,disableIdTokenSignIn:!!G.disableIdTokenSignIn,disableImplicitSignUp:G.disableImplicitSignUp,disableSignUp:G.disableSignUp,getUserInfo:!!G.getUserInfo,overrideUserInfoOnSignIn:!!G.overrideUserInfoOnSignIn,prompt:G.prompt,verifyIdToken:!!G.verifyIdToken,scope:G.scope,refreshAccessToken:!!G.refreshAccessToken}}),plugins:J.plugins?.map((X)=>X.id.toString()),user:{modelName:J.user?.modelName,fields:J.user?.fields,additionalFields:J.user?.additionalFields,changeEmail:{enabled:J.user?.changeEmail?.enabled,sendChangeEmailVerification:!!J.user?.changeEmail?.sendChangeEmailVerification}},verification:{modelName:J.verification?.modelName,disableCleanup:J.verification?.disableCleanup,fields:J.verification?.fields},session:{modelName:J.session?.modelName,additionalFields:J.session?.additionalFields,cookieCache:{enabled:J.session?.cookieCache?.enabled,maxAge:J.session?.cookieCache?.maxAge,strategy:J.session?.cookieCache?.strategy},disableSessionRefresh:J.session?.disableSessionRefresh,expiresIn:J.session?.expiresIn,fields:J.session?.fields,freshAge:J.session?.freshAge,preserveSessionInDatabase:J.session?.preserveSessionInDatabase,storeSessionInDatabase:J.session?.storeSessionInDatabase,updateAge:J.session?.updateAge},account:{modelName:J.account?.modelName,fields:J.account?.fields,encryptOAuthTokens:J.account?.encryptOAuthTokens,updateAccountOnSignIn:J.account?.updateAccountOnSignIn,accountLinking:{enabled:J.account?.accountLinking?.enabled,trustedProviders:J.account?.accountLinking?.trustedProviders,updateUserInfoOnLink:J.account?.accountLinking?.updateUserInfoOnLink,allowUnlinkingAll:J.account?.accountLinking?.allowUnlinkingAll}},hooks:{after:!!J.hooks?.after,before:!!J.hooks?.before},secondaryStorage:!!J.secondaryStorage,advanced:{cookiePrefix:!!J.advanced?.cookiePrefix,cookies:!!J.advanced?.cookies,crossSubDomainCookies:{domain:!!J.advanced?.crossSubDomainCookies?.domain,enabled:J.advanced?.crossSubDomainCookies?.enabled,additionalCookies:J.advanced?.crossSubDomainCookies?.additionalCookies},database:{useNumberId:!!J.advanced?.database?.useNumberId||J.advanced?.database?.generateId==="serial",generateId:J.advanced?.database?.generateId,defaultFindManyLimit:J.advanced?.database?.defaultFindManyLimit},useSecureCookies:J.advanced?.useSecureCookies,ipAddress:{disableIpTracking:J.advanced?.ipAddress?.disableIpTracking,ipAddressHeaders:J.advanced?.ipAddress?.ipAddressHeaders},disableCSRFCheck:J.advanced?.disableCSRFCheck,cookieAttributes:{expires:J.advanced?.defaultCookieAttributes?.expires,secure:J.advanced?.defaultCookieAttributes?.secure,sameSite:J.advanced?.defaultCookieAttributes?.sameSite,domain:!!J.advanced?.defaultCookieAttributes?.domain,path:J.advanced?.defaultCookieAttributes?.path,httpOnly:J.advanced?.defaultCookieAttributes?.httpOnly}},trustedOrigins:J.trustedOrigins?.length,rateLimit:{storage:J.rateLimit?.storage,modelName:J.rateLimit?.modelName,window:J.rateLimit?.window,customStorage:!!J.rateLimit?.customStorage,enabled:J.rateLimit?.enabled,max:J.rateLimit?.max},onAPIError:{errorURL:J.onAPIError?.errorURL,onError:!!J.onAPIError?.onError,throw:J.onAPIError?.throw},logger:{disabled:J.logger?.disabled,level:J.logger?.level,log:!!J.logger?.log},databaseHooks:{user:{create:{after:!!J.databaseHooks?.user?.create?.after,before:!!J.databaseHooks?.user?.create?.before},update:{after:!!J.databaseHooks?.user?.update?.after,before:!!J.databaseHooks?.user?.update?.before}},session:{create:{after:!!J.databaseHooks?.session?.create?.after,before:!!J.databaseHooks?.session?.create?.before},update:{after:!!J.databaseHooks?.session?.update?.after,before:!!J.databaseHooks?.session?.update?.before}},account:{create:{after:!!J.databaseHooks?.account?.create?.after,before:!!J.databaseHooks?.account?.create?.before},update:{after:!!J.databaseHooks?.account?.update?.after,before:!!J.databaseHooks?.account?.update?.before}},verification:{create:{after:!!J.databaseHooks?.verification?.create?.after,before:!!J.databaseHooks?.verification?.create?.before},update:{after:!!J.databaseHooks?.verification?.update?.after,before:!!J.databaseHooks?.verification?.update?.before}}}}}var _X;async function fR(){if(_X)return _X;try{let J=typeof process<"u"&&typeof process.cwd==="function"?process.cwd():"";if(!J)return;let W=($)=>Function("mm","return import(mm)")($),[{default:X},{default:G}]=await Promise.all([W("fs/promises"),W("path")]),Y=await X.readFile(G.join(J,"package.json"),"utf-8");return _X=JSON.parse(Y),_X}catch{}}async function yR(J){if(_X)return _X.dependencies?.[J]||_X.devDependencies?.[J]||_X.peerDependencies?.[J];try{let W=typeof process<"u"&&typeof process.cwd==="function"?process.cwd():"";if(!W)throw Error("no-cwd");let X=(w)=>Function("mm","return import(mm)")(w),[{default:G},{default:Y}]=await Promise.all([X("fs/promises"),X("path")]),$=Y.join(W,"node_modules",J,"package.json"),K=await G.readFile($,"utf-8");return JSON.parse(K).version||await bR(J)||void 0}catch{}return await bR(J)}async function bR(J){let W=await fR();if(!W)return;return{...W.dependencies,...W.devDependencies,...W.peerDependencies}[J]}async function Nr(){return(await fR())?.name}var Fr={pg:"postgresql",mysql:"mysql",mariadb:"mariadb",sqlite3:"sqlite","better-sqlite3":"sqlite","@prisma/client":"prisma",mongoose:"mongodb",mongodb:"mongodb","drizzle-orm":"drizzle"};async function Ur(){for(let[J,W]of Object.entries(Fr)){let X=await yR(J);if(X)return{name:W,version:X}}}var Qr={next:"next",nuxt:"nuxt","@remix-run/server-runtime":"remix",astro:"astro","@sveltejs/kit":"sveltekit","solid-start":"solid-start","tanstack-start":"tanstack-start",hono:"hono",express:"express",elysia:"elysia",expo:"expo"};async function Zr(){for(let[J,W]of Object.entries(Qr)){let X=await yR(J);if(X)return{name:W,version:X}}}function Lr(){let J=C6.npm_config_user_agent;if(!J)return;let W=J.split(" ")[0],X=W.lastIndexOf("/"),G=W.substring(0,X);return{name:G==="npminstall"?"cnpm":G,version:W.substring(X+1)}}var gG=(J)=>{return Function("mm","return import(mm)")(J)};function A1(){let J=(...W)=>W.some((X)=>Boolean(C6[X]));if(J("CF_PAGES","CF_PAGES_URL","CF_ACCOUNT_ID")||typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers")return"cloudflare";if(J("VERCEL","VERCEL_URL","VERCEL_ENV"))return"vercel";if(J("NETLIFY","NETLIFY_URL"))return"netlify";if(J("RENDER","RENDER_URL","RENDER_INTERNAL_HOSTNAME","RENDER_SERVICE_ID"))return"render";if(J("AWS_LAMBDA_FUNCTION_NAME","AWS_EXECUTION_ENV","LAMBDA_TASK_ROOT"))return"aws";if(J("GOOGLE_CLOUD_FUNCTION_NAME","GOOGLE_CLOUD_PROJECT","GCP_PROJECT","K_SERVICE"))return"gcp";if(J("AZURE_FUNCTION_NAME","FUNCTIONS_WORKER_RUNTIME","WEBSITE_INSTANCE_ID","WEBSITE_SITE_NAME"))return"azure";if(J("DENO_DEPLOYMENT_ID","DENO_REGION"))return"deno-deploy";if(J("FLY_APP_NAME","FLY_REGION","FLY_ALLOC_ID"))return"fly-io";if(J("RAILWAY_STATIC_URL","RAILWAY_ENVIRONMENT_NAME"))return"railway";if(J("DYNO","HEROKU_APP_NAME"))return"heroku";if(J("DO_DEPLOYMENT_ID","DO_APP_NAME","DIGITALOCEAN"))return"digitalocean";if(J("KOYEB","KOYEB_DEPLOYMENT_ID","KOYEB_APP_NAME"))return"koyeb";return null}async function Vr(){try{if(A1()==="cloudflare")return"cloudflare";let J=await gG("os"),W=J.cpus();return{deploymentVendor:A1(),systemPlatform:J.platform(),systemRelease:J.release(),systemArchitecture:J.arch(),cpuCount:W.length,cpuModel:W.length?W[0].model:null,cpuSpeed:W.length?W[0].speed:null,memory:J.totalmem(),isWSL:await Or(),isDocker:await xR(),isTTY:typeof process<"u"&&process.stdout?process.stdout.isTTY:null}}catch(J){return{systemPlatform:null,systemRelease:null,systemArchitecture:null,cpuCount:null,cpuModel:null,cpuSpeed:null,memory:null,isWSL:null,isDocker:null,isTTY:null}}}var HO;async function Dr(){if(A1()==="cloudflare")return!1;try{return(await gG("fs")).statSync("/.dockerenv"),!0}catch{return!1}}async function Mr(){if(A1()==="cloudflare")return!1;try{return(await gG("fs")).readFileSync("/proc/self/cgroup","utf8").includes("docker")}catch{return!1}}async function xR(){if(A1()==="cloudflare")return!1;if(HO===void 0)HO=await Dr()||await Mr();return HO}async function Or(){try{if(A1()==="cloudflare")return!1;if(typeof process>"u"||process?.platform!=="linux")return!1;let J=await gG("fs");if((await gG("os")).release().toLowerCase().includes("microsoft")){if(await kR())return!1;return!0}return J.readFileSync("/proc/version","utf8").toLowerCase().includes("microsoft")?!await kR():!1}catch{return!1}}var zO,Pr=async()=>{if(A1()==="cloudflare")return!1;try{return(await gG("fs")).statSync("/run/.containerenv"),!0}catch{return!1}};async function kR(){if(zO===void 0)zO=await Pr()||await xR();return zO}function vr(){return C6.CI!=="false"&&(("BUILD_ID"in C6)||("BUILD_NUMBER"in C6)||("CI"in C6)||("CI_APP_ID"in C6)||("CI_BUILD_ID"in C6)||("CI_BUILD_NUMBER"in C6)||("CI_NAME"in C6)||("CONTINUOUS_INTEGRATION"in C6)||("RUN_ID"in C6))}function jr(){if(typeof Deno<"u")return{name:"deno",version:Deno?.version?.deno??null};if(typeof Bun<"u")return{name:"bun",version:Bun?.version??null};if(typeof process<"u"&&process?.versions?.node)return{name:"node",version:process.versions.node??null};return{name:"edge",version:null}}function Sr(){return c6("NODE_ENV")==="production"?"production":vr()?"ci":UX()?"test":"development"}async function hR(J){let W=await y0("SHA-256").digest(J);return f4.encode(W)}var _r=(J)=>{return EY("a-z","A-Z","0-9")(J||32)},SX=null;async function gR(J){if(SX)return SX;let W=await Nr();if(W)return SX=await hR(J?J+W:W),SX;if(J)return SX=await hR(J),SX;return SX=_r(32),SX}async function NO(J,W){let X=J.telemetry?.debug||SH("BETTER_AUTH_TELEMETRY_DEBUG",!1),G=jD.BETTER_AUTH_TELEMETRY_ENDPOINT,Y=async(H)=>{if(W?.customTrack)await W.customTrack(H).catch(w6.error);else if(X)w6.info("telemetry event",JSON.stringify(H,null,2));else await Q6(G,{method:"POST",body:H}).catch(w6.error)},K=await(async()=>{let H=J.telemetry?.enabled!==void 0?J.telemetry.enabled:!1;return(SH("BETTER_AUTH_TELEMETRY",!1)||H)&&(W?.skipTestCheck||!UX())})(),w;if(K)w=await gR(J.baseURL),Y({type:"init",payload:{config:mR(J,W),runtime:jr(),database:await Ur(),framework:await Zr(),environment:Sr(),systemInfo:await Vr(),packageManager:Lr()},anonymousId:w});return{publish:async(H)=>{if(!K)return;if(!w)w=await gR(J.baseURL);await Y({type:H.type,payload:H.payload,anonymousId:w})}}}var uR="better-auth-secret-123456789";function cR(J){return!!J&&(typeof J==="object"||typeof J==="function")&&typeof J.then==="function"}async function Tr(J){let W=J.options,X=W.plugins||[],G=J,Y=[];for(let $ of X)if($.init){let K=$.init(G),w;if(cR(K))w=await K;else w=K;if(typeof w==="object"){if(w.options){let{databaseHooks:H,...z}=w.options;if(H)Y.push(H);W=V3(W,z)}if(w.context)G={...G,...w.context}}}return Y.push(W.databaseHooks),G.internalAdapter=aH(G.adapter,{options:W,logger:G.logger,hooks:Y.filter(($)=>$!==void 0),generateId:G.generateId}),G.options=W,{context:G}}function qr(J){let W=[];if(J.advanced?.crossSubDomainCookies?.enabled);return W}function Br(J){let W=IG(J.baseURL,J.basePath);if(!W)return[];let X=[new URL(W).origin];if(J.trustedOrigins&&Array.isArray(J.trustedOrigins))X.push(...J.trustedOrigins);let G=C6.BETTER_AUTH_TRUSTED_ORIGINS;if(G)X.push(...G.split(","));if(X.filter((Y)=>!Y).length)throw new Y6("A provided trusted origin is invalid, make sure your trusted origins list is properly defined.");return X}async function lR(J,W,X){if(!W.database)W=V3(W,{session:{cookieCache:{enabled:!0,strategy:"jwe",refreshCache:!0}},account:{storeStateStrategy:"cookie",storeAccountCookie:!0}});let G=W.plugins||[],Y=qr(W),$=QG(W.logger),K=IG(W.baseURL,W.basePath),w=W.secret||C6.BETTER_AUTH_SECRET||C6.AUTH_SECRET||uR;if(w===uR){if(TW)$.error("You are using the default secret. Please set `BETTER_AUTH_SECRET` in your environment variables or pass `secret` in your auth config.")}W={...W,secret:w,baseURL:K?new URL(K).origin:"",basePath:W.basePath||"/api/auth",plugins:G.concat(Y)},IR(W,$);let H=$R(W),z=O8(W),N=Object.entries(W.socialProviders||{}).map(([D,O])=>{if(O==null)return null;if(O.enabled===!1)return null;if(!O.clientId)$.warn(`Social provider ${D} is missing clientId or clientSecret`);let P=WO[D](O);return P.disableImplicitSignUp=O.disableImplicitSignUp,P}).filter((D)=>D!==null),U=({model:D,size:O})=>{if(typeof W.advanced?.generateId==="function")return W.advanced.generateId({model:D,size:O});if(typeof W?.advanced?.database?.generateId==="function")return W.advanced.database.generateId({model:D,size:O});return l4(O)},{publish:F}=await NO(W,{adapter:J.id,database:typeof W.database==="function"?"adapter":X(W.database)}),Z=Tr({appName:W.appName||"Better Auth",socialProviders:N,options:W,oauthConfig:{storeStateStrategy:W.account?.storeStateStrategy||"database",skipStateCookieCheck:!!W.account?.skipStateCookieCheck},tables:z,trustedOrigins:Br(W),baseURL:K||"",sessionConfig:{updateAge:W.session?.updateAge!==void 0?W.session.updateAge:86400,expiresIn:W.session?.expiresIn||604800,freshAge:W.session?.freshAge===void 0?86400:W.session.freshAge,cookieRefreshCache:(()=>{let D=W.session?.cookieCache?.refreshCache,O=W.session?.cookieCache?.maxAge||300;if(D===!1||D===void 0)return!1;if(D===!0)return{enabled:!0,updateAge:Math.floor(O*0.2)};return{enabled:!0,updateAge:D.updateAge!==void 0?D.updateAge:Math.floor(O*0.2)}})()},secret:w,rateLimit:{...W.rateLimit,enabled:W.rateLimit?.enabled??TW,window:W.rateLimit?.window||10,max:W.rateLimit?.max||100,storage:W.rateLimit?.storage||(W.secondaryStorage?"secondary-storage":"memory")},authCookies:H,logger:$,generateId:U,session:null,secondaryStorage:W.secondaryStorage,password:{hash:W.emailAndPassword?.password?.hash||gS,verify:W.emailAndPassword?.password?.verify||mS,config:{minPasswordLength:W.emailAndPassword?.minPasswordLength||8,maxPasswordLength:W.emailAndPassword?.maxPasswordLength||128},checkPassword:CR},setNewSession(D){this.newSession=D},newSession:null,adapter:J,internalAdapter:aH(J,{options:W,logger:$,hooks:W.databaseHooks?[W.databaseHooks]:[],generateId:U}),createAuthCookie:eM(W),async runMigrations(){throw new Y6("runMigrations will be set by the specific init implementation")},publishTelemetry:F,skipCSRFCheck:!!W.advanced?.disableCSRFCheck,skipOriginCheck:W.advanced?.disableOriginCheck!==void 0?W.advanced.disableOriginCheck:UX()?!0:!1}),L;if(cR(Z))({context:L}=await Z);else({context:L}=Z);return L}var pR=(J,W)=>{let X=W(J),{api:G}=hG(X,J);return{handler:async(Y)=>{let $=await X,K=$.options.basePath||"/api/auth";if(!$.options.baseURL){let H=IG(void 0,K,Y);if(H)$.baseURL=H,$.options.baseURL=oJ($.baseURL)||void 0;else throw new Y6("Could not get base URL from request. Please provide a valid base URL.")}$.trustedOrigins=[...J.trustedOrigins?Array.isArray(J.trustedOrigins)?J.trustedOrigins:await J.trustedOrigins(Y):[],$.options.baseURL];let{handler:w}=RR($,J);return MU($.adapter,()=>w(Y))},api:G,options:J,$context:X,$ERROR_CODES:{...J.plugins?.reduce((Y,$)=>{if($.$ERROR_CODES)return{...Y,...$.$ERROR_CODES};return Y},{}),...s}}};iX();m4();var Ar=async(J)=>{let W=await NM(J),G=await lR(W,J,(Y)=>jY(Y)||"unknown");return G.runMigrations=async function(){if(!J.database||"updateMany"in J.database)throw new Y6("Database is not provided or it's an adapter. Migrations are only supported with a database instance.");let{runMigrations:Y}=await a$(J);await Y()},G},FO=(J)=>{return pR(J,Ar)};kJ();$8();m4();y9();iX();CJ();Y8();J0();BW();jG();I8();var Er={proto:/"(?:_|\\u0{2}5[Ff]){2}(?:p|\\u0{2}70)(?:r|\\u0{2}72)(?:o|\\u0{2}6[Ff])(?:t|\\u0{2}74)(?:o|\\u0{2}6[Ff])(?:_|\\u0{2}5[Ff]){2}"\s*:/,constructor:/"(?:c|\\u0063)(?:o|\\u006[Ff])(?:n|\\u006[Ee])(?:s|\\u0073)(?:t|\\u0074)(?:r|\\u0072)(?:u|\\u0075)(?:c|\\u0063)(?:t|\\u0074)(?:o|\\u006[Ff])(?:r|\\u0072)"\s*:/,protoShort:/"__proto__"\s*:/,constructorShort:/"constructor"\s*:/},Ir=/^\s*["[{]|^\s*-?\d{1,16}(\.\d{1,17})?([Ee][+-]?\d+)?\s*$/,dR={true:!0,false:!1,null:null,undefined:void 0,nan:NaN,infinity:Number.POSITIVE_INFINITY,"-infinity":Number.NEGATIVE_INFINITY},Rr=/^(\d{4})-(\d{2})-(\d{2})T(\d{2}):(\d{2}):(\d{2})(?:\.(\d{1,7}))?(?:Z|([+-])(\d{2}):(\d{2}))$/;function Cr(J){return J instanceof Date&&!isNaN(J.getTime())}function br(J){let W=Rr.exec(J);if(!W)return null;let[,X,G,Y,$,K,w,H,z,N,U]=W,F=new Date(Date.UTC(parseInt(X,10),parseInt(G,10)-1,parseInt(Y,10),parseInt($,10),parseInt(K,10),parseInt(w,10),H?parseInt(H.padEnd(3,"0"),10):0));if(z){let Z=(parseInt(N,10)*60+parseInt(U,10))*(z==="+"?-1:1);F.setUTCMinutes(F.getUTCMinutes()+Z)}return Cr(F)?F:null}function kr(J,W={}){let{strict:X=!1,warnings:G=!1,reviver:Y,parseDates:$=!0}=W;if(typeof J!=="string")return J;let K=J.trim();if(K.length>0&&K[0]==='"'&&K.endsWith('"')&&!K.slice(1,-1).includes('"'))return K.slice(1,-1);let w=K.toLowerCase();if(w.length<=9&&w in dR)return dR[w];if(!Ir.test(K)){if(X)throw SyntaxError("[better-json] Invalid JSON");return J}if(Object.entries(Er).some(([H,z])=>{let N=z.test(K);if(N&&G)console.warn(`[better-json] Detected potential prototype pollution attempt using ${H} pattern`);return N})&&X)throw Error("[better-json] Potential prototype pollution attempt detected");try{return JSON.parse(K,(z,N)=>{if(z==="__proto__"||z==="constructor"&&N&&typeof N==="object"&&"prototype"in N){if(G)console.warn(`[better-json] Dropping "${z}" key to prevent prototype pollution`);return}if($&&typeof N==="string"){let U=br(N);if(U)return U}return Y?Y(z,N):N})}catch(H){if(X)throw H;return J}}function rR(J,W={strict:!0}){return kr(J,W)}var D3=rR;m4();function D5(J){return{authorize(W,X="AND"){let G=!1;for(let[Y,$]of Object.entries(W)){let K=J[Y];if(!K)return{success:!1,error:`You are not allowed to access resource: ${Y}`};if(Array.isArray($))G=$.every((w)=>K.includes(w));else if(typeof $==="object"){let w=$;if(w.connector==="OR")G=w.actions.some((H)=>K.includes(H));else G=w.actions.every((H)=>K.includes(H))}else throw new Y6("Invalid access control request");if(G&&X==="OR")return{success:G};if(!G&&X==="AND")return{success:!1,error:`unauthorized to access resource "${Y}"`}}if(G)return{success:G};return{success:!1,error:"Not authorized"}},statements:J}}function TX(J){return{newRole(W){return D5(W)},statements:J}}var hr={user:["create","list","set-role","ban","impersonate","delete","set-password","get","update"],session:["list","revoke","delete"]},nR=TX(hr),gr=nR.newRole({user:["create","list","set-role","ban","impersonate","delete","set-password","get","update"],session:["list","revoke","delete"]}),mr=nR.newRole({user:[],session:[]}),iR={admin:gr,user:mr};var r0=(J)=>{if(J.userId&&J.options?.adminUserIds?.includes(J.userId))return!0;if(!J.permissions&&!J.permission)return!1;let W=(J.role||J.options?.defaultRole||"user").split(","),X=J.options?.roles||iR;for(let G of W)if(X[G]?.authorize(J.permission??J.permissions)?.success)return!0;return!1};var M3={organization:["update","delete"],member:["create","update","delete"],invitation:["create","cancel"],team:["create","update","delete"],ac:["create","read","update","delete"]},O3=TX(M3),mG=O3.newRole({organization:["update"],invitation:["create","cancel"],member:["create","update","delete"],team:["create","update","delete"],ac:["create","read","update","delete"]}),aR=O3.newRole({organization:["update","delete"],member:["create","update","delete"],invitation:["create","cancel"],team:["create","update","delete"],ac:["create","read","update","delete"]}),tR=O3.newRole({organization:[],member:[],invitation:[],team:[],ac:["read"]}),P3={admin:mG,owner:aR,member:tR};var oR=(J,W)=>{if(!J.permissions&&!J.permission)return!1;let X=J.role.split(","),G=J.options.creatorRole||"owner",Y=X.includes(G),$=J.allowCreatorAllPermissions||!1;if(Y&&$)return!0;for(let K of X)if(W[K]?.authorize(J.permissions??J.permission)?.success)return!0;return!1},UO=new Map;W0();var v3=async(J)=>{let W=J.context.returned;if(!W)return null;if(W instanceof Response){if(W.status!==200)return null;return await W.clone().json()}if(W instanceof V)return null;return W};m4();X8();var c4=d6({FAILED_TO_CREATE_USER:"Failed to create user",USER_ALREADY_EXISTS:"User already exists.",USER_ALREADY_EXISTS_USE_ANOTHER_EMAIL:"User already exists. Use another email.",YOU_CANNOT_BAN_YOURSELF:"You cannot ban yourself",YOU_ARE_NOT_ALLOWED_TO_CHANGE_USERS_ROLE:"You are not allowed to change users role",YOU_ARE_NOT_ALLOWED_TO_CREATE_USERS:"You are not allowed to create users",YOU_ARE_NOT_ALLOWED_TO_LIST_USERS:"You are not allowed to list users",YOU_ARE_NOT_ALLOWED_TO_LIST_USERS_SESSIONS:"You are not allowed to list users sessions",YOU_ARE_NOT_ALLOWED_TO_BAN_USERS:"You are not allowed to ban users",YOU_ARE_NOT_ALLOWED_TO_IMPERSONATE_USERS:"You are not allowed to impersonate users",YOU_ARE_NOT_ALLOWED_TO_REVOKE_USERS_SESSIONS:"You are not allowed to revoke users sessions",YOU_ARE_NOT_ALLOWED_TO_DELETE_USERS:"You are not allowed to delete users",YOU_ARE_NOT_ALLOWED_TO_SET_USERS_PASSWORD:"You are not allowed to set users password",BANNED_USER:"You have been banned from this application",YOU_ARE_NOT_ALLOWED_TO_GET_USER:"You are not allowed to get user",NO_DATA_TO_UPDATE:"No data to update",YOU_ARE_NOT_ALLOWED_TO_UPDATE_USERS:"You are not allowed to update users",YOU_CANNOT_REMOVE_YOURSELF:"You cannot remove yourself",YOU_ARE_NOT_ALLOWED_TO_SET_NON_EXISTENT_VALUE:"You are not allowed to set a non-existent role value"}),fr={user:{fields:{role:{type:"string",required:!1,input:!1},banned:{type:"boolean",defaultValue:!1,required:!1,input:!1},banReason:{type:"string",required:!1,input:!1},banExpires:{type:"date",required:!1,input:!1}}},session:{fields:{impersonatedBy:{type:"string",required:!1}}}};function QO(J){return Array.isArray(J)?J.join(","):J}var ZO=(J)=>{let W={defaultRole:J?.defaultRole??"user",adminRoles:J?.adminRoles??["admin"],bannedUserMessage:J?.bannedUserMessage??"You have been banned from this application. Please contact support if you believe this is an error.",...J},X=u6(async(G)=>{let Y=await j6(G);if(!Y)throw new V("UNAUTHORIZED");return{session:Y}});return{id:"admin",init(){return{options:{databaseHooks:{user:{create:{async before(G){return{data:{role:J?.defaultRole??"user",...G}}}}},session:{create:{async before(G,Y){if(!Y)return;let $=await Y.context.internalAdapter.findUserById(G.userId);if($.banned){if($.banExpires&&new Date($.banExpires).getTime()<Date.now()){await Y.context.internalAdapter.updateUser(G.userId,{banned:!1,banReason:null,banExpires:null});return}if(Y&&(Y.path.startsWith("/callback")||Y.path.startsWith("/oauth2/callback"))){let K=Y.context.options.onAPIError?.errorURL||`${Y.context.baseURL}/error`;throw Y.redirect(`${K}?error=banned&error_description=${W.bannedUserMessage}`)}throw new V("FORBIDDEN",{message:W.bannedUserMessage,code:"BANNED_USER"})}}}}}}}},hooks:{after:[{matcher(G){return G.path==="/list-sessions"},handler:u6(async(G)=>{let Y=await v3(G);if(!Y)return;let $=Y.filter((K)=>{return!K.impersonatedBy});return G.json($)})}]},endpoints:{setRole:y("/admin/set-role",{method:"POST",body:c({userId:o6.string().meta({description:"The user id"}),role:Y0([j().meta({description:"The role to set. `admin` or `user` by default"}),P6(j().meta({description:"The roles to set. `admin` or `user` by default"}))]).meta({description:"The role to set, this can be a string or an array of strings. Eg: `admin` or `[admin, user]`"})}),requireHeaders:!0,use:[X],metadata:{openapi:{operationId:"setUserRole",summary:"Set the role of a user",description:"Set the role of a user",responses:{200:{description:"User role updated",content:{"application/json":{schema:{type:"object",properties:{user:{$ref:"#/components/schemas/User"}}}}}}}},$Infer:{body:{}}}},async(G)=>{if(!r0({userId:G.context.session.user.id,role:G.context.session.user.role,options:W,permissions:{user:["set-role"]}}))throw new V("FORBIDDEN",{message:c4.YOU_ARE_NOT_ALLOWED_TO_CHANGE_USERS_ROLE});let Y=W.roles;if(Y){let K=Array.isArray(G.body.role)?G.body.role:[G.body.role];for(let w of K)if(!Y[w])throw new V("BAD_REQUEST",{message:c4.YOU_ARE_NOT_ALLOWED_TO_SET_NON_EXISTENT_VALUE})}let $=await G.context.internalAdapter.updateUser(G.body.userId,{role:QO(G.body.role)});return G.json({user:$})}),getUser:y("/admin/get-user",{method:"GET",query:c({id:j().meta({description:"The id of the User"})}),use:[X],metadata:{openapi:{operationId:"getUser",summary:"Get an existing user",description:"Get an existing user",responses:{200:{description:"User",content:{"application/json":{schema:{type:"object",properties:{user:{$ref:"#/components/schemas/User"}}}}}}}}}},async(G)=>{let{id:Y}=G.query;if(!r0({userId:G.context.session.user.id,role:G.context.session.user.role,options:W,permissions:{user:["get"]}}))throw G.error("FORBIDDEN",{message:c4.YOU_ARE_NOT_ALLOWED_TO_GET_USER,code:"YOU_ARE_NOT_ALLOWED_TO_GET_USER"});let $=await G.context.internalAdapter.findUserById(Y);if(!$)throw new V("NOT_FOUND",{message:s.USER_NOT_FOUND});return A8(G.context.options,$)}),createUser:y("/admin/create-user",{method:"POST",body:c({email:j().meta({description:"The email of the user"}),password:j().meta({description:"The password of the user"}),name:j().meta({description:"The name of the user"}),role:Y0([j().meta({description:"The role of the user"}),P6(j().meta({description:"The roles of user"}))]).optional().meta({description:'A string or array of strings representing the roles to apply to the new user. Eg: "user"'}),data:T6(j(),R6()).optional().meta({description:"Extra fields for the user. Including custom additional fields."})}),metadata:{openapi:{operationId:"createUser",summary:"Create a new user",description:"Create a new user",responses:{200:{description:"User created",content:{"application/json":{schema:{type:"object",properties:{user:{$ref:"#/components/schemas/User"}}}}}}}},$Infer:{body:{}}}},async(G)=>{let Y=await j6(G);if(!Y&&(G.request||G.headers))throw G.error("UNAUTHORIZED");if(Y){if(!r0({userId:Y.user.id,role:Y.user.role,options:W,permissions:{user:["create"]}}))throw new V("FORBIDDEN",{message:c4.YOU_ARE_NOT_ALLOWED_TO_CREATE_USERS})}let $=G.body.email.toLowerCase();if(!B8().safeParse($).success)throw new V("BAD_REQUEST",{message:s.INVALID_EMAIL});if(await G.context.internalAdapter.findUserByEmail($))throw new V("BAD_REQUEST",{message:c4.USER_ALREADY_EXISTS_USE_ANOTHER_EMAIL});let K=await G.context.internalAdapter.createUser({email:$,name:G.body.name,role:(G.body.role&&QO(G.body.role))??J?.defaultRole??"user",...G.body.data});if(!K)throw new V("INTERNAL_SERVER_ERROR",{message:c4.FAILED_TO_CREATE_USER});let w=await G.context.password.hash(G.body.password);return await G.context.internalAdapter.linkAccount({accountId:K.id,providerId:"credential",password:w,userId:K.id}),G.json({user:K})}),adminUpdateUser:y("/admin/update-user",{method:"POST",body:c({userId:o6.string().meta({description:"The user id"}),data:T6(R6(),R6()).meta({description:"The user data to update"})}),use:[X],metadata:{openapi:{operationId:"updateUser",summary:"Update a user",description:"Update a user's details",responses:{200:{description:"User updated",content:{"application/json":{schema:{type:"object",properties:{user:{$ref:"#/components/schemas/User"}}}}}}}}}},async(G)=>{if(!r0({userId:G.context.session.user.id,role:G.context.session.user.role,options:W,permissions:{user:["update"]}}))throw G.error("FORBIDDEN",{message:c4.YOU_ARE_NOT_ALLOWED_TO_UPDATE_USERS,code:"YOU_ARE_NOT_ALLOWED_TO_UPDATE_USERS"});if(Object.keys(G.body.data).length===0)throw new V("BAD_REQUEST",{message:c4.NO_DATA_TO_UPDATE});if(G.body.data?.role)G.body.data.role=QO(G.body.data.role);let Y=await G.context.internalAdapter.updateUser(G.body.userId,G.body.data);return G.json(Y)}),listUsers:y("/admin/list-users",{method:"GET",use:[X],query:c({searchValue:j().optional().meta({description:'The value to search for. Eg: "some name"'}),searchField:O4(["email","name"]).meta({description:'The field to search in, defaults to email. Can be `email` or `name`. Eg: "name"'}).optional(),searchOperator:O4(["contains","starts_with","ends_with"]).meta({description:'The operator to use for the search. Can be `contains`, `starts_with` or `ends_with`. Eg: "contains"'}).optional(),limit:j().meta({description:"The number of users to return"}).or(_6()).optional(),offset:j().meta({description:"The offset to start from"}).or(_6()).optional(),sortBy:j().meta({description:"The field to sort by"}).optional(),sortDirection:O4(["asc","desc"]).meta({description:"The direction to sort by"}).optional(),filterField:j().meta({description:"The field to filter by"}).optional(),filterValue:j().meta({description:"The value to filter by"}).or(_6()).or(G4()).optional(),filterOperator:O4(["eq","ne","lt","lte","gt","gte","contains"]).meta({description:"The operator to use for the filter"}).optional()}),metadata:{openapi:{operationId:"listUsers",summary:"List users",description:"List users",responses:{200:{description:"List of users",content:{"application/json":{schema:{type:"object",properties:{users:{type:"array",items:{$ref:"#/components/schemas/User"}},total:{type:"number"},limit:{type:"number"},offset:{type:"number"}},required:["users","total"]}}}}}}}},async(G)=>{let Y=G.context.session;if(!r0({userId:G.context.session.user.id,role:Y.user.role,options:W,permissions:{user:["list"]}}))throw new V("FORBIDDEN",{message:c4.YOU_ARE_NOT_ALLOWED_TO_LIST_USERS});let $=[];if(G.query?.searchValue)$.push({field:G.query.searchField||"email",operator:G.query.searchOperator||"contains",value:G.query.searchValue});if(G.query?.filterValue)$.push({field:G.query.filterField||"email",operator:G.query.filterOperator||"eq",value:G.query.filterValue});try{let K=await G.context.internalAdapter.listUsers(Number(G.query?.limit)||void 0,Number(G.query?.offset)||void 0,G.query?.sortBy?{field:G.query.sortBy,direction:G.query.sortDirection||"asc"}:void 0,$.length?$:void 0),w=await G.context.internalAdapter.countTotalUsers($.length?$:void 0);return G.json({users:K,total:w,limit:Number(G.query?.limit)||void 0,offset:Number(G.query?.offset)||void 0})}catch(K){return G.json({users:[],total:0})}}),listUserSessions:y("/admin/list-user-sessions",{method:"POST",use:[X],body:c({userId:o6.string().meta({description:"The user id"})}),metadata:{openapi:{operationId:"listUserSessions",summary:"List user sessions",description:"List user sessions",responses:{200:{description:"List of user sessions",content:{"application/json":{schema:{type:"object",properties:{sessions:{type:"array",items:{$ref:"#/components/schemas/Session"}}}}}}}}}}},async(G)=>{let Y=G.context.session;if(!r0({userId:G.context.session.user.id,role:Y.user.role,options:W,permissions:{session:["list"]}}))throw new V("FORBIDDEN",{message:c4.YOU_ARE_NOT_ALLOWED_TO_LIST_USERS_SESSIONS});return{sessions:await G.context.internalAdapter.listSessions(G.body.userId)}}),unbanUser:y("/admin/unban-user",{method:"POST",body:c({userId:o6.string().meta({description:"The user id"})}),use:[X],metadata:{openapi:{operationId:"unbanUser",summary:"Unban a user",description:"Unban a user",responses:{200:{description:"User unbanned",content:{"application/json":{schema:{type:"object",properties:{user:{$ref:"#/components/schemas/User"}}}}}}}}}},async(G)=>{let Y=G.context.session;if(!r0({userId:G.context.session.user.id,role:Y.user.role,options:W,permissions:{user:["ban"]}}))throw new V("FORBIDDEN",{message:c4.YOU_ARE_NOT_ALLOWED_TO_BAN_USERS});let $=await G.context.internalAdapter.updateUser(G.body.userId,{banned:!1,banExpires:null,banReason:null,updatedAt:new Date});return G.json({user:$})}),banUser:y("/admin/ban-user",{method:"POST",body:c({userId:o6.string().meta({description:"The user id"}),banReason:j().meta({description:"The reason for the ban"}).optional(),banExpiresIn:_6().meta({description:"The number of seconds until the ban expires"}).optional()}),use:[X],metadata:{openapi:{operationId:"banUser",summary:"Ban a user",description:"Ban a user",responses:{200:{description:"User banned",content:{"application/json":{schema:{type:"object",properties:{user:{$ref:"#/components/schemas/User"}}}}}}}}}},async(G)=>{let Y=G.context.session;if(!r0({userId:G.context.session.user.id,role:Y.user.role,options:W,permissions:{user:["ban"]}}))throw new V("FORBIDDEN",{message:c4.YOU_ARE_NOT_ALLOWED_TO_BAN_USERS});if(!await G.context.internalAdapter.findUserById(G.body.userId))throw new V("NOT_FOUND",{message:s.USER_NOT_FOUND});if(G.body.userId===G.context.session.user.id)throw new V("BAD_REQUEST",{message:c4.YOU_CANNOT_BAN_YOURSELF});let $=await G.context.internalAdapter.updateUser(G.body.userId,{banned:!0,banReason:G.body.banReason||J?.defaultBanReason||"No reason",banExpires:G.body.banExpiresIn?Z4(G.body.banExpiresIn,"sec"):J?.defaultBanExpiresIn?Z4(J.defaultBanExpiresIn,"sec"):void 0,updatedAt:new Date});return await G.context.internalAdapter.deleteSessions(G.body.userId),G.json({user:$})}),impersonateUser:y("/admin/impersonate-user",{method:"POST",body:c({userId:o6.string().meta({description:"The user id"})}),use:[X],metadata:{openapi:{operationId:"impersonateUser",summary:"Impersonate a user",description:"Impersonate a user",responses:{200:{description:"Impersonation session created",content:{"application/json":{schema:{type:"object",properties:{session:{$ref:"#/components/schemas/Session"},user:{$ref:"#/components/schemas/User"}}}}}}}}}},async(G)=>{if(!r0({userId:G.context.session.user.id,role:G.context.session.user.role,options:W,permissions:{user:["impersonate"]}}))throw new V("FORBIDDEN",{message:c4.YOU_ARE_NOT_ALLOWED_TO_IMPERSONATE_USERS});let Y=await G.context.internalAdapter.findUserById(G.body.userId);if(!Y)throw new V("NOT_FOUND",{message:"User not found"});let $=await G.context.internalAdapter.createSession(Y.id,!0,{impersonatedBy:G.context.session.user.id,expiresAt:J?.impersonationSessionDuration?Z4(J.impersonationSessionDuration,"sec"):Z4(3600,"sec")},!0);if(!$)throw new V("INTERNAL_SERVER_ERROR",{message:c4.FAILED_TO_CREATE_USER});let K=G.context.authCookies;vJ(G);let w=await G.getSignedCookie(G.context.authCookies.dontRememberToken.name,G.context.secret),H=G.context.createAuthCookie("admin_session");return await G.setSignedCookie(H.name,`${G.context.session.session.token}:${w||""}`,G.context.secret,K.sessionToken.options),await k6(G,{session:$,user:Y},!0),G.json({session:$,user:Y})}),stopImpersonating:y("/admin/stop-impersonating",{method:"POST",requireHeaders:!0},async(G)=>{let Y=await j6(G);if(!Y)throw new V("UNAUTHORIZED");if(!Y.session.impersonatedBy)throw new V("BAD_REQUEST",{message:"You are not impersonating anyone"});let $=await G.context.internalAdapter.findUserById(Y.session.impersonatedBy);if(!$)throw new V("INTERNAL_SERVER_ERROR",{message:"Failed to find user"});let K=G.context.createAuthCookie("admin_session").name,w=await G.getSignedCookie(K,G.context.secret);if(!w)throw new V("INTERNAL_SERVER_ERROR",{message:"Failed to find admin session"});let[H,z]=w?.split(":"),N=await G.context.internalAdapter.findSession(H);if(!N||N.session.userId!==$.id)throw new V("INTERNAL_SERVER_ERROR",{message:"Failed to find admin session"});return await G.context.internalAdapter.deleteSession(Y.session.token),await k6(G,N,!!z),G.json(N)}),revokeUserSession:y("/admin/revoke-user-session",{method:"POST",body:c({sessionToken:j().meta({description:"The session token"})}),use:[X],metadata:{openapi:{operationId:"revokeUserSession",summary:"Revoke a user session",description:"Revoke a user session",responses:{200:{description:"Session revoked",content:{"application/json":{schema:{type:"object",properties:{success:{type:"boolean"}}}}}}}}}},async(G)=>{let Y=G.context.session;if(!r0({userId:G.context.session.user.id,role:Y.user.role,options:W,permissions:{session:["revoke"]}}))throw new V("FORBIDDEN",{message:c4.YOU_ARE_NOT_ALLOWED_TO_REVOKE_USERS_SESSIONS});return await G.context.internalAdapter.deleteSession(G.body.sessionToken),G.json({success:!0})}),revokeUserSessions:y("/admin/revoke-user-sessions",{method:"POST",body:c({userId:o6.string().meta({description:"The user id"})}),use:[X],metadata:{openapi:{operationId:"revokeUserSessions",summary:"Revoke all user sessions",description:"Revoke all user sessions",responses:{200:{description:"Sessions revoked",content:{"application/json":{schema:{type:"object",properties:{success:{type:"boolean"}}}}}}}}}},async(G)=>{let Y=G.context.session;if(!r0({userId:G.context.session.user.id,role:Y.user.role,options:W,permissions:{session:["revoke"]}}))throw new V("FORBIDDEN",{message:c4.YOU_ARE_NOT_ALLOWED_TO_REVOKE_USERS_SESSIONS});return await G.context.internalAdapter.deleteSessions(G.body.userId),G.json({success:!0})}),removeUser:y("/admin/remove-user",{method:"POST",body:c({userId:o6.string().meta({description:"The user id"})}),use:[X],metadata:{openapi:{operationId:"removeUser",summary:"Remove a user",description:"Delete a user and all their sessions and accounts. Cannot be undone.",responses:{200:{description:"User removed",content:{"application/json":{schema:{type:"object",properties:{success:{type:"boolean"}}}}}}}}}},async(G)=>{let Y=G.context.session;if(!r0({userId:G.context.session.user.id,role:Y.user.role,options:W,permissions:{user:["delete"]}}))throw new V("FORBIDDEN",{message:c4.YOU_ARE_NOT_ALLOWED_TO_DELETE_USERS});if(G.body.userId===G.context.session.user.id)throw new V("BAD_REQUEST",{message:c4.YOU_CANNOT_REMOVE_YOURSELF});if(!await G.context.internalAdapter.findUserById(G.body.userId))throw new V("NOT_FOUND",{message:"User not found"});return await G.context.internalAdapter.deleteUser(G.body.userId),G.json({success:!0})}),setUserPassword:y("/admin/set-user-password",{method:"POST",body:c({newPassword:j().nonempty("newPassword cannot be empty").meta({description:"The new password"}),userId:o6.string().nonempty("userId cannot be empty").meta({description:"The user id"})}),use:[X],metadata:{openapi:{operationId:"setUserPassword",summary:"Set a user's password",description:"Set a user's password",responses:{200:{description:"Password set",content:{"application/json":{schema:{type:"object",properties:{status:{type:"boolean"}}}}}}}}}},async(G)=>{if(!r0({userId:G.context.session.user.id,role:G.context.session.user.role,options:W,permissions:{user:["set-password"]}}))throw new V("FORBIDDEN",{message:c4.YOU_ARE_NOT_ALLOWED_TO_SET_USERS_PASSWORD});let{newPassword:Y,userId:$}=G.body,K=G.context.password.config.minPasswordLength;if(Y.length<K)throw G.context.logger.error("Password is too short"),new V("BAD_REQUEST",{message:s.PASSWORD_TOO_SHORT});let w=G.context.password.config.maxPasswordLength;if(Y.length>w)throw G.context.logger.error("Password is too long"),new V("BAD_REQUEST",{message:s.PASSWORD_TOO_LONG});let H=await G.context.password.hash(Y);return await G.context.internalAdapter.updatePassword($,H),G.json({status:!0})}),userHasPermission:y("/admin/has-permission",{method:"POST",body:c({userId:o6.string().optional().meta({description:'The user id. Eg: "user-id"'}),role:j().optional().meta({description:'The role to check permission for. Eg: "admin"'})}).and(Y0([c({permission:T6(j(),P6(j())),permissions:FX()}),c({permission:FX(),permissions:T6(j(),P6(j()))})])),metadata:{openapi:{description:"Check if the user has permission",requestBody:{content:{"application/json":{schema:{type:"object",properties:{permission:{type:"object",description:"The permission to check",deprecated:!0},permissions:{type:"object",description:"The permission to check"}},required:["permissions"]}}}},responses:{"200":{description:"Success",content:{"application/json":{schema:{type:"object",properties:{error:{type:"string"},success:{type:"boolean"}},required:["success"]}}}}}},$Infer:{body:{}}}},async(G)=>{if(!G.body?.permission&&!G.body?.permissions)throw new V("BAD_REQUEST",{message:"invalid permission check. no permission(s) were passed."});let Y=await j6(G);if(!Y&&(G.request||G.headers))throw new V("UNAUTHORIZED");if(!Y&&!G.body.userId&&!G.body.role)throw new V("BAD_REQUEST",{message:"user id or role is required"});let $=Y?.user||(G.body.role?{id:G.body.userId||"",role:G.body.role}:null)||await G.context.internalAdapter.findUserById(G.body.userId);if(!$)throw new V("BAD_REQUEST",{message:"user not found"});let K=r0({userId:$.id,role:$.role,options:J,permissions:G.body.permissions??G.body.permission});return G.json({error:null,success:K})})},$ERROR_CODES:c4,schema:G8(fr,W.schema),options:J}};Y8();var ET6=d6({INVALID_EMAIL_FORMAT:"Email was not generated in a valid format",FAILED_TO_CREATE_USER:"Failed to create user",COULD_NOT_CREATE_SESSION:"Could not create session",ANONYMOUS_USERS_CANNOT_SIGN_IN_AGAIN_ANONYMOUSLY:"Anonymous users cannot sign in again anonymously"});Y8();J0();I8();J0();J0();kJ();m4();D1();f0();tX();var LO=(J,W)=>{return{getAllKeys:async(X)=>{if(W?.adapter?.getJwks)return await W.adapter.getJwks(X);return await J.findMany({model:"jwks"})},getLatestKey:async(X)=>{if(W?.adapter?.getJwks)return(await W.adapter.getJwks(X))?.sort((G,Y)=>Y.createdAt.getTime()-G.createdAt.getTime())[0];return(await J.findMany({model:"jwks"}))?.sort((G,Y)=>Y.createdAt.getTime()-G.createdAt.getTime())[0]},createJwk:async(X,G)=>{if(W?.adapter?.createJwk)return await W.adapter.createJwk(G,X);return await J.create({model:"jwks",data:{...G,createdAt:new Date}})}}};var sR=60,eR=sR*60,VO=eR*24,yr=VO*7,xr=VO*365.25,ur=/^(\+|\-)? ?(\d+|\d+\.\d+) ?(seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)(?: (ago|from now))?$/i;function cr(J){let W=ur.exec(J);if(!W||W[4]&&W[1])throw TypeError("Invalid time period format");let X=parseFloat(W[2]),G=W[3].toLowerCase(),Y;switch(G){case"sec":case"secs":case"second":case"seconds":case"s":Y=Math.round(X);break;case"minute":case"minutes":case"min":case"mins":case"m":Y=Math.round(X*sR);break;case"hour":case"hours":case"hr":case"hrs":case"h":Y=Math.round(X*eR);break;case"day":case"days":case"d":Y=Math.round(X*VO);break;case"week":case"weeks":case"w":Y=Math.round(X*yr);break;default:Y=Math.round(X*xr);break}if(W[1]==="-"||W[4]==="ago")return-Y;return Y}function lr(J,W){if(typeof J==="number")return J;else if(J instanceof Date)return Math.floor(J.getTime()/1000);else return W+cr(J)}async function JC(J){let{alg:W,...X}=J?.jwks?.keyPairConfig??{alg:"EdDSA",crv:"Ed25519"},{publicKey:G,privateKey:Y}=await GM(W,{...X,extractable:!0});return{publicWebKey:await DX(G),privateWebKey:await DX(Y),alg:W,cfg:X}}async function WC(J,W){let{publicWebKey:X,privateWebKey:G,alg:Y,cfg:$}=await JC(W),K=JSON.stringify(G),w=!W?.jwks?.disablePrivateKeyEncryption,H={alg:Y,...$&&"crv"in $?{crv:$.crv}:{},publicKey:JSON.stringify(X),privateKey:w?JSON.stringify(await UJ({key:J.context.secret,data:K})):K,createdAt:new Date,...W?.jwks?.rotationInterval?{expiresAt:new Date(Date.now()+W.jwks.rotationInterval*1000)}:{}};return await LO(J.context.adapter,W).createJwk(J,H)}async function pr(J,W){let{options:X,payload:G}=W,Y=Math.floor(Date.now()/1000),$=G.iat,K=G.exp,w=lr(X?.jwt?.expirationTime??"15m",$??Y);K=K??w;let{nbf:H,iss:z}=G,N=X?.jwt?.issuer??J.context.options.baseURL,U=G.aud,F=X?.jwt?.audience??J.context.options.baseURL;if(X?.jwt?.sign){let _={...G,iat:$,exp:K,nbf:H,iss:z??N,aud:U??F};return X.jwt.sign(_)}let Z=await LO(J.context.adapter,X).getLatestKey(J);if(!Z||Z.expiresAt&&Z.expiresAt<new Date)Z=await WC(J,X);let L=!X?.jwks?.disablePrivateKeyEncryption?await QJ({key:J.context.secret,data:JSON.parse(Z.privateKey)}).catch(()=>{throw new Y6("Failed to decrypt private key. Make sure the secret currently in use is the same as the one used to encrypt the private key. If you are using a different secret, either clean up your JWKS or disable private key encryption.")}):Z.privateKey,D=Z.alg??X?.jwks?.keyPairConfig?.alg??"EdDSA",O=await VJ(JSON.parse(L),D),P=new iJ(G).setProtectedHeader({alg:D,kid:Z.id}).setExpirationTime(K).setIssuer(z??N).setAudience(U??F);if($)P.setIssuedAt($);if(G.sub)P.setSubject(G.sub);if(G.nbf)P.setNotBefore(G.nbf);if(G.jti)P.setJti(G.jti);return await P.sign(O)}async function DO(J,W){let X=!W?.jwt?.definePayload?J.context.session.user:await W?.jwt.definePayload(J.context.session);return await pr(J,{options:W,payload:{iat:Math.floor(Date.now()/1000),...X,sub:await W?.jwt?.getSubject?.(J.context.session)??J.context.session.user.id}})}async function MO(J,W){let X=await v8();try{let G=J.split(".");if(G.length!==3)return null;let Y=new TextDecoder().decode(f4.decode(G[0])),$=JSON.parse(Y).kid;if(!$)return X.context.logger.debug("JWT missing kid in header"),null;let K=await LO(X.context.adapter,W).getAllKeys(X);if(!K||K.length===0)return X.context.logger.debug("No JWKS keys available"),null;let w=K.find((z)=>z.id===$);if(!w)return X.context.logger.debug(`No JWKS key found for kid: ${$}`),null;let{payload:H}=await R8(J,await VJ(JSON.parse(w.publicKey),w.alg??W?.jwks?.keyPairConfig?.alg??"EdDSA"),{issuer:W?.jwt?.issuer??X.context.options.baseURL});if(!H.sub||!H.aud)return null;return H}catch(G){return X.context.logger.debug("JWT verification failed",G),null}}kJ();W0();X8();QW();D1();f0();var dr=class extends V{},rr=class extends dr{constructor(J,W){super("BAD_REQUEST",{message:"invalid_request",error_description:J,error_detail:W})}};function O5(J){let W=J.split(" ").map((G)=>G.trim()),X=new Set;for(let G of W)if(G==="login"||G==="consent"||G==="select_account"||G==="none")X.add(G);if(X.has("none")&&X.size>1)throw new rr("prompt none must only be used alone");return new Set(X)}function E1(J,W,X){return`${J.includes("?")?"&":"?"}error=${W}&error_description=${X}`}function M5(J,W,X){return E1(J.context.options.onAPIError?.errorURL||`${J.context.baseURL}/error`,W,X)}async function XC(J,W){let X=(T)=>{if(J.request?.headers.get("sec-fetch-mode")==="cors")return J.json({redirect:!0,url:T});else throw J.redirect(T)},G={codeExpiresIn:600,defaultScope:"openid",...W,scopes:["openid","profile","email","offline_access",...W?.scopes||[]]};if(!J.request)throw new V("UNAUTHORIZED",{error_description:"request not found",error:"invalid_request"});let Y=await j6(J);if(!Y){let T=J.query;if(O5(T.prompt??"").has("none")&&T.redirect_uri)return X(E1(T.redirect_uri,"login_required","Authentication required but prompt is none"));await J.setSignedCookie("oidc_login_prompt",JSON.stringify(J.query),J.context.secret,{maxAge:600,path:"/",sameSite:"lax"});let v=J.request.url?.split("?")[1];return X(`${W.loginPage}?${v}`)}let $=J.query;if(!$.client_id){let T=M5(J,"invalid_client","client_id is required");throw J.redirect(T)}if(!$.response_type){let T=M5(J,"invalid_request","response_type is required");throw J.redirect(T)}let K=await qX(J.query.client_id,W.trustedClients||[]);if(!K){let T=M5(J,"invalid_client","client_id is required");throw J.redirect(T)}let w=K.redirectUrls.find((T)=>T===J.query.redirect_uri);if(!w||!$.redirect_uri)throw new V("BAD_REQUEST",{message:"Invalid redirect URI"});if(K.disabled){let T=M5(J,"client_disabled","client is disabled");throw J.redirect(T)}if($.response_type!=="code"){let T=M5(J,"unsupported_response_type","unsupported response type");throw J.redirect(T)}let H=$.scope?.split(" ").filter((T)=>T)||G.defaultScope.split(" "),z=H.filter((T)=>{return!G.scopes.includes(T)});if(z.length)return X(E1($.redirect_uri,"invalid_scope",`The following scopes are invalid: ${z.join(", ")}`));if((!$.code_challenge||!$.code_challenge_method)&&W.requirePKCE)return X(E1($.redirect_uri,"invalid_request","pkce is required"));if(!$.code_challenge_method)$.code_challenge_method="plain";if(!["s256",W.allowPlainCodeChallengeMethod?"plain":"s256"].includes($.code_challenge_method?.toLowerCase()||""))return X(E1($.redirect_uri,"invalid_request","invalid code_challenge method"));let N=t6(32,"a-z","A-Z","0-9"),U=G.codeExpiresIn*1000,F=new Date(Date.now()+U),Z=K.skipConsent,L=await J.context.adapter.findOne({model:"oauthConsent",where:[{field:"clientId",value:K.clientId},{field:"userId",value:Y.user.id}]}).then((T)=>{if(!T?.consentGiven)return!1;let v=T.scopes?T.scopes.split(" "):[];return H.every((q)=>v.includes(q))}),D=O5($.prompt??"");if(D.has("none")){if(!Z&&!L)return X(E1($.redirect_uri,"consent_required","Consent required but prompt is none"))}let O=D.has("login");if($.max_age!==void 0){let T=Number($.max_age);if(Number.isInteger(T)&&T>=0){if((Date.now()-new Date(Y.session.createdAt).getTime())/1000>T)O=!0}}let P=!Z&&(!L||D.has("consent"));try{await J.context.internalAdapter.createVerificationValue({value:JSON.stringify({clientId:K.clientId,redirectURI:$.redirect_uri,scope:H,userId:Y.user.id,authTime:new Date(Y.session.createdAt).getTime(),requireConsent:P,state:P?$.state:null,codeChallenge:$.code_challenge,codeChallengeMethod:$.code_challenge_method,nonce:$.nonce}),identifier:N,expiresAt:F})}catch(T){return X(E1($.redirect_uri,"server_error","An error occurred while processing the request"))}if(O)return await J.setSignedCookie("oidc_login_prompt",JSON.stringify(J.query),J.context.secret,{maxAge:600,path:"/",sameSite:"lax"}),await J.setSignedCookie("oidc_consent_prompt",N,J.context.secret,{maxAge:600,path:"/",sameSite:"lax"}),X(`${W.loginPage}?${new URLSearchParams({client_id:K.clientId,code:N,state:$.state}).toString()}`);if(!P){let T=new URL(w);return T.searchParams.set("code",N),T.searchParams.set("state",J.query.state),X(T.toString())}if(W?.consentPage){await J.setSignedCookie("oidc_consent_prompt",N,J.context.secret,{maxAge:600,path:"/",sameSite:"lax"});let T=new URLSearchParams;return T.set("consent_code",N),T.set("client_id",K.clientId),T.set("scope",H.join(" ")),X(`${W.consentPage}?${T.toString()}`)}let _=W?.getConsentHTML;if(!_)throw new V("INTERNAL_SERVER_ERROR",{message:"No consent page provided"});return new Response(_({scopes:H,clientMetadata:K.metadata,clientIcon:K?.icon,clientId:K.clientId,clientName:K.name,code:N}),{headers:{"content-type":"text/html"}})}var Jq6=c({clientId:j(),clientSecret:j().optional(),type:O4(["web","native","user-agent-based","public"]),name:j(),icon:j().optional(),metadata:j().optional(),disabled:G4().optional().default(!1),redirectUrls:j(),userId:j().optional(),createdAt:X0(),updatedAt:X0()}),PO={oauthApplication:{modelName:"oauthApplication",fields:{name:{type:"string"},icon:{type:"string",required:!1},metadata:{type:"string",required:!1},clientId:{type:"string",unique:!0},clientSecret:{type:"string",required:!1},redirectUrls:{type:"string"},type:{type:"string"},disabled:{type:"boolean",required:!1,defaultValue:!1},userId:{type:"string",required:!1,references:{model:"user",field:"id",onDelete:"cascade"},index:!0},createdAt:{type:"date"},updatedAt:{type:"date"}}},oauthAccessToken:{modelName:"oauthAccessToken",fields:{accessToken:{type:"string",unique:!0},refreshToken:{type:"string",unique:!0},accessTokenExpiresAt:{type:"date"},refreshTokenExpiresAt:{type:"date"},clientId:{type:"string",references:{model:"oauthApplication",field:"clientId",onDelete:"cascade"},index:!0},userId:{type:"string",required:!1,references:{model:"user",field:"id",onDelete:"cascade"},index:!0},scopes:{type:"string"},createdAt:{type:"date"},updatedAt:{type:"date"}}},oauthConsent:{modelName:"oauthConsent",fields:{clientId:{type:"string",references:{model:"oauthApplication",field:"clientId",onDelete:"cascade"},index:!0},userId:{type:"string",references:{model:"user",field:"id",onDelete:"cascade"},index:!0},scopes:{type:"string"},createdAt:{type:"date"},updatedAt:{type:"date"},consentGiven:{type:"boolean"}}}},YC=async(J)=>{let W=await y0("SHA-256").digest(new TextEncoder().encode(J));return L0.encode(new Uint8Array(W),{padding:!1})},OO=(J)=>{return J.context.options.plugins?.find((W)=>W.id==="jwt")};async function qX(J,W=[]){let{context:{adapter:X}}=await v8(),G=W.find((Y)=>Y.clientId===J);if(G)return G;return X.findOne({model:"oauthApplication",where:[{field:"clientId",value:J}]}).then((Y)=>{if(!Y)return null;return{clientId:Y.clientId,clientSecret:Y.clientSecret,type:Y.type,name:Y.name,icon:Y.icon,disabled:Y.disabled,redirectUrls:(Y.redirectUrls??"").split(","),metadata:Y.metadata?JSON.parse(Y.metadata):{}}})}var GC=(J,W)=>{let X=OO(J),G=X&&X.options?.jwt&&X.options.jwt.issuer?X.options.jwt.issuer:J.context.options.baseURL,Y=J.context.baseURL,$=W?.useJWTPlugin?["RS256","EdDSA","none"]:["HS256","none"];return{issuer:G,authorization_endpoint:`${Y}/oauth2/authorize`,token_endpoint:`${Y}/oauth2/token`,userinfo_endpoint:`${Y}/oauth2/userinfo`,jwks_uri:`${Y}/jwks`,registration_endpoint:`${Y}/oauth2/register`,end_session_endpoint:`${Y}/oauth2/endsession`,scopes_supported:["openid","profile","email","offline_access"],response_types_supported:["code"],response_modes_supported:["query"],grant_types_supported:["authorization_code","refresh_token"],acr_values_supported:["urn:mace:incommon:iap:silver","urn:mace:incommon:iap:bronze"],subject_types_supported:["public"],id_token_signing_alg_values_supported:$,token_endpoint_auth_methods_supported:["client_secret_basic","client_secret_post","none"],code_challenge_methods_supported:["S256"],claims_supported:["sub","iss","aud","exp","nbf","iat","jti","email","email_verified","name"],...W?.metadata}},vO=(J)=>{let W={oauthClient:"oauthApplication",oauthAccessToken:"oauthAccessToken",oauthConsent:"oauthConsent"},X={codeExpiresIn:600,defaultScope:"openid",accessTokenExpiresIn:3600,refreshTokenExpiresIn:604800,allowPlainCodeChallengeMethod:!0,storeClientSecret:"plain",...J,scopes:["openid","profile","email","offline_access",...J?.scopes||[]]},G=J.trustedClients||[];async function Y(K,w){if(X.storeClientSecret==="encrypted")return await UJ({key:K.context.secret,data:w});if(X.storeClientSecret==="hashed")return await YC(w);if(typeof X.storeClientSecret==="object"&&"hash"in X.storeClientSecret)return await X.storeClientSecret.hash(w);if(typeof X.storeClientSecret==="object"&&"encrypt"in X.storeClientSecret)return await X.storeClientSecret.encrypt(w);return w}async function $(K,w,H){if(X.storeClientSecret==="encrypted")return await QJ({key:K.context.secret,data:w})===H;if(X.storeClientSecret==="hashed")return await YC(H)===w;if(typeof X.storeClientSecret==="object"&&"hash"in X.storeClientSecret)return await X.storeClientSecret.hash(H)===w;if(typeof X.storeClientSecret==="object"&&"decrypt"in X.storeClientSecret)return await X.storeClientSecret.decrypt(w)===H;return H===w}return{id:"oidc",hooks:{after:[{matcher(){return!0},handler:u6(async(K)=>{let w=await K.getSignedCookie("oidc_login_prompt",K.context.secret),H=K.context.authCookies.sessionToken.name,z=vX(K.context.responseHeaders?.get("set-cookie")||""),N=z.has(H);if(!w||!N)return;K.setCookie("oidc_login_prompt","",{maxAge:0});let U=z.get(H)?.value?.split(".")[0];if(!U)return;let F=await K.context.internalAdapter.findSession(U)||K.context.newSession;if(!F)return;K.query=JSON.parse(w);let Z=O5(String(K.query?.prompt));if(Z.has("login")){let L=new Set(Z);L.delete("login"),K.query={...K.query,prompt:Array.from(L).join(" ")}}return K.context.session=F,await XC(K,X)})}]},endpoints:{getOpenIdConfig:y("/.well-known/openid-configuration",{method:"GET",operationId:"getOpenIdConfig",metadata:{isAction:!1}},async(K)=>{let w=GC(K,J);return K.json(w)}),oAuth2authorize:y("/oauth2/authorize",{method:"GET",operationId:"oauth2Authorize",query:T6(j(),R6()),metadata:{openapi:{description:"Authorize an OAuth2 request",responses:{"200":{description:"Authorization response generated successfully",content:{"application/json":{schema:{type:"object",additionalProperties:!0,description:"Authorization response, contents depend on the authorize function implementation"}}}}}}}},async(K)=>{return XC(K,X)}),oAuthConsent:y("/oauth2/consent",{method:"POST",operationId:"oauth2Consent",body:c({accept:G4(),consent_code:j().optional().nullish()}),use:[u4],metadata:{openapi:{description:"Handle OAuth2 consent. Supports both URL parameter-based flows (consent_code in body) and cookie-based flows (signed cookie).",requestBody:{required:!0,content:{"application/json":{schema:{type:"object",properties:{accept:{type:"boolean",description:"Whether the user accepts or denies the consent request"},consent_code:{type:"string",description:"The consent code from the authorization request. Optional if using cookie-based flow."}},required:["accept"]}}}},responses:{"200":{description:"Consent processed successfully",content:{"application/json":{schema:{type:"object",properties:{redirectURI:{type:"string",format:"uri",description:"The URI to redirect to, either with an authorization code or an error"}},required:["redirectURI"]}}}}}}}},async(K)=>{let w=K.body.consent_code||null;if(!w)w=await K.getSignedCookie("oidc_consent_prompt",K.context.secret);if(!w)throw new V("UNAUTHORIZED",{error_description:"consent_code is required (either in body or cookie)",error:"invalid_request"});let H=await K.context.internalAdapter.findVerificationValue(w);if(!H)throw new V("UNAUTHORIZED",{error_description:"Invalid code",error:"invalid_request"});if(H.expiresAt<new Date)throw new V("UNAUTHORIZED",{error_description:"Code expired",error:"invalid_request"});K.setCookie("oidc_consent_prompt","",{maxAge:0});let z=JSON.parse(H.value);if(!z.requireConsent)throw new V("UNAUTHORIZED",{error_description:"Consent not required",error:"invalid_request"});if(!K.body.accept)return await K.context.internalAdapter.deleteVerificationValue(H.id),K.json({redirectURI:`${z.redirectURI}?error=access_denied&error_description=User denied access`});let N=t6(32,"a-z","A-Z","0-9"),U=X.codeExpiresIn*1000,F=new Date(Date.now()+U);await K.context.internalAdapter.updateVerificationValue(H.id,{value:JSON.stringify({...z,requireConsent:!1}),identifier:N,expiresAt:F}),await K.context.adapter.create({model:W.oauthConsent,data:{clientId:z.clientId,userId:z.userId,scopes:z.scope.join(" "),consentGiven:!0,createdAt:new Date,updatedAt:new Date}});let Z=new URL(z.redirectURI);if(Z.searchParams.set("code",N),z.state)Z.searchParams.set("state",z.state);return K.json({redirectURI:Z.toString()})}),oAuth2token:y("/oauth2/token",{method:"POST",operationId:"oauth2Token",body:T6(R6(),R6()),metadata:{isAction:!1,allowedMediaTypes:["application/x-www-form-urlencoded","application/json"]}},async(K)=>{let{body:w}=K;if(!w)throw new V("BAD_REQUEST",{error_description:"request body not found",error:"invalid_request"});if(w instanceof FormData)w=Object.fromEntries(w.entries());if(!(w instanceof Object))throw new V("BAD_REQUEST",{error_description:"request body is not an object",error:"invalid_request"});let{client_id:H,client_secret:z}=w,N=K.request?.headers.get("authorization")||null;if(N&&!H&&!z&&N.startsWith("Basic "))try{let o=N.replace("Basic ",""),H6=new TextDecoder().decode(f4.decode(o));if(!H6.includes(":"))throw new V("UNAUTHORIZED",{error_description:"invalid authorization header format",error:"invalid_client"});let[O6,z6]=H6.split(":");if(!O6||!z6)throw new V("UNAUTHORIZED",{error_description:"invalid authorization header format",error:"invalid_client"});H=O6,z=z6}catch(o){throw new V("UNAUTHORIZED",{error_description:"invalid authorization header format",error:"invalid_client"})}let U=Date.now(),F=Math.floor(U/1000),Z=F+(X.accessTokenExpiresIn??3600),L=new Date(Z*1000),D=new Date((F+(X.refreshTokenExpiresIn??604800))*1000),{grant_type:O,code:P,redirect_uri:_,refresh_token:T,code_verifier:v}=w;if(O==="refresh_token"){if(!T)throw new V("BAD_REQUEST",{error_description:"refresh_token is required",error:"invalid_request"});let o=await K.context.adapter.findOne({model:W.oauthAccessToken,where:[{field:"refreshToken",value:T.toString()}]});if(!o)throw new V("UNAUTHORIZED",{error_description:"invalid refresh token",error:"invalid_grant"});if(o.clientId!==H?.toString())throw new V("UNAUTHORIZED",{error_description:"invalid client_id",error:"invalid_client"});if(o.refreshTokenExpiresAt<new Date)throw new V("UNAUTHORIZED",{error_description:"refresh token expired",error:"invalid_grant"});let H6=t6(32,"a-z","A-Z"),O6=t6(32,"a-z","A-Z");return await K.context.adapter.create({model:W.oauthAccessToken,data:{accessToken:H6,refreshToken:O6,accessTokenExpiresAt:L,refreshTokenExpiresAt:D,clientId:H.toString(),userId:o.userId,scopes:o.scopes,createdAt:new Date(F*1000),updatedAt:new Date(F*1000)}}),K.json({access_token:H6,token_type:"Bearer",expires_in:X.accessTokenExpiresIn,refresh_token:O6,scope:o.scopes})}if(!P)throw new V("BAD_REQUEST",{error_description:"code is required",error:"invalid_request"});if(J.requirePKCE&&!v)throw new V("BAD_REQUEST",{error_description:"code verifier is missing",error:"invalid_request"});let q=await K.context.internalAdapter.findVerificationValue(P.toString());if(!q)throw new V("UNAUTHORIZED",{error_description:"invalid code",error:"invalid_grant"});if(q.expiresAt<new Date)throw new V("UNAUTHORIZED",{error_description:"code expired",error:"invalid_grant"});if(await K.context.internalAdapter.deleteVerificationValue(q.id),!H)throw new V("UNAUTHORIZED",{error_description:"client_id is required",error:"invalid_client"});if(!O)throw new V("BAD_REQUEST",{error_description:"grant_type is required",error:"invalid_request"});if(O!=="authorization_code")throw new V("BAD_REQUEST",{error_description:"grant_type must be 'authorization_code'",error:"unsupported_grant_type"});if(!_)throw new V("BAD_REQUEST",{error_description:"redirect_uri is required",error:"invalid_request"});let S=await qX(H.toString(),G);if(!S)throw new V("UNAUTHORIZED",{error_description:"invalid client_id",error:"invalid_client"});if(S.disabled)throw new V("UNAUTHORIZED",{error_description:"client is disabled",error:"invalid_client"});let B=JSON.parse(q.value);if(B.clientId!==H.toString())throw new V("UNAUTHORIZED",{error_description:"invalid client_id",error:"invalid_client"});if(B.redirectURI!==_.toString())throw new V("UNAUTHORIZED",{error_description:"invalid redirect_uri",error:"invalid_client"});if(B.codeChallenge&&!v)throw new V("BAD_REQUEST",{error_description:"code verifier is missing",error:"invalid_request"});if(S.type==="public"){if(!v)throw new V("BAD_REQUEST",{error_description:"code verifier is required for public clients",error:"invalid_request"})}else{if(!S.clientSecret||!z)throw new V("UNAUTHORIZED",{error_description:"client_secret is required for confidential clients",error:"invalid_client"});if(!await $(K,S.clientSecret,z.toString()))throw new V("UNAUTHORIZED",{error_description:"invalid client_secret",error:"invalid_client"})}if((B.codeChallengeMethod==="plain"?v:await y0("SHA-256","base64urlnopad").digest(v))!==B.codeChallenge)throw new V("UNAUTHORIZED",{error_description:"code verification failed",error:"invalid_request"});let A=B.scope;await K.context.internalAdapter.deleteVerificationValue(q.id);let E=t6(32,"a-z","A-Z"),I=t6(32,"A-Z","a-z");await K.context.adapter.create({model:W.oauthAccessToken,data:{accessToken:E,refreshToken:I,accessTokenExpiresAt:L,refreshTokenExpiresAt:D,clientId:H.toString(),userId:B.userId,scopes:A.join(" "),createdAt:new Date(F*1000),updatedAt:new Date(F*1000)}});let m=await K.context.internalAdapter.findUserById(B.userId);if(!m)throw new V("UNAUTHORIZED",{error_description:"user not found",error:"invalid_grant"});let u={given_name:m.name.split(" ")[0],family_name:m.name.split(" ")[1],name:m.name,profile:m.image,updated_at:new Date(m.updatedAt).toISOString()},b={email:m.email,email_verified:m.emailVerified},g={...A.includes("profile")?u:{},...A.includes("email")?b:{}},f=J.getAdditionalUserInfoClaim?await J.getAdditionalUserInfoClaim(m,A,S):{},p={sub:m.id,aud:H.toString(),iat:F,auth_time:K.context.session?new Date(K.context.session.session.createdAt).getTime():void 0,nonce:B.nonce,acr:"urn:mace:incommon:iap:silver",...g,...f},l=Math.floor(Date.now()/1000)+X.accessTokenExpiresIn,a;if(J.useJWTPlugin){let o=OO(K);if(!o)throw K.context.logger.error("OIDC: `useJWTPlugin` is enabled but the JWT plugin is not available. Make sure you have the JWT Plugin in your plugins array or set `useJWTPlugin` to false."),new V("INTERNAL_SERVER_ERROR",{error_description:"JWT plugin is not enabled",error:"internal_server_error"});a=await DO({...K,context:{...K.context,session:{session:{id:t6(32,"a-z","A-Z"),createdAt:new Date(F*1000),updatedAt:new Date(F*1000),userId:m.id,expiresAt:L,token:E,ipAddress:K.request?.headers.get("x-forwarded-for")},user:m}}},{...o.options,jwt:{...o.options?.jwt,getSubject:()=>m.id,audience:H.toString(),issuer:o.options?.jwt?.issuer??K.context.options.baseURL,expirationTime:l,definePayload:()=>p}})}else a=await new iJ(p).setProtectedHeader({alg:"HS256"}).setIssuedAt(F).setExpirationTime(L).sign(new TextEncoder().encode(S.clientSecret));return K.json({access_token:E,token_type:"Bearer",expires_in:X.accessTokenExpiresIn,refresh_token:A.includes("offline_access")?I:void 0,scope:A.join(" "),id_token:A.includes("openid")?a:void 0},{headers:{"Cache-Control":"no-store",Pragma:"no-cache"}})}),oAuth2userInfo:y("/oauth2/userinfo",{method:"GET",operationId:"oauth2Userinfo",use:[u4],metadata:{isAction:!1,openapi:{description:"Get OAuth2 user information",responses:{"200":{description:"User information retrieved successfully",content:{"application/json":{schema:{type:"object",properties:{sub:{type:"string",description:"Subject identifier (user ID)"},email:{type:"string",format:"email",nullable:!0,description:"User's email address, included if 'email' scope is granted"},name:{type:"string",nullable:!0,description:"User's full name, included if 'profile' scope is granted"},picture:{type:"string",format:"uri",nullable:!0,description:"User's profile picture URL, included if 'profile' scope is granted"},given_name:{type:"string",nullable:!0,description:"User's given name, included if 'profile' scope is granted"},family_name:{type:"string",nullable:!0,description:"User's family name, included if 'profile' scope is granted"},email_verified:{type:"boolean",nullable:!0,description:"Whether the email is verified, included if 'email' scope is granted"}},required:["sub"]}}}}}}}},async(K)=>{if(!K.request)throw new V("UNAUTHORIZED",{error_description:"request not found",error:"invalid_request"});let w=K.request.headers.get("authorization");if(!w)throw new V("UNAUTHORIZED",{error_description:"authorization header not found",error:"invalid_request"});let H=w.replace("Bearer ",""),z=await K.context.adapter.findOne({model:W.oauthAccessToken,where:[{field:"accessToken",value:H}]});if(!z)throw new V("UNAUTHORIZED",{error_description:"invalid access token",error:"invalid_token"});if(z.accessTokenExpiresAt<new Date)throw new V("UNAUTHORIZED",{error_description:"The Access Token expired",error:"invalid_token"});let N=await qX(z.clientId,G);if(!N)throw new V("UNAUTHORIZED",{error_description:"client not found",error:"invalid_token"});let U=await K.context.internalAdapter.findUserById(z.userId);if(!U)throw new V("UNAUTHORIZED",{error_description:"user not found",error:"invalid_token"});let F=z.scopes.split(" "),Z={sub:U.id,email:F.includes("email")?U.email:void 0,name:F.includes("profile")?U.name:void 0,picture:F.includes("profile")?U.image:void 0,given_name:F.includes("profile")?U.name.split(" ")[0]:void 0,family_name:F.includes("profile")?U.name.split(" ")[1]:void 0,email_verified:F.includes("email")?U.emailVerified:void 0},L=J.getAdditionalUserInfoClaim?await J.getAdditionalUserInfoClaim(U,F,N):Z;return K.json({...Z,...L})}),registerOAuthApplication:y("/oauth2/register",{method:"POST",body:c({redirect_uris:P6(j()).meta({description:'A list of redirect URIs. Eg: ["https://client.example.com/callback"]'}),token_endpoint_auth_method:O4(["none","client_secret_basic","client_secret_post"]).meta({description:'The authentication method for the token endpoint. Eg: "client_secret_basic"'}).default("client_secret_basic").optional(),grant_types:P6(O4(["authorization_code","implicit","password","client_credentials","refresh_token","urn:ietf:params:oauth:grant-type:jwt-bearer","urn:ietf:params:oauth:grant-type:saml2-bearer"])).meta({description:'The grant types supported by the application. Eg: ["authorization_code"]'}).default(["authorization_code"]).optional(),response_types:P6(O4(["code","token"])).meta({description:'The response types supported by the application. Eg: ["code"]'}).default(["code"]).optional(),client_name:j().meta({description:'The name of the application. Eg: "My App"'}).optional(),client_uri:j().meta({description:'The URI of the application. Eg: "https://client.example.com"'}).optional(),logo_uri:j().meta({description:'The URI of the application logo. Eg: "https://client.example.com/logo.png"'}).optional(),scope:j().meta({description:'The scopes supported by the application. Separated by spaces. Eg: "profile email"'}).optional(),contacts:P6(j()).meta({description:'The contact information for the application. Eg: ["admin@example.com"]'}).optional(),tos_uri:j().meta({description:'The URI of the application terms of service. Eg: "https://client.example.com/tos"'}).optional(),policy_uri:j().meta({description:'The URI of the application privacy policy. Eg: "https://client.example.com/policy"'}).optional(),jwks_uri:j().meta({description:'The URI of the application JWKS. Eg: "https://client.example.com/jwks"'}).optional(),jwks:T6(R6(),R6()).meta({description:'The JWKS of the application. Eg: {"keys": [{"kty": "RSA", "alg": "RS256", "use": "sig", "n": "...", "e": "..."}]}'}).optional(),metadata:T6(R6(),R6()).meta({description:'The metadata of the application. Eg: {"key": "value"}'}).optional(),software_id:j().meta({description:'The software ID of the application. Eg: "my-software"'}).optional(),software_version:j().meta({description:'The software version of the application. Eg: "1.0.0"'}).optional(),software_statement:j().meta({description:"The software statement of the application."}).optional()}),metadata:{openapi:{description:"Register an OAuth2 application",responses:{"200":{description:"OAuth2 application registered successfully",content:{"application/json":{schema:{type:"object",properties:{name:{type:"string",description:"Name of the OAuth2 application"},icon:{type:"string",nullable:!0,description:"Icon URL for the application"},metadata:{type:"object",additionalProperties:!0,nullable:!0,description:"Additional metadata for the application"},clientId:{type:"string",description:"Unique identifier for the client"},clientSecret:{type:"string",description:"Secret key for the client"},redirectURLs:{type:"array",items:{type:"string",format:"uri"},description:"List of allowed redirect URLs"},type:{type:"string",description:"Type of the client",enum:["web"]},authenticationScheme:{type:"string",description:"Authentication scheme used by the client",enum:["client_secret"]},disabled:{type:"boolean",description:"Whether the client is disabled",enum:[!1]},userId:{type:"string",nullable:!0,description:"ID of the user who registered the client, null if registered anonymously"},createdAt:{type:"string",format:"date-time",description:"Creation timestamp"},updatedAt:{type:"string",format:"date-time",description:"Last update timestamp"}},required:["name","clientId","clientSecret","redirectURLs","type","authenticationScheme","disabled","createdAt","updatedAt"]}}}}}}}},async(K)=>{let w=K.body,H=await j6(K);if(!H&&!J.allowDynamicClientRegistration)throw new V("UNAUTHORIZED",{error:"invalid_token",error_description:"Authentication required for client registration"});if((!w.grant_types||w.grant_types.includes("authorization_code")||w.grant_types.includes("implicit"))&&(!w.redirect_uris||w.redirect_uris.length===0))throw new V("BAD_REQUEST",{error:"invalid_redirect_uri",error_description:"Redirect URIs are required for authorization_code and implicit grant types"});if(w.grant_types&&w.response_types){if(w.grant_types.includes("authorization_code")&&!w.response_types.includes("code"))throw new V("BAD_REQUEST",{error:"invalid_client_metadata",error_description:"When 'authorization_code' grant type is used, 'code' response type must be included"});if(w.grant_types.includes("implicit")&&!w.response_types.includes("token"))throw new V("BAD_REQUEST",{error:"invalid_client_metadata",error_description:"When 'implicit' grant type is used, 'token' response type must be included"})}let z=J.generateClientId?.()||t6(32,"a-z","A-Z"),N=J.generateClientSecret?.()||t6(32,"a-z","A-Z"),U=await Y(K,N),F=await K.context.adapter.create({model:W.oauthClient,data:{name:w.client_name,icon:w.logo_uri,metadata:w.metadata?JSON.stringify(w.metadata):null,clientId:z,clientSecret:U,redirectUrls:w.redirect_uris.join(","),type:"web",authenticationScheme:w.token_endpoint_auth_method||"client_secret_basic",disabled:!1,userId:H?.session.userId,createdAt:new Date,updatedAt:new Date}});return K.json({client_id:z,...F.type!=="public"?{client_secret:N,client_secret_expires_at:0}:{},client_id_issued_at:Math.floor(Date.now()/1000),client_secret_expires_at:0,redirect_uris:w.redirect_uris,token_endpoint_auth_method:w.token_endpoint_auth_method||"client_secret_basic",grant_types:w.grant_types||["authorization_code"],response_types:w.response_types||["code"],client_name:w.client_name,client_uri:w.client_uri,logo_uri:w.logo_uri,scope:w.scope,contacts:w.contacts,tos_uri:w.tos_uri,policy_uri:w.policy_uri,jwks_uri:w.jwks_uri,jwks:w.jwks,software_id:w.software_id,software_version:w.software_version,software_statement:w.software_statement,metadata:w.metadata},{status:201,headers:{"Cache-Control":"no-store",Pragma:"no-cache"}})}),getOAuthClient:y("/oauth2/client/:id",{method:"GET",use:[u4],metadata:{openapi:{description:"Get OAuth2 client details",responses:{"200":{description:"OAuth2 client retrieved successfully",content:{"application/json":{schema:{type:"object",properties:{clientId:{type:"string",description:"Unique identifier for the client"},name:{type:"string",description:"Name of the OAuth2 application"},icon:{type:"string",nullable:!0,description:"Icon URL for the application"}},required:["clientId","name"]}}}}}}}},async(K)=>{let w=await qX(K.params.id,G);if(!w)throw new V("NOT_FOUND",{error_description:"client not found",error:"not_found"});return K.json({clientId:w.clientId,name:w.name,icon:w.icon||null})}),endSession:y("/oauth2/endsession",{method:["GET","POST"],operationId:"oauth2EndSession",query:c({id_token_hint:j().optional(),logout_hint:j().optional(),client_id:j().optional(),post_logout_redirect_uri:j().optional(),state:j().optional(),ui_locales:j().optional()}).optional(),metadata:{isAction:!1,openapi:{description:"RP-Initiated Logout endpoint. Logs out the end-user and optionally redirects to a post-logout URI.",parameters:[{name:"id_token_hint",in:"query",description:"Previously issued ID Token passed as a hint about the End-User's current authenticated session",required:!1,schema:{type:"string"}},{name:"logout_hint",in:"query",description:"Hint to the Authorization Server about the End-User that is logging out",required:!1,schema:{type:"string"}},{name:"client_id",in:"query",description:"OAuth 2.0 Client Identifier. Required if post_logout_redirect_uri is used without id_token_hint",required:!1,schema:{type:"string"}},{name:"post_logout_redirect_uri",in:"query",description:"URL to which the RP is requesting that the End-User's User Agent be redirected after a logout has been performed",required:!1,schema:{type:"string",format:"uri"}},{name:"state",in:"query",description:"Opaque value used by the RP to maintain state between the logout request and the callback",required:!1,schema:{type:"string"}},{name:"ui_locales",in:"query",description:"End-User's preferred languages and scripts for the user interface",required:!1,schema:{type:"string"}}],responses:{"302":{description:"Redirect to post_logout_redirect_uri or logout confirmation page"},"200":{description:"Logout completed successfully"}}}}},async(K)=>{let{id_token_hint:w,logout_hint:H,client_id:z,post_logout_redirect_uri:N,state:U,ui_locales:F}=K.query||{},Z=null,L=null;if(w)try{let O=OO(K);if(O&&O.options&&J?.useJWTPlugin){let P=await MO(w,O.options);if(P)L=P.sub,Z=P.aud?typeof P.aud==="string"?P.aud:P.aud[0]:null}else if(z){let P=await qX(z,G);if(P&&P.clientSecret)try{let{payload:_}=await R8(w,new TextEncoder().encode(P.clientSecret));L=_.sub,Z=_.aud}catch(_){}}}catch(O){K.context.logger.debug("Invalid id_token_hint provided to end_session endpoint")}if(z){if(!await qX(z,G))throw new V("BAD_REQUEST",{error:"invalid_client",error_description:"Invalid client_id"});if(Z&&Z!==z)throw new V("BAD_REQUEST",{error:"invalid_request",error_description:"client_id does not match the ID Token's audience"});Z=z}if(N){if(!Z)throw new V("BAD_REQUEST",{error:"invalid_request",error_description:"client_id is required when using post_logout_redirect_uri without a valid id_token_hint"});let O=await qX(Z,G);if(!O)throw new V("BAD_REQUEST",{error:"invalid_client",error_description:"Invalid client"});if(!O.redirectUrls.some((P)=>N===P))throw new V("BAD_REQUEST",{error:"invalid_request",error_description:"post_logout_redirect_uri is not registered for this client"})}let D=await j6(K);if(L||D){let O=L||D?.user.id;if(O)await K.context.adapter.deleteMany({model:W.oauthAccessToken,where:[{field:"userId",value:O}]})}if(D)await K.context.internalAdapter.deleteSession(D.session.token),K.setSignedCookie(K.context.authCookies.sessionToken.name,"",K.context.secret,{maxAge:0});if(N)try{let O=new URL(N);if(U)O.searchParams.set("state",U);return K.redirect(O.toString())}catch(O){throw new V("BAD_REQUEST",{error:"invalid_request",error_description:"Invalid post_logout_redirect_uri format"})}return K.json({success:!0,message:"Logout successful"})})},schema:G8(PO,J?.schema),get options(){return X}}};$8();W0();X8();QW();D1();f0();tX();function SO(J){return`api-key:${J}`}function _O(J){return`api-key:by-id:${J}`}function j3(J){return`api-key:by-user:${J}`}function nr(J){return JSON.stringify({...J,createdAt:J.createdAt.toISOString(),updatedAt:J.updatedAt.toISOString(),expiresAt:J.expiresAt?.toISOString()??null,lastRefillAt:J.lastRefillAt?.toISOString()??null,lastRequest:J.lastRequest?.toISOString()??null})}function wC(J){if(!J||typeof J!=="string")return null;try{let W=JSON.parse(J);return{...W,createdAt:new Date(W.createdAt),updatedAt:new Date(W.updatedAt),expiresAt:W.expiresAt?new Date(W.expiresAt):null,lastRefillAt:W.lastRefillAt?new Date(W.lastRefillAt):null,lastRequest:W.lastRequest?new Date(W.lastRequest):null}}catch{return null}}function S5(J,W){if(W.customStorage)return W.customStorage;return J.context.secondaryStorage||null}function _3(J){if(J.expiresAt){let W=Date.now(),X=new Date(J.expiresAt).getTime(),G=Math.floor((X-W)/1000);if(G>0)return G}}async function $C(J,W,X){let G=SO(W);return wC(await X.get(G))}async function S3(J,W,X){let G=_O(W);return wC(await X.get(G))}async function T3(J,W,X,G){let Y=nr(W),$=W.key,K=W.id;await X.set(SO($),Y,G),await X.set(_O(K),Y,G);let w=j3(W.userId),H=await X.get(w),z=[];if(H&&typeof H==="string")try{z=JSON.parse(H)}catch{z=[]}else if(Array.isArray(H))z=H;if(!z.includes(K))z.push(K),await X.set(w,JSON.stringify(z))}async function ir(J,W,X){let{key:G,id:Y,userId:$}=W;await X.delete(SO(G)),await X.delete(_O(Y));let K=j3($),w=await X.get(K),H=[];if(w&&typeof w==="string")try{H=JSON.parse(w)}catch{H=[]}else if(Array.isArray(w))H=w;let z=H.filter((N)=>N!==Y);if(z.length===0)await X.delete(K);else await X.set(K,JSON.stringify(z))}async function ar(J,W,X){let G=S5(J,X);if(X.storage==="database")return await J.context.adapter.findOne({model:"apikey",where:[{field:"key",value:W}]});if(X.storage==="secondary-storage"&&X.fallbackToDatabase){if(G){let $=await $C(J,W,G);if($)return $}let Y=await J.context.adapter.findOne({model:"apikey",where:[{field:"key",value:W}]});if(Y&&G)await T3(J,Y,G,_3(Y));return Y}if(X.storage==="secondary-storage"){if(!G)return null;return await $C(J,W,G)}return await J.context.adapter.findOne({model:"apikey",where:[{field:"key",value:W}]})}async function TO(J,W,X){let G=S5(J,X);if(X.storage==="database")return await J.context.adapter.findOne({model:"apikey",where:[{field:"id",value:W}]});if(X.storage==="secondary-storage"&&X.fallbackToDatabase){if(G){let $=await S3(J,W,G);if($)return $}let Y=await J.context.adapter.findOne({model:"apikey",where:[{field:"id",value:W}]});if(Y&&G)await T3(J,Y,G,_3(Y));return Y}if(X.storage==="secondary-storage"){if(!G)return null;return await S3(J,W,G)}return await J.context.adapter.findOne({model:"apikey",where:[{field:"id",value:W}]})}async function j5(J,W,X){let G=S5(J,X),Y=_3(W);if(X.storage==="database")return;if(X.storage==="secondary-storage"){if(!G)throw Error("Secondary storage is required when storage mode is 'secondary-storage'");await T3(J,W,G,Y);return}}async function v5(J,W,X){let G=S5(J,X);if(X.storage==="database")return;if(X.storage==="secondary-storage"){if(!G)throw Error("Secondary storage is required when storage mode is 'secondary-storage'");await ir(J,W,G);return}}async function tr(J,W,X){let G=S5(J,X);if(X.storage==="database")return await J.context.adapter.findMany({model:"apikey",where:[{field:"userId",value:W}]});if(X.storage==="secondary-storage"&&X.fallbackToDatabase){let Y=j3(W);if(G){let K=await G.get(Y),w=[];if(K&&typeof K==="string")try{w=JSON.parse(K)}catch{w=[]}else if(Array.isArray(K))w=K;if(w.length>0){let H=[];for(let z of w){let N=await S3(J,z,G);if(N)H.push(N)}return H}}let $=await J.context.adapter.findMany({model:"apikey",where:[{field:"userId",value:W}]});if(G&&$.length>0){let K=[];for(let w of $)await T3(J,w,G,_3(w)),K.push(w.id);await G.set(Y,JSON.stringify(K))}return $}if(X.storage==="secondary-storage"){if(!G)return[];let Y=j3(W),$=await G.get(Y),K=[];if($&&typeof $==="string")try{K=JSON.parse($)}catch{return[]}else if(Array.isArray($))K=$;else return[];let w=[];for(let H of K){let z=await S3(J,H,G);if(z)w.push(z)}return w}return await J.context.adapter.findMany({model:"apikey",where:[{field:"userId",value:W}]})}function or({keyGenerator:J,opts:W,schema:X,deleteAllExpiredApiKeys:G}){return y("/api-key/create",{method:"POST",body:c({name:j().meta({description:"Name of the Api Key"}).optional(),expiresIn:_6().meta({description:"Expiration time of the Api Key in seconds"}).min(1).optional().nullable().default(null),userId:o6.string().meta({description:'User Id of the user that the Api Key belongs to. server-only. Eg: "user-id"'}).optional(),prefix:j().meta({description:"Prefix of the Api Key"}).regex(/^[a-zA-Z0-9_-]+$/,{message:"Invalid prefix format, must be alphanumeric and contain only underscores and hyphens."}).optional(),remaining:_6().meta({description:"Remaining number of requests. Server side only"}).min(0).optional().nullable().default(null),metadata:R6().optional(),refillAmount:_6().meta({description:"Amount to refill the remaining count of the Api Key. server-only. Eg: 100"}).min(1).optional(),refillInterval:_6().meta({description:"Interval to refill the Api Key in milliseconds. server-only. Eg: 1000"}).optional(),rateLimitTimeWindow:_6().meta({description:"The duration in milliseconds where each request is counted. Once the `maxRequests` is reached, the request will be rejected until the `timeWindow` has passed, at which point the `timeWindow` will be reset. server-only. Eg: 1000"}).optional(),rateLimitMax:_6().meta({description:"Maximum amount of requests allowed within a window. Once the `maxRequests` is reached, the request will be rejected until the `timeWindow` has passed, at which point the `timeWindow` will be reset. server-only. Eg: 100"}).optional(),rateLimitEnabled:G4().meta({description:"Whether the key has rate limiting enabled. server-only. Eg: true"}).optional(),permissions:T6(j(),P6(j())).meta({description:"Permissions of the Api Key."}).optional()}),metadata:{openapi:{description:"Create a new API key for a user",responses:{"200":{description:"API key created successfully",content:{"application/json":{schema:{type:"object",properties:{id:{type:"string",description:"Unique identifier of the API key"},createdAt:{type:"string",format:"date-time",description:"Creation timestamp"},updatedAt:{type:"string",format:"date-time",description:"Last update timestamp"},name:{type:"string",nullable:!0,description:"Name of the API key"},prefix:{type:"string",nullable:!0,description:"Prefix of the API key"},start:{type:"string",nullable:!0,description:"Starting characters of the key (if configured)"},key:{type:"string",description:"The full API key (only returned on creation)"},enabled:{type:"boolean",description:"Whether the key is enabled"},expiresAt:{type:"string",format:"date-time",nullable:!0,description:"Expiration timestamp"},userId:{type:"string",description:"ID of the user owning the key"},lastRefillAt:{type:"string",format:"date-time",nullable:!0,description:"Last refill timestamp"},lastRequest:{type:"string",format:"date-time",nullable:!0,description:"Last request timestamp"},metadata:{type:"object",nullable:!0,additionalProperties:!0,description:"Metadata associated with the key"},rateLimitMax:{type:"number",nullable:!0,description:"Maximum requests in time window"},rateLimitTimeWindow:{type:"number",nullable:!0,description:"Rate limit time window in milliseconds"},remaining:{type:"number",nullable:!0,description:"Remaining requests"},refillAmount:{type:"number",nullable:!0,description:"Amount to refill"},refillInterval:{type:"number",nullable:!0,description:"Refill interval in milliseconds"},rateLimitEnabled:{type:"boolean",description:"Whether rate limiting is enabled"},requestCount:{type:"number",description:"Current request count in window"},permissions:{type:"object",nullable:!0,additionalProperties:{type:"array",items:{type:"string"}},description:"Permissions associated with the key"}},required:["id","createdAt","updatedAt","key","enabled","userId","rateLimitEnabled","requestCount"]}}}}}}}},async(Y)=>{let{name:$,expiresIn:K,prefix:w,remaining:H,metadata:z,refillAmount:N,refillInterval:U,permissions:F,rateLimitMax:Z,rateLimitTimeWindow:L,rateLimitEnabled:D}=Y.body,O=await j6(Y),P=Y.request||Y.headers,_=P&&!O?null:O?.user||{id:Y.body.userId};if(!_?.id)throw new V("UNAUTHORIZED",{message:F6.UNAUTHORIZED_SESSION});if(O&&Y.body.userId&&O?.user.id!==Y.body.userId)throw new V("UNAUTHORIZED",{message:F6.UNAUTHORIZED_SESSION});if(P){if(N!==void 0||U!==void 0||Z!==void 0||L!==void 0||D!==void 0||F!==void 0||H!==null)throw new V("BAD_REQUEST",{message:F6.SERVER_ONLY_PROPERTY})}if(z){if(W.enableMetadata===!1)throw new V("BAD_REQUEST",{message:F6.METADATA_DISABLED});if(typeof z!=="object")throw new V("BAD_REQUEST",{message:F6.INVALID_METADATA_TYPE})}if(N&&!U)throw new V("BAD_REQUEST",{message:F6.REFILL_AMOUNT_AND_INTERVAL_REQUIRED});if(U&&!N)throw new V("BAD_REQUEST",{message:F6.REFILL_INTERVAL_AND_AMOUNT_REQUIRED});if(K){if(W.keyExpiration.disableCustomExpiresTime===!0)throw new V("BAD_REQUEST",{message:F6.KEY_DISABLED_EXPIRATION});let I=K/86400;if(W.keyExpiration.minExpiresIn>I)throw new V("BAD_REQUEST",{message:F6.EXPIRES_IN_IS_TOO_SMALL});else if(W.keyExpiration.maxExpiresIn<I)throw new V("BAD_REQUEST",{message:F6.EXPIRES_IN_IS_TOO_LARGE})}if(w){if(w.length<W.minimumPrefixLength)throw new V("BAD_REQUEST",{message:F6.INVALID_PREFIX_LENGTH});if(w.length>W.maximumPrefixLength)throw new V("BAD_REQUEST",{message:F6.INVALID_PREFIX_LENGTH})}if($){if($.length<W.minimumNameLength)throw new V("BAD_REQUEST",{message:F6.INVALID_NAME_LENGTH});if($.length>W.maximumNameLength)throw new V("BAD_REQUEST",{message:F6.INVALID_NAME_LENGTH})}else if(W.requireName)throw new V("BAD_REQUEST",{message:F6.NAME_REQUIRED});G(Y.context);let T=await J({length:W.defaultKeyLength,prefix:w||W.defaultPrefix}),v=W.disableKeyHashing?T:await q3(T),q=null;if(W.startingCharactersConfig.shouldStore)q=T.substring(0,W.startingCharactersConfig.charactersLength);let S=W.permissions?.defaultPermissions?typeof W.permissions.defaultPermissions==="function"?await W.permissions.defaultPermissions(_.id,Y):W.permissions.defaultPermissions:void 0,B=F?JSON.stringify(F):S?JSON.stringify(S):void 0,A={createdAt:new Date,updatedAt:new Date,name:$??null,prefix:w??W.defaultPrefix??null,start:q,key:v,enabled:!0,expiresAt:K?Z4(K,"sec"):W.keyExpiration.defaultExpiresIn?Z4(W.keyExpiration.defaultExpiresIn,"sec"):null,userId:_.id,lastRefillAt:null,lastRequest:null,metadata:null,rateLimitMax:Z??W.rateLimit.maxRequests??null,rateLimitTimeWindow:L??W.rateLimit.timeWindow??null,remaining:H===null?H:H??N??null,refillAmount:N??null,refillInterval:U??null,rateLimitEnabled:D===void 0?W.rateLimit.enabled??!0:D,requestCount:0,permissions:B};if(z)A.metadata=X.apikey.fields.metadata.transform.input(z);let E;if(W.storage==="secondary-storage"&&W.fallbackToDatabase)E=await Y.context.adapter.create({model:b8,data:A}),await j5(Y,E,W);else if(W.storage==="secondary-storage"){let I=Y.context.generateId({model:b8})??l4();E={...A,id:I},await j5(Y,E,W)}else E=await Y.context.adapter.create({model:b8,data:A});return Y.json({...E,key:T,metadata:z??null,permissions:E.permissions?l6(E.permissions):null})})}function sr({deleteAllExpiredApiKeys:J}){return y("/api-key/delete-all-expired-api-keys",{method:"POST",metadata:{SERVER_ONLY:!0,client:!1}},async(W)=>{try{await J(W.context,!0)}catch(X){return W.context.logger.error("[API KEY PLUGIN] Failed to delete expired API keys:",X),W.json({success:!1,error:X})}return W.json({success:!0,error:null})})}function er({opts:J,schema:W,deleteAllExpiredApiKeys:X}){return y("/api-key/delete",{method:"POST",body:c({keyId:j().meta({description:"The id of the Api Key"})}),use:[u4],metadata:{openapi:{description:"Delete an existing API key",requestBody:{content:{"application/json":{schema:{type:"object",properties:{keyId:{type:"string",description:"The id of the API key to delete"}},required:["keyId"]}}}},responses:{"200":{description:"API key deleted successfully",content:{"application/json":{schema:{type:"object",properties:{success:{type:"boolean",description:"Indicates if the API key was successfully deleted"}},required:["success"]}}}}}}}},async(G)=>{let{keyId:Y}=G.body,$=G.context.session;if($.user.banned===!0)throw new V("UNAUTHORIZED",{message:F6.USER_BANNED});let K=null;if(K=await TO(G,Y,J),!K||K.userId!==$.user.id)throw new V("NOT_FOUND",{message:F6.KEY_NOT_FOUND});try{if(J.storage==="secondary-storage"&&J.fallbackToDatabase)await v5(G,K,J),await G.context.adapter.delete({model:b8,where:[{field:"id",value:K.id}]});else if(J.storage==="database")await G.context.adapter.delete({model:b8,where:[{field:"id",value:K.id}]});else await v5(G,K,J)}catch(w){throw new V("INTERNAL_SERVER_ERROR",{message:w?.message})}return X(G.context),G.json({success:!0})})}function Jn({opts:J,schema:W,deleteAllExpiredApiKeys:X}){return y("/api-key/get",{method:"GET",query:c({id:j().meta({description:"The id of the Api Key"})}),use:[u4],metadata:{openapi:{description:"Retrieve an existing API key by ID",responses:{"200":{description:"API key retrieved successfully",content:{"application/json":{schema:{type:"object",properties:{id:{type:"string",description:"ID"},name:{type:"string",nullable:!0,description:"The name of the key"},start:{type:"string",nullable:!0,description:"Shows the first few characters of the API key, including the prefix. This allows you to show those few characters in the UI to make it easier for users to identify the API key."},prefix:{type:"string",nullable:!0,description:"The API Key prefix. Stored as plain text."},userId:{type:"string",description:"The owner of the user id"},refillInterval:{type:"number",nullable:!0,description:"The interval in milliseconds between refills of the `remaining` count. Example: 3600000 // refill every hour (3600000ms = 1h)"},refillAmount:{type:"number",nullable:!0,description:"The amount to refill"},lastRefillAt:{type:"string",format:"date-time",nullable:!0,description:"The last refill date"},enabled:{type:"boolean",description:"Sets if key is enabled or disabled",default:!0},rateLimitEnabled:{type:"boolean",description:"Whether the key has rate limiting enabled"},rateLimitTimeWindow:{type:"number",nullable:!0,description:"The duration in milliseconds"},rateLimitMax:{type:"number",nullable:!0,description:"Maximum amount of requests allowed within a window"},requestCount:{type:"number",description:"The number of requests made within the rate limit time window"},remaining:{type:"number",nullable:!0,description:"Remaining requests (every time api key is used this should updated and should be updated on refill as well)"},lastRequest:{type:"string",format:"date-time",nullable:!0,description:"When last request occurred"},expiresAt:{type:"string",format:"date-time",nullable:!0,description:"Expiry date of a key"},createdAt:{type:"string",format:"date-time",description:"created at"},updatedAt:{type:"string",format:"date-time",description:"updated at"},metadata:{type:"object",nullable:!0,additionalProperties:!0,description:"Extra metadata about the apiKey"},permissions:{type:"string",nullable:!0,description:"Permissions for the api key (stored as JSON string)"}},required:["id","userId","enabled","rateLimitEnabled","requestCount","createdAt","updatedAt"]}}}}}}}},async(G)=>{let{id:Y}=G.query,$=G.context.session,K=null;if(K=await TO(G,Y,J),K&&K.userId!==$.user.id)K=null;if(!K)throw new V("NOT_FOUND",{message:F6.KEY_NOT_FOUND});X(G.context),K.metadata=W.apikey.fields.metadata.transform.output(K.metadata);let{key:w,...H}=K;return G.json({...H,permissions:H.permissions?l6(H.permissions):null})})}function Wn({opts:J,schema:W,deleteAllExpiredApiKeys:X}){return y("/api-key/list",{method:"GET",use:[u4],metadata:{openapi:{description:"List all API keys for the authenticated user",responses:{"200":{description:"API keys retrieved successfully",content:{"application/json":{schema:{type:"array",items:{type:"object",properties:{id:{type:"string",description:"ID"},name:{type:"string",nullable:!0,description:"The name of the key"},start:{type:"string",nullable:!0,description:"Shows the first few characters of the API key, including the prefix. This allows you to show those few characters in the UI to make it easier for users to identify the API key."},prefix:{type:"string",nullable:!0,description:"The API Key prefix. Stored as plain text."},userId:{type:"string",description:"The owner of the user id"},refillInterval:{type:"number",nullable:!0,description:"The interval in milliseconds between refills of the `remaining` count. Example: 3600000 // refill every hour (3600000ms = 1h)"},refillAmount:{type:"number",nullable:!0,description:"The amount to refill"},lastRefillAt:{type:"string",format:"date-time",nullable:!0,description:"The last refill date"},enabled:{type:"boolean",description:"Sets if key is enabled or disabled",default:!0},rateLimitEnabled:{type:"boolean",description:"Whether the key has rate limiting enabled"},rateLimitTimeWindow:{type:"number",nullable:!0,description:"The duration in milliseconds"},rateLimitMax:{type:"number",nullable:!0,description:"Maximum amount of requests allowed within a window"},requestCount:{type:"number",description:"The number of requests made within the rate limit time window"},remaining:{type:"number",nullable:!0,description:"Remaining requests (every time api key is used this should updated and should be updated on refill as well)"},lastRequest:{type:"string",format:"date-time",nullable:!0,description:"When last request occurred"},expiresAt:{type:"string",format:"date-time",nullable:!0,description:"Expiry date of a key"},createdAt:{type:"string",format:"date-time",description:"created at"},updatedAt:{type:"string",format:"date-time",description:"updated at"},metadata:{type:"object",nullable:!0,additionalProperties:!0,description:"Extra metadata about the apiKey"},permissions:{type:"string",nullable:!0,description:"Permissions for the api key (stored as JSON string)"}},required:["id","userId","enabled","rateLimitEnabled","requestCount","createdAt","updatedAt"]}}}}}}}}},async(G)=>{let Y=G.context.session,$;$=await tr(G,Y.user.id,J),X(G.context),$=$.map((w)=>{return{...w,metadata:W.apikey.fields.metadata.transform.output(w.metadata)}});let K=$.map((w)=>{let{key:H,...z}=w;return{...z,permissions:z.permissions?l6(z.permissions):null}});return G.json(K)})}function Xn({opts:J,schema:W,deleteAllExpiredApiKeys:X}){return y("/api-key/update",{method:"POST",body:c({keyId:j().meta({description:"The id of the Api Key"}),userId:o6.string().meta({description:'The id of the user which the api key belongs to. server-only. Eg: "some-user-id"'}).optional(),name:j().meta({description:"The name of the key"}).optional(),enabled:G4().meta({description:"Whether the Api Key is enabled or not"}).optional(),remaining:_6().meta({description:"The number of remaining requests"}).min(1).optional(),refillAmount:_6().meta({description:"The refill amount"}).optional(),refillInterval:_6().meta({description:"The refill interval"}).optional(),metadata:R6().optional(),expiresIn:_6().meta({description:"Expiration time of the Api Key in seconds"}).min(1).optional().nullable(),rateLimitEnabled:G4().meta({description:"Whether the key has rate limiting enabled."}).optional(),rateLimitTimeWindow:_6().meta({description:"The duration in milliseconds where each request is counted. server-only. Eg: 1000"}).optional(),rateLimitMax:_6().meta({description:"Maximum amount of requests allowed within a window. Once the `maxRequests` is reached, the request will be rejected until the `timeWindow` has passed, at which point the `timeWindow` will be reset. server-only. Eg: 100"}).optional(),permissions:T6(j(),P6(j())).meta({description:"Update the permissions on the API Key. server-only."}).optional().nullable()}),metadata:{openapi:{description:"Update an existing API key by ID",responses:{"200":{description:"API key updated successfully",content:{"application/json":{schema:{type:"object",properties:{id:{type:"string",description:"ID"},name:{type:"string",nullable:!0,description:"The name of the key"},start:{type:"string",nullable:!0,description:"Shows the first few characters of the API key, including the prefix. This allows you to show those few characters in the UI to make it easier for users to identify the API key."},prefix:{type:"string",nullable:!0,description:"The API Key prefix. Stored as plain text."},userId:{type:"string",description:"The owner of the user id"},refillInterval:{type:"number",nullable:!0,description:"The interval in milliseconds between refills of the `remaining` count. Example: 3600000 // refill every hour (3600000ms = 1h)"},refillAmount:{type:"number",nullable:!0,description:"The amount to refill"},lastRefillAt:{type:"string",format:"date-time",nullable:!0,description:"The last refill date"},enabled:{type:"boolean",description:"Sets if key is enabled or disabled",default:!0},rateLimitEnabled:{type:"boolean",description:"Whether the key has rate limiting enabled"},rateLimitTimeWindow:{type:"number",nullable:!0,description:"The duration in milliseconds"},rateLimitMax:{type:"number",nullable:!0,description:"Maximum amount of requests allowed within a window"},requestCount:{type:"number",description:"The number of requests made within the rate limit time window"},remaining:{type:"number",nullable:!0,description:"Remaining requests (every time api key is used this should updated and should be updated on refill as well)"},lastRequest:{type:"string",format:"date-time",nullable:!0,description:"When last request occurred"},expiresAt:{type:"string",format:"date-time",nullable:!0,description:"Expiry date of a key"},createdAt:{type:"string",format:"date-time",description:"created at"},updatedAt:{type:"string",format:"date-time",description:"updated at"},metadata:{type:"object",nullable:!0,additionalProperties:!0,description:"Extra metadata about the apiKey"},permissions:{type:"string",nullable:!0,description:"Permissions for the api key (stored as JSON string)"}},required:["id","userId","enabled","rateLimitEnabled","requestCount","createdAt","updatedAt"]}}}}}}}},async(G)=>{let{keyId:Y,expiresIn:$,enabled:K,metadata:w,refillAmount:H,refillInterval:z,remaining:N,name:U,permissions:F,rateLimitEnabled:Z,rateLimitTimeWindow:L,rateLimitMax:D}=G.body,O=await j6(G),P=G.request||G.headers,_=P&&!O?null:O?.user||{id:G.body.userId};if(!_?.id)throw new V("UNAUTHORIZED",{message:F6.UNAUTHORIZED_SESSION});if(O&&G.body.userId&&O?.user.id!==G.body.userId)throw new V("UNAUTHORIZED",{message:F6.UNAUTHORIZED_SESSION});if(P){if(H!==void 0||z!==void 0||D!==void 0||L!==void 0||Z!==void 0||N!==void 0||F!==void 0)throw new V("BAD_REQUEST",{message:F6.SERVER_ONLY_PROPERTY})}let T=null;if(T=await TO(G,Y,J),T&&T.userId!==_.id)T=null;if(!T)throw new V("NOT_FOUND",{message:F6.KEY_NOT_FOUND});let v={};if(U!==void 0){if(U.length<J.minimumNameLength)throw new V("BAD_REQUEST",{message:F6.INVALID_NAME_LENGTH});else if(U.length>J.maximumNameLength)throw new V("BAD_REQUEST",{message:F6.INVALID_NAME_LENGTH});v.name=U}if(K!==void 0)v.enabled=K;if($!==void 0){if(J.keyExpiration.disableCustomExpiresTime===!0)throw new V("BAD_REQUEST",{message:F6.KEY_DISABLED_EXPIRATION});if($!==null){let A=$/86400;if(A<J.keyExpiration.minExpiresIn)throw new V("BAD_REQUEST",{message:F6.EXPIRES_IN_IS_TOO_SMALL});else if(A>J.keyExpiration.maxExpiresIn)throw new V("BAD_REQUEST",{message:F6.EXPIRES_IN_IS_TOO_LARGE})}v.expiresAt=$?Z4($,"sec"):null}if(w!==void 0){if(typeof w!=="object")throw new V("BAD_REQUEST",{message:F6.INVALID_METADATA_TYPE});v.metadata=W.apikey.fields.metadata.transform.input(w)}if(N!==void 0)v.remaining=N;if(H!==void 0||z!==void 0){if(H!==void 0&&z===void 0)throw new V("BAD_REQUEST",{message:F6.REFILL_AMOUNT_AND_INTERVAL_REQUIRED});else if(z!==void 0&&H===void 0)throw new V("BAD_REQUEST",{message:F6.REFILL_INTERVAL_AND_AMOUNT_REQUIRED});v.refillAmount=H,v.refillInterval=z}if(Z!==void 0)v.rateLimitEnabled=Z;if(L!==void 0)v.rateLimitTimeWindow=L;if(D!==void 0)v.rateLimitMax=D;if(F!==void 0)v.permissions=JSON.stringify(F);if(Object.keys(v).length===0)throw new V("BAD_REQUEST",{message:F6.NO_VALUES_TO_UPDATE});let q=T;try{if(J.storage==="secondary-storage"&&J.fallbackToDatabase){let A=await G.context.adapter.update({model:b8,where:[{field:"id",value:T.id}],update:v});if(A)await j5(G,A,J),q=A}else if(J.storage==="database"){let A=await G.context.adapter.update({model:b8,where:[{field:"id",value:T.id}],update:v});if(A)q=A}else{let A={...T,...v,updatedAt:new Date};await j5(G,A,J),q=A}}catch(A){throw new V("INTERNAL_SERVER_ERROR",{message:A?.message})}X(G.context),q.metadata=W.apikey.fields.metadata.transform.output(q.metadata);let{key:S,...B}=q;return G.json({...B,permissions:B.permissions?l6(B.permissions):null})})}function Yn(J,W){let X=new Date,G=J.lastRequest,Y=J.rateLimitTimeWindow,$=J.rateLimitMax,K=J.requestCount;if(W.rateLimit.enabled===!1)return{success:!0,message:null,update:{lastRequest:X},tryAgainIn:null};if(J.rateLimitEnabled===!1)return{success:!0,message:null,update:{lastRequest:X},tryAgainIn:null};if(Y===null||$===null)return{success:!0,message:null,update:null,tryAgainIn:null};if(G===null)return{success:!0,message:null,update:{lastRequest:X,requestCount:1},tryAgainIn:null};let w=X.getTime()-new Date(G).getTime();if(w>Y)return{success:!0,message:null,update:{lastRequest:X,requestCount:1},tryAgainIn:null};if(K>=$)return{success:!1,message:F6.RATE_LIMIT_EXCEEDED,update:null,tryAgainIn:Math.ceil(Y-w)};return K++,{success:!0,message:null,tryAgainIn:null,update:{lastRequest:X,requestCount:K}}}async function HC({hashedKey:J,ctx:W,opts:X,schema:G,permissions:Y}){let $=await ar(W,J,X);if(!$)throw new V("UNAUTHORIZED",{message:F6.INVALID_API_KEY});if($.enabled===!1)throw new V("UNAUTHORIZED",{message:F6.KEY_DISABLED,code:"KEY_DISABLED"});if($.expiresAt){if(Date.now()>new Date($.expiresAt).getTime()){try{if(X.storage==="secondary-storage"&&X.fallbackToDatabase)await v5(W,$,X),await W.context.adapter.delete({model:b8,where:[{field:"id",value:$.id}]});else if(X.storage==="secondary-storage")await v5(W,$,X);else await W.context.adapter.delete({model:b8,where:[{field:"id",value:$.id}]})}catch(L){W.context.logger.error("Failed to delete expired API keys:",L)}throw new V("UNAUTHORIZED",{message:F6.KEY_EXPIRED,code:"KEY_EXPIRED"})}}if(Y){let L=$.permissions?l6($.permissions):null;if(!L)throw new V("UNAUTHORIZED",{message:F6.KEY_NOT_FOUND,code:"KEY_NOT_FOUND"});if(!D5(L).authorize(Y).success)throw new V("UNAUTHORIZED",{message:F6.KEY_NOT_FOUND,code:"KEY_NOT_FOUND"})}let{remaining:K,lastRefillAt:w}=$;if($.remaining===0&&$.refillAmount===null){try{if(X.storage==="secondary-storage")await v5(W,$,X);else await W.context.adapter.delete({model:b8,where:[{field:"id",value:$.id}]})}catch(L){W.context.logger.error("Failed to delete expired API keys:",L)}throw new V("TOO_MANY_REQUESTS",{message:F6.USAGE_EXCEEDED,code:"USAGE_EXCEEDED"})}else if(K!==null){let L=Date.now(),D=$.refillInterval,O=$.refillAmount,P=new Date(w??$.createdAt).getTime();if(D&&O){if(L-P>D)K=O,w=new Date}if(K===0)throw new V("TOO_MANY_REQUESTS",{message:F6.USAGE_EXCEEDED,code:"USAGE_EXCEEDED"});else K--}let{message:H,success:z,update:N,tryAgainIn:U}=Yn($,X),F=null,Z={...$,...N,remaining:K,lastRefillAt:w,updatedAt:new Date};if(X.storage==="database")F=await W.context.adapter.update({model:b8,where:[{field:"id",value:$.id}],update:Z});else await j5(W,Z,X),F=Z;if(!F)throw new V("INTERNAL_SERVER_ERROR",{message:F6.FAILED_TO_UPDATE_API_KEY,code:"INTERNAL_SERVER_ERROR"});if(z===!1)throw new V("UNAUTHORIZED",{message:H??void 0,code:"RATE_LIMITED",details:{tryAgainIn:U}});return F}function Gn({opts:J,schema:W,deleteAllExpiredApiKeys:X}){return y("/api-key/verify",{method:"POST",body:c({key:j().meta({description:"The key to verify"}),permissions:T6(j(),P6(j())).meta({description:"The permissions to verify."}).optional()}),metadata:{SERVER_ONLY:!0}},async(G)=>{let{key:Y}=G.body;if(Y.length<J.defaultKeyLength)return G.json({valid:!1,error:{message:F6.INVALID_API_KEY,code:"KEY_NOT_FOUND"},key:null});if(J.customAPIKeyValidator){if(!await J.customAPIKeyValidator({ctx:G,key:Y}))return G.json({valid:!1,error:{message:F6.INVALID_API_KEY,code:"KEY_NOT_FOUND"},key:null})}let $=J.disableKeyHashing?Y:await q3(Y),K=null;try{K=await HC({hashedKey:$,permissions:G.body.permissions,ctx:G,opts:J,schema:W}),await X(G.context)}catch(z){if(z instanceof V)return G.json({valid:!1,error:{message:z.body?.message,code:z.body?.code},key:null});return G.json({valid:!1,error:{message:F6.INVALID_API_KEY,code:"INVALID_API_KEY"},key:null})}let{key:w,...H}=K??{key:1,permissions:void 0};if("metadata"in H)H.metadata=W.apikey.fields.metadata.transform.output(H.metadata);return H.permissions=H.permissions?l6(H.permissions):null,G.json({valid:!0,error:null,key:K===null?null:H})})}var jO=null;async function BX(J,W=!1){if(jO&&!W){if(new Date().getTime()-jO.getTime()<1e4)return}jO=new Date,await J.adapter.deleteMany({model:b8,where:[{field:"expiresAt",operator:"lt",value:new Date},{field:"expiresAt",operator:"ne",value:null}]}).catch((X)=>{J.logger.error("Failed to delete expired API keys:",X)})}function $n({keyGenerator:J,opts:W,schema:X}){return{createApiKey:or({keyGenerator:J,opts:W,schema:X,deleteAllExpiredApiKeys:BX}),verifyApiKey:Gn({opts:W,schema:X,deleteAllExpiredApiKeys:BX}),getApiKey:Jn({opts:W,schema:X,deleteAllExpiredApiKeys:BX}),updateApiKey:Xn({opts:W,schema:X,deleteAllExpiredApiKeys:BX}),deleteApiKey:er({opts:W,schema:X,deleteAllExpiredApiKeys:BX}),listApiKeys:Wn({opts:W,schema:X,deleteAllExpiredApiKeys:BX}),deleteAllExpiredApiKeys:sr({deleteAllExpiredApiKeys:BX})}}var Kn=({timeWindow:J,rateLimitMax:W})=>({apikey:{fields:{name:{type:"string",required:!1,input:!1},start:{type:"string",required:!1,input:!1},prefix:{type:"string",required:!1,input:!1},key:{type:"string",required:!0,input:!1,index:!0},userId:{type:"string",references:{model:"user",field:"id",onDelete:"cascade"},required:!0,input:!1,index:!0},refillInterval:{type:"number",required:!1,input:!1},refillAmount:{type:"number",required:!1,input:!1},lastRefillAt:{type:"date",required:!1,input:!1},enabled:{type:"boolean",required:!1,input:!1,defaultValue:!0},rateLimitEnabled:{type:"boolean",required:!1,input:!1,defaultValue:!0},rateLimitTimeWindow:{type:"number",required:!1,input:!1,defaultValue:J},rateLimitMax:{type:"number",required:!1,input:!1,defaultValue:W},requestCount:{type:"number",required:!1,input:!1,defaultValue:0},remaining:{type:"number",required:!1,input:!1},lastRequest:{type:"date",required:!1,input:!1},expiresAt:{type:"date",required:!1,input:!1},createdAt:{type:"date",required:!0,input:!1},updatedAt:{type:"date",required:!0,input:!1},permissions:{type:"string",required:!1,input:!1},metadata:{type:"string",required:!1,input:!0,transform:{input(X){return JSON.stringify(X)},output(X){if(!X)return null;return D3(X)}}}}}}),q3=async(J)=>{let W=await y0("SHA-256").digest(new TextEncoder().encode(J));return L0.encode(new Uint8Array(W),{padding:!1})},F6=d6({INVALID_METADATA_TYPE:"metadata must be an object or undefined",REFILL_AMOUNT_AND_INTERVAL_REQUIRED:"refillAmount is required when refillInterval is provided",REFILL_INTERVAL_AND_AMOUNT_REQUIRED:"refillInterval is required when refillAmount is provided",USER_BANNED:"User is banned",UNAUTHORIZED_SESSION:"Unauthorized or invalid session",KEY_NOT_FOUND:"API Key not found",KEY_DISABLED:"API Key is disabled",KEY_EXPIRED:"API Key has expired",USAGE_EXCEEDED:"API Key has reached its usage limit",KEY_NOT_RECOVERABLE:"API Key is not recoverable",EXPIRES_IN_IS_TOO_SMALL:"The expiresIn is smaller than the predefined minimum value.",EXPIRES_IN_IS_TOO_LARGE:"The expiresIn is larger than the predefined maximum value.",INVALID_REMAINING:"The remaining count is either too large or too small.",INVALID_PREFIX_LENGTH:"The prefix length is either too large or too small.",INVALID_NAME_LENGTH:"The name length is either too large or too small.",METADATA_DISABLED:"Metadata is disabled.",RATE_LIMIT_EXCEEDED:"Rate limit exceeded.",NO_VALUES_TO_UPDATE:"No values to update.",KEY_DISABLED_EXPIRATION:"Custom key expiration values are disabled.",INVALID_API_KEY:"Invalid API key.",INVALID_USER_ID_FROM_API_KEY:"The user id from the API key is invalid.",INVALID_API_KEY_GETTER_RETURN_TYPE:"API Key getter returned an invalid key type. Expected string.",SERVER_ONLY_PROPERTY:"The property you're trying to set can only be set from the server auth instance only.",FAILED_TO_UPDATE_API_KEY:"Failed to update API key",NAME_REQUIRED:"API Key name is required."}),b8="apikey",qO=(J)=>{let W={...J,apiKeyHeaders:J?.apiKeyHeaders??"x-api-key",defaultKeyLength:J?.defaultKeyLength||64,maximumPrefixLength:J?.maximumPrefixLength??32,minimumPrefixLength:J?.minimumPrefixLength??1,maximumNameLength:J?.maximumNameLength??32,minimumNameLength:J?.minimumNameLength??1,enableMetadata:J?.enableMetadata??!1,disableKeyHashing:J?.disableKeyHashing??!1,requireName:J?.requireName??!1,storage:J?.storage??"database",rateLimit:{enabled:J?.rateLimit?.enabled===void 0?!0:J?.rateLimit?.enabled,timeWindow:J?.rateLimit?.timeWindow??86400000,maxRequests:J?.rateLimit?.maxRequests??10},keyExpiration:{defaultExpiresIn:J?.keyExpiration?.defaultExpiresIn??null,disableCustomExpiresTime:J?.keyExpiration?.disableCustomExpiresTime??!1,maxExpiresIn:J?.keyExpiration?.maxExpiresIn??365,minExpiresIn:J?.keyExpiration?.minExpiresIn??1},startingCharactersConfig:{shouldStore:J?.startingCharactersConfig?.shouldStore??!0,charactersLength:J?.startingCharactersConfig?.charactersLength??6},enableSessionForAPIKeys:J?.enableSessionForAPIKeys??!1,fallbackToDatabase:J?.fallbackToDatabase??!1,customStorage:J?.customStorage},X=G8(Kn({rateLimitMax:W.rateLimit.maxRequests,timeWindow:W.rateLimit.timeWindow}),W.schema),G=W.customAPIKeyGetter||(($)=>{if(Array.isArray(W.apiKeyHeaders))for(let K of W.apiKeyHeaders){let w=$.headers?.get(K);if(w)return w}else return $.headers?.get(W.apiKeyHeaders)}),Y=$n({keyGenerator:W.customKeyGenerator||(async($)=>{let K=t6($.length,"a-z","A-Z");return`${$.prefix||""}${K}`}),opts:W,schema:X});return{id:"api-key",$ERROR_CODES:F6,hooks:{before:[{matcher:($)=>!!G($)&&W.enableSessionForAPIKeys,handler:u6(async($)=>{let K=G($);if(typeof K!=="string")throw new V("BAD_REQUEST",{message:F6.INVALID_API_KEY_GETTER_RETURN_TYPE});if(K.length<W.defaultKeyLength)throw new V("FORBIDDEN",{message:F6.INVALID_API_KEY});if(W.customAPIKeyValidator){if(!await W.customAPIKeyValidator({ctx:$,key:K}))throw new V("FORBIDDEN",{message:F6.INVALID_API_KEY})}let w=await HC({hashedKey:W.disableKeyHashing?K:await q3(K),ctx:$,opts:W,schema:X});BX($.context).catch((N)=>{$.context.logger.error("Failed to delete expired API keys:",N)});let H=await $.context.internalAdapter.findUserById(w.userId);if(!H)throw new V("UNAUTHORIZED",{message:F6.INVALID_USER_ID_FROM_API_KEY});let z={user:H,session:{id:w.id,token:K,userId:w.userId,userAgent:$.request?.headers.get("user-agent")??null,ipAddress:$.request?U1($.request,$.context.options):null,createdAt:new Date,updatedAt:new Date,expiresAt:w.expiresAt||Z4($.context.options.session?.expiresIn||604800,"ms")}};if($.context.session=z,$.path==="/get-session")return z;else return{context:$}})}]},endpoints:{createApiKey:Y.createApiKey,verifyApiKey:Y.verifyApiKey,getApiKey:Y.getApiKey,updateApiKey:Y.updateApiKey,deleteApiKey:Y.deleteApiKey,listApiKeys:Y.listApiKeys,deleteAllExpiredApiKeys:Y.deleteAllExpiredApiKeys},schema:X}};function P5(J,W,X){return`${J.includes("?")?"&":"?"}error=${W}&error_description=${X}`}async function KC(J,W){J.setHeader("Access-Control-Allow-Origin","*"),J.setHeader("Access-Control-Allow-Methods","POST, OPTIONS"),J.setHeader("Access-Control-Allow-Headers","Content-Type, Authorization"),J.setHeader("Access-Control-Max-Age","86400");let X={codeExpiresIn:600,defaultScope:"openid",...W,scopes:["openid","profile","email","offline_access",...W?.scopes||[]]};if(!J.request)throw new V("UNAUTHORIZED",{error_description:"request not found",error:"invalid_request"});let G=await j6(J);if(!G){await J.setSignedCookie("oidc_login_prompt",JSON.stringify(J.query),J.context.secret,{maxAge:600,path:"/",sameSite:"lax"});let Z=J.request.url?.split("?")[1];throw J.redirect(`${W.loginPage}?${Z}`)}let Y=J.query;if(!Y.client_id)throw J.redirect(`${J.context.baseURL}/error?error=invalid_client`);if(!Y.response_type)throw J.redirect(P5(`${J.context.baseURL}/error`,"invalid_request","response_type is required"));let $=await J.context.adapter.findOne({model:"oauthApplication",where:[{field:"clientId",value:J.query.client_id}]}).then((Z)=>{if(!Z)return null;return{...Z,redirectUrls:Z.redirectUrls.split(","),metadata:Z.metadata?JSON.parse(Z.metadata):{}}});if(!$)throw J.redirect(`${J.context.baseURL}/error?error=invalid_client`);let K=$.redirectUrls.find((Z)=>Z===J.query.redirect_uri);if(!K||!Y.redirect_uri)throw new V("BAD_REQUEST",{message:"Invalid redirect URI"});if($.disabled)throw J.redirect(`${J.context.baseURL}/error?error=client_disabled`);if(Y.response_type!=="code")throw J.redirect(`${J.context.baseURL}/error?error=unsupported_response_type`);let w=Y.scope?.split(" ").filter((Z)=>Z)||X.defaultScope.split(" "),H=w.filter((Z)=>{return!X.scopes.includes(Z)});if(H.length)throw J.redirect(P5(Y.redirect_uri,"invalid_scope",`The following scopes are invalid: ${H.join(", ")}`));if((!Y.code_challenge||!Y.code_challenge_method)&&W.requirePKCE)throw J.redirect(P5(Y.redirect_uri,"invalid_request","pkce is required"));if(!Y.code_challenge_method)Y.code_challenge_method="plain";if(!["s256",W.allowPlainCodeChallengeMethod?"plain":"s256"].includes(Y.code_challenge_method?.toLowerCase()||""))throw J.redirect(P5(Y.redirect_uri,"invalid_request","invalid code_challenge method"));let z=t6(32,"a-z","A-Z","0-9"),N=X.codeExpiresIn*1000,U=new Date(Date.now()+N);try{await J.context.internalAdapter.createVerificationValue({value:JSON.stringify({clientId:$.clientId,redirectURI:Y.redirect_uri,scope:w,userId:G.user.id,authTime:new Date(G.session.createdAt).getTime(),requireConsent:Y.prompt==="consent",state:Y.prompt==="consent"?Y.state:null,codeChallenge:Y.code_challenge,codeChallengeMethod:Y.code_challenge_method,nonce:Y.nonce}),identifier:z,expiresAt:U})}catch(Z){throw J.redirect(P5(Y.redirect_uri,"server_error","An error occurred while processing the request"))}if(Y.prompt!=="consent"){let Z=new URL(K);throw Z.searchParams.set("code",z),Z.searchParams.set("state",J.query.state),J.redirect(Z.toString())}if(W?.consentPage){await J.setSignedCookie("oidc_consent_prompt",z,J.context.secret,{maxAge:600,path:"/",sameSite:"lax"});let Z=new URLSearchParams;Z.set("consent_code",z),Z.set("client_id",$.clientId),Z.set("scope",w.join(" "));let L=`${W.consentPage}?${Z.toString()}`;throw J.redirect(L)}let F=new URL(K);throw F.searchParams.set("code",z),F.searchParams.set("state",J.query.state),J.redirect(F.toString())}var zC=(J,W)=>{let X=J.context.options.baseURL,G=J.context.baseURL;if(!X||!G)throw new V("INTERNAL_SERVER_ERROR",{error:"invalid_issuer",error_description:"issuer or baseURL is not set. If you're the app developer, please make sure to set the `baseURL` in your auth config."});return{issuer:X,authorization_endpoint:`${G}/mcp/authorize`,token_endpoint:`${G}/mcp/token`,userinfo_endpoint:`${G}/mcp/userinfo`,jwks_uri:`${G}/mcp/jwks`,registration_endpoint:`${G}/mcp/register`,scopes_supported:["openid","profile","email","offline_access"],response_types_supported:["code"],response_modes_supported:["query"],grant_types_supported:["authorization_code","refresh_token"],acr_values_supported:["urn:mace:incommon:iap:silver","urn:mace:incommon:iap:bronze"],subject_types_supported:["public"],id_token_signing_alg_values_supported:["RS256","none"],token_endpoint_auth_methods_supported:["client_secret_basic","client_secret_post","none"],code_challenge_methods_supported:["S256"],claims_supported:["sub","iss","aud","exp","nbf","iat","jti","email","email_verified","name"],...W?.metadata}},NC=(J,W)=>{let X=J.context.baseURL;return{resource:W?.resource??new URL(X).origin,authorization_servers:[X],jwks_uri:W?.oidcConfig?.metadata?.jwks_uri??`${X}/mcp/jwks`,scopes_supported:W?.oidcConfig?.metadata?.scopes_supported??["openid","profile","email","offline_access"],bearer_methods_supported:["header"],resource_signing_alg_values_supported:["RS256","none"]}},BO=(J)=>{let W={codeExpiresIn:600,defaultScope:"openid",accessTokenExpiresIn:3600,refreshTokenExpiresIn:604800,allowPlainCodeChallengeMethod:!0,...J.oidcConfig,loginPage:J.loginPage,scopes:["openid","profile","email","offline_access",...J.oidcConfig?.scopes||[]]},X={oauthClient:"oauthApplication",oauthAccessToken:"oauthAccessToken",oauthConsent:"oauthConsent"},G=vO(W);return{id:"mcp",hooks:{after:[{matcher(){return!0},handler:u6(async(Y)=>{let $=await Y.getSignedCookie("oidc_login_prompt",Y.context.secret),K=Y.context.authCookies.sessionToken.name,w=vX(Y.context.responseHeaders?.get("set-cookie")||""),H=w.has(K);if(!$||!H)return;Y.setCookie("oidc_login_prompt","",{maxAge:0});let z=w.get(K)?.value?.split(".")[0];if(!z)return;let N=await Y.context.internalAdapter.findSession(z)||Y.context.newSession;if(!N)return;let U=O5(String(Y.query?.prompt));if(U.has("login")){let F=new Set(U);F.delete("login"),Y.query={...Y.query,prompt:Array.from(F).join(" ")}}return Y.context.session=N,await KC(Y,W)})}]},endpoints:{oAuthConsent:G.endpoints.oAuthConsent,getMcpOAuthConfig:y("/.well-known/oauth-authorization-server",{method:"GET",metadata:{client:!1}},async(Y)=>{try{let $=zC(Y,J);return Y.json($)}catch($){return console.log($),Y.json(null)}}),getMCPProtectedResource:y("/.well-known/oauth-protected-resource",{method:"GET",metadata:{client:!1}},async(Y)=>{let $=NC(Y,J);return Y.json($)}),mcpOAuthAuthorize:y("/mcp/authorize",{method:"GET",query:T6(j(),R6()),metadata:{openapi:{description:"Authorize an OAuth2 request using MCP",responses:{"200":{description:"Authorization response generated successfully",content:{"application/json":{schema:{type:"object",additionalProperties:!0,description:"Authorization response, contents depend on the authorize function implementation"}}}}}}}},async(Y)=>{return KC(Y,W)}),mcpOAuthToken:y("/mcp/token",{method:"POST",body:T6(R6(),R6()),metadata:{isAction:!1,allowedMediaTypes:["application/x-www-form-urlencoded","application/json"]}},async(Y)=>{Y.setHeader("Access-Control-Allow-Origin","*"),Y.setHeader("Access-Control-Allow-Methods","POST, OPTIONS"),Y.setHeader("Access-Control-Allow-Headers","Content-Type, Authorization"),Y.setHeader("Access-Control-Max-Age","86400");let{body:$}=Y;if(!$)throw Y.error("BAD_REQUEST",{error_description:"request body not found",error:"invalid_request"});if($ instanceof FormData)$=Object.fromEntries($.entries());if(!($ instanceof Object))throw new V("BAD_REQUEST",{error_description:"request body is not an object",error:"invalid_request"});let{client_id:K,client_secret:w}=$,H=Y.request?.headers.get("authorization")||null;if(H&&!K&&!w&&H.startsWith("Basic "))try{let b=H.replace("Basic ",""),g=new TextDecoder().decode(f4.decode(b));if(!g.includes(":"))throw new V("UNAUTHORIZED",{error_description:"invalid authorization header format",error:"invalid_client"});let[f,p]=g.split(":");if(!f||!p)throw new V("UNAUTHORIZED",{error_description:"invalid authorization header format",error:"invalid_client"});K=f,w=p}catch(b){throw new V("UNAUTHORIZED",{error_description:"invalid authorization header format",error:"invalid_client"})}let{grant_type:z,code:N,redirect_uri:U,refresh_token:F,code_verifier:Z}=$;if(z==="refresh_token"){if(!F)throw new V("BAD_REQUEST",{error_description:"refresh_token is required",error:"invalid_request"});let b=await Y.context.adapter.findOne({model:"oauthAccessToken",where:[{field:"refreshToken",value:F.toString()}]});if(!b)throw new V("UNAUTHORIZED",{error_description:"invalid refresh token",error:"invalid_grant"});if(b.clientId!==K?.toString())throw new V("UNAUTHORIZED",{error_description:"invalid client_id",error:"invalid_client"});if(b.refreshTokenExpiresAt<new Date)throw new V("UNAUTHORIZED",{error_description:"refresh token expired",error:"invalid_grant"});let g=t6(32,"a-z","A-Z"),f=t6(32,"a-z","A-Z"),p=new Date(Date.now()+W.accessTokenExpiresIn*1000),l=new Date(Date.now()+W.refreshTokenExpiresIn*1000);return await Y.context.adapter.create({model:X.oauthAccessToken,data:{accessToken:g,refreshToken:f,accessTokenExpiresAt:p,refreshTokenExpiresAt:l,clientId:K.toString(),userId:b.userId,scopes:b.scopes,createdAt:new Date,updatedAt:new Date}}),Y.json({access_token:g,token_type:"bearer",expires_in:W.accessTokenExpiresIn,refresh_token:f,scope:b.scopes})}if(!N)throw new V("BAD_REQUEST",{error_description:"code is required",error:"invalid_request"});if(W.requirePKCE&&!Z)throw new V("BAD_REQUEST",{error_description:"code verifier is missing",error:"invalid_request"});let L=await Y.context.internalAdapter.findVerificationValue(N.toString());if(!L)throw new V("UNAUTHORIZED",{error_description:"invalid code",error:"invalid_grant"});if(L.expiresAt<new Date)throw new V("UNAUTHORIZED",{error_description:"code expired",error:"invalid_grant"});if(await Y.context.internalAdapter.deleteVerificationValue(L.id),!K)throw new V("UNAUTHORIZED",{error_description:"client_id is required",error:"invalid_client"});if(!z)throw new V("BAD_REQUEST",{error_description:"grant_type is required",error:"invalid_request"});if(z!=="authorization_code")throw new V("BAD_REQUEST",{error_description:"grant_type must be 'authorization_code'",error:"unsupported_grant_type"});if(!U)throw new V("BAD_REQUEST",{error_description:"redirect_uri is required",error:"invalid_request"});let D=await Y.context.adapter.findOne({model:X.oauthClient,where:[{field:"clientId",value:K.toString()}]}).then((b)=>{if(!b)return null;return{...b,redirectUrls:b.redirectUrls.split(","),metadata:b.metadata?JSON.parse(b.metadata):{}}});if(!D)throw new V("UNAUTHORIZED",{error_description:"invalid client_id",error:"invalid_client"});if(D.disabled)throw new V("UNAUTHORIZED",{error_description:"client is disabled",error:"invalid_client"});if(D.type==="public"){if(!Z)throw new V("BAD_REQUEST",{error_description:"code verifier is required for public clients",error:"invalid_request"})}else{if(!w)throw new V("UNAUTHORIZED",{error_description:"client_secret is required for confidential clients",error:"invalid_client"});if(D.clientSecret!==w.toString())throw new V("UNAUTHORIZED",{error_description:"invalid client_secret",error:"invalid_client"})}let O=JSON.parse(L.value);if(O.clientId!==K.toString())throw new V("UNAUTHORIZED",{error_description:"invalid client_id",error:"invalid_client"});if(O.redirectURI!==U.toString())throw new V("UNAUTHORIZED",{error_description:"invalid redirect_uri",error:"invalid_client"});if(O.codeChallenge&&!Z)throw new V("BAD_REQUEST",{error_description:"code verifier is missing",error:"invalid_request"});if((O.codeChallengeMethod==="plain"?Z:await y0("SHA-256","base64urlnopad").digest(Z))!==O.codeChallenge)throw new V("UNAUTHORIZED",{error_description:"code verification failed",error:"invalid_request"});let P=O.scope;await Y.context.internalAdapter.deleteVerificationValue(L.id);let _=t6(32,"a-z","A-Z"),T=t6(32,"A-Z","a-z"),v=new Date(Date.now()+W.accessTokenExpiresIn*1000),q=new Date(Date.now()+W.refreshTokenExpiresIn*1000);await Y.context.adapter.create({model:X.oauthAccessToken,data:{accessToken:_,refreshToken:T,accessTokenExpiresAt:v,refreshTokenExpiresAt:q,clientId:K.toString(),userId:O.userId,scopes:P.join(" "),createdAt:new Date,updatedAt:new Date}});let S=await Y.context.internalAdapter.findUserById(O.userId);if(!S)throw new V("UNAUTHORIZED",{error_description:"user not found",error:"invalid_grant"});let B={alg:"HS256",key:await P8().generateKey({name:"HMAC",hash:"SHA-256"},!0,["sign","verify"])},A={given_name:S.name.split(" ")[0],family_name:S.name.split(" ")[1],name:S.name,profile:S.image,updated_at:Math.floor(new Date(S.updatedAt).getTime()/1000)},E={email:S.email,email_verified:S.emailVerified},I={...P.includes("profile")?A:{},...P.includes("email")?E:{}},m=W.getAdditionalUserInfoClaim?await W.getAdditionalUserInfoClaim(S,P,D):{},u=await new iJ({sub:S.id,aud:K.toString(),iat:Date.now(),auth_time:Y.context.session?new Date(Y.context.session.session.createdAt).getTime():void 0,nonce:O.nonce,acr:"urn:mace:incommon:iap:silver",...I,...m}).setProtectedHeader({alg:B.alg}).setIssuedAt().setExpirationTime(Math.floor(Date.now()/1000)+W.accessTokenExpiresIn).sign(B.key);return Y.json({access_token:_,token_type:"Bearer",expires_in:W.accessTokenExpiresIn,refresh_token:P.includes("offline_access")?T:void 0,scope:P.join(" "),id_token:P.includes("openid")?u:void 0},{headers:{"Cache-Control":"no-store",Pragma:"no-cache"}})}),registerMcpClient:y("/mcp/register",{method:"POST",body:c({redirect_uris:P6(j()),token_endpoint_auth_method:O4(["none","client_secret_basic","client_secret_post"]).default("client_secret_basic").optional(),grant_types:P6(O4(["authorization_code","implicit","password","client_credentials","refresh_token","urn:ietf:params:oauth:grant-type:jwt-bearer","urn:ietf:params:oauth:grant-type:saml2-bearer"])).default(["authorization_code"]).optional(),response_types:P6(O4(["code","token"])).default(["code"]).optional(),client_name:j().optional(),client_uri:j().optional(),logo_uri:j().optional(),scope:j().optional(),contacts:P6(j()).optional(),tos_uri:j().optional(),policy_uri:j().optional(),jwks_uri:j().optional(),jwks:T6(j(),R6()).optional(),metadata:T6(R6(),R6()).optional(),software_id:j().optional(),software_version:j().optional(),software_statement:j().optional()}),metadata:{openapi:{description:"Register an OAuth2 application",responses:{"200":{description:"OAuth2 application registered successfully",content:{"application/json":{schema:{type:"object",properties:{name:{type:"string",description:"Name of the OAuth2 application"},icon:{type:"string",nullable:!0,description:"Icon URL for the application"},metadata:{type:"object",additionalProperties:!0,nullable:!0,description:"Additional metadata for the application"},clientId:{type:"string",description:"Unique identifier for the client"},clientSecret:{type:"string",description:"Secret key for the client. Not included for public clients."},redirectUrls:{type:"array",items:{type:"string",format:"uri"},description:"List of allowed redirect URLs"},type:{type:"string",description:"Type of the client",enum:["web","public"]},authenticationScheme:{type:"string",description:"Authentication scheme used by the client",enum:["client_secret","none"]},disabled:{type:"boolean",description:"Whether the client is disabled",enum:[!1]},userId:{type:"string",nullable:!0,description:"ID of the user who registered the client, null if registered anonymously"},createdAt:{type:"string",format:"date-time",description:"Creation timestamp"},updatedAt:{type:"string",format:"date-time",description:"Last update timestamp"}},required:["name","clientId","redirectUrls","type","authenticationScheme","disabled","createdAt","updatedAt"]}}}}}}}},async(Y)=>{let $=Y.body,K=await j6(Y);if(Y.setHeader("Access-Control-Allow-Origin","*"),Y.setHeader("Access-Control-Allow-Methods","POST, OPTIONS"),Y.setHeader("Access-Control-Allow-Headers","Content-Type, Authorization"),Y.setHeader("Access-Control-Max-Age","86400"),Y.headers?.set("Access-Control-Max-Age","86400"),(!$.grant_types||$.grant_types.includes("authorization_code")||$.grant_types.includes("implicit"))&&(!$.redirect_uris||$.redirect_uris.length===0))throw new V("BAD_REQUEST",{error:"invalid_redirect_uri",error_description:"Redirect URIs are required for authorization_code and implicit grant types"});if($.grant_types&&$.response_types){if($.grant_types.includes("authorization_code")&&!$.response_types.includes("code"))throw new V("BAD_REQUEST",{error:"invalid_client_metadata",error_description:"When 'authorization_code' grant type is used, 'code' response type must be included"});if($.grant_types.includes("implicit")&&!$.response_types.includes("token"))throw new V("BAD_REQUEST",{error:"invalid_client_metadata",error_description:"When 'implicit' grant type is used, 'token' response type must be included"})}let w=W.generateClientId?.()||t6(32,"a-z","A-Z"),H=W.generateClientSecret?.()||t6(32,"a-z","A-Z"),z=$.token_endpoint_auth_method==="none"?"public":"web",N=z==="public"?"":H;await Y.context.adapter.create({model:X.oauthClient,data:{name:$.client_name,icon:$.logo_uri,metadata:$.metadata?JSON.stringify($.metadata):null,clientId:w,clientSecret:N,redirectUrls:$.redirect_uris.join(","),type:z,authenticationScheme:$.token_endpoint_auth_method||"client_secret_basic",disabled:!1,userId:K?.session.userId,createdAt:new Date,updatedAt:new Date}});let U={client_id:w,client_id_issued_at:Math.floor(Date.now()/1000),redirect_uris:$.redirect_uris,token_endpoint_auth_method:$.token_endpoint_auth_method||"client_secret_basic",grant_types:$.grant_types||["authorization_code"],response_types:$.response_types||["code"],client_name:$.client_name,client_uri:$.client_uri,logo_uri:$.logo_uri,scope:$.scope,contacts:$.contacts,tos_uri:$.tos_uri,policy_uri:$.policy_uri,jwks_uri:$.jwks_uri,jwks:$.jwks,software_id:$.software_id,software_version:$.software_version,software_statement:$.software_statement,metadata:$.metadata,...z!=="public"?{client_secret:N,client_secret_expires_at:0}:{}};return new Response(JSON.stringify(U),{status:201,headers:{"Content-Type":"application/json","Cache-Control":"no-store",Pragma:"no-cache"}})}),getMcpSession:y("/mcp/get-session",{method:"GET",requireHeaders:!0},async(Y)=>{let $=Y.headers?.get("Authorization")?.replace("Bearer ","");if(!$)return Y.headers?.set("WWW-Authenticate","Bearer"),Y.json(null);let K=await Y.context.adapter.findOne({model:X.oauthAccessToken,where:[{field:"accessToken",value:$}]});if(!K)return Y.json(null);return Y.json(K)})},schema:PO}};W0();var B3={CLOUDFLARE_TURNSTILE:"cloudflare-turnstile",GOOGLE_RECAPTCHA:"google-recaptcha",HCAPTCHA:"hcaptcha",CAPTCHAFOX:"captchafox"},bq6={[B3.CLOUDFLARE_TURNSTILE]:"https://challenges.cloudflare.com/turnstile/v0/siteverify",[B3.GOOGLE_RECAPTCHA]:"https://www.google.com/recaptcha/api/siteverify",[B3.HCAPTCHA]:"https://api.hcaptcha.com/siteverify",[B3.CAPTCHAFOX]:"https://api.captchafox.com/siteverify"},kq6=d6({VERIFICATION_FAILED:"Captcha verification failed",MISSING_RESPONSE:"Missing CAPTCHA response",UNKNOWN_ERROR:"Something went wrong"}),hq6=d6({MISSING_SECRET_KEY:"Missing secret key",SERVICE_UNAVAILABLE:"CAPTCHA service unavailable"});X8();var xq6=E0(c({disableCookieCache:G4().meta({description:"Disable cookie cache and fetch session from database"}).or(j().transform((J)=>J==="true")).optional(),disableRefresh:G4().meta({description:"Disable session refresh. Useful for checking session status, without updating the session"}).optional()}));J0();W0();X8();var aq6=d6({INVALID_DEVICE_CODE:"Invalid device code",EXPIRED_DEVICE_CODE:"Device code has expired",EXPIRED_USER_CODE:"User code has expired",AUTHORIZATION_PENDING:"Authorization pending",ACCESS_DENIED:"Access denied",INVALID_USER_CODE:"Invalid user code",DEVICE_CODE_ALREADY_PROCESSED:"Device code already processed",POLLING_TOO_FREQUENTLY:"Polling too frequently",USER_NOT_FOUND:"User not found",FAILED_TO_CREATE_SESSION:"Failed to create session",INVALID_DEVICE_CODE_STATUS:"Invalid device code status",AUTHENTICATION_REQUIRED:"Authentication required"});var tq6=c({id:j(),deviceCode:j(),userCode:j(),userId:j().optional(),expiresAt:X0(),status:j(),lastPolledAt:X0().optional(),pollingInterval:_6().optional(),clientId:j().optional(),scope:j().optional()}),FC=_W((J)=>{try{sM(J)}catch(W){return!1}return!0},{message:"Invalid time string format. Use formats like '30m', '5s', '1h', etc."}),wn=c({expiresIn:FC.default("30m").describe("Time in seconds until the device code expires. Use formats like '30m', '5s', '1h', etc."),interval:FC.default("5s").describe("Time in seconds between polling attempts. Use formats like '30m', '5s', '1h', etc."),deviceCodeLength:_6().int().positive().default(40).describe("Length of the device code to be generated. Default is 40 characters."),userCodeLength:_6().int().positive().default(8).describe("Length of the user code to be generated. Default is 8 characters."),generateDeviceCode:_W((J)=>typeof J==="function",{message:"generateDeviceCode must be a function that returns a string or a promise that resolves to a string."}).optional().describe("Function to generate a device code. If not provided, a default random string generator will be used."),generateUserCode:_W((J)=>typeof J==="function",{message:"generateUserCode must be a function that returns a string or a promise that resolves to a string."}).optional().describe("Function to generate a user code. If not provided, a default random string generator will be used."),validateClient:_W((J)=>typeof J==="function",{message:"validateClient must be a function that returns a boolean or a promise that resolves to a boolean."}).optional().describe("Function to validate the client ID. If not provided, no validation will be performed."),onDeviceAuthRequest:_W((J)=>typeof J==="function",{message:"onDeviceAuthRequest must be a function that returns void or a promise that resolves to void."}).optional().describe("Function to handle device authorization requests. If not provided, no additional actions will be taken."),verificationUri:j().optional().describe("The URI where users verify their device code. Can be an absolute URL (https://example.com/device) or relative path (/custom-path). This will be returned as verification_uri in the device code response. If not provided, defaults to /device."),schema:_W(()=>!0)});J0();m4();QW();f0();var zB6=d6({OTP_EXPIRED:"OTP expired",INVALID_OTP:"Invalid OTP",TOO_MANY_ATTEMPTS:"Too many attempts"});Y8();m4();W0();var vB6=d6({INVALID_OAUTH_CONFIGURATION:"Invalid OAuth configuration",TOKEN_URL_NOT_FOUND:"Invalid OAuth configuration. Token URL not found.",PROVIDER_CONFIG_NOT_FOUND:"No config found for provider",PROVIDER_ID_REQUIRED:"Provider ID is required",INVALID_OAUTH_CONFIG:"Invalid OAuth configuration.",SESSION_REQUIRED:"Session is required"});kJ();QW();var AB6=d6({PASSWORD_COMPROMISED:"The password you entered has been compromised. Please choose a different password."});J0();QW();f0();var lB6=d6({INVALID_SESSION_TOKEN:"Invalid session token"});J0();$8();CJ();X8();var Hn=new Set(["string","number","boolean","array","object"]);function zn(J){let W=J.type;return Hn.has(W)?W:"string"}function Nn(J){let W={type:J.type==="date"?"string":J.type};if(J.defaultValue!==void 0)W.default=typeof J.defaultValue==="function"?"Generated at runtime":J.defaultValue;if(J.input===!1)W.readOnly=!0;return W}function A3(J){let W=[];if(J.metadata?.openapi?.parameters)return W.push(...J.metadata.openapi.parameters),W;if(J.query instanceof SW)Object.entries(J.query.shape).forEach(([X,G])=>{if(G instanceof V6)W.push({name:X,in:"query",schema:{...I3(G),..."minLength"in G&&G.minLength?{minLength:G.minLength}:{}}})});return W}function UC(J){if(J.metadata?.openapi?.requestBody)return J.metadata.openapi.requestBody;if(!J.body)return;if(J.body instanceof SW||J.body instanceof cJ){let W=J.body.shape;if(!W)return;let X={},G=[];return Object.entries(W).forEach(([Y,$])=>{if($ instanceof V6){if(X[Y]=I3($),!($ instanceof cJ))G.push(Y)}}),{required:J.body instanceof cJ?!1:J.body?!0:!1,content:{"application/json":{schema:{type:"object",properties:X,required:G}}}}}}function I3(J){if(J instanceof cJ){let W=J._def.innerType;return{...I3(W),nullable:!0}}if(J instanceof SW){let W=J.shape;if(W){let X={},G=[];return Object.entries(W).forEach(([Y,$])=>{if($ instanceof V6){if(X[Y]=I3($),!($ instanceof cJ))G.push(Y)}}),{type:"object",properties:X,...G.length>0?{required:G}:{},description:J.description}}}return{type:zn(J),description:J.description}}function E3(J){return{"400":{content:{"application/json":{schema:{type:"object",properties:{message:{type:"string"}},required:["message"]}}},description:"Bad Request. Usually due to missing parameters, or invalid parameters."},"401":{content:{"application/json":{schema:{type:"object",properties:{message:{type:"string"}},required:["message"]}}},description:"Unauthorized. Due to missing or invalid authentication."},"403":{content:{"application/json":{schema:{type:"object",properties:{message:{type:"string"}}}}},description:"Forbidden. You do not have permission to access this resource or to perform this action."},"404":{content:{"application/json":{schema:{type:"object",properties:{message:{type:"string"}}}}},description:"Not Found. The requested resource was not found."},"429":{content:{"application/json":{schema:{type:"object",properties:{message:{type:"string"}}}}},description:"Too Many Requests. You have exceeded the rate limit. Try again later."},"500":{content:{"application/json":{schema:{type:"object",properties:{message:{type:"string"}}}}},description:"Internal Server Error. This is a problem with the server that you cannot fix."},...J}}function QC(J){return J.split("/").map((W)=>W.startsWith(":")?`{${W.slice(1)}}`:W).join("/")}async function ZC(J,W){let X=hG(J,{...W,plugins:[]}),G=O8({...W,session:{...W.session,storeSessionInDatabase:!0}}),Y={schemas:{...Object.entries(G).reduce((K,[w,H])=>{let z=w.charAt(0).toUpperCase()+w.slice(1),N=H.fields,U=[],F={id:{type:"string"}};return Object.entries(N).forEach(([Z,L])=>{if(!L)return;if(F[Z]=Nn(L),L.required&&L.input!==!1)U.push(Z)}),Object.entries(F).forEach(([Z,L])=>{let D=H.fields[Z];if(D&&D.type==="date"&&L.type==="string")L.format="date-time"}),K[z]={type:"object",properties:F,required:U},K},{})}},$={};Object.entries(X.api).forEach(([K,w])=>{if(J.options.disabledPaths?.includes(w.path))return;let H=w.options;if(H.metadata?.SERVER_ONLY)return;let z=QC(w.path);if(H.method==="GET"||H.method==="DELETE")$[z]={...$[z],[H.method.toLowerCase()]:{tags:["Default",...H.metadata?.openapi?.tags||[]],description:H.metadata?.openapi?.description,operationId:H.metadata?.openapi?.operationId,security:[{bearerAuth:[]}],parameters:A3(H),responses:E3(H.metadata?.openapi?.responses)}};if(H.method==="POST"||H.method==="PATCH"||H.method==="PUT"){let N=UC(H);$[z]={...$[z],[H.method.toLowerCase()]:{tags:["Default",...H.metadata?.openapi?.tags||[]],description:H.metadata?.openapi?.description,operationId:H.metadata?.openapi?.operationId,security:[{bearerAuth:[]}],parameters:A3(H),...N?{requestBody:N}:{requestBody:{content:{"application/json":{schema:{type:"object",properties:{}}}}}},responses:E3(H.metadata?.openapi?.responses)}}}});for(let K of W.plugins||[]){if(K.id==="open-api")continue;let w=hG(J,{...W,plugins:[K]}),H=Object.keys(w.api).map((z)=>{if(X.api[z]===void 0)return w.api[z];return null}).filter((z)=>z!==null);Object.entries(H).forEach(([z,N])=>{if(J.options.disabledPaths?.includes(N.path))return;let U=N.options;if(U.metadata?.SERVER_ONLY)return;let F=QC(N.path);if(U.method==="GET"||U.method==="DELETE")$[F]={...$[F],[U.method.toLowerCase()]:{tags:U.metadata?.openapi?.tags||[K.id.charAt(0).toUpperCase()+K.id.slice(1)],description:U.metadata?.openapi?.description,operationId:U.metadata?.openapi?.operationId,security:[{bearerAuth:[]}],parameters:A3(U),responses:E3(U.metadata?.openapi?.responses)}};if(U.method==="POST"||U.method==="PATCH"||U.method==="PUT")$[F]={...$[F],[U.method.toLowerCase()]:{tags:U.metadata?.openapi?.tags||[K.id.charAt(0).toUpperCase()+K.id.slice(1)],description:U.metadata?.openapi?.description,operationId:U.metadata?.openapi?.operationId,security:[{bearerAuth:[]}],parameters:A3(U),requestBody:UC(U),responses:E3(U.metadata?.openapi?.responses)}}})}return{openapi:"3.1.1",info:{title:"Better Auth",description:"API Reference for your Better Auth Instance",version:"1.1.0"},components:{...Y,securitySchemes:{apiKeyCookie:{type:"apiKey",in:"cookie",name:"apiKeyCookie",description:"API Key authentication via cookie"},bearerAuth:{type:"http",scheme:"bearer",description:"Bearer token authentication"}}},security:[{apiKeyCookie:[],bearerAuth:[]}],servers:[{url:J.baseURL}],tags:[{name:"Default",description:"Default endpoints that are included with Better Auth by default. These endpoints are not part of any plugin."}],paths:$}}var Fn=`<svg width="75" height="75" viewBox="0 0 75 75" fill="none" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
<rect width="75" height="75" fill="url(#pattern0_21_12)"/>
<defs>
<pattern id="pattern0_21_12" patternContentUnits="objectBoundingBox" width="1" height="1">
<use xlink:href="#image0_21_12" transform="scale(0.00094697)"/>
</pattern>
<image id="image0_21_12" width="1056" height="1056" xlink:href="data:image/jpeg;base64,/9j/4AAQSkZJRgABAQAASABIAAD/4QBARXhpZgAATU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAEIKADAAQAAAABAAAEIAAAAAD/7QA4UGhvdG9zaG9wIDMuMAA4QklNBAQAAAAAAAA4QklNBCUAAAAAABDUHYzZjwCyBOmACZjs+EJ+/+ICKElDQ19QUk9GSUxFAAEBAAACGGFwcGwEAAAAbW50clJHQiBYWVogB+YAAQABAAAAAAAAYWNzcEFQUEwAAAAAQVBQTAAAAAAAAAAAAAAAAAAAAAAAAPbWAAEAAAAA0y1hcHBs7P2jjjiFR8NttL1PetoYLwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAKZGVzYwAAAPwAAAAwY3BydAAAASwAAABQd3RwdAAAAXwAAAAUclhZWgAAAZAAAAAUZ1hZWgAAAaQAAAAUYlhZWgAAAbgAAAAUclRSQwAAAcwAAAAgY2hhZAAAAewAAAAsYlRSQwAAAcwAAAAgZ1RSQwAAAcwAAAAgbWx1YwAAAAAAAAABAAAADGVuVVMAAAAUAAAAHABEAGkAcwBwAGwAYQB5ACAAUAAzbWx1YwAAAAAAAAABAAAADGVuVVMAAAA0AAAAHABDAG8AcAB5AHIAaQBnAGgAdAAgAEEAcABwAGwAZQAgAEkAbgBjAC4ALAAgADIAMAAyADJYWVogAAAAAAAA9tUAAQAAAADTLFhZWiAAAAAAAACD3wAAPb////+7WFlaIAAAAAAAAEq/AACxNwAACrlYWVogAAAAAAAAKDgAABELAADIuXBhcmEAAAAAAAMAAAACZmYAAPKnAAANWQAAE9AAAApbc2YzMgAAAAAAAQxCAAAF3v//8yYAAAeTAAD9kP//+6L///2jAAAD3AAAwG7/wAARCAQgBCADASIAAhEBAxEB/8QAHwAAAQUBAQEBAQEAAAAAAAAAAAECAwQFBgcICQoL/8QAtRAAAgEDAwIEAwUFBAQAAAF9AQIDAAQRBRIhMUEGE1FhByJxFDKBkaEII0KxwRVS0fAkM2JyggkKFhcYGRolJicoKSo0NTY3ODk6Q0RFRkdISUpTVFVWV1hZWmNkZWZnaGlqc3R1dnd4eXqDhIWGh4iJipKTlJWWl5iZmqKjpKWmp6ipqrKztLW2t7i5usLDxMXGx8jJytLT1NXW19jZ2uHi4+Tl5ufo6erx8vP09fb3+Pn6/8QAHwEAAwEBAQEBAQEBAQAAAAAAAAECAwQFBgcICQoL/8QAtREAAgECBAQDBAcFBAQAAQJ3AAECAxEEBSExBhJBUQdhcRMiMoEIFEKRobHBCSMzUvAVYnLRChYkNOEl8RcYGRomJygpKjU2Nzg5OkNERUZHSElKU1RVVldYWVpjZGVmZ2hpanN0dXZ3eHl6goOEhYaHiImKkpOUlZaXmJmaoqOkpaanqKmqsrO0tba3uLm6wsPExcbHyMnK0tPU1dbX2Nna4uPk5ebn6Onq8vP09fb3+Pn6/9sAQwACAgICAgIDAgIDBAMDAwQFBAQEBAUHBQUFBQUHCAcHBwcHBwgICAgICAgICgoKCgoKCwsLCwsNDQ0NDQ0NDQ0N/9sAQwECAgIDAwMGAwMGDQkHCQ0NDQ0NDQ0NDQ0NDQ0NDQ0NDQ0NDQ0NDQ0NDQ0NDQ0NDQ0NDQ0NDQ0NDQ0NDQ0NDQ0N/90ABABC/9oADAMBAAIRAxEAPwD9/KKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooA//Q/fyiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKAP/0f38ooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigD/9L9/KKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooA//T/fyiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKAP/1P38ooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigD/9X9/KKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooA//W/fyiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKAP/1/38ooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigD/9D9/KKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooA//R/fyiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKAP/0v38ooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigD/9P9/KKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooA//U/fyiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKAP/1f38ooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigD/9b9/KKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooA//X/fyiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKAP/0P38ooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigD/9H9/KKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooA//S/fyiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKAP/0/38ooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigD/9T9/KKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooA//V/fyiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKAP/1v38ooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAK/Ln/gq38a/in8Dvgp4T8R/CfxFdeG9SvvFMdlcXFoELyW5srqQxnzEcY3op4Gciv1Gr8Z/+C2X/JvXgj/sc4v/AE33lAH4z/8ADwv9tD/oq2tf9823/wAZo/4eF/tof9FW1r/vm2/+M18Z0UAfZn/Dwv8AbQ/6KtrX/fNt/wDGaP8Ah4X+2h/0VbWv++bb/wCM18Z0UAfZn/Dwv9tD/oq2tf8AfNt/8Zo/4eF/tof9FW1r/vm2/wDjNfGdFAH2Z/w8L/bQ/wCira1/3zbf/GaP+Hhf7aH/AEVbWv8Avm2/+M18Z0UAfZn/AA8L/bQ/6KtrX/fNt/8AGaP+Hhf7aH/RVta/75tv/jNfGdFAH2Z/w8L/AG0P+ira1/3zbf8Axmj/AIeF/tof9FW1r/vm2/8AjNfGdFAH63/sVftq/tTfEb9qb4deCfG3xF1TVtD1bVGgvbKdYBHPGIJW2ttiVsblB4I6V/UbX8Z//BPT/k9D4U/9hpv/AEmmr+zCgAooooAKKKKACiiigAooooAKKKKACiiigD+M/wD4eF/tof8ARVta/wC+bb/4zR/w8L/bQ/6KtrX/AHzbf/Ga+M6KAPsz/h4X+2h/0VbWv++bb/4zR/w8L/bQ/wCira1/3zbf/Ga+M6KAPsz/AIeF/tof9FW1r/vm2/8AjNH/AA8L/bQ/6KtrX/fNt/8AGa+M6KAPsz/h4X+2h/0VbWv++bb/AOM0f8PC/wBtD/oq2tf9823/AMZr4zooA+zP+Hhf7aH/AEVbWv8Avm2/+M0f8PC/20P+ira1/wB823/xmvjOigD7M/4eF/tof9FW1r/vm2/+M0f8PC/20P8Aoq2tf9823/xmvjOigD7M/wCHhf7aH/RVta/75tv/AIzR/wAPC/20P+ira1/3zbf/ABmvjOigD7M/4eF/tof9FW1r/vm2/wDjNH/Dwv8AbQ/6KtrX/fNt/wDGa+M6KAPsz/h4X+2h/wBFW1r/AL5tv/jNH/Dwv9tD/oq2tf8AfNt/8Zr4zooA+zP+Hhf7aH/RVta/75tv/jNH/Dwv9tD/AKKtrX/fNt/8Zr4zooA+zP8Ah4X+2h/0VbWv++bb/wCM0f8ADwv9tD/oq2tf9823/wAZr4zooA+zP+Hhf7aH/RVta/75tv8A4zR/w8L/AG0P+ira1/3zbf8AxmvjOigD7M/4eF/tof8ARVta/wC+bb/4zR/w8L/bQ/6KtrX/AHzbf/Ga+M6KAP6tv+CUnxr+Kfxx+CnizxH8WPEV14k1Kx8UyWVvcXYQPHbiytZBGPLRBje7HkZya/Uavxn/AOCJv/JvXjf/ALHOX/032dfsxQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAf//X/fyiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAr8Z/+C2X/JvXgj/sc4v/AE33lfsxX4z/APBbL/k3rwR/2OcX/pvvKAP5m6KKKACiiigAooooAKKKKACiiigAooooA+zP+Cen/J6Hwp/7DTf+k01f2YV/Gf8A8E9P+T0PhT/2Gm/9Jpq/swoAKKKKACiiigAooooAKKKKACiiigAooooA/gDooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooA/pk/4Im/8m9eN/8Asc5f/TfZ1+zFfjP/AMETf+TevG//AGOcv/pvs6/ZigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooA/9D9/KKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACvxn/4LZf8m9eCP+xzi/8ATfeV+zFfjP8A8Fsv+TevBH/Y5xf+m+8oA/mbooooAKKKKACiiigAooooAKKKKACiiigD7M/4J6f8nofCn/sNN/6TTV/ZhX8Z/wDwT0/5PQ+FP/Yab/0mmr+zCgAooooAKKKKACiiigAooooAKKKKACiiigD+AOiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigD+mT/gib/yb143/wCxzl/9N9nX7MV+M/8AwRN/5N68b/8AY5y/+m+zr9mKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigD/0f38ooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAK/Gf/gtl/yb14I/7HOL/wBN95X7MV+M/wDwWy/5N68Ef9jnF/6b7ygD+ZuiiigAooooAKKKKACiiigAooooAKKKKAPsz/gnp/yeh8Kf+w03/pNNX9mFfxn/APBPT/k9D4U/9hpv/Saav7MKACiiigAooooAKKKKACiiigAooooAKKKKAP4A6KKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKAP6ZP+CJv/JvXjf/ALHOX/032dfsxX4z/wDBE3/k3rxv/wBjnL/6b7Ov2YoAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKAP/S/fyiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAr8Z/+C2X/JvXgj/sc4v/AE33lfsxX4z/APBbL/k3rwR/2OcX/pvvKAP5m6KKKACiiigAooooAKKKKACiiigAooooA+zP+Cen/J6Hwp/7DTf+k01f2YV/Gf8A8E9P+T0PhT/2Gm/9Jpq/swoAKKKKACiiigAooooAKKKKACiiigAooooA/gDooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooA/pk/4Im/8m9eN/8Asc5f/TfZ1+zFfjP/AMETf+TevG//AGOcv/pvs6/ZigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooA/9P9/KKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACvxn/4LZf8m9eCP+xzi/8ATfeV+zFfjP8A8Fsv+TevBH/Y5xf+m+8oA/mbooooAKKKKACiiigAooooAKKKKACiiigD7M/4J6f8nofCn/sNN/6TTV/ZhX8Z/wDwT0/5PQ+FP/Yab/0mmr+zCgAooooAKKKKACiiigAooooAKKKKACiiigD+AOiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigD+mT/gib/yb143/wCxzl/9N9nX7MV+M/8AwRN/5N68b/8AY5y/+m+zr9mKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigD/1P38ooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAK/Gf/gtl/yb14I/7HOL/wBN95X7MV+M/wDwWy/5N68Ef9jnF/6b7ygD+ZuiiigAooooAKKKKACiiigAooooAKKKKAPsz/gnp/yeh8Kf+w03/pNNX9mFfwq/BT4r638Dvin4d+LHhy0tb7UvDd0bu3t70ObeRzG0eJBGyPjDnowOa/Ub/h9l+0L/ANCR4M/79ah/8m0Af0yUV/M3/wAPsv2hf+hI8Gf9+tQ/+TaP+H2X7Qv/AEJHgz/v1qH/AMm0Af0yUV/M3/w+y/aF/wChI8Gf9+tQ/wDk2j/h9l+0L/0JHgz/AL9ah/8AJtAH9MlFfzN/8Psv2hf+hI8Gf9+tQ/8Ak2j/AIfZftC/9CR4M/79ah/8m0Af0yUV/M3/AMPsv2hf+hI8Gf8AfrUP/k2j/h9l+0L/ANCR4M/79ah/8m0Af0yUV/M3/wAPsv2hf+hI8Gf9+tQ/+TaP+H2X7Qv/AEJHgz/v1qH/AMm0Af0yUV/M3/w+y/aF/wChI8Gf9+tQ/wDk2j/h9l+0L/0JHgz/AL9ah/8AJtAH4z0V/TJ/w5N/Z6/6Hfxn/wB/dP8A/kKj/hyb+z1/0O/jP/v7p/8A8hUAfzN0V/TJ/wAOTf2ev+h38Z/9/dP/APkKj/hyb+z1/wBDv4z/AO/un/8AyFQB/M3RX9Mn/Dk39nr/AKHfxn/390//AOQqP+HJv7PX/Q7+M/8Av7p//wAhUAfzN0V/TJ/w5N/Z6/6Hfxn/AN/dP/8AkKj/AIcm/s9f9Dv4z/7+6f8A/IVAH8zdFf0yf8OTf2ev+h38Z/8Af3T/AP5Co/4cm/s9f9Dv4z/7+6f/APIVAH8zdFf0yf8ADk39nr/od/Gf/f3T/wD5Co/4cm/s9f8AQ7+M/wDv7p//AMhUAfzN0V/TJ/w5N/Z6/wCh38Z/9/dP/wDkKvwV/ag+FGifA74++M/hP4cu7q+03w3fi0t7i9KG4kQxRyZkMaomcueigYoA8FooooAKKKKACiiigAooooAKKKKACiiigD+mT/gib/yb143/AOxzl/8ATfZ1+zFfjP8A8ETf+TevG/8A2Ocv/pvs6/ZigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooA//9X9/KKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACvxn/4LZf8m9eCP+xzi/8ATfeV+zFfjP8A8Fsv+TevBH/Y5xf+m+8oA/mbooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooA/v8ooooAKKKKACiiigAooooAKKKKACiiigAr+M//goX/wAnofFb/sNL/wCk0Nf2YV/Gf/wUL/5PQ+K3/YaX/wBJoaAPjOiiigAooooAKKKKACiiigAooooAKKKKAP6ZP+CJv/JvXjf/ALHOX/032dfsxX4z/wDBE3/k3rxv/wBjnL/6b7Ov2YoAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKAP/W/fyiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAr8Z/+C2X/JvXgj/sc4v/AE33lfsxX4z/APBbL/k3rwR/2OcX/pvvKAP5m6KKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKAP7/KKKKACiiigAooooAKKKKACiiigAooooAK/jP/4KF/8AJ6HxW/7DS/8ApNDX9mFfxn/8FC/+T0Pit/2Gl/8ASaGgD4zooooAKKKKACiiigAooooAKKKKACiiigD+mT/gib/yb143/wCxzl/9N9nX7MV+M/8AwRN/5N68b/8AY5y/+m+zr9mKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigD/1/38ooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAK/Gf/gtl/yb14I/7HOL/wBN95X7MV+M/wDwWy/5N68Ef9jnF/6b7ygD+ZuiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigD+/yiiigAooooAKKKKACiiigAooooAKKKKACv4z/+Chf/ACeh8Vv+w0v/AKTQ1/ZhX8Z//BQv/k9D4rf9hpf/AEmhoA+M6KKKACiiigAooooAKKKKACiiigAooooA/pk/4Im/8m9eN/8Asc5f/TfZ1+zFfjP/AMETf+TevG//AGOcv/pvs6/ZigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooA/9D9/KKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACvxn/4LZf8m9eCP+xzi/8ATfeV+zFfjP8A8Fsv+TevBH/Y5xf+m+8oA/mbooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooA/v8ooooAKKKKACiiigAooooAKKKKACiiigAr+M//goX/wAnofFb/sNL/wCk0Nf2YV/Gf/wUL/5PQ+K3/YaX/wBJoaAPjOiiigAooooAKKKKACiiigAooooAKKKKAP6ZP+CJv/JvXjf/ALHOX/032dfsxX4z/wDBE3/k3rxv/wBjnL/6b7Ov2YoAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKAP/R/fyiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAr8Z/+C2X/JvXgj/sc4v/AE33lfsxX4z/APBbL/k3rwR/2OcX/pvvKAP5m6KKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKAP7/KKKKACiiigAooooAKKKKACiiigAooooAK/jP/4KF/8AJ6HxW/7DS/8ApNDX9mFfxn/8FC/+T0Pit/2Gl/8ASaGgD4zooooAKKKKACiiigAooooAKKKKACiiigD+mT/gib/yb143/wCxzl/9N9nX7MV+M/8AwRN/5N68b/8AY5y/+m+zr9mKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigD/0v38ooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAK/Gf/gtl/yb14I/7HOL/wBN95X7MV+M/wDwWy/5N68Ef9jnF/6b7ygD+ZuiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigD+/yiiigAooooAKKKKACiiigAooooAKKKKACv4z/+Chf/ACeh8Vv+w0v/AKTQ1/ZhX8Z//BQv/k9D4rf9hpf/AEmhoA+M6KKKACiiigAooooAKKKKACiiigAooooA/pk/4Im/8m9eN/8Asc5f/TfZ1+zFfjP/AMETf+TevG//AGOcv/pvs6/ZigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooA/9P9/KKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACvxn/4LZf8m9eCP+xzi/8ATfeV+zFfjP8A8Fsv+TevBH/Y5xf+m+8oA/mbooooAKKKKACiiigAooooAKKKKACiiigD1L4KfCjW/jj8U/Dvwn8OXdrY6l4kujaW9xelxbxuI2kzIY1d8YQ9FJzX6jf8OTf2hf8Aod/Bn/f3UP8A5Cr4z/4J6f8AJ6Hwp/7DTf8ApNNX9mFAH8zf/Dk39oX/AKHfwZ/391D/AOQqP+HJv7Qv/Q7+DP8Av7qH/wAhV/TJRQB/M3/w5N/aF/6HfwZ/391D/wCQqP8Ahyb+0L/0O/gz/v7qH/yFX9MlFAH8zf8Aw5N/aF/6HfwZ/wB/dQ/+QqP+HJv7Qv8A0O/gz/v7qH/yFX9MlFAH8zf/AA5N/aF/6HfwZ/391D/5Co/4cm/tC/8AQ7+DP+/uof8AyFX9MlFAH8zf/Dk39oX/AKHfwZ/391D/AOQqP+HJv7Qv/Q7+DP8Av7qH/wAhV/TJRQB/M3/w5N/aF/6HfwZ/391D/wCQqP8Ahyb+0L/0O/gz/v7qH/yFX9MlFAH4z/8AD7L9nr/oSPGf/frT/wD5No/4fZfs9f8AQkeM/wDv1p//AMm1/M3RQB/TJ/w+y/Z6/wChI8Z/9+tP/wDk2j/h9l+z1/0JHjP/AL9af/8AJtfzN0UAf0yf8Psv2ev+hI8Z/wDfrT//AJNo/wCH2X7PX/QkeM/+/Wn/APybX8zdFAH9Mn/D7L9nr/oSPGf/AH60/wD+TaP+H2X7PX/QkeM/+/Wn/wDybX8zdFAH9Mn/AA+y/Z6/6Ejxn/360/8A+TaP+H2X7PX/AEJHjP8A79af/wDJtfzN0UAf0yf8Psv2ev8AoSPGf/frT/8A5No/4fZfs9f9CR4z/wC/Wn//ACbX8zdFAH9Mn/D7L9nr/oSPGf8A360//wCTa/BX9qD4r6J8cfj74z+LHhy0urHTfEl+Lu3t70ILiNBFHHiQRs6Zyh6MRivBaKACiiigAooooAKKKKACiiigAooooAKKKKAP6ZP+CJv/ACb143/7HOX/ANN9nX7MV+M//BE3/k3rxv8A9jnL/wCm+zr9mKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigD//U/fyiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAr8Z/+C2X/JvXgj/sc4v/AE33lfsxX4z/APBbL/k3rwR/2OcX/pvvKAP5m6KKKACiiigAooooAKKKKACiiigAooooA+zP+Cen/J6Hwp/7DTf+k01f2YV/Gf8A8E9P+T0PhT/2Gm/9Jpq/swoAKKKKACiiigAooooAKKKKACiiigAooooA/gDooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooA/pk/4Im/8m9eN/8Asc5f/TfZ1+zFfjP/AMETf+TevG//AGOcv/pvs6/ZigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooA/9X9/KKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACvxn/4LZf8m9eCP+xzi/8ATfeV+zFfjP8A8Fsv+TevBH/Y5xf+m+8oA/mbooooAKKKKACiiigAooooAKKKKACiiigD7M/4J6f8nofCn/sNN/6TTV/ZhX8Z/wDwT0/5PQ+FP/Yab/0mmr+zCgAooooAKKKKACiiigAooooAKKKKACiiigD+AOiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigD+mT/gib/yb143/wCxzl/9N9nX7MV+M/8AwRN/5N68b/8AY5y/+m+zr9mKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigD/1v38ooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAK/Gf/gtl/yb14I/7HOL/wBN95X7MV+M/wDwWy/5N68Ef9jnF/6b7ygD+ZuiiigAooooAKKKKACiiigAooooAKKKKAPsz/gnp/yeh8Kf+w03/pNNX9mFfxn/APBPT/k9D4U/9hpv/Saav7MKACiiigAooooAKKKKACiiigAooooAKKKKAP4A6KKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKAP6ZP+CJv/JvXjf/ALHOX/032dfsxX4z/wDBE3/k3rxv/wBjnL/6b7Ov2YoAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKAP/X/fyiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAr8Z/+C2X/JvXgj/sc4v/AE33lfsxX4z/APBbL/k3rwR/2OcX/pvvKAP5m6KKKACiiigAooooAKKKKACiiigAooooA+zP+Cen/J6Hwp/7DTf+k01f2YV/Gf8A8E9P+T0PhT/2Gm/9Jpq/swoAKKKKACiiigAooooAKKKKACiiigAooooA/gDooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooA/pk/4Im/8m9eN/8Asc5f/TfZ1+zFfjP/AMETf+TevG//AGOcv/pvs6/ZigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooA/9D9/KKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACvxn/4LZf8m9eCP+xzi/8ATfeV+zFfjP8A8Fsv+TevBH/Y5xf+m+8oA/mbooooAKKKKACiiigAooooAKKKKACiiigD7M/4J6f8nofCn/sNN/6TTV/ZhX8Z/wDwT0/5PQ+FP/Yab/0mmr+zCgAooooAKKKKACiiigAooooAKKKKACiiigD+AOiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigD+mT/gib/yb143/wCxzl/9N9nX7MV+M/8AwRN/5N68b/8AY5y/+m+zr9mKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigD/0f38ooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAK/Gf/gtl/yb14I/7HOL/wBN95X7MV+XP/BVv4KfFP44/BTwn4c+E/h268SalY+KY724t7QoHjtxZXUZkPmOgxvdRwc5NAH8pNFfZn/DvT9tD/olOtf99W3/AMeo/wCHen7aH/RKda/76tv/AI9QB8Z0V9mf8O9P20P+iU61/wB9W3/x6j/h3p+2h/0SnWv++rb/AOPUAfGdFfZn/DvT9tD/AKJTrX/fVt/8eo/4d6ftof8ARKda/wC+rb/49QB8Z0V9mf8ADvT9tD/olOtf99W3/wAeo/4d6ftof9Ep1r/vq2/+PUAfGdFfZn/DvT9tD/olOtf99W3/AMeo/wCHen7aH/RKda/76tv/AI9QB8Z0V9mf8O9P20P+iU61/wB9W3/x6j/h3p+2h/0SnWv++rb/AOPUAH/BPT/k9D4U/wDYab/0mmr+zCv5cv2Kv2Kv2pvhz+1N8OvG3jb4dappOh6TqjT3t7O0BjgjMEq7m2ys2NzAcA9a/qNoAKKKKACiiigAooooAKKKKACiiigAooooA/gDor7M/wCHen7aH/RKda/76tv/AI9R/wAO9P20P+iU61/31bf/AB6gD4zor7M/4d6ftof9Ep1r/vq2/wDj1H/DvT9tD/olOtf99W3/AMeoA+M6K+zP+Hen7aH/AESnWv8Avq2/+PUf8O9P20P+iU61/wB9W3/x6gD4zor7M/4d6ftof9Ep1r/vq2/+PUf8O9P20P8AolOtf99W3/x6gD4zor7M/wCHen7aH/RKda/76tv/AI9R/wAO9P20P+iU61/31bf/AB6gD4zor7M/4d6ftof9Ep1r/vq2/wDj1H/DvT9tD/olOtf99W3/AMeoA+M6K+zP+Hen7aH/AESnWv8Avq2/+PUf8O9P20P+iU61/wB9W3/x6gD4zor7M/4d6ftof9Ep1r/vq2/+PUf8O9P20P8AolOtf99W3/x6gD4zor7M/wCHen7aH/RKda/76tv/AI9R/wAO9P20P+iU61/31bf/AB6gD4zor7M/4d6ftof9Ep1r/vq2/wDj1H/DvT9tD/olOtf99W3/AMeoA+M6K+zP+Hen7aH/AESnWv8Avq2/+PUf8O9P20P+iU61/wB9W3/x6gD4zor7M/4d6ftof9Ep1r/vq2/+PUf8O9P20P8AolOtf99W3/x6gD4zor7M/wCHen7aH/RKda/76tv/AI9R/wAO9P20P+iU61/31bf/AB6gD9mP+CJv/JvXjf8A7HOX/wBN9nX7MV+XP/BKT4KfFP4HfBTxZ4c+LHh268N6lfeKZL23t7soXktzZWsYkHlu4xvRhyc5FfqNQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAf/9L9/KKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooA//T/fyiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKAP/1P38ooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigD/9X9/KKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooA//W/fyiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKAP/1/38ooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigD/9D9/KKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooA//R/fyiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKAP/0v38ooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigD/9P9/KKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooA//U/fyiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKAP/1f38ooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigD/9b9/KKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooA//X/fyiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKAP/0P38ooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigD/9H9/KKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooA//S/fyiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKAP/0/38ooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigD/9T9/KKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooA//V/fyiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKAP/1v38ooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigD/9f9/KKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooA//Q/fyiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKAP/2Q=="/>
</defs>
</svg>
`,Un=(J,W,X)=>{let G=X?`nonce="${X}"`:"";return`<!doctype html>
<html>
  <head>
    <title>Scalar API Reference</title>
    <meta charset="utf-8" />
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1" />
  </head>
  <body>
    <script
      id="api-reference"
      type="application/json">
    ${JSON.stringify(J)}
    </script>
	 <script ${G}>
      var configuration = {
	  	favicon: "data:image/svg+xml;utf8,${encodeURIComponent(Fn)}",
	   	theme: "${W||"default"}",
        metaData: {
			title: "Better Auth API",
			description: "API Reference for your Better Auth Instance",
		}
      }

      document.getElementById('api-reference').dataset.configuration =
        JSON.stringify(configuration)
    </script>
	  <script src="https://cdn.jsdelivr.net/npm/@scalar/api-reference" ${G}></script>
  </body>
</html>`},AO=(J)=>{let W=J?.path??"/reference";return{id:"open-api",endpoints:{generateOpenAPISchema:y("/open-api/generate-schema",{method:"GET"},async(X)=>{let G=await ZC(X.context,X.context.options);return X.json(G)}),openAPIReference:y(W,{method:"GET",metadata:{isAction:!1}},async(X)=>{if(J?.disableDefaultReference)throw new V("NOT_FOUND");let G=await ZC(X.context,X.context.options);return new Response(Un(G,J?.theme,J?.nonce),{headers:{"Content-Type":"text/html"}})})}}};Y8();kJ();m4();W0();X8();var Qn=(J,W)=>{let X={};for(let[G,Y]of Object.entries(J))X[G]=($)=>{return Y({...$,context:{...W,...$.context}})},X[G].path=Y.path,X[G].method=Y.method,X[G].options=Y.options,X[G].headers=Y.headers;return X},p6=(J,W)=>{let X=J.adapter;return{findOrganizationBySlug:async(G)=>{return await(await e(X)).findOne({model:"organization",where:[{field:"slug",value:G}]})},createOrganization:async(G)=>{let Y=await(await e(X)).create({model:"organization",data:{...G.organization,metadata:G.organization.metadata?JSON.stringify(G.organization.metadata):void 0},forceAllowId:!0});return{...Y,metadata:Y.metadata&&typeof Y.metadata==="string"?JSON.parse(Y.metadata):void 0}},findMemberByEmail:async(G)=>{let Y=await e(X),$=await Y.findOne({model:"user",where:[{field:"email",value:G.email.toLowerCase()}]});if(!$)return null;let K=await Y.findOne({model:"member",where:[{field:"organizationId",value:G.organizationId},{field:"userId",value:$.id}]});if(!K)return null;return{...K,user:{id:$.id,name:$.name,email:$.email,image:$.image}}},listMembers:async(G)=>{let Y=await e(X),$=await Promise.all([Y.findMany({model:"member",where:[{field:"organizationId",value:G.organizationId},...G.filter?.field?[{field:G.filter?.field,value:G.filter?.value}]:[]],limit:G.limit||W?.membershipLimit||100,offset:G.offset||0,sortBy:G.sortBy?{field:G.sortBy,direction:G.sortOrder||"asc"}:void 0}),Y.count({model:"member",where:[{field:"organizationId",value:G.organizationId},...G.filter?.field?[{field:G.filter?.field,value:G.filter?.value}]:[]]})]),K=await Y.findMany({model:"user",where:[{field:"id",value:$[0].map((w)=>w.userId),operator:"in"}]});return{members:$[0].map((w)=>{let H=K.find((z)=>z.id===w.userId);if(!H)throw new Y6("Unexpected error: User not found for member");return{...w,user:{id:H.id,name:H.name,email:H.email,image:H.image}}}),total:$[1]}},findMemberByOrgId:async(G)=>{let Y=await(await e(X)).findOne({model:"member",where:[{field:"userId",value:G.userId},{field:"organizationId",value:G.organizationId}],join:{user:!0}});if(!Y||!Y.user)return null;let{user:$,...K}=Y;return{...K,user:{id:$.id,name:$.name,email:$.email,image:$.image}}},findMemberById:async(G)=>{let Y=await(await e(X)).findOne({model:"member",where:[{field:"id",value:G}],join:{user:!0}});if(!Y)return null;let{user:$,...K}=Y;return{...K,user:{id:$.id,name:$.name,email:$.email,image:$.image}}},createMember:async(G)=>{return await(await e(X)).create({model:"member",data:{...G,createdAt:new Date}})},updateMember:async(G,Y)=>{return await(await e(X)).update({model:"member",where:[{field:"id",value:G}],update:{role:Y}})},deleteMember:async({memberId:G,organizationId:Y,userId:$})=>{let K=await e(X),w;if(!$){let z=await K.findOne({model:"member",where:[{field:"id",value:G}]});if(!z)throw new Y6("Member not found");w=z.userId}else w=$;let H=await K.delete({model:"member",where:[{field:"id",value:G}]});if(W?.teams?.enabled){let z=await K.findMany({model:"team",where:[{field:"organizationId",value:Y}]});await Promise.all(z.map((N)=>K.deleteMany({model:"teamMember",where:[{field:"teamId",value:N.id},{field:"userId",value:w}]})))}return H},updateOrganization:async(G,Y)=>{let $=await(await e(X)).update({model:"organization",where:[{field:"id",value:G}],update:{...Y,metadata:typeof Y.metadata==="object"?JSON.stringify(Y.metadata):Y.metadata}});if(!$)return null;return{...$,metadata:$.metadata?D3($.metadata):void 0}},deleteOrganization:async(G)=>{let Y=await e(X);return await Y.delete({model:"member",where:[{field:"organizationId",value:G}]}),await Y.delete({model:"invitation",where:[{field:"organizationId",value:G}]}),await Y.delete({model:"organization",where:[{field:"id",value:G}]}),G},setActiveOrganization:async(G,Y,$)=>{return await J.internalAdapter.updateSession(G,{activeOrganizationId:Y})},findOrganizationById:async(G)=>{return await(await e(X)).findOne({model:"organization",where:[{field:"id",value:G}]})},checkMembership:async({userId:G,organizationId:Y})=>{return await(await e(X)).findOne({model:"member",where:[{field:"userId",value:G},{field:"organizationId",value:Y}]})},findFullOrganization:async({organizationId:G,isSlug:Y,includeTeams:$,membersLimit:K})=>{let w=await e(X),H=await w.findOne({model:"organization",where:[{field:Y?"slug":"id",value:G}],join:{invitation:!0,member:K?{limit:K}:!0,...$?{team:!0}:{}}});if(!H)return null;let{invitation:z,member:N,team:U,...F}=H,Z=N.map((P)=>P.userId),L=Z.length>0?await w.findMany({model:"user",where:[{field:"id",value:Z,operator:"in"}],limit:W?.membershipLimit||100}):[],D=new Map(L.map((P)=>[P.id,P])),O=N.map((P)=>{let _=D.get(P.userId);if(!_)throw new Y6("Unexpected error: User not found for member");return{...P,user:{id:_.id,name:_.name,email:_.email,image:_.image}}});return{...F,invitations:z,members:O,teams:U}},listOrganizations:async(G)=>{let Y=await(await e(X)).findMany({model:"member",where:[{field:"userId",value:G}],join:{organization:!0}});if(!Y||Y.length===0)return[];return Y.map(($)=>$.organization)},createTeam:async(G)=>{return await(await e(X)).create({model:"team",data:G})},findTeamById:async({teamId:G,organizationId:Y,includeTeamMembers:$})=>{let K=await(await e(X)).findOne({model:"team",where:[{field:"id",value:G},...Y?[{field:"organizationId",value:Y}]:[]],join:{...$?{teamMember:!0}:{}}});if(!K)return null;let{teamMember:w,...H}=K;return{...H,...$?{members:w}:{}}},updateTeam:async(G,Y)=>{let $=await e(X);if("id"in Y)Y.id=void 0;return await $.update({model:"team",where:[{field:"id",value:G}],update:{...Y}})},deleteTeam:async(G)=>{let Y=await e(X);return await Y.deleteMany({model:"teamMember",where:[{field:"teamId",value:G}]}),await Y.delete({model:"team",where:[{field:"id",value:G}]})},listTeams:async(G)=>{return await(await e(X)).findMany({model:"team",where:[{field:"organizationId",value:G}]})},createTeamInvitation:async({email:G,role:Y,teamId:$,organizationId:K,inviterId:w,expiresIn:H=172800000})=>{let z=await e(X),N=Z4(H);return await z.create({model:"invitation",data:{email:G,role:Y,organizationId:K,teamId:$,inviterId:w,status:"pending",expiresAt:N}})},setActiveTeam:async(G,Y,$)=>{return await J.internalAdapter.updateSession(G,{activeTeamId:Y})},listTeamMembers:async(G)=>{return await(await e(X)).findMany({model:"teamMember",where:[{field:"teamId",value:G.teamId}]})},countTeamMembers:async(G)=>{return await(await e(X)).count({model:"teamMember",where:[{field:"teamId",value:G.teamId}]})},countMembers:async(G)=>{return await(await e(X)).count({model:"member",where:[{field:"organizationId",value:G.organizationId}]})},listTeamsByUser:async(G)=>{return(await(await e(X)).findMany({model:"teamMember",where:[{field:"userId",value:G.userId}],join:{team:!0}})).map((Y)=>Y.team)},findTeamMember:async(G)=>{return await(await e(X)).findOne({model:"teamMember",where:[{field:"teamId",value:G.teamId},{field:"userId",value:G.userId}]})},findOrCreateTeamMember:async(G)=>{let Y=await e(X),$=await Y.findOne({model:"teamMember",where:[{field:"teamId",value:G.teamId},{field:"userId",value:G.userId}]});if($)return $;return await Y.create({model:"teamMember",data:{teamId:G.teamId,userId:G.userId,createdAt:new Date}})},removeTeamMember:async(G)=>{await(await e(X)).deleteMany({model:"teamMember",where:[{field:"teamId",value:G.teamId},{field:"userId",value:G.userId}]})},findInvitationsByTeamId:async(G)=>{return await(await e(X)).findMany({model:"invitation",where:[{field:"teamId",value:G}]})},listUserInvitations:async(G)=>{return await(await e(X)).findMany({model:"invitation",where:[{field:"email",value:G.toLowerCase()}]})},createInvitation:async({invitation:G,user:Y})=>{let $=await e(X),K=Z4(W?.invitationExpiresIn||172800,"sec");return await $.create({model:"invitation",data:{status:"pending",expiresAt:K,createdAt:new Date,inviterId:Y.id,...G,teamId:G.teamIds.length>0?G.teamIds.join(","):null}})},findInvitationById:async(G)=>{return await(await e(X)).findOne({model:"invitation",where:[{field:"id",value:G}]})},findPendingInvitation:async(G)=>{return(await(await e(X)).findMany({model:"invitation",where:[{field:"email",value:G.email.toLowerCase()},{field:"organizationId",value:G.organizationId},{field:"status",value:"pending"}]})).filter((Y)=>new Date(Y.expiresAt)>new Date)},findPendingInvitations:async(G)=>{return(await(await e(X)).findMany({model:"invitation",where:[{field:"organizationId",value:G.organizationId},{field:"status",value:"pending"}]})).filter((Y)=>new Date(Y.expiresAt)>new Date)},listInvitations:async(G)=>{return await(await e(X)).findMany({model:"invitation",where:[{field:"organizationId",value:G.organizationId}]})},updateInvitation:async(G)=>{return await(await e(X)).update({model:"invitation",where:[{field:"id",value:G.invitationId}],update:{status:G.status}})}}},n6=u6(async()=>{return{}}),V4=u6({use:[u4]},async(J)=>{return{session:J.context.session}}),k=d6({YOU_ARE_NOT_ALLOWED_TO_CREATE_A_NEW_ORGANIZATION:"You are not allowed to create a new organization",YOU_HAVE_REACHED_THE_MAXIMUM_NUMBER_OF_ORGANIZATIONS:"You have reached the maximum number of organizations",ORGANIZATION_ALREADY_EXISTS:"Organization already exists",ORGANIZATION_SLUG_ALREADY_TAKEN:"Organization slug already taken",ORGANIZATION_NOT_FOUND:"Organization not found",USER_IS_NOT_A_MEMBER_OF_THE_ORGANIZATION:"User is not a member of the organization",YOU_ARE_NOT_ALLOWED_TO_UPDATE_THIS_ORGANIZATION:"You are not allowed to update this organization",YOU_ARE_NOT_ALLOWED_TO_DELETE_THIS_ORGANIZATION:"You are not allowed to delete this organization",NO_ACTIVE_ORGANIZATION:"No active organization",USER_IS_ALREADY_A_MEMBER_OF_THIS_ORGANIZATION:"User is already a member of this organization",MEMBER_NOT_FOUND:"Member not found",ROLE_NOT_FOUND:"Role not found",YOU_ARE_NOT_ALLOWED_TO_CREATE_A_NEW_TEAM:"You are not allowed to create a new team",TEAM_ALREADY_EXISTS:"Team already exists",TEAM_NOT_FOUND:"Team not found",YOU_CANNOT_LEAVE_THE_ORGANIZATION_AS_THE_ONLY_OWNER:"You cannot leave the organization as the only owner",YOU_CANNOT_LEAVE_THE_ORGANIZATION_WITHOUT_AN_OWNER:"You cannot leave the organization without an owner",YOU_ARE_NOT_ALLOWED_TO_DELETE_THIS_MEMBER:"You are not allowed to delete this member",YOU_ARE_NOT_ALLOWED_TO_INVITE_USERS_TO_THIS_ORGANIZATION:"You are not allowed to invite users to this organization",USER_IS_ALREADY_INVITED_TO_THIS_ORGANIZATION:"User is already invited to this organization",INVITATION_NOT_FOUND:"Invitation not found",YOU_ARE_NOT_THE_RECIPIENT_OF_THE_INVITATION:"You are not the recipient of the invitation",EMAIL_VERIFICATION_REQUIRED_BEFORE_ACCEPTING_OR_REJECTING_INVITATION:"Email verification required before accepting or rejecting invitation",YOU_ARE_NOT_ALLOWED_TO_CANCEL_THIS_INVITATION:"You are not allowed to cancel this invitation",INVITER_IS_NO_LONGER_A_MEMBER_OF_THE_ORGANIZATION:"Inviter is no longer a member of the organization",YOU_ARE_NOT_ALLOWED_TO_INVITE_USER_WITH_THIS_ROLE:"You are not allowed to invite a user with this role",FAILED_TO_RETRIEVE_INVITATION:"Failed to retrieve invitation",YOU_HAVE_REACHED_THE_MAXIMUM_NUMBER_OF_TEAMS:"You have reached the maximum number of teams",UNABLE_TO_REMOVE_LAST_TEAM:"Unable to remove last team",YOU_ARE_NOT_ALLOWED_TO_UPDATE_THIS_MEMBER:"You are not allowed to update this member",ORGANIZATION_MEMBERSHIP_LIMIT_REACHED:"Organization membership limit reached",YOU_ARE_NOT_ALLOWED_TO_CREATE_TEAMS_IN_THIS_ORGANIZATION:"You are not allowed to create teams in this organization",YOU_ARE_NOT_ALLOWED_TO_DELETE_TEAMS_IN_THIS_ORGANIZATION:"You are not allowed to delete teams in this organization",YOU_ARE_NOT_ALLOWED_TO_UPDATE_THIS_TEAM:"You are not allowed to update this team",YOU_ARE_NOT_ALLOWED_TO_DELETE_THIS_TEAM:"You are not allowed to delete this team",INVITATION_LIMIT_REACHED:"Invitation limit reached",TEAM_MEMBER_LIMIT_REACHED:"Team member limit reached",USER_IS_NOT_A_MEMBER_OF_THE_TEAM:"User is not a member of the team",YOU_CAN_NOT_ACCESS_THE_MEMBERS_OF_THIS_TEAM:"You are not allowed to list the members of this team",YOU_DO_NOT_HAVE_AN_ACTIVE_TEAM:"You do not have an active team",YOU_ARE_NOT_ALLOWED_TO_CREATE_A_NEW_TEAM_MEMBER:"You are not allowed to create a new member",YOU_ARE_NOT_ALLOWED_TO_REMOVE_A_TEAM_MEMBER:"You are not allowed to remove a team member",YOU_ARE_NOT_ALLOWED_TO_ACCESS_THIS_ORGANIZATION:"You are not allowed to access this organization as an owner",YOU_ARE_NOT_A_MEMBER_OF_THIS_ORGANIZATION:"You are not a member of this organization",MISSING_AC_INSTANCE:"Dynamic Access Control requires a pre-defined ac instance on the server auth plugin. Read server logs for more information",YOU_MUST_BE_IN_AN_ORGANIZATION_TO_CREATE_A_ROLE:"You must be in an organization to create a role",YOU_ARE_NOT_ALLOWED_TO_CREATE_A_ROLE:"You are not allowed to create a role",YOU_ARE_NOT_ALLOWED_TO_UPDATE_A_ROLE:"You are not allowed to update a role",YOU_ARE_NOT_ALLOWED_TO_DELETE_A_ROLE:"You are not allowed to delete a role",YOU_ARE_NOT_ALLOWED_TO_READ_A_ROLE:"You are not allowed to read a role",YOU_ARE_NOT_ALLOWED_TO_LIST_A_ROLE:"You are not allowed to list a role",YOU_ARE_NOT_ALLOWED_TO_GET_A_ROLE:"You are not allowed to get a role",TOO_MANY_ROLES:"This organization has too many roles",INVALID_RESOURCE:"The provided permission includes an invalid resource",ROLE_NAME_IS_ALREADY_TAKEN:"That role name is already taken",CANNOT_DELETE_A_PRE_DEFINED_ROLE:"Cannot delete a pre-defined role"}),H0=async(J,W)=>{let X={...J.options.roles||P3};if(W&&J.organizationId&&J.options.dynamicAccessControl?.enabled&&J.options.ac&&!J.useMemoryCache){let G=await W.context.adapter.findMany({model:"organizationRole",where:[{field:"organizationId",value:J.organizationId}]});for(let{role:Y,permission:$}of G){if(Y in X)continue;let K=T6(j(),P6(j())).safeParse(JSON.parse($));if(!K.success)throw W.context.logger.error("[hasPermission] Invalid permissions for role "+Y,{permissions:JSON.parse($)}),new V("INTERNAL_SERVER_ERROR",{message:"Invalid permissions for role "+Y});X[Y]=J.options.ac.newRole(K.data)}}if(J.useMemoryCache)X=UO.get(J.organizationId)||X;return UO.set(J.organizationId,X),oR(J,X)},VC=(J)=>J.toLowerCase(),Zn=Number.POSITIVE_INFINITY,R3=(J,W=!1)=>{let X=J?.schema?.organizationRole?.additionalFields||{};if(W)for(let G in X)X[G].required=!1;return{additionalFieldsSchema:AW({fields:X,isClientSide:!0}),$AdditionalFields:{},$ReturnAdditionalFields:{}}},Ln=(J)=>{let{additionalFieldsSchema:W,$AdditionalFields:X,$ReturnAdditionalFields:G}=R3(J,!1);return y("/organization/create-role",{method:"POST",body:c({organizationId:j().optional().meta({description:"The id of the organization to create the role in. If not provided, the user's active organization will be used."}),role:j().meta({description:"The name of the role to create"}),permission:T6(j(),P6(j())).meta({description:"The permission to assign to the role"}),additionalFields:c({...W.shape}).optional()}),metadata:{$Infer:{body:{}}},requireHeaders:!0,use:[V4]},async(Y)=>{let{session:$,user:K}=Y.context.session,w=Y.body.role,H=Y.body.permission,z=Y.body.additionalFields,N=J.ac;if(!N)throw Y.context.logger.error("[Dynamic Access Control] The organization plugin is missing a pre-defined ac instance.",`
Please refer to the documentation here: https://better-auth.com/docs/plugins/organization#dynamic-access-control`),new V("NOT_IMPLEMENTED",{message:k.MISSING_AC_INSTANCE});let U=Y.body.organizationId??$.activeOrganizationId;if(!U)throw Y.context.logger.error("[Dynamic Access Control] The session is missing an active organization id to create a role. Either set an active org id, or pass an organizationId in the request body."),new V("BAD_REQUEST",{message:k.YOU_MUST_BE_IN_AN_ORGANIZATION_TO_CREATE_A_ROLE});w=VC(w),await OC({role:w,organizationId:U,options:J,ctx:Y});let F=await Y.context.adapter.findOne({model:"member",where:[{field:"organizationId",value:U,operator:"eq",connector:"AND"},{field:"userId",value:K.id,operator:"eq",connector:"AND"}]});if(!F)throw Y.context.logger.error("[Dynamic Access Control] The user is not a member of the organization to create a role.",{userId:K.id,organizationId:U}),new V("FORBIDDEN",{message:k.YOU_ARE_NOT_A_MEMBER_OF_THIS_ORGANIZATION});if(!await H0({options:J,organizationId:U,permissions:{ac:["create"]},role:F.role},Y))throw Y.context.logger.error('[Dynamic Access Control] The user is not permitted to create a role. If this is unexpected, please make sure the role associated to that member has the "ac" resource with the "create" permission.',{userId:K.id,organizationId:U,role:F.role}),new V("FORBIDDEN",{message:k.YOU_ARE_NOT_ALLOWED_TO_CREATE_A_ROLE});let Z=typeof J.dynamicAccessControl?.maximumRolesPerOrganization==="function"?await J.dynamicAccessControl.maximumRolesPerOrganization(U):J.dynamicAccessControl?.maximumRolesPerOrganization??Zn,L=await Y.context.adapter.count({model:"organizationRole",where:[{field:"organizationId",value:U,operator:"eq",connector:"AND"}]});if(L>=Z)throw Y.context.logger.error(`[Dynamic Access Control] Failed to create a new role, the organization has too many roles. Maximum allowed roles is ${Z}.`,{organizationId:U,maximumRolesPerOrganization:Z,rolesInDB:L}),new V("BAD_REQUEST",{message:k.TOO_MANY_ROLES});await DC({ac:N,ctx:Y,permission:H}),await MC({ctx:Y,member:F,options:J,organizationId:U,permissionRequired:H,user:K,action:"create"}),await PC({ctx:Y,organizationId:U,role:w});let D=N.newRole(H),O={...await Y.context.adapter.create({model:"organizationRole",data:{createdAt:new Date,organizationId:U,permission:JSON.stringify(H),role:w,...z}}),permission:H};return Y.json({success:!0,roleData:O,statements:D.statements})})},Vn=(J)=>{return y("/organization/delete-role",{method:"POST",body:c({organizationId:j().optional().meta({description:"The id of the organization to create the role in. If not provided, the user's active organization will be used."})}).and(Y0([c({roleName:j().nonempty().meta({description:"The name of the role to delete"})}),c({roleId:j().nonempty().meta({description:"The id of the role to delete"})})])),requireHeaders:!0,use:[V4],metadata:{$Infer:{body:{}}}},async(W)=>{let{session:X,user:G}=W.context.session,Y=W.body.organizationId??X.activeOrganizationId;if(!Y)throw W.context.logger.error("[Dynamic Access Control] The session is missing an active organization id to delete a role. Either set an active org id, or pass an organizationId in the request body."),new V("BAD_REQUEST",{message:k.NO_ACTIVE_ORGANIZATION});let $=await W.context.adapter.findOne({model:"member",where:[{field:"organizationId",value:Y,operator:"eq",connector:"AND"},{field:"userId",value:G.id,operator:"eq",connector:"AND"}]});if(!$)throw W.context.logger.error("[Dynamic Access Control] The user is not a member of the organization to delete a role.",{userId:G.id,organizationId:Y}),new V("FORBIDDEN",{message:k.YOU_ARE_NOT_A_MEMBER_OF_THIS_ORGANIZATION});if(!await H0({options:J,organizationId:Y,permissions:{ac:["delete"]},role:$.role},W))throw W.context.logger.error('[Dynamic Access Control] The user is not permitted to delete a role. If this is unexpected, please make sure the role associated to that member has the "ac" resource with the "delete" permission.',{userId:G.id,organizationId:Y,role:$.role}),new V("FORBIDDEN",{message:k.YOU_ARE_NOT_ALLOWED_TO_DELETE_A_ROLE});if(W.body.roleName){let H=W.body.roleName,z=J.roles?Object.keys(J.roles):["owner","admin","member"];if(z.includes(H))throw W.context.logger.error("[Dynamic Access Control] Cannot delete a pre-defined role.",{roleName:H,organizationId:Y,defaultRoles:z}),new V("BAD_REQUEST",{message:k.CANNOT_DELETE_A_PRE_DEFINED_ROLE})}let K;if(W.body.roleName)K={field:"role",value:W.body.roleName,operator:"eq",connector:"AND"};else if(W.body.roleId)K={field:"id",value:W.body.roleId,operator:"eq",connector:"AND"};else throw W.context.logger.error("[Dynamic Access Control] The role name/id is not provided in the request body."),new V("BAD_REQUEST",{message:k.ROLE_NOT_FOUND});let w=await W.context.adapter.findOne({model:"organizationRole",where:[{field:"organizationId",value:Y,operator:"eq",connector:"AND"},K]});if(!w)throw W.context.logger.error("[Dynamic Access Control] The role name/id does not exist in the database.",{..."roleName"in W.body?{roleName:W.body.roleName}:{roleId:W.body.roleId},organizationId:Y}),new V("BAD_REQUEST",{message:k.ROLE_NOT_FOUND});return w.permission=JSON.parse(w.permission),await W.context.adapter.delete({model:"organizationRole",where:[{field:"organizationId",value:Y,operator:"eq",connector:"AND"},K]}),W.json({success:!0})})},Dn=(J)=>{let{$ReturnAdditionalFields:W}=R3(J,!1);return y("/organization/list-roles",{method:"GET",use:[V4],query:c({organizationId:j().optional().meta({description:"The id of the organization to list roles for. If not provided, the user's active organization will be used."})}).optional()},async(X)=>{let{session:G,user:Y}=X.context.session,$=X.query?.organizationId??G.activeOrganizationId;if(!$)throw X.context.logger.error("[Dynamic Access Control] The session is missing an active organization id to list roles. Either set an active org id, or pass an organizationId in the request query."),new V("BAD_REQUEST",{message:k.NO_ACTIVE_ORGANIZATION});let K=await X.context.adapter.findOne({model:"member",where:[{field:"organizationId",value:$,operator:"eq",connector:"AND"},{field:"userId",value:Y.id,operator:"eq",connector:"AND"}]});if(!K)throw X.context.logger.error("[Dynamic Access Control] The user is not a member of the organization to list roles.",{userId:Y.id,organizationId:$}),new V("FORBIDDEN",{message:k.YOU_ARE_NOT_A_MEMBER_OF_THIS_ORGANIZATION});if(!await H0({options:J,organizationId:$,permissions:{ac:["read"]},role:K.role},X))throw X.context.logger.error("[Dynamic Access Control] The user is not permitted to list roles.",{userId:Y.id,organizationId:$,role:K.role}),new V("FORBIDDEN",{message:k.YOU_ARE_NOT_ALLOWED_TO_LIST_A_ROLE});let w=await X.context.adapter.findMany({model:"organizationRole",where:[{field:"organizationId",value:$,operator:"eq",connector:"AND"}]});return w=w.map((H)=>({...H,permission:JSON.parse(H.permission)})),X.json(w)})},Mn=(J)=>{let{$ReturnAdditionalFields:W}=R3(J,!1);return y("/organization/get-role",{method:"GET",use:[V4],query:c({organizationId:j().optional().meta({description:"The id of the organization to read a role for. If not provided, the user's active organization will be used."})}).and(Y0([c({roleName:j().nonempty().meta({description:"The name of the role to read"})}),c({roleId:j().nonempty().meta({description:"The id of the role to read"})})])).optional(),metadata:{$Infer:{query:{}}}},async(X)=>{let{session:G,user:Y}=X.context.session,$=X.query?.organizationId??G.activeOrganizationId;if(!$)throw X.context.logger.error("[Dynamic Access Control] The session is missing an active organization id to read a role. Either set an active org id, or pass an organizationId in the request query."),new V("BAD_REQUEST",{message:k.NO_ACTIVE_ORGANIZATION});let K=await X.context.adapter.findOne({model:"member",where:[{field:"organizationId",value:$,operator:"eq",connector:"AND"},{field:"userId",value:Y.id,operator:"eq",connector:"AND"}]});if(!K)throw X.context.logger.error("[Dynamic Access Control] The user is not a member of the organization to read a role.",{userId:Y.id,organizationId:$}),new V("FORBIDDEN",{message:k.YOU_ARE_NOT_A_MEMBER_OF_THIS_ORGANIZATION});if(!await H0({options:J,organizationId:$,permissions:{ac:["read"]},role:K.role},X))throw X.context.logger.error("[Dynamic Access Control] The user is not permitted to read a role.",{userId:Y.id,organizationId:$,role:K.role}),new V("FORBIDDEN",{message:k.YOU_ARE_NOT_ALLOWED_TO_READ_A_ROLE});let w;if(X.query.roleName)w={field:"role",value:X.query.roleName,operator:"eq",connector:"AND"};else if(X.query.roleId)w={field:"id",value:X.query.roleId,operator:"eq",connector:"AND"};else throw X.context.logger.error("[Dynamic Access Control] The role name/id is not provided in the request query."),new V("BAD_REQUEST",{message:k.ROLE_NOT_FOUND});let H=await X.context.adapter.findOne({model:"organizationRole",where:[{field:"organizationId",value:$,operator:"eq",connector:"AND"},w]});if(!H)throw X.context.logger.error("[Dynamic Access Control] The role name/id does not exist in the database.",{..."roleName"in X.query?{roleName:X.query.roleName}:{roleId:X.query.roleId},organizationId:$}),new V("BAD_REQUEST",{message:k.ROLE_NOT_FOUND});return H.permission=JSON.parse(H.permission),X.json(H)})},On=(J)=>{let{additionalFieldsSchema:W,$AdditionalFields:X,$ReturnAdditionalFields:G}=R3(J,!0);return y("/organization/update-role",{method:"POST",body:c({organizationId:j().optional().meta({description:"The id of the organization to update the role in. If not provided, the user's active organization will be used."}),data:c({permission:T6(j(),P6(j())).optional().meta({description:"The permission to update the role with"}),roleName:j().optional().meta({description:"The name of the role to update"}),...W.shape})}).and(Y0([c({roleName:j().nonempty().meta({description:"The name of the role to update"})}),c({roleId:j().nonempty().meta({description:"The id of the role to update"})})])),metadata:{$Infer:{body:{}}},use:[V4]},async(Y)=>{let{session:$,user:K}=Y.context.session,w=J.ac;if(!w)throw Y.context.logger.error("[Dynamic Access Control] The organization plugin is missing a pre-defined ac instance.",`
Please refer to the documentation here: https://better-auth.com/docs/plugins/organization#dynamic-access-control`),new V("NOT_IMPLEMENTED",{message:k.MISSING_AC_INSTANCE});let H=Y.body.organizationId??$.activeOrganizationId;if(!H)throw Y.context.logger.error("[Dynamic Access Control] The session is missing an active organization id to update a role. Either set an active org id, or pass an organizationId in the request body."),new V("BAD_REQUEST",{message:k.NO_ACTIVE_ORGANIZATION});let z=await Y.context.adapter.findOne({model:"member",where:[{field:"organizationId",value:H,operator:"eq",connector:"AND"},{field:"userId",value:K.id,operator:"eq",connector:"AND"}]});if(!z)throw Y.context.logger.error("[Dynamic Access Control] The user is not a member of the organization to update a role.",{userId:K.id,organizationId:H}),new V("FORBIDDEN",{message:k.YOU_ARE_NOT_A_MEMBER_OF_THIS_ORGANIZATION});if(!await H0({options:J,organizationId:H,role:z.role,permissions:{ac:["update"]}},Y))throw Y.context.logger.error("[Dynamic Access Control] The user is not permitted to update a role."),new V("FORBIDDEN",{message:k.YOU_ARE_NOT_ALLOWED_TO_UPDATE_A_ROLE});let N;if(Y.body.roleName)N={field:"role",value:Y.body.roleName,operator:"eq",connector:"AND"};else if(Y.body.roleId)N={field:"id",value:Y.body.roleId,operator:"eq",connector:"AND"};else throw Y.context.logger.error("[Dynamic Access Control] The role name/id is not provided in the request body."),new V("BAD_REQUEST",{message:k.ROLE_NOT_FOUND});let U=await Y.context.adapter.findOne({model:"organizationRole",where:[{field:"organizationId",value:H,operator:"eq",connector:"AND"},N]});if(!U)throw Y.context.logger.error("[Dynamic Access Control] The role name/id does not exist in the database.",{..."roleName"in Y.body?{roleName:Y.body.roleName}:{roleId:Y.body.roleId},organizationId:H}),new V("BAD_REQUEST",{message:k.ROLE_NOT_FOUND});U.permission=U.permission?JSON.parse(U.permission):void 0;let{permission:F,roleName:Z,...L}=Y.body.data,D={...L};if(Y.body.data.permission){let P=Y.body.data.permission;await DC({ac:w,ctx:Y,permission:P}),await MC({ctx:Y,member:z,options:J,organizationId:H,permissionRequired:P,user:K,action:"update"}),D.permission=P}if(Y.body.data.roleName){let P=Y.body.data.roleName;P=VC(P),await OC({role:P,organizationId:H,options:J,ctx:Y}),await PC({role:P,organizationId:H,ctx:Y}),D.role=P}let O={...D,...D.permission?{permission:JSON.stringify(D.permission)}:{}};return await Y.context.adapter.update({model:"organizationRole",where:[{field:"organizationId",value:H,operator:"eq",connector:"AND"},N],update:O}),Y.json({success:!0,roleData:{...U,...O,permission:D.permission||U.permission||null}})})};async function DC({ac:J,ctx:W,permission:X}){let G=Object.keys(J.statements),Y=Object.keys(X);if(Y.some(($)=>!G.includes($)))throw W.context.logger.error("[Dynamic Access Control] The provided permission includes an invalid resource.",{providedResources:Y,validResources:G}),new V("BAD_REQUEST",{message:k.INVALID_RESOURCE})}async function MC({ctx:J,permissionRequired:W,options:X,organizationId:G,member:Y,user:$,action:K}){let w=[],H=Object.entries(W);for await(let[N,U]of H)for await(let F of U)w.push({resource:{[N]:[F]},hasPermission:await H0({options:X,organizationId:G,permissions:{[N]:[F]},useMemoryCache:!0,role:Y.role},J)});let z=w.filter((N)=>N.hasPermission===!1).map((N)=>{let U=Object.keys(N.resource)[0];return`${U}:${N.resource[U][0]}`});if(z.length>0){J.context.logger.error(`[Dynamic Access Control] The user is missing permissions nessesary to ${K} a role with those set of permissions.
`,{userId:$.id,organizationId:G,role:Y.role,missingPermissions:z});let N;if(K==="create")N=k.YOU_ARE_NOT_ALLOWED_TO_CREATE_A_ROLE;else if(K==="update")N=k.YOU_ARE_NOT_ALLOWED_TO_UPDATE_A_ROLE;else if(K==="delete")N=k.YOU_ARE_NOT_ALLOWED_TO_DELETE_A_ROLE;else if(K==="read")N=k.YOU_ARE_NOT_ALLOWED_TO_READ_A_ROLE;else if(K==="list")N=k.YOU_ARE_NOT_ALLOWED_TO_LIST_A_ROLE;else N=k.YOU_ARE_NOT_ALLOWED_TO_GET_A_ROLE;throw new V("FORBIDDEN",{message:N,missingPermissions:z})}}async function OC({options:J,organizationId:W,role:X,ctx:G}){let Y=J.roles?Object.keys(J.roles):["owner","admin","member"];if(Y.includes(X))throw G.context.logger.error(`[Dynamic Access Control] The role name "${X}" is already taken by a pre-defined role.`,{role:X,organizationId:W,defaultRoles:Y}),new V("BAD_REQUEST",{message:k.ROLE_NAME_IS_ALREADY_TAKEN})}async function PC({organizationId:J,role:W,ctx:X}){if(await X.context.adapter.findOne({model:"organizationRole",where:[{field:"organizationId",value:J,operator:"eq",connector:"AND"},{field:"role",value:W,operator:"eq",connector:"AND"}]}))throw X.context.logger.error(`[Dynamic Access Control] The role name "${W}" is already taken by a role in the database.`,{role:W,organizationId:J}),new V("BAD_REQUEST",{message:k.ROLE_NAME_IS_ALREADY_TAKEN})}var Pn=(J)=>{let W=AW({fields:J?.schema?.invitation?.additionalFields||{},isClientSide:!0}),X=c({email:j().meta({description:"The email address of the user to invite"}),role:Y0([j().meta({description:"The role to assign to the user"}),P6(j().meta({description:"The roles to assign to the user"}))]).meta({description:'The role(s) to assign to the user. It can be `admin`, `member`, owner. Eg: "member"'}),organizationId:j().meta({description:"The organization ID to invite the user to"}).optional(),resend:G4().meta({description:"Resend the invitation email, if the user is already invited. Eg: true"}).optional(),teamId:Y0([j().meta({description:"The team ID to invite the user to"}).optional(),P6(j()).meta({description:"The team IDs to invite the user to"}).optional()])});return y("/organization/invite-member",{method:"POST",use:[n6,V4],body:c({...X.shape,...W.shape}),metadata:{$Infer:{body:{}},openapi:{operationId:"createOrganizationInvitation",description:"Create an invitation to an organization",responses:{"200":{description:"Success",content:{"application/json":{schema:{type:"object",properties:{id:{type:"string"},email:{type:"string"},role:{type:"string"},organizationId:{type:"string"},inviterId:{type:"string"},status:{type:"string"},expiresAt:{type:"string"},createdAt:{type:"string"}},required:["id","email","role","organizationId","inviterId","status","expiresAt","createdAt"]}}}}}}}},async(G)=>{let Y=G.context.session,$=G.body.organizationId||Y.session.activeOrganizationId;if(!$)throw new V("BAD_REQUEST",{message:k.ORGANIZATION_NOT_FOUND});let K=G.body.email.toLowerCase();if(!B8().safeParse(K).success)throw new V("BAD_REQUEST",{message:s.INVALID_EMAIL});let w=p6(G.context,J),H=await w.findMemberByOrgId({userId:Y.user.id,organizationId:$});if(!H)throw new V("BAD_REQUEST",{message:k.MEMBER_NOT_FOUND});if(!await H0({role:H.role,options:G.context.orgOptions,permissions:{invitation:["create"]},organizationId:$},G))throw new V("FORBIDDEN",{message:k.YOU_ARE_NOT_ALLOWED_TO_INVITE_USERS_TO_THIS_ORGANIZATION});let z=G.context.orgOptions.creatorRole||"owner",N=_5(G.body.role);if(H.role!==z&&N.split(",").includes(z))throw new V("FORBIDDEN",{message:k.YOU_ARE_NOT_ALLOWED_TO_INVITE_USER_WITH_THIS_ROLE});if(await w.findMemberByEmail({email:K,organizationId:$}))throw new V("BAD_REQUEST",{message:k.USER_IS_ALREADY_A_MEMBER_OF_THIS_ORGANIZATION});let U=await w.findPendingInvitation({email:K,organizationId:$});if(U.length&&!G.body.resend)throw new V("BAD_REQUEST",{message:k.USER_IS_ALREADY_INVITED_TO_THIS_ORGANIZATION});let F=await w.findOrganizationById($);if(!F)throw new V("BAD_REQUEST",{message:k.ORGANIZATION_NOT_FOUND});if(U.length&&G.body.resend){let S=U[0],B=Z4(G.context.orgOptions.invitationExpiresIn||172800,"sec");await G.context.adapter.update({model:"invitation",where:[{field:"id",value:S.id}],update:{expiresAt:B}});let A={...S,expiresAt:B};return await G.context.orgOptions.sendInvitationEmail?.({id:A.id,role:A.role,email:A.email.toLowerCase(),organization:F,inviter:{...H,user:Y.user},invitation:A},G.request),G.json(A)}if(U.length&&G.context.orgOptions.cancelPendingInvitationsOnReInvite)await w.updateInvitation({invitationId:U[0].id,status:"canceled"});let Z=typeof G.context.orgOptions.invitationLimit==="function"?await G.context.orgOptions.invitationLimit({user:Y.user,organization:F,member:H},G.context):G.context.orgOptions.invitationLimit??100;if((await w.findPendingInvitations({organizationId:$})).length>=Z)throw new V("FORBIDDEN",{message:k.INVITATION_LIMIT_REACHED});if(G.context.orgOptions.teams&&G.context.orgOptions.teams.enabled&&typeof G.context.orgOptions.teams.maximumMembersPerTeam<"u"&&"teamId"in G.body&&G.body.teamId){let S=typeof G.body.teamId==="string"?[G.body.teamId]:G.body.teamId;for(let B of S){let A=await w.findTeamById({teamId:B,organizationId:$,includeTeamMembers:!0});if(!A)throw new V("BAD_REQUEST",{message:k.TEAM_NOT_FOUND});let E=typeof G.context.orgOptions.teams.maximumMembersPerTeam==="function"?await G.context.orgOptions.teams.maximumMembersPerTeam({teamId:B,session:Y,organizationId:$}):G.context.orgOptions.teams.maximumMembersPerTeam;if(A.members.length>=E)throw new V("FORBIDDEN",{message:k.TEAM_MEMBER_LIMIT_REACHED})}}let L="teamId"in G.body?typeof G.body.teamId==="string"?[G.body.teamId]:G.body.teamId??[]:[],{email:D,role:O,organizationId:P,resend:_,...T}=G.body,v={role:N,email:K,organizationId:$,teamIds:L,...T?T:{}};if(J?.organizationHooks?.beforeCreateInvitation){let S=await J?.organizationHooks.beforeCreateInvitation({invitation:{...v,inviterId:Y.user.id,teamId:L.length>0?L[0]:void 0},inviter:Y.user,organization:F});if(S&&typeof S==="object"&&"data"in S)v={...v,...S.data}}let q=await w.createInvitation({invitation:v,user:Y.user});if(await G.context.orgOptions.sendInvitationEmail?.({id:q.id,role:q.role,email:q.email.toLowerCase(),organization:F,inviter:{...H,user:Y.user},invitation:q},G.request),J?.organizationHooks?.afterCreateInvitation)await J?.organizationHooks.afterCreateInvitation({invitation:q,inviter:Y.user,organization:F});return G.json(q)})},vn=(J)=>y("/organization/accept-invitation",{method:"POST",body:c({invitationId:j().meta({description:"The ID of the invitation to accept"})}),use:[n6,V4],metadata:{openapi:{description:"Accept an invitation to an organization",responses:{"200":{description:"Success",content:{"application/json":{schema:{type:"object",properties:{invitation:{type:"object"},member:{type:"object"}}}}}}}}}},async(W)=>{let X=W.context.session,G=p6(W.context,J),Y=await G.findInvitationById(W.body.invitationId);if(!Y||Y.expiresAt<new Date||Y.status!=="pending")throw new V("BAD_REQUEST",{message:k.INVITATION_NOT_FOUND});if(Y.email.toLowerCase()!==X.user.email.toLowerCase())throw new V("FORBIDDEN",{message:k.YOU_ARE_NOT_THE_RECIPIENT_OF_THE_INVITATION});if(W.context.orgOptions.requireEmailVerificationOnInvitation&&!X.user.emailVerified)throw new V("FORBIDDEN",{message:k.EMAIL_VERIFICATION_REQUIRED_BEFORE_ACCEPTING_OR_REJECTING_INVITATION});let $=W.context.orgOptions?.membershipLimit||100;if(await G.countMembers({organizationId:Y.organizationId})>=$)throw new V("FORBIDDEN",{message:k.ORGANIZATION_MEMBERSHIP_LIMIT_REACHED});let K=await G.findOrganizationById(Y.organizationId);if(!K)throw new V("BAD_REQUEST",{message:k.ORGANIZATION_NOT_FOUND});if(J?.organizationHooks?.beforeAcceptInvitation)await J?.organizationHooks.beforeAcceptInvitation({invitation:Y,user:X.user,organization:K});let w=await G.updateInvitation({invitationId:W.body.invitationId,status:"accepted"});if(!w)throw new V("BAD_REQUEST",{message:k.FAILED_TO_RETRIEVE_INVITATION});if(W.context.orgOptions.teams&&W.context.orgOptions.teams.enabled&&"teamId"in w&&w.teamId){let z=w.teamId.split(","),N=z.length===1;for(let U of z)if(await G.findOrCreateTeamMember({teamId:U,userId:X.user.id}),typeof W.context.orgOptions.teams.maximumMembersPerTeam<"u"){if(await G.countTeamMembers({teamId:U})>=(typeof W.context.orgOptions.teams.maximumMembersPerTeam==="function"?await W.context.orgOptions.teams.maximumMembersPerTeam({teamId:U,session:X,organizationId:Y.organizationId}):W.context.orgOptions.teams.maximumMembersPerTeam))throw new V("FORBIDDEN",{message:k.TEAM_MEMBER_LIMIT_REACHED})}if(N){let U=z[0];await k6(W,{session:await G.setActiveTeam(X.session.token,U,W),user:X.user})}}let H=await G.createMember({organizationId:Y.organizationId,userId:X.user.id,role:Y.role,createdAt:new Date});if(await G.setActiveOrganization(X.session.token,Y.organizationId,W),!w)return W.json(null,{status:400,body:{message:k.INVITATION_NOT_FOUND}});if(J?.organizationHooks?.afterAcceptInvitation)await J?.organizationHooks.afterAcceptInvitation({invitation:w,member:H,user:X.user,organization:K});return W.json({invitation:w,member:H})}),jn=(J)=>y("/organization/reject-invitation",{method:"POST",body:c({invitationId:j().meta({description:"The ID of the invitation to reject"})}),use:[n6,V4],metadata:{openapi:{description:"Reject an invitation to an organization",responses:{"200":{description:"Success",content:{"application/json":{schema:{type:"object",properties:{invitation:{type:"object"},member:{type:"null"}}}}}}}}}},async(W)=>{let X=W.context.session,G=p6(W.context,W.context.orgOptions),Y=await G.findInvitationById(W.body.invitationId);if(!Y||Y.expiresAt<new Date||Y.status!=="pending")throw new V("BAD_REQUEST",{message:"Invitation not found!"});if(Y.email.toLowerCase()!==X.user.email.toLowerCase())throw new V("FORBIDDEN",{message:k.YOU_ARE_NOT_THE_RECIPIENT_OF_THE_INVITATION});if(W.context.orgOptions.requireEmailVerificationOnInvitation&&!X.user.emailVerified)throw new V("FORBIDDEN",{message:k.EMAIL_VERIFICATION_REQUIRED_BEFORE_ACCEPTING_OR_REJECTING_INVITATION});let $=await G.findOrganizationById(Y.organizationId);if(!$)throw new V("BAD_REQUEST",{message:k.ORGANIZATION_NOT_FOUND});if(J?.organizationHooks?.beforeRejectInvitation)await J?.organizationHooks.beforeRejectInvitation({invitation:Y,user:X.user,organization:$});let K=await G.updateInvitation({invitationId:W.body.invitationId,status:"rejected"});if(J?.organizationHooks?.afterRejectInvitation)await J?.organizationHooks.afterRejectInvitation({invitation:K||Y,user:X.user,organization:$});return W.json({invitation:K,member:null})}),Sn=(J)=>y("/organization/cancel-invitation",{method:"POST",body:c({invitationId:j().meta({description:"The ID of the invitation to cancel"})}),use:[n6,V4],openapi:{operationId:"cancelOrganizationInvitation",description:"Cancel an invitation to an organization",responses:{"200":{description:"Success",content:{"application/json":{schema:{type:"object",properties:{invitation:{type:"object"}}}}}}}}},async(W)=>{let X=W.context.session,G=p6(W.context,J),Y=await G.findInvitationById(W.body.invitationId);if(!Y)throw new V("BAD_REQUEST",{message:k.INVITATION_NOT_FOUND});let $=await G.findMemberByOrgId({userId:X.user.id,organizationId:Y.organizationId});if(!$)throw new V("BAD_REQUEST",{message:k.MEMBER_NOT_FOUND});if(!await H0({role:$.role,options:W.context.orgOptions,permissions:{invitation:["cancel"]},organizationId:Y.organizationId},W))throw new V("FORBIDDEN",{message:k.YOU_ARE_NOT_ALLOWED_TO_CANCEL_THIS_INVITATION});let K=await G.findOrganizationById(Y.organizationId);if(!K)throw new V("BAD_REQUEST",{message:k.ORGANIZATION_NOT_FOUND});if(J?.organizationHooks?.beforeCancelInvitation)await J?.organizationHooks.beforeCancelInvitation({invitation:Y,cancelledBy:X.user,organization:K});let w=await G.updateInvitation({invitationId:W.body.invitationId,status:"canceled"});if(J?.organizationHooks?.afterCancelInvitation)await J?.organizationHooks.afterCancelInvitation({invitation:w||Y,cancelledBy:X.user,organization:K});return W.json(w)}),_n=(J)=>y("/organization/get-invitation",{method:"GET",use:[n6],requireHeaders:!0,query:c({id:j().meta({description:"The ID of the invitation to get"})}),metadata:{openapi:{description:"Get an invitation by ID",responses:{"200":{description:"Success",content:{"application/json":{schema:{type:"object",properties:{id:{type:"string"},email:{type:"string"},role:{type:"string"},organizationId:{type:"string"},inviterId:{type:"string"},status:{type:"string"},expiresAt:{type:"string"},organizationName:{type:"string"},organizationSlug:{type:"string"},inviterEmail:{type:"string"}},required:["id","email","role","organizationId","inviterId","status","expiresAt","organizationName","organizationSlug","inviterEmail"]}}}}}}}},async(W)=>{let X=await j6(W);if(!X)throw new V("UNAUTHORIZED",{message:"Not authenticated"});let G=p6(W.context,J),Y=await G.findInvitationById(W.query.id);if(!Y||Y.status!=="pending"||Y.expiresAt<new Date)throw new V("BAD_REQUEST",{message:"Invitation not found!"});if(Y.email.toLowerCase()!==X.user.email.toLowerCase())throw new V("FORBIDDEN",{message:k.YOU_ARE_NOT_THE_RECIPIENT_OF_THE_INVITATION});let $=await G.findOrganizationById(Y.organizationId);if(!$)throw new V("BAD_REQUEST",{message:k.ORGANIZATION_NOT_FOUND});let K=await G.findMemberByOrgId({userId:Y.inviterId,organizationId:Y.organizationId});if(!K)throw new V("BAD_REQUEST",{message:k.INVITER_IS_NO_LONGER_A_MEMBER_OF_THE_ORGANIZATION});return W.json({...Y,organizationName:$.name,organizationSlug:$.slug,inviterEmail:K.user.email})}),Tn=(J)=>y("/organization/list-invitations",{method:"GET",use:[n6,V4],query:c({organizationId:j().meta({description:"The ID of the organization to list invitations for"}).optional()}).optional()},async(W)=>{let X=await j6(W);if(!X)throw new V("UNAUTHORIZED",{message:"Not authenticated"});let G=W.query?.organizationId||X.session.activeOrganizationId;if(!G)throw new V("BAD_REQUEST",{message:"Organization ID is required"});let Y=p6(W.context,J);if(!await Y.findMemberByOrgId({userId:X.user.id,organizationId:G}))throw new V("FORBIDDEN",{message:"You are not a member of this organization"});let $=await Y.listInvitations({organizationId:G});return W.json($)}),qn=(J)=>y("/organization/list-user-invitations",{method:"GET",use:[n6],query:c({email:j().meta({description:"The email of the user to list invitations for. This only works for server side API calls."}).optional()}).optional()},async(W)=>{let X=await j6(W);if(W.request&&W.query?.email)throw new V("BAD_REQUEST",{message:"User email cannot be passed for client side API calls."});let G=X?.user.email||W.query?.email;if(!G)throw new V("BAD_REQUEST",{message:"Missing session headers, or email query parameter."});let Y=await p6(W.context,J).listUserInvitations(G);return W.json(Y)}),Bn=(J)=>{let W=AW({fields:J?.schema?.member?.additionalFields||{},isClientSide:!0}),X=c({userId:o6.string().meta({description:'The user Id which represents the user to be added as a member. If `null` is provided, then it\'s expected to provide session headers. Eg: "user-id"'}),role:Y0([j(),P6(j())]).meta({description:'The role(s) to assign to the new member. Eg: ["admin", "sale"]'}),organizationId:j().meta({description:`An optional organization ID to pass. If not provided, will default to the user's active organization. Eg: "org-id"`}).optional(),teamId:j().meta({description:'An optional team ID to add the member to. Eg: "team-id"'}).optional()});return y("/organization/add-member",{method:"POST",body:c({...X.shape,...W.shape}),use:[n6],metadata:{SERVER_ONLY:!0,$Infer:{body:{}},openapi:{operationId:"addOrganizationMember",description:"Add a member to an organization"}}},async(G)=>{let Y=G.body.userId?await j6(G).catch((P)=>null):null,$=G.body.organizationId||Y?.session.activeOrganizationId;if(!$)return G.json(null,{status:400,body:{message:k.NO_ACTIVE_ORGANIZATION}});let K="teamId"in G.body?G.body.teamId:void 0;if(K&&!G.context.orgOptions.teams?.enabled)throw G.context.logger.error("Teams are not enabled"),new V("BAD_REQUEST",{message:"Teams are not enabled"});let w=p6(G.context,J),H=await G.context.internalAdapter.findUserById(G.body.userId);if(!H)throw new V("BAD_REQUEST",{message:s.USER_NOT_FOUND});if(await w.findMemberByEmail({email:H.email,organizationId:$}))throw new V("BAD_REQUEST",{message:k.USER_IS_ALREADY_A_MEMBER_OF_THIS_ORGANIZATION});if(K){let P=await w.findTeamById({teamId:K,organizationId:$});if(!P||P.organizationId!==$)throw new V("BAD_REQUEST",{message:k.TEAM_NOT_FOUND})}let z=G.context.orgOptions?.membershipLimit||100;if(await w.countMembers({organizationId:$})>=z)throw new V("FORBIDDEN",{message:k.ORGANIZATION_MEMBERSHIP_LIMIT_REACHED});let{role:N,userId:U,organizationId:F,...Z}=G.body,L=await w.findOrganizationById($);if(!L)throw new V("BAD_REQUEST",{message:k.ORGANIZATION_NOT_FOUND});let D={organizationId:$,userId:H.id,role:_5(G.body.role),createdAt:new Date,...Z?Z:{}};if(J?.organizationHooks?.beforeAddMember){let P=await J?.organizationHooks.beforeAddMember({member:{userId:H.id,organizationId:$,role:_5(G.body.role),...Z},user:H,organization:L});if(P&&typeof P==="object"&&"data"in P)D={...D,...P.data}}let O=await w.createMember(D);if(K)await w.findOrCreateTeamMember({userId:H.id,teamId:K});if(J?.organizationHooks?.afterAddMember)await J?.organizationHooks.afterAddMember({member:O,user:H,organization:L});return G.json(O)})},An=(J)=>y("/organization/remove-member",{method:"POST",body:c({memberIdOrEmail:j().meta({description:"The ID or email of the member to remove"}),organizationId:j().meta({description:'The ID of the organization to remove the member from. If not provided, the active organization will be used. Eg: "org-id"'}).optional()}),use:[n6,V4],metadata:{openapi:{description:"Remove a member from an organization",responses:{"200":{description:"Success",content:{"application/json":{schema:{type:"object",properties:{member:{type:"object",properties:{id:{type:"string"},userId:{type:"string"},organizationId:{type:"string"},role:{type:"string"}},required:["id","userId","organizationId","role"]}},required:["member"]}}}}}}}},async(W)=>{let X=W.context.session,G=W.body.organizationId||X.session.activeOrganizationId;if(!G)return W.json(null,{status:400,body:{message:k.NO_ACTIVE_ORGANIZATION}});let Y=p6(W.context,J),$=await Y.findMemberByOrgId({userId:X.user.id,organizationId:G});if(!$)throw new V("BAD_REQUEST",{message:k.MEMBER_NOT_FOUND});let K=null;if(W.body.memberIdOrEmail.includes("@"))K=await Y.findMemberByEmail({email:W.body.memberIdOrEmail,organizationId:G});else{let U=await Y.findMemberById(W.body.memberIdOrEmail);if(!U)K=null;else{let{user:F,...Z}=U;K=Z}}if(!K)throw new V("BAD_REQUEST",{message:k.MEMBER_NOT_FOUND});let w=K.role.split(","),H=W.context.orgOptions?.creatorRole||"owner";if(w.includes(H)){if($.role!==H)throw new V("BAD_REQUEST",{message:k.YOU_CANNOT_LEAVE_THE_ORGANIZATION_AS_THE_ONLY_OWNER});let{members:U}=await Y.listMembers({organizationId:G});if(U.filter((F)=>{return F.role.split(",").includes(H)}).length<=1)throw new V("BAD_REQUEST",{message:k.YOU_CANNOT_LEAVE_THE_ORGANIZATION_AS_THE_ONLY_OWNER})}if(!await H0({role:$.role,options:W.context.orgOptions,permissions:{member:["delete"]},organizationId:G},W))throw new V("UNAUTHORIZED",{message:k.YOU_ARE_NOT_ALLOWED_TO_DELETE_THIS_MEMBER});if(K?.organizationId!==G)throw new V("BAD_REQUEST",{message:k.MEMBER_NOT_FOUND});let z=await Y.findOrganizationById(G);if(!z)throw new V("BAD_REQUEST",{message:k.ORGANIZATION_NOT_FOUND});let N=await W.context.internalAdapter.findUserById(K.userId);if(!N)throw new V("BAD_REQUEST",{message:"User not found"});if(J?.organizationHooks?.beforeRemoveMember)await J?.organizationHooks.beforeRemoveMember({member:K,user:N,organization:z});if(await Y.deleteMember({memberId:K.id,organizationId:G,userId:K.userId}),X.user.id===K.userId&&X.session.activeOrganizationId===K.organizationId)await Y.setActiveOrganization(X.session.token,null,W);if(J?.organizationHooks?.afterRemoveMember)await J?.organizationHooks.afterRemoveMember({member:K,user:N,organization:z});return W.json({member:K})}),En=(J)=>y("/organization/update-member-role",{method:"POST",body:c({role:Y0([j(),P6(j())]).meta({description:'The new role to be applied. This can be a string or array of strings representing the roles. Eg: ["admin", "sale"]'}),memberId:j().meta({description:'The member id to apply the role update to. Eg: "member-id"'}),organizationId:j().meta({description:'An optional organization ID which the member is a part of to apply the role update. If not provided, you must provide session headers to get the active organization. Eg: "organization-id"'}).optional()}),use:[n6,V4],metadata:{$Infer:{body:{}},openapi:{operationId:"updateOrganizationMemberRole",description:"Update the role of a member in an organization",responses:{"200":{description:"Success",content:{"application/json":{schema:{type:"object",properties:{member:{type:"object",properties:{id:{type:"string"},userId:{type:"string"},organizationId:{type:"string"},role:{type:"string"}},required:["id","userId","organizationId","role"]}},required:["member"]}}}}}}}},async(W)=>{let X=W.context.session;if(!W.body.role)throw new V("BAD_REQUEST");let G=W.body.organizationId||X.session.activeOrganizationId;if(!G)throw new V("BAD_REQUEST",{message:k.NO_ACTIVE_ORGANIZATION});let Y=p6(W.context,W.context.orgOptions),$=Array.isArray(W.body.role)?W.body.role:W.body.role?[W.body.role]:[],K=await Y.findMemberByOrgId({userId:X.user.id,organizationId:G});if(!K)throw new V("BAD_REQUEST",{message:k.MEMBER_NOT_FOUND});let w=K.id!==W.body.memberId?await Y.findMemberById(W.body.memberId):K;if(!w)throw new V("BAD_REQUEST",{message:k.MEMBER_NOT_FOUND});if(w.organizationId!==G)throw new V("FORBIDDEN",{message:k.YOU_ARE_NOT_ALLOWED_TO_UPDATE_THIS_MEMBER});let H=W.context.orgOptions?.creatorRole||"owner",z=K.role.split(","),N=w.role.split(",").includes(H),U=z.includes(H),F=$.includes(H),Z=K.id===w.id;if(N&&!U||F&&!U)throw new V("FORBIDDEN",{message:k.YOU_ARE_NOT_ALLOWED_TO_UPDATE_THIS_MEMBER});if(U&&Z){if((await W.context.adapter.findMany({model:"member",where:[{field:"organizationId",value:G}]})).filter((T)=>{return T.role.split(",").includes(H)}).length<=1&&!F)throw new V("BAD_REQUEST",{message:k.YOU_CANNOT_LEAVE_THE_ORGANIZATION_WITHOUT_AN_OWNER})}if(!await H0({role:K.role,options:W.context.orgOptions,permissions:{member:["update"]},allowCreatorAllPermissions:!0,organizationId:G},W))throw new V("FORBIDDEN",{message:k.YOU_ARE_NOT_ALLOWED_TO_UPDATE_THIS_MEMBER});let L=await Y.findOrganizationById(G);if(!L)throw new V("BAD_REQUEST",{message:k.ORGANIZATION_NOT_FOUND});let D=await W.context.internalAdapter.findUserById(w.userId);if(!D)throw new V("BAD_REQUEST",{message:"User not found"});let O=w.role,P=_5(W.body.role);if(J?.organizationHooks?.beforeUpdateMemberRole){let T=await J?.organizationHooks.beforeUpdateMemberRole({member:w,newRole:P,user:D,organization:L});if(T&&typeof T==="object"&&"data"in T){let v=await Y.updateMember(W.body.memberId,T.data.role||P);if(!v)throw new V("BAD_REQUEST",{message:k.MEMBER_NOT_FOUND});if(J?.organizationHooks?.afterUpdateMemberRole)await J?.organizationHooks.afterUpdateMemberRole({member:v,previousRole:O,user:D,organization:L});return W.json(v)}}let _=await Y.updateMember(W.body.memberId,P);if(!_)throw new V("BAD_REQUEST",{message:k.MEMBER_NOT_FOUND});if(J?.organizationHooks?.afterUpdateMemberRole)await J?.organizationHooks.afterUpdateMemberRole({member:_,previousRole:O,user:D,organization:L});return W.json(_)}),In=(J)=>y("/organization/get-active-member",{method:"GET",use:[n6,V4],requireHeaders:!0,metadata:{openapi:{description:"Get the member details of the active organization",responses:{"200":{description:"Success",content:{"application/json":{schema:{type:"object",properties:{id:{type:"string"},userId:{type:"string"},organizationId:{type:"string"},role:{type:"string"}},required:["id","userId","organizationId","role"]}}}}}}}},async(W)=>{let X=W.context.session,G=X.session.activeOrganizationId;if(!G)return W.json(null,{status:400,body:{message:k.NO_ACTIVE_ORGANIZATION}});let Y=await p6(W.context,J).findMemberByOrgId({userId:X.user.id,organizationId:G});if(!Y)return W.json(null,{status:400,body:{message:k.MEMBER_NOT_FOUND}});return W.json(Y)}),Rn=(J)=>y("/organization/leave",{method:"POST",body:c({organizationId:j().meta({description:'The organization Id for the member to leave. Eg: "organization-id"'})}),requireHeaders:!0,use:[u4,n6]},async(W)=>{let X=W.context.session,G=p6(W.context,J),Y=await G.findMemberByOrgId({userId:X.user.id,organizationId:W.body.organizationId});if(!Y)throw new V("BAD_REQUEST",{message:k.MEMBER_NOT_FOUND});let $=W.context.orgOptions?.creatorRole||"owner";if(Y.role.split(",").includes($)){if((await W.context.adapter.findMany({model:"member",where:[{field:"organizationId",value:W.body.organizationId}]})).filter((K)=>K.role.split(",").includes($)).length<=1)throw new V("BAD_REQUEST",{message:k.YOU_CANNOT_LEAVE_THE_ORGANIZATION_AS_THE_ONLY_OWNER})}if(await G.deleteMember({memberId:Y.id,organizationId:W.body.organizationId,userId:X.user.id}),X.session.activeOrganizationId===W.body.organizationId)await G.setActiveOrganization(X.session.token,null,W);return W.json(Y)}),Cn=(J)=>y("/organization/list-members",{method:"GET",query:c({limit:j().meta({description:"The number of users to return"}).or(_6()).optional(),offset:j().meta({description:"The offset to start from"}).or(_6()).optional(),sortBy:j().meta({description:"The field to sort by"}).optional(),sortDirection:O4(["asc","desc"]).meta({description:"The direction to sort by"}).optional(),filterField:j().meta({description:"The field to filter by"}).optional(),filterValue:j().meta({description:"The value to filter by"}).or(_6()).or(G4()).optional(),filterOperator:O4(["eq","ne","lt","lte","gt","gte","contains"]).meta({description:"The operator to use for the filter"}).optional(),organizationId:j().meta({description:`The organization ID to list members for. If not provided, will default to the user's active organization. Eg: "organization-id"`}).optional(),organizationSlug:j().meta({description:`The organization slug to list members for. If not provided, will default to the user's active organization. Eg: "organization-slug"`}).optional()}).optional(),use:[n6,V4]},async(W)=>{let X=W.context.session,G=W.query?.organizationId||X.session.activeOrganizationId,Y=p6(W.context,J);if(W.query?.organizationSlug){let w=await Y.findOrganizationBySlug(W.query?.organizationSlug);if(!w)throw new V("BAD_REQUEST",{message:k.ORGANIZATION_NOT_FOUND});G=w.id}if(!G)throw new V("BAD_REQUEST",{message:k.NO_ACTIVE_ORGANIZATION});if(!await Y.findMemberByOrgId({userId:X.user.id,organizationId:G}))throw new V("FORBIDDEN",{message:k.YOU_ARE_NOT_A_MEMBER_OF_THIS_ORGANIZATION});let{members:$,total:K}=await Y.listMembers({organizationId:G,limit:W.query?.limit?Number(W.query.limit):void 0,offset:W.query?.offset?Number(W.query.offset):void 0,sortBy:W.query?.sortBy,sortOrder:W.query?.sortDirection,filter:W.query?.filterField?{field:W.query?.filterField,operator:W.query.filterOperator,value:W.query.filterValue}:void 0});return W.json({members:$,total:K})}),bn=(J)=>y("/organization/get-active-member-role",{method:"GET",query:c({userId:j().meta({description:"The user ID to get the role for. If not provided, will default to the current user's"}).optional(),organizationId:j().meta({description:`The organization ID to list members for. If not provided, will default to the user's active organization. Eg: "organization-id"`}).optional(),organizationSlug:j().meta({description:`The organization slug to list members for. If not provided, will default to the user's active organization. Eg: "organization-slug"`}).optional()}).optional(),use:[n6,V4]},async(W)=>{let X=W.context.session,G=W.query?.organizationId||X.session.activeOrganizationId,Y=p6(W.context,J);if(W.query?.organizationSlug){let H=await Y.findOrganizationBySlug(W.query?.organizationSlug);if(!H)throw new V("BAD_REQUEST",{message:k.ORGANIZATION_NOT_FOUND});G=H.id}if(!G)throw new V("BAD_REQUEST",{message:k.NO_ACTIVE_ORGANIZATION});let $=await Y.findMemberByOrgId({userId:X.user.id,organizationId:G});if(!$)throw new V("FORBIDDEN",{message:k.YOU_ARE_NOT_A_MEMBER_OF_THIS_ORGANIZATION});if(!W.query?.userId)return W.json({role:$.role});let K=W.query?.userId,w=await Y.findMemberByOrgId({userId:K,organizationId:G});if(!w)throw new V("FORBIDDEN",{message:k.YOU_ARE_NOT_A_MEMBER_OF_THIS_ORGANIZATION});return W.json({role:w?.role})}),kn=(J)=>{let W=AW({fields:J?.schema?.organization?.additionalFields||{},isClientSide:!0}),X=c({name:j().min(1).meta({description:"The name of the organization"}),slug:j().min(1).meta({description:"The slug of the organization"}),userId:o6.string().meta({description:'The user id of the organization creator. If not provided, the current user will be used. Should only be used by admins or when called by the server. server-only. Eg: "user-id"'}).optional(),logo:j().meta({description:"The logo of the organization"}).optional(),metadata:T6(j(),R6()).meta({description:"The metadata of the organization"}).optional(),keepCurrentActiveOrganization:G4().meta({description:"Whether to keep the current active organization active after creating a new one. Eg: true"}).optional()});return y("/organization/create",{method:"POST",body:c({...X.shape,...W.shape}),use:[n6],metadata:{$Infer:{body:{}},openapi:{description:"Create an organization",responses:{"200":{description:"Success",content:{"application/json":{schema:{type:"object",description:"The organization that was created",$ref:"#/components/schemas/Organization"}}}}}}}},async(G)=>{let Y=await j6(G);if(!Y&&(G.request||G.headers))throw new V("UNAUTHORIZED");let $=Y?.user||null;if(!$){if(!G.body.userId)throw new V("UNAUTHORIZED");$=await G.context.internalAdapter.findUserById(G.body.userId)}if(!$)return G.json(null,{status:401});let K=G.context.orgOptions;if(!(typeof K?.allowUserToCreateOrganization==="function"?await K.allowUserToCreateOrganization($):K?.allowUserToCreateOrganization===void 0?!0:K.allowUserToCreateOrganization))throw new V("FORBIDDEN",{message:k.YOU_ARE_NOT_ALLOWED_TO_CREATE_A_NEW_ORGANIZATION});let w=p6(G.context,K),H=await w.listOrganizations($.id);if(typeof K.organizationLimit==="number"?H.length>=K.organizationLimit:typeof K.organizationLimit==="function"?await K.organizationLimit($):!1)throw new V("FORBIDDEN",{message:k.YOU_HAVE_REACHED_THE_MAXIMUM_NUMBER_OF_ORGANIZATIONS});if(await w.findOrganizationBySlug(G.body.slug))throw new V("BAD_REQUEST",{message:k.ORGANIZATION_ALREADY_EXISTS});let{keepCurrentActiveOrganization:z,userId:N,...U}=G.body;if(K.organizationCreation?.beforeCreate){let O=await K.organizationCreation.beforeCreate({organization:{...U,createdAt:new Date},user:$},G.request);if(O&&typeof O==="object"&&"data"in O)U={...G.body,...O.data}}if(K?.organizationHooks?.beforeCreateOrganization){let O=await K?.organizationHooks.beforeCreateOrganization({organization:U,user:$});if(O&&typeof O==="object"&&"data"in O)U={...G.body,...O.data}}let F=await w.createOrganization({organization:{...U,createdAt:new Date}}),Z,L=null,D={userId:$.id,organizationId:F.id,role:G.context.orgOptions.creatorRole||"owner"};if(K?.organizationHooks?.beforeAddMember){let O=await K?.organizationHooks.beforeAddMember({member:{userId:$.id,organizationId:F.id,role:G.context.orgOptions.creatorRole||"owner"},user:$,organization:F});if(O&&typeof O==="object"&&"data"in O)D={...D,...O.data}}if(Z=await w.createMember(D),K?.organizationHooks?.afterAddMember)await K?.organizationHooks.afterAddMember({member:Z,user:$,organization:F});if(K?.teams?.enabled&&K.teams.defaultTeam?.enabled!==!1){let O={organizationId:F.id,name:`${F.name}`,createdAt:new Date};if(K?.organizationHooks?.beforeCreateTeam){let _=await K?.organizationHooks.beforeCreateTeam({team:{organizationId:F.id,name:`${F.name}`},user:$,organization:F});if(_&&typeof _==="object"&&"data"in _)O={...O,..._.data}}let P=await K.teams.defaultTeam?.customCreateDefaultTeam?.(F,G)||await w.createTeam(O);if(L=await w.findOrCreateTeamMember({teamId:P.id,userId:$.id}),K?.organizationHooks?.afterCreateTeam)await K?.organizationHooks.afterCreateTeam({team:P,user:$,organization:F})}if(K.organizationCreation?.afterCreate)await K.organizationCreation.afterCreate({organization:F,user:$,member:Z},G.request);if(K?.organizationHooks?.afterCreateOrganization)await K?.organizationHooks.afterCreateOrganization({organization:F,user:$,member:Z});if(G.context.session&&!G.body.keepCurrentActiveOrganization)await w.setActiveOrganization(G.context.session.session.token,F.id,G);if(L&&G.context.session&&!G.body.keepCurrentActiveOrganization)await w.setActiveTeam(G.context.session.session.token,L.teamId,G);return G.json({...F,metadata:F.metadata&&typeof F.metadata==="string"?JSON.parse(F.metadata):F.metadata,members:[Z]})})},hn=(J)=>y("/organization/check-slug",{method:"POST",body:c({slug:j().meta({description:'The organization slug to check. Eg: "my-org"'})}),use:[KR,n6]},async(W)=>{if(!await p6(W.context,J).findOrganizationBySlug(W.body.slug))return W.json({status:!0});throw new V("BAD_REQUEST",{message:"slug is taken"})}),gn=(J)=>{let W=AW({fields:J?.schema?.organization?.additionalFields||{},isClientSide:!0});return y("/organization/update",{method:"POST",body:c({data:c({...W.shape,name:j().min(1).meta({description:"The name of the organization"}).optional(),slug:j().min(1).meta({description:"The slug of the organization"}).optional(),logo:j().meta({description:"The logo of the organization"}).optional(),metadata:T6(j(),R6()).meta({description:"The metadata of the organization"}).optional()}).partial(),organizationId:j().meta({description:'The organization ID. Eg: "org-id"'}).optional()}),requireHeaders:!0,use:[n6],metadata:{$Infer:{body:{}},openapi:{description:"Update an organization",responses:{"200":{description:"Success",content:{"application/json":{schema:{type:"object",description:"The updated organization",$ref:"#/components/schemas/Organization"}}}}}}}},async(X)=>{let G=await X.context.getSession(X);if(!G)throw new V("UNAUTHORIZED",{message:"User not found"});let Y=X.body.organizationId||G.session.activeOrganizationId;if(!Y)throw new V("BAD_REQUEST",{message:k.ORGANIZATION_NOT_FOUND});let $=p6(X.context,J),K=await $.findMemberByOrgId({userId:G.user.id,organizationId:Y});if(!K)throw new V("BAD_REQUEST",{message:k.USER_IS_NOT_A_MEMBER_OF_THE_ORGANIZATION});if(!await H0({permissions:{organization:["update"]},role:K.role,options:X.context.orgOptions,organizationId:Y},X))throw new V("FORBIDDEN",{message:k.YOU_ARE_NOT_ALLOWED_TO_UPDATE_THIS_ORGANIZATION});if(typeof X.body.data.slug==="string"){let H=await $.findOrganizationBySlug(X.body.data.slug);if(H&&H.id!==Y)throw new V("BAD_REQUEST",{message:k.ORGANIZATION_SLUG_ALREADY_TAKEN})}if(J?.organizationHooks?.beforeUpdateOrganization){let H=await J.organizationHooks.beforeUpdateOrganization({organization:X.body.data,user:G.user,member:K});if(H&&typeof H==="object"&&"data"in H)X.body.data={...X.body.data,...H.data}}let w=await $.updateOrganization(Y,X.body.data);if(J?.organizationHooks?.afterUpdateOrganization)await J.organizationHooks.afterUpdateOrganization({organization:w,user:G.user,member:K});return X.json(w)})},mn=(J)=>{return y("/organization/delete",{method:"POST",body:c({organizationId:j().meta({description:"The organization id to delete"})}),requireHeaders:!0,use:[n6],metadata:{openapi:{description:"Delete an organization",responses:{"200":{description:"Success",content:{"application/json":{schema:{type:"string",description:"The organization id that was deleted"}}}}}}}},async(W)=>{if(W.context.orgOptions.organizationDeletion?.disabled||W.context.orgOptions.disableOrganizationDeletion){if(W.context.orgOptions.organizationDeletion?.disabled)W.context.logger.info("`organizationDeletion.disabled` is deprecated. Use `disableOrganizationDeletion` instead");throw new V("NOT_FOUND",{message:"Organization deletion is disabled"})}let X=await W.context.getSession(W);if(!X)throw new V("UNAUTHORIZED",{status:401});let G=W.body.organizationId;if(!G)return W.json(null,{status:400,body:{message:k.ORGANIZATION_NOT_FOUND}});let Y=p6(W.context,J),$=await Y.findMemberByOrgId({userId:X.user.id,organizationId:G});if(!$)throw new V("BAD_REQUEST",{message:k.USER_IS_NOT_A_MEMBER_OF_THE_ORGANIZATION});if(!await H0({role:$.role,permissions:{organization:["delete"]},organizationId:G,options:W.context.orgOptions},W))throw new V("FORBIDDEN",{message:k.YOU_ARE_NOT_ALLOWED_TO_DELETE_THIS_ORGANIZATION});if(G===X.session.activeOrganizationId)await Y.setActiveOrganization(X.session.token,null,W);let K=await Y.findOrganizationById(G);if(!K)throw new V("BAD_REQUEST");if(J?.organizationHooks?.beforeDeleteOrganization)await J.organizationHooks.beforeDeleteOrganization({organization:K,user:X.user});if(await Y.deleteOrganization(G),J?.organizationHooks?.afterDeleteOrganization)await J.organizationHooks.afterDeleteOrganization({organization:K,user:X.user});return W.json(K)})},fn=(J)=>y("/organization/get-full-organization",{method:"GET",query:E0(c({organizationId:j().meta({description:"The organization id to get"}).optional(),organizationSlug:j().meta({description:"The organization slug to get"}).optional(),membersLimit:_6().or(j().transform((W)=>parseInt(W))).meta({description:"The limit of members to get. By default, it uses the membershipLimit option which defaults to 100."}).optional()})),requireHeaders:!0,use:[n6,V4],metadata:{openapi:{operationId:"getOrganization",description:"Get the full organization",responses:{"200":{description:"Success",content:{"application/json":{schema:{type:"object",description:"The organization",$ref:"#/components/schemas/Organization"}}}}}}}},async(W)=>{let X=W.context.session,G=W.query?.organizationSlug||W.query?.organizationId||X.session.activeOrganizationId;if(!G)return W.json(null,{status:200});let Y=p6(W.context,J),$=await Y.findFullOrganization({organizationId:G,isSlug:!!W.query?.organizationSlug,includeTeams:W.context.orgOptions.teams?.enabled,membersLimit:W.query?.membersLimit});if(!$)throw new V("BAD_REQUEST",{message:k.ORGANIZATION_NOT_FOUND});if(!await Y.checkMembership({userId:X.user.id,organizationId:$.id}))throw await Y.setActiveOrganization(X.session.token,null,W),new V("FORBIDDEN",{message:k.USER_IS_NOT_A_MEMBER_OF_THE_ORGANIZATION});return W.json($)}),yn=(J)=>{return y("/organization/set-active",{method:"POST",body:c({organizationId:j().meta({description:'The organization id to set as active. It can be null to unset the active organization. Eg: "org-id"'}).nullable().optional(),organizationSlug:j().meta({description:'The organization slug to set as active. It can be null to unset the active organization if organizationId is not provided. Eg: "org-slug"'}).optional()}),use:[V4,n6],metadata:{openapi:{operationId:"setActiveOrganization",description:"Set the active organization",responses:{"200":{description:"Success",content:{"application/json":{schema:{type:"object",description:"The organization",$ref:"#/components/schemas/Organization"}}}}}}}},async(W)=>{let X=p6(W.context,J),G=W.context.session,Y=W.body.organizationId,$=W.body.organizationSlug;if(Y===null){if(!G.session.activeOrganizationId)return W.json(null);return await k6(W,{session:await X.setActiveOrganization(G.session.token,null,W),user:G.user}),W.json(null)}if(!Y&&!$){let w=G.session.activeOrganizationId;if(!w)return W.json(null);Y=w}if($&&!Y){let w=await X.findOrganizationBySlug($);if(!w)throw new V("BAD_REQUEST",{message:k.ORGANIZATION_NOT_FOUND});Y=w.id}if(!Y)throw new V("BAD_REQUEST",{message:k.ORGANIZATION_NOT_FOUND});if(!await X.checkMembership({userId:G.user.id,organizationId:Y}))throw await X.setActiveOrganization(G.session.token,null,W),new V("FORBIDDEN",{message:k.USER_IS_NOT_A_MEMBER_OF_THE_ORGANIZATION});let K=await X.findOrganizationById(Y);if(!K)throw new V("BAD_REQUEST",{message:k.ORGANIZATION_NOT_FOUND});return await k6(W,{session:await X.setActiveOrganization(G.session.token,K.id,W),user:G.user}),W.json(K)})},xn=(J)=>y("/organization/list",{method:"GET",use:[n6,V4],metadata:{openapi:{description:"List all organizations",responses:{"200":{description:"Success",content:{"application/json":{schema:{type:"array",items:{$ref:"#/components/schemas/Organization"}}}}}}}}},async(W)=>{let X=await p6(W.context,J).listOrganizations(W.context.session.user.id);return W.json(X)}),vC=j(),un=O4(["pending","accepted","rejected","canceled"]).default("pending"),vA6=c({id:j().default(l4),name:j(),slug:j(),logo:j().nullish().optional(),metadata:T6(j(),jW()).or(j().transform((J)=>JSON.parse(J))).optional(),createdAt:X0()}),jA6=c({id:j().default(l4),organizationId:j(),userId:o6.string(),role:vC,createdAt:X0().default(()=>new Date)}),SA6=c({id:j().default(l4),organizationId:j(),email:j(),role:vC,status:un,teamId:j().nullish(),inviterId:j(),expiresAt:X0(),createdAt:X0().default(()=>new Date)}),cn=c({id:j().default(l4),name:j().min(1),organizationId:j(),createdAt:X0(),updatedAt:X0().optional()}),_A6=c({id:j().default(l4),teamId:j(),userId:j(),createdAt:X0().default(()=>new Date)}),TA6=c({id:j().default(l4),organizationId:j(),role:j(),permission:T6(j(),P6(j())),createdAt:X0().default(()=>new Date),updatedAt:X0().optional()}),LC=["admin","member","owner"],qA6=Y0([O4(LC),P6(O4(LC))]),ln=(J)=>{let W=AW({fields:J?.schema?.team?.additionalFields??{},isClientSide:!0}),X=c({name:j().meta({description:'The name of the team. Eg: "my-team"'}),organizationId:j().meta({description:'The organization ID which the team will be created in. Defaults to the active organization. Eg: "organization-id"'}).optional()});return y("/organization/create-team",{method:"POST",body:c({...X.shape,...W.shape}),use:[n6],metadata:{$Infer:{body:{}},openapi:{description:"Create a new team within an organization",responses:{"200":{description:"Team created successfully",content:{"application/json":{schema:{type:"object",properties:{id:{type:"string",description:"Unique identifier of the created team"},name:{type:"string",description:"Name of the team"},organizationId:{type:"string",description:"ID of the organization the team belongs to"},createdAt:{type:"string",format:"date-time",description:"Timestamp when the team was created"},updatedAt:{type:"string",format:"date-time",description:"Timestamp when the team was last updated"}},required:["id","name","organizationId","createdAt","updatedAt"]}}}}}}}},async(G)=>{let Y=await j6(G),$=G.body.organizationId||Y?.session.activeOrganizationId;if(!Y&&(G.request||G.headers))throw new V("UNAUTHORIZED");if(!$)throw new V("BAD_REQUEST",{message:k.NO_ACTIVE_ORGANIZATION});let K=p6(G.context,J);if(Y){let D=await K.findMemberByOrgId({userId:Y.user.id,organizationId:$});if(!D)throw new V("FORBIDDEN",{message:k.YOU_ARE_NOT_ALLOWED_TO_INVITE_USERS_TO_THIS_ORGANIZATION});if(!await H0({role:D.role,options:G.context.orgOptions,permissions:{team:["create"]},organizationId:$},G))throw new V("FORBIDDEN",{message:k.YOU_ARE_NOT_ALLOWED_TO_CREATE_TEAMS_IN_THIS_ORGANIZATION})}let w=await K.listTeams($),H=typeof G.context.orgOptions.teams?.maximumTeams==="function"?await G.context.orgOptions.teams?.maximumTeams({organizationId:$,session:Y},G):G.context.orgOptions.teams?.maximumTeams;if(H?w.length>=H:!1)throw new V("BAD_REQUEST",{message:k.YOU_HAVE_REACHED_THE_MAXIMUM_NUMBER_OF_TEAMS});let{name:z,organizationId:N,...U}=G.body,F=await K.findOrganizationById($);if(!F)throw new V("BAD_REQUEST",{message:k.ORGANIZATION_NOT_FOUND});let Z={name:z,organizationId:$,createdAt:new Date,updatedAt:new Date,...U};if(J?.organizationHooks?.beforeCreateTeam){let D=await J?.organizationHooks.beforeCreateTeam({team:{name:z,organizationId:$,...U},user:Y?.user,organization:F});if(D&&typeof D==="object"&&"data"in D)Z={...Z,...D.data}}let L=await K.createTeam(Z);if(J?.organizationHooks?.afterCreateTeam)await J?.organizationHooks.afterCreateTeam({team:L,user:Y?.user,organization:F});return G.json(L)})},pn=(J)=>y("/organization/remove-team",{method:"POST",body:c({teamId:j().meta({description:'The team ID of the team to remove. Eg: "team-id"'}),organizationId:j().meta({description:`The organization ID which the team falls under. If not provided, it will default to the user's active organization. Eg: "organization-id"`}).optional()}),use:[n6],metadata:{openapi:{description:"Remove a team from an organization",responses:{"200":{description:"Team removed successfully",content:{"application/json":{schema:{type:"object",properties:{message:{type:"string",description:"Confirmation message indicating successful removal",enum:["Team removed successfully."]}},required:["message"]}}}}}}}},async(W)=>{let X=await j6(W),G=W.body.organizationId||X?.session.activeOrganizationId;if(!G)return W.json(null,{status:400,body:{message:k.NO_ACTIVE_ORGANIZATION}});if(!X&&(W.request||W.headers))throw new V("UNAUTHORIZED");let Y=p6(W.context,J);if(X){let w=await Y.findMemberByOrgId({userId:X.user.id,organizationId:G});if(!w||X.session?.activeTeamId===W.body.teamId)throw new V("FORBIDDEN",{message:k.YOU_ARE_NOT_ALLOWED_TO_DELETE_THIS_TEAM});if(!await H0({role:w.role,options:W.context.orgOptions,permissions:{team:["delete"]},organizationId:G},W))throw new V("FORBIDDEN",{message:k.YOU_ARE_NOT_ALLOWED_TO_DELETE_TEAMS_IN_THIS_ORGANIZATION})}let $=await Y.findTeamById({teamId:W.body.teamId,organizationId:G});if(!$||$.organizationId!==G)throw new V("BAD_REQUEST",{message:k.TEAM_NOT_FOUND});if(!W.context.orgOptions.teams?.allowRemovingAllTeams){if((await Y.listTeams(G)).length<=1)throw new V("BAD_REQUEST",{message:k.UNABLE_TO_REMOVE_LAST_TEAM})}let K=await Y.findOrganizationById(G);if(!K)throw new V("BAD_REQUEST",{message:k.ORGANIZATION_NOT_FOUND});if(J?.organizationHooks?.beforeDeleteTeam)await J?.organizationHooks.beforeDeleteTeam({team:$,user:X?.user,organization:K});if(await Y.deleteTeam($.id),J?.organizationHooks?.afterDeleteTeam)await J?.organizationHooks.afterDeleteTeam({team:$,user:X?.user,organization:K});return W.json({message:"Team removed successfully."})}),dn=(J)=>{let W=AW({fields:J?.schema?.team?.additionalFields??{},isClientSide:!0});return y("/organization/update-team",{method:"POST",body:c({teamId:j().meta({description:'The ID of the team to be updated. Eg: "team-id"'}),data:c({...cn.shape,...W.shape}).partial()}),requireHeaders:!0,use:[n6,V4],metadata:{$Infer:{body:{}},openapi:{description:"Update an existing team in an organization",responses:{"200":{description:"Team updated successfully",content:{"application/json":{schema:{type:"object",properties:{id:{type:"string",description:"Unique identifier of the updated team"},name:{type:"string",description:"Updated name of the team"},organizationId:{type:"string",description:"ID of the organization the team belongs to"},createdAt:{type:"string",format:"date-time",description:"Timestamp when the team was created"},updatedAt:{type:"string",format:"date-time",description:"Timestamp when the team was last updated"}},required:["id","name","organizationId","createdAt","updatedAt"]}}}}}}}},async(X)=>{let G=X.context.session,Y=X.body.data.organizationId||G.session.activeOrganizationId;if(!Y)return X.json(null,{status:400,body:{message:k.NO_ACTIVE_ORGANIZATION}});let $=p6(X.context,J),K=await $.findMemberByOrgId({userId:G.user.id,organizationId:Y});if(!K)throw new V("FORBIDDEN",{message:k.YOU_ARE_NOT_ALLOWED_TO_UPDATE_THIS_TEAM});if(!await H0({role:K.role,options:X.context.orgOptions,permissions:{team:["update"]},organizationId:Y},X))throw new V("FORBIDDEN",{message:k.YOU_ARE_NOT_ALLOWED_TO_UPDATE_THIS_TEAM});let w=await $.findTeamById({teamId:X.body.teamId,organizationId:Y});if(!w||w.organizationId!==Y)throw new V("BAD_REQUEST",{message:k.TEAM_NOT_FOUND});let{name:H,organizationId:z,...N}=X.body.data,U=await $.findOrganizationById(Y);if(!U)throw new V("BAD_REQUEST",{message:k.ORGANIZATION_NOT_FOUND});let F={name:H,...N};if(J?.organizationHooks?.beforeUpdateTeam){let L=await J?.organizationHooks.beforeUpdateTeam({team:w,updates:F,user:G.user,organization:U});if(L&&typeof L==="object"&&"data"in L){let D=L.data,O=await $.updateTeam(w.id,D);if(J?.organizationHooks?.afterUpdateTeam)await J?.organizationHooks.afterUpdateTeam({team:O,user:G.user,organization:U});return X.json(O)}}let Z=await $.updateTeam(w.id,F);if(J?.organizationHooks?.afterUpdateTeam)await J?.organizationHooks.afterUpdateTeam({team:Z,user:G.user,organization:U});return X.json(Z)})},rn=(J)=>y("/organization/list-teams",{method:"GET",query:E0(c({organizationId:j().meta({description:'The organization ID which the teams are under to list. Defaults to the users active organization. Eg: "organziation-id"'}).optional()})),requireHeaders:!0,metadata:{openapi:{description:"List all teams in an organization",responses:{"200":{description:"Teams retrieved successfully",content:{"application/json":{schema:{type:"array",items:{type:"object",properties:{id:{type:"string",description:"Unique identifier of the team"},name:{type:"string",description:"Name of the team"},organizationId:{type:"string",description:"ID of the organization the team belongs to"},createdAt:{type:"string",format:"date-time",description:"Timestamp when the team was created"},updatedAt:{type:"string",format:"date-time",description:"Timestamp when the team was last updated"}},required:["id","name","organizationId","createdAt","updatedAt"]},description:"Array of team objects within the organization"}}}}}}},use:[n6,V4]},async(W)=>{let X=W.context.session,G=W.query?.organizationId||X?.session.activeOrganizationId;if(!G)throw W.error("BAD_REQUEST",{message:k.NO_ACTIVE_ORGANIZATION});let Y=p6(W.context,J);if(!await Y.findMemberByOrgId({userId:X.user.id,organizationId:G||""}))throw new V("FORBIDDEN",{message:k.YOU_ARE_NOT_ALLOWED_TO_ACCESS_THIS_ORGANIZATION});let $=await Y.listTeams(G);return W.json($)}),nn=(J)=>y("/organization/set-active-team",{method:"POST",body:c({teamId:j().meta({description:"The team id to set as active. It can be null to unset the active team"}).nullable().optional()}),use:[V4,n6],metadata:{openapi:{description:"Set the active team",responses:{"200":{description:"Success",content:{"application/json":{schema:{type:"object",description:"The team",$ref:"#/components/schemas/Team"}}}}}}}},async(W)=>{let X=p6(W.context,W.context.orgOptions),G=W.context.session;if(W.body.teamId===null){if(!G.session.activeTeamId)return W.json(null);return await k6(W,{session:await X.setActiveTeam(G.session.token,null,W),user:G.user}),W.json(null)}let Y;if(!W.body.teamId){let K=G.session.activeTeamId;if(!K)return W.json(null);else Y=K}else Y=W.body.teamId;let $=await X.findTeamById({teamId:Y});if(!$)throw new V("BAD_REQUEST",{message:k.TEAM_NOT_FOUND});if(!await X.findTeamMember({teamId:Y,userId:G.user.id}))throw new V("FORBIDDEN",{message:k.USER_IS_NOT_A_MEMBER_OF_THE_TEAM});return await k6(W,{session:await X.setActiveTeam(G.session.token,$.id,W),user:G.user}),W.json($)}),an=(J)=>y("/organization/list-user-teams",{method:"GET",metadata:{openapi:{description:"List all teams that the current user is a part of.",responses:{"200":{description:"Teams retrieved successfully",content:{"application/json":{schema:{type:"array",items:{type:"object",description:"The team",$ref:"#/components/schemas/Team"},description:"Array of team objects within the organization"}}}}}}},use:[n6,V4]},async(W)=>{let X=W.context.session,G=await p6(W.context,W.context.orgOptions).listTeamsByUser({userId:X.user.id});return W.json(G)}),tn=(J)=>y("/organization/list-team-members",{method:"GET",query:E0(c({teamId:j().optional().meta({description:"The team whose members we should return. If this is not provided the members of the current active team get returned."})})),metadata:{openapi:{description:"List the members of the given team.",responses:{"200":{description:"Teams retrieved successfully",content:{"application/json":{schema:{type:"array",items:{type:"object",description:"The team member",properties:{id:{type:"string",description:"Unique identifier of the team member"},userId:{type:"string",description:"The user ID of the team member"},teamId:{type:"string",description:"The team ID of the team the team member is in"},createdAt:{type:"string",format:"date-time",description:"Timestamp when the team member was created"}},required:["id","userId","teamId","createdAt"]},description:"Array of team member objects within the team"}}}}}}},use:[n6,V4]},async(W)=>{let X=W.context.session,G=p6(W.context,W.context.orgOptions),Y=W.query?.teamId||X?.session.activeTeamId;if(!Y)throw new V("BAD_REQUEST",{message:k.YOU_DO_NOT_HAVE_AN_ACTIVE_TEAM});if(!await G.findTeamMember({userId:X.user.id,teamId:Y}))throw new V("BAD_REQUEST",{message:k.USER_IS_NOT_A_MEMBER_OF_THE_TEAM});let $=await G.listTeamMembers({teamId:Y});return W.json($)}),on=(J)=>y("/organization/add-team-member",{method:"POST",body:c({teamId:j().meta({description:"The team the user should be a member of."}),userId:o6.string().meta({description:"The user Id which represents the user to be added as a member."})}),metadata:{openapi:{description:"The newly created member",responses:{"200":{description:"Team member created successfully",content:{"application/json":{schema:{type:"object",description:"The team member",properties:{id:{type:"string",description:"Unique identifier of the team member"},userId:{type:"string",description:"The user ID of the team member"},teamId:{type:"string",description:"The team ID of the team the team member is in"},createdAt:{type:"string",format:"date-time",description:"Timestamp when the team member was created"}},required:["id","userId","teamId","createdAt"]}}}}}}},use:[n6,V4]},async(W)=>{let X=W.context.session,G=p6(W.context,W.context.orgOptions);if(!X.session.activeOrganizationId)throw new V("BAD_REQUEST",{message:k.NO_ACTIVE_ORGANIZATION});let Y=await G.findMemberByOrgId({userId:X.user.id,organizationId:X.session.activeOrganizationId});if(!Y)throw new V("BAD_REQUEST",{message:k.USER_IS_NOT_A_MEMBER_OF_THE_ORGANIZATION});if(!await H0({role:Y.role,options:W.context.orgOptions,permissions:{member:["update"]},organizationId:X.session.activeOrganizationId},W))throw new V("FORBIDDEN",{message:k.YOU_ARE_NOT_ALLOWED_TO_CREATE_A_NEW_TEAM_MEMBER});if(!await G.findMemberByOrgId({userId:W.body.userId,organizationId:X.session.activeOrganizationId}))throw new V("BAD_REQUEST",{message:k.USER_IS_NOT_A_MEMBER_OF_THE_ORGANIZATION});let $=await G.findTeamById({teamId:W.body.teamId,organizationId:X.session.activeOrganizationId});if(!$)throw new V("BAD_REQUEST",{message:k.TEAM_NOT_FOUND});let K=await G.findOrganizationById(X.session.activeOrganizationId);if(!K)throw new V("BAD_REQUEST",{message:k.ORGANIZATION_NOT_FOUND});let w=await W.context.internalAdapter.findUserById(W.body.userId);if(!w)throw new V("BAD_REQUEST",{message:"User not found"});if(J?.organizationHooks?.beforeAddTeamMember){let z=await J?.organizationHooks.beforeAddTeamMember({teamMember:{teamId:W.body.teamId,userId:W.body.userId},team:$,user:w,organization:K});if(z&&typeof z==="object"&&"data"in z);}let H=await G.findOrCreateTeamMember({teamId:W.body.teamId,userId:W.body.userId});if(J?.organizationHooks?.afterAddTeamMember)await J?.organizationHooks.afterAddTeamMember({teamMember:H,team:$,user:w,organization:K});return W.json(H)}),sn=(J)=>y("/organization/remove-team-member",{method:"POST",body:c({teamId:j().meta({description:"The team the user should be removed from."}),userId:o6.string().meta({description:"The user which should be removed from the team."})}),metadata:{openapi:{description:"Remove a member from a team",responses:{"200":{description:"Team member removed successfully",content:{"application/json":{schema:{type:"object",properties:{message:{type:"string",description:"Confirmation message indicating successful removal",enum:["Team member removed successfully."]}},required:["message"]}}}}}}},use:[n6,V4]},async(W)=>{let X=W.context.session,G=p6(W.context,W.context.orgOptions);if(!X.session.activeOrganizationId)throw new V("BAD_REQUEST",{message:k.NO_ACTIVE_ORGANIZATION});let Y=await G.findMemberByOrgId({userId:X.user.id,organizationId:X.session.activeOrganizationId});if(!Y)throw new V("BAD_REQUEST",{message:k.USER_IS_NOT_A_MEMBER_OF_THE_ORGANIZATION});if(!await H0({role:Y.role,options:W.context.orgOptions,permissions:{member:["delete"]},organizationId:X.session.activeOrganizationId},W))throw new V("FORBIDDEN",{message:k.YOU_ARE_NOT_ALLOWED_TO_REMOVE_A_TEAM_MEMBER});if(!await G.findMemberByOrgId({userId:W.body.userId,organizationId:X.session.activeOrganizationId}))throw new V("BAD_REQUEST",{message:k.USER_IS_NOT_A_MEMBER_OF_THE_ORGANIZATION});let $=await G.findTeamById({teamId:W.body.teamId,organizationId:X.session.activeOrganizationId});if(!$)throw new V("BAD_REQUEST",{message:k.TEAM_NOT_FOUND});let K=await G.findOrganizationById(X.session.activeOrganizationId);if(!K)throw new V("BAD_REQUEST",{message:k.ORGANIZATION_NOT_FOUND});let w=await W.context.internalAdapter.findUserById(W.body.userId);if(!w)throw new V("BAD_REQUEST",{message:"User not found"});let H=await G.findTeamMember({teamId:W.body.teamId,userId:W.body.userId});if(!H)throw new V("BAD_REQUEST",{message:k.USER_IS_NOT_A_MEMBER_OF_THE_TEAM});if(J?.organizationHooks?.beforeRemoveTeamMember)await J?.organizationHooks.beforeRemoveTeamMember({teamMember:H,team:$,user:w,organization:K});if(await G.removeTeamMember({teamId:W.body.teamId,userId:W.body.userId}),J?.organizationHooks?.afterRemoveTeamMember)await J?.organizationHooks.afterRemoveTeamMember({teamMember:H,team:$,user:w,organization:K});return W.json({message:"Team member removed successfully."})});function _5(J){return Array.isArray(J)?J.join(","):J}var en=(J)=>{return y("/organization/has-permission",{method:"POST",requireHeaders:!0,body:c({organizationId:j().optional()}).and(Y0([c({permission:T6(j(),P6(j())),permissions:FX()}),c({permission:FX(),permissions:T6(j(),P6(j()))})])),use:[V4],metadata:{$Infer:{body:{}},openapi:{description:"Check if the user has permission",requestBody:{content:{"application/json":{schema:{type:"object",properties:{permission:{type:"object",description:"The permission to check",deprecated:!0},permissions:{type:"object",description:"The permission to check"}},required:["permissions"]}}}},responses:{"200":{description:"Success",content:{"application/json":{schema:{type:"object",properties:{error:{type:"string"},success:{type:"boolean"}},required:["success"]}}}}}}}},async(W)=>{let X=W.body.organizationId||W.context.session.session.activeOrganizationId;if(!X)throw new V("BAD_REQUEST",{message:k.NO_ACTIVE_ORGANIZATION});let G=await p6(W.context,J).findMemberByOrgId({userId:W.context.session.user.id,organizationId:X});if(!G)throw new V("UNAUTHORIZED",{message:k.USER_IS_NOT_A_MEMBER_OF_THE_ORGANIZATION});let Y=await H0({role:G.role,options:J||{},permissions:W.body.permissions??W.body.permission,organizationId:X},W);return W.json({error:null,success:Y})})};function EO(J){let W={createOrganization:kn(J),updateOrganization:gn(J),deleteOrganization:mn(J),setActiveOrganization:yn(J),getFullOrganization:fn(J),listOrganizations:xn(J),createInvitation:Pn(J),cancelInvitation:Sn(J),acceptInvitation:vn(J),getInvitation:_n(J),rejectInvitation:jn(J),listInvitations:Tn(J),getActiveMember:In(J),checkOrganizationSlug:hn(J),addMember:Bn(J),removeMember:An(J),updateMemberRole:En(J),leaveOrganization:Rn(J),listUserInvitations:qn(J),listMembers:Cn(J),getActiveMemberRole:bn(J)},X=J?.teams?.enabled,G={createTeam:ln(J),listOrganizationTeams:rn(J),removeTeam:pn(J),updateTeam:dn(J),setActiveTeam:nn(J),listUserTeams:an(J),listTeamMembers:tn(J),addTeamMember:on(J),removeTeamMember:sn(J)};if(X)W={...W,...G};let Y={createOrgRole:Ln(J),deleteOrgRole:Vn(J),listOrgRoles:Dn(J),getOrgRole:Mn(J),updateOrgRole:On(J)};if(J?.dynamicAccessControl?.enabled)W={...W,...Y};let $={...P3,...J?.roles},K=X?{team:{modelName:J?.schema?.team?.modelName,fields:{name:{type:"string",required:!0,fieldName:J?.schema?.team?.fields?.name},organizationId:{type:"string",required:!0,references:{model:"organization",field:"id"},fieldName:J?.schema?.team?.fields?.organizationId,index:!0},createdAt:{type:"date",required:!0,fieldName:J?.schema?.team?.fields?.createdAt},updatedAt:{type:"date",required:!1,fieldName:J?.schema?.team?.fields?.updatedAt,onUpdate:()=>new Date},...J?.schema?.team?.additionalFields||{}}},teamMember:{modelName:J?.schema?.teamMember?.modelName,fields:{teamId:{type:"string",required:!0,references:{model:"team",field:"id"},fieldName:J?.schema?.teamMember?.fields?.teamId,index:!0},userId:{type:"string",required:!0,references:{model:"user",field:"id"},fieldName:J?.schema?.teamMember?.fields?.userId,index:!0},createdAt:{type:"date",required:!1,fieldName:J?.schema?.teamMember?.fields?.createdAt}}}}:{},w=J?.dynamicAccessControl?.enabled?{organizationRole:{fields:{organizationId:{type:"string",required:!0,references:{model:"organization",field:"id"},fieldName:J?.schema?.organizationRole?.fields?.organizationId,index:!0},role:{type:"string",required:!0,fieldName:J?.schema?.organizationRole?.fields?.role,index:!0},permission:{type:"string",required:!0,fieldName:J?.schema?.organizationRole?.fields?.permission},createdAt:{type:"date",required:!0,defaultValue:()=>new Date,fieldName:J?.schema?.organizationRole?.fields?.createdAt},updatedAt:{type:"date",required:!1,fieldName:J?.schema?.organizationRole?.fields?.updatedAt,onUpdate:()=>new Date},...J?.schema?.organizationRole?.additionalFields||{}},modelName:J?.schema?.organizationRole?.modelName}}:{},H={organization:{modelName:J?.schema?.organization?.modelName,fields:{name:{type:"string",required:!0,sortable:!0,fieldName:J?.schema?.organization?.fields?.name},slug:{type:"string",required:!0,unique:!0,sortable:!0,fieldName:J?.schema?.organization?.fields?.slug},logo:{type:"string",required:!1,fieldName:J?.schema?.organization?.fields?.logo},createdAt:{type:"date",required:!0,fieldName:J?.schema?.organization?.fields?.createdAt},metadata:{type:"string",required:!1,fieldName:J?.schema?.organization?.fields?.metadata},...J?.schema?.organization?.additionalFields||{}}},...w,...K,member:{modelName:J?.schema?.member?.modelName,fields:{organizationId:{type:"string",required:!0,references:{model:"organization",field:"id"},fieldName:J?.schema?.member?.fields?.organizationId,index:!0},userId:{type:"string",required:!0,fieldName:J?.schema?.member?.fields?.userId,references:{model:"user",field:"id"},index:!0},role:{type:"string",required:!0,sortable:!0,defaultValue:"member",fieldName:J?.schema?.member?.fields?.role},createdAt:{type:"date",required:!0,fieldName:J?.schema?.member?.fields?.createdAt},...J?.schema?.member?.additionalFields||{}}},invitation:{modelName:J?.schema?.invitation?.modelName,fields:{organizationId:{type:"string",required:!0,references:{model:"organization",field:"id"},fieldName:J?.schema?.invitation?.fields?.organizationId,index:!0},email:{type:"string",required:!0,sortable:!0,fieldName:J?.schema?.invitation?.fields?.email,index:!0},role:{type:"string",required:!1,sortable:!0,fieldName:J?.schema?.invitation?.fields?.role},...X?{teamId:{type:"string",required:!1,sortable:!0,fieldName:J?.schema?.invitation?.fields?.teamId}}:{},status:{type:"string",required:!0,sortable:!0,defaultValue:"pending",fieldName:J?.schema?.invitation?.fields?.status},expiresAt:{type:"date",required:!0,fieldName:J?.schema?.invitation?.fields?.expiresAt},createdAt:{type:"date",required:!0,fieldName:J?.schema?.invitation?.fields?.createdAt,defaultValue:()=>new Date},inviterId:{type:"string",references:{model:"user",field:"id"},fieldName:J?.schema?.invitation?.fields?.inviterId,required:!0},...J?.schema?.invitation?.additionalFields||{}}}};return{id:"organization",endpoints:{...Qn(W,{orgOptions:J||{},roles:$,getSession:async(z)=>{return await j6(z)}}),hasPermission:en(J)},schema:{...H,session:{fields:{activeOrganizationId:{type:"string",required:!1,fieldName:J?.schema?.session?.fields?.activeOrganizationId},...X?{activeTeamId:{type:"string",required:!1,fieldName:J?.schema?.session?.fields?.activeTeamId}}:{}}}},$Infer:{Organization:{},Invitation:{},Member:{},Team:X?{}:{},TeamMember:X?{}:{},ActiveOrganization:{}},$ERROR_CODES:k,options:J}}J0();m4();W0();var gA6=d6({INVALID_PHONE_NUMBER:"Invalid phone number",PHONE_NUMBER_EXIST:"Phone number already exists",PHONE_NUMBER_NOT_EXIST:"phone number isn't registered",INVALID_PHONE_NUMBER_OR_PASSWORD:"Invalid phone number or password",UNEXPECTED_ERROR:"Unexpected error",OTP_NOT_FOUND:"OTP not found",OTP_EXPIRED:"OTP expired",INVALID_OTP:"Invalid OTP",PHONE_NUMBER_NOT_VERIFIED:"Phone number not verified",PHONE_NUMBER_CANNOT_BE_UPDATED:"Phone number cannot be updated",SEND_OTP_NOT_IMPLEMENTED:"sendOTP not implemented",TOO_MANY_ATTEMPTS:"Too many attempts"});J0();I8();m4();W0();QW();f0();Gw();f0();tX();var Ji=d6({OTP_NOT_ENABLED:"OTP not enabled",OTP_HAS_EXPIRED:"OTP has expired",TOTP_NOT_ENABLED:"TOTP not enabled",TWO_FACTOR_NOT_ENABLED:"Two factor isn't enabled",BACKUP_CODES_NOT_ENABLED:"Backup codes aren't enabled",INVALID_BACKUP_CODE:"Invalid backup code",INVALID_CODE:"Invalid code",TOO_MANY_ATTEMPTS_REQUEST_NEW_CODE:"Too many attempts. Please request a new code.",INVALID_TWO_FACTOR_COOKIE:"Invalid two factor cookie"});m4();W0();var Wi=d6({INVALID_USERNAME_OR_PASSWORD:"Invalid username or password",EMAIL_NOT_VERIFIED:"Email not verified",UNEXPECTED_ERROR:"Unexpected error",USERNAME_IS_ALREADY_TAKEN:"Username is already taken. Please try another.",USERNAME_TOO_SHORT:"Username is too short",USERNAME_TOO_LONG:"Username is too long",INVALID_USERNAME:"Username is invalid",INVALID_DISPLAY_USERNAME:"Display username is invalid"});NJ();import{EventEmitter as Xi}from"events";var Yi=class{config;worker;connection;connectionMutex=new Gi;mitt;constructor(J){this.config=J}async init(){this.worker=this.config?.worker??new Worker(new URL("./worker",import.meta.url),{type:"module"}),this.mitt=new Xi,this.worker.onmessage=({data:[J,W,X]})=>{this.mitt?.emit(J,W,X)},this.worker.postMessage([0,this.config?.url,this.config?.cacheStatment]),await new Promise((J,W)=>{this.mitt?.once(0,(X,G)=>G?W(G):J())}),this.connection=new $i(this.worker,this.mitt),await this.config?.onCreateConnection?.(this.connection)}async acquireConnection(){return await this.connectionMutex.lock(),this.connection}async beginTransaction(J){await J.executeQuery(Y4.raw("begin"))}async commitTransaction(J){await J.executeQuery(Y4.raw("commit"))}async rollbackTransaction(J){await J.executeQuery(Y4.raw("rollback"))}async releaseConnection(){this.connectionMutex.unlock()}async destroy(){if(!this.worker)return;return this.worker.postMessage([2]),new Promise((J,W)=>{this.mitt?.once(2,(X,G)=>{if(G)W(G);else this.worker?.terminate(),this.mitt?.removeAllListeners(),this.mitt=void 0,J()})})}},Gi=class{promise;resolve;async lock(){while(this.promise)await this.promise;this.promise=new Promise((J)=>{this.resolve=J})}unlock(){let J=this.resolve;this.promise=void 0,this.resolve=void 0,J?.()}},$i=class{constructor(J,W){this.worker=J,this.mitt=W}streamQuery(){throw Error("Bun:sqlite-worker driver doesn't support streaming")}async executeQuery(J){let{parameters:W,sql:X,query:G}=J,Y=B6.is(G);return this.worker.postMessage([1,Y,X,W]),new Promise(($,K)=>{if(!this.mitt)K(Error("kysely instance has been destroyed"));this.mitt.once(1,(w,H)=>!H&&w?$(w):K(H))})}},C3=class{config;constructor(J){this.config=J}createDriver(){return new Yi(this.config)}createQueryCompiler(){return new g9}createAdapter(){return new f9}createIntrospector(J){return new m9(J)}};import Ki from"path";function wi(){let J=process.env.DATABASE_URL||`file:${Ki.join(process.cwd(),"data/mesh.db")}`;return console.log(`[Auth] Initializing Better Auth with database: ${J} at ${process.cwd()}`),J}function Hi(){let J=TX(M3),W=J.newRole(mG.statements),X=J.newRole(mG.statements),G=J.newRole(mG.statements);return FO({baseURL:process.env.BASE_URL||"http://localhost:3000",database:new C3({url:wi()}),emailAndPassword:{enabled:!0},plugins:[EO({ac:J,creatorRole:"owner",allowUserToCreateOrganization:!0,roles:{user:W,admin:X,owner:G}}),BO({loginPage:"/auth/sign-in"}),qO(),ZO(),AO()]})}async function jC(){console.log("\uD83D\uDD10 Running Better Auth migrations...");try{let J=Hi(),{toBeAdded:W,toBeCreated:X,runMigrations:G}=await a$(J.options);if(!W.length&&!X.length){console.log("\u2705 Better Auth schema is up to date (no migrations needed)");return}console.log("\uD83D\uDCCB Better Auth will create/update the following tables:");for(let Y of[...X,...W])console.log(`   - ${Y.table}`);await G(),console.log("\u2705 Better Auth migrations completed successfully")}catch(J){console.warn("\u26A0\uFE0F  Better Auth migration failed (tables may be created on first use):",J)}}NJ();import{existsSync as Js,mkdirSync as Ws}from"fs";var p8=d3(KP(),1),WC6=p8.default.Client,uk=p8.default.Pool,XC6=p8.default.Connection,YC6=p8.default.types,GC6=p8.default.Query,$C6=p8.default.DatabaseError,KC6=p8.default.escapeIdentifier,wC6=p8.default.escapeLiteral,HC6=p8.default.Result,zC6=p8.default.TypeOverrides,NC6=p8.default.defaults;import*as ck from"path";class lk{type="postgres";createDialect(J){return new vY({pool:new uk({connectionString:J.connectionString,max:J.options?.maxConnections||10})})}createInstance(J){let W=this.createDialect(J);return new D8({dialect:W})}}class pk{type="sqlite";createDialect(J){let W=this.extractPath(J.connectionString);return W=this.ensureDirectory(W),new C3({url:W||":memory:"})}createInstance(J){let W=this.createDialect(J),X=new D8({dialect:W});return this.postCreateSetup?.(X,J),X}postCreateSetup(J,W){let X=this.extractPath(W.connectionString);if(X!==":memory:"&&W.options?.enableWAL!==!1)X6`PRAGMA journal_mode = WAL;`.execute(J).catch(()=>{});if(X!==":memory:"){let G=W.options?.busyTimeout||5000;X6`PRAGMA busy_timeout = ${G};`.execute(J).catch(()=>{})}}extractPath(J){if(J===":memory:")return":memory:";if(J.includes("://"))return new URL(J).pathname;return J}ensureDirectory(J){if(J!==":memory:"&&J!=="/"&&J){let W=J.substring(0,J.lastIndexOf("/"));if(W&&W!=="/"&&!Js(W))try{Ws(W,{recursive:!0})}catch{return console.warn(`Failed to create directory ${W}, using in-memory database`),":memory:"}}return J}}var Xs={sqlite:new pk,postgres:new lk};function Ys(){return process.env.DATABASE_URL||`file:${ck.join(process.cwd(),"data/mesh.db")}`}function Gs(J){let W=J||"file:./data/mesh.db";if(W===":memory:")return{type:"sqlite",connectionString:":memory:"};W=W.startsWith("/")?`file://${W}`:W;let X=new URL(W),G=X.protocol.replace(":","");switch(G){case"postgres":case"postgresql":return{type:"postgres",connectionString:W};case"sqlite":case"file":return{type:"sqlite",connectionString:X.pathname};default:throw Error(`Unsupported database protocol: ${G}. Supported protocols: postgres://, postgresql://, sqlite://, file://`)}}function $s(J){return Xs[J]}function Ks(J){let W=Gs(J);return $s(W.type).createInstance(W)}var NP=null;function dk(){if(!NP)NP=Ks(Ys());return NP}async function nk(){console.log("\uD83D\uDCCA Getting database instance...");let J=dk();console.log("\u2705 Database instance obtained"),console.log("\uD83D\uDD27 Creating migrator...");let W=rk.join(process.cwd(),"migrations");console.log(`\uD83D\uDCC2 Looking for migrations in: ${W}`);let X=new zF({db:J,provider:{getMigrations:()=>Promise.resolve(gj)}});console.log("\u2705 Migrator created"),console.log("\u25B6\uFE0F  Running migrations...");let{error:G,results:Y}=await X.migrateToLatest();if(console.log("\u2705 Migrations executed"),Y?.forEach(($)=>{if($.status==="Success")console.log(`\u2705 Migration "${$.migrationName}" executed successfully`);else if($.status==="Error")console.error(`\u274C Failed to execute migration "${$.migrationName}"`)}),G)throw console.error("Failed to migrate"),console.error(G),await J.destroy().catch(()=>{}),G;console.log("\uD83C\uDF89 All Kysely migrations completed successfully"),await jC(),console.log("\uD83D\uDD12 Closing database connection..."),await J.destroy().catch(($)=>{console.warn("Warning: Error closing database:",$)})}console.log("\uD83D\uDE80 Migration script starting...");console.log("\uD83D\uDCE6 Imported migrateToLatest function");(async()=>{console.log("\uD83C\uDFC3 Executing migration function...");try{await nk(),console.log("\u2705 All migrations completed. Exiting..."),process.exit(0)}catch(J){console.error("\u274C Migration failed:",J),process.exit(1)}})();
